parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"iDvB":[function(require,module,exports) {
var global = arguments[3];
var e,d=arguments[3];e="undefined"!=typeof window?window:void 0!==d?d:"undefined"!=typeof self?self:{},module.exports=e;
},{}],"qzqc":[function(require,module,exports) {

},{}],"rTOJ":[function(require,module,exports) {
var global = arguments[3];
var e,d=arguments[3],n=void 0!==d?d:"undefined"!=typeof window?window:{},o=require("min-document");"undefined"!=typeof document?e=document:(e=n["__GLOBAL_DOCUMENT_CACHE@4"])||(e=n["__GLOBAL_DOCUMENT_CACHE@4"]=o),module.exports=e;
},{"min-document":"qzqc"}],"XNMF":[function(require,module,exports) {
function r(r,t){var e,n=null;try{e=JSON.parse(r,t)}catch(u){n=u}return[n,e]}module.exports=r;
},{}],"VHLu":[function(require,module,exports) {
function e(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var n,p=String(e);return(n=r[p.toLowerCase()])?n:(n=o[p.toLowerCase()])||(1===p.length?p.charCodeAt(0):void 0)}e.isEventKey=function(e,t){if(e&&"object"==typeof e){var a=e.which||e.keyCode||e.charCode;if(null==a)return!1;if("string"==typeof t){var n;if(n=r[t.toLowerCase()])return n===a;if(n=o[t.toLowerCase()])return n===a}else if("number"==typeof t)return t===a;return!1}},exports=module.exports=e;var r=exports.code=exports.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=exports.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(t=97;t<123;t++)r[String.fromCharCode(t)]=t-32;for(var t=48;t<58;t++)r[t-48]=t;for(t=1;t<13;t++)r["f"+t]=t+111;for(t=0;t<10;t++)r["numpad "+t]=t+96;var a=exports.names=exports.title={};for(t in r)a[r[t]]=t;for(var n in o)r[n]=o[n];
},{}],"JlQ7":[function(require,module,exports) {
module.exports=t;var o=Object.prototype.toString;function t(t){if(!t)return!1;var n=o.call(t);return"[object Function]"===n||"function"==typeof t&&"[object RegExp]"!==n||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}
},{}],"i5YP":[function(require,module,exports) {
var r=function(r){return r.replace(/^\s+|\s+$/g,"")},e=function(r){return"[object Array]"===Object.prototype.toString.call(r)};module.exports=function(t){if(!t)return{};for(var n={},o=r(t).split("\n"),i=0;i<o.length;i++){var c=o[i],u=c.indexOf(":"),l=r(c.slice(0,u)).toLowerCase(),s=r(c.slice(u+1));void 0===n[l]?n[l]=s:e(n[l])?n[l].push(s):n[l]=[n[l],s]}return n};
},{}],"V1jg":[function(require,module,exports) {
module.exports=o;var r=Object.prototype.hasOwnProperty;function o(){for(var o={},t=0;t<arguments.length;t++){var e=arguments[t];for(var a in e)r.call(e,a)&&(o[a]=e[a])}return o}
},{}],"aGZ0":[function(require,module,exports) {
"use strict";var e=require("global/window"),t=require("is-function"),r=require("parse-headers"),n=require("xtend");function o(e,t){for(var r=0;r<e.length;r++)t(e[r])}function s(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function u(e,r,o){var s=e;return t(r)?(o=r,"string"==typeof e&&(s={uri:e})):s=n(r,{uri:e}),s.callback=o,s}function a(e,t,r){return i(t=u(e,t,r))}function i(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(r,n,o){t||(t=!0,e.callback(r,n,o))};function o(){var e=void 0;if(e=l.response?l.response:l.responseText||p(l),R)try{e=JSON.parse(e)}catch(t){}return e}function u(e){return clearTimeout(f),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,X)}function i(){if(!c){var t;clearTimeout(f),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var s=X,u=null;return 0!==t?(s={body:o(),statusCode:t,method:m,headers:{},url:h,rawRequest:l},l.getAllResponseHeaders&&(s.headers=r(l.getAllResponseHeaders()))):u=new Error("Internal XMLHttpRequest Error"),n(u,s,s.body)}}var d,c,l=e.xhr||null;l||(l=e.cors||e.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var f,h=l.url=e.uri||e.url,m=l.method=e.method||"GET",w=e.body||e.data,y=l.headers=e.headers||{},q=!!e.sync,R=!1,X={body:void 0,headers:{},statusCode:0,method:m,url:h,rawRequest:l};if("json"in e&&!1!==e.json&&(R=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),w=JSON.stringify(!0===e.json?w:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(i,0)},l.onload=i,l.onerror=u,l.onprogress=function(){},l.onabort=function(){c=!0},l.ontimeout=u,l.open(m,h,!q,e.username,e.password),q||(l.withCredentials=!!e.withCredentials),!q&&e.timeout>0&&(f=setTimeout(function(){if(!c){c=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",u(e)}},e.timeout)),l.setRequestHeader)for(d in y)y.hasOwnProperty(d)&&l.setRequestHeader(d,y[d]);else if(e.headers&&!s(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(w||null),l}function p(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function d(){}module.exports=a,a.XMLHttpRequest=e.XMLHttpRequest||d,a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:e.XDomainRequest,o(["get","put","post","patch","head","delete"],function(e){a["delete"===e?"del":e]=function(t,r,n){return(r=u(t,r,n)).method=e.toUpperCase(),i(r)}});
},{"global/window":"iDvB","is-function":"JlQ7","parse-headers":"i5YP","xtend":"V1jg"}],"TjNu":[function(require,module,exports) {
var t=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function e(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function i(t){function e(t,e,i,r){return 3600*(0|t)+60*(0|e)+(0|i)+(0|r)/1e3}var i=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function r(){this.values=t(null)}function n(t,e,i,r){var n=r?t.split(r):[t];for(var o in n)if("string"==typeof n[o]){var s=n[o].split(i);if(2===s.length)e(s[0],s[1])}}function o(t,o,s){var a=t;function h(){var r=i(t);if(null===r)throw new e(e.Errors.BadTimeStamp,"Malformed timestamp: "+a);return t=t.replace(/^[^\sa-zA-Z-]+/,""),r}function l(){t=t.replace(/^\s+/,"")}if(l(),o.startTime=h(),l(),"--\x3e"!==t.substr(0,3))throw new e(e.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);t=t.substr(3),l(),o.endTime=h(),l(),function(t,e){var i=new r;n(t,function(t,e){switch(t){case"region":for(var r=s.length-1;r>=0;r--)if(s[r].id===e){i.set(t,s[r].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":var n=e.split(","),o=n[0];i.integer(t,o),i.percent(t,o)&&i.set("snapToLines",!1),i.alt(t,o,["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start","middle","end"]);break;case"position":n=e.split(","),i.percent(t,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start","middle","end"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start","middle","end","left","right"])}},/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical",""),e.line=i.get("line","auto"),e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align","middle"),e.position=i.get("position",{start:0,left:0,middle:50,end:100,right:100},e.align),e.positionAlign=i.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},e.align)}(t,o)}e.prototype=t(Error.prototype),e.prototype.constructor=e,e.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},r.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var r=0;r<i.length;++r)if(e===i[r]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var s={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},a={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={v:"title",lang:"lang"},l={rt:"ruby"};function c(t,e){function r(){if(!e)return null;var t,i=e.match(/^([^<]*)(<[^>]*>?)?/);return t=i[1]?i[1]:i[2],e=e.substr(t.length),t}function n(t){return s[t]}function o(t){for(;y=t.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)t=t.replace(y[0],n);return t}function c(t,e){return!l[e.localName]||l[e.localName]===t.localName}function u(e,i){var r=a[e];if(!r)return null;var n=t.document.createElement(r);n.localName=r;var o=h[e];return o&&i&&(n[o]=i.trim()),n}for(var f,p=t.document.createElement("div"),d=p,g=[];null!==(f=r());)if("<"!==f[0])d.appendChild(t.document.createTextNode(o(f)));else{if("/"===f[1]){g.length&&g[g.length-1]===f.substr(2).replace(">","")&&(g.pop(),d=d.parentNode);continue}var m,v=i(f.substr(1,f.length-2));if(v){m=t.document.createProcessingInstruction("timestamp",v),d.appendChild(m);continue}var y=f.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(!(m=u(y[1],y[3])))continue;if(!c(d,m))continue;y[2]&&(m.className=y[2].substr(1).replace("."," ")),g.push(y[1]),d.appendChild(m),d=m}return p}var u=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function f(t){for(var e=0;e<u.length;e++){var i=u[e];if(t>=i[0]&&t<=i[1])return!0}return!1}function p(t){var e=[],i="";if(!t||!t.childNodes)return"ltr";function r(t,e){for(var i=e.childNodes.length-1;i>=0;i--)t.push(e.childNodes[i])}function n(t){if(!t||!t.length)return null;var e=t.pop(),i=e.textContent||e.innerText;if(i){var o=i.match(/^.*(\n|\r)/);return o?(t.length=0,o[0]):i}return"ruby"===e.tagName?n(t):e.childNodes?(r(t,e),n(t)):void 0}for(r(e,t);i=n(e);)for(var o=0;o<i.length;o++)if(f(i.charCodeAt(o)))return"rtl";return"ltr"}function d(t){if("number"==typeof t.line&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,i=e.textTrackList,r=0,n=0;n<i.length&&i[n]!==e;n++)"showing"===i[n].mode&&r++;return-1*++r}function g(){}function m(t,e,i){g.call(this),this.cue=e,this.cueDiv=c(t,e.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=t.document.createElement("div"),r={direction:p(this.cueDiv),writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===e.align?"center":e.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var n=0;switch(e.positionAlign){case"start":n=e.position;break;case"middle":n=e.position-e.size/2;break;case"end":n=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(n,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function v(t){var e,i,r,n;if(t.div){i=t.div.offsetHeight,r=t.div.offsetWidth,n=t.div.offsetTop;var o=(o=t.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();t=t.div.getBoundingClientRect(),e=o?Math.max(o[0]&&o[0].height||0,t.height/o.length):0}this.left=t.left,this.right=t.right,this.top=t.top||n,this.height=t.height||i,this.bottom=t.bottom||n+(t.height||i),this.width=t.width||r,this.lineHeight=void 0!==e?e:t.lineHeight}function y(t,e,i,r){var n=new v(e),o=e.cue,s=d(o),a=[];if(o.snapToLines){var h;switch(o.vertical){case"":a=["+y","-y"],h="height";break;case"rl":a=["+x","-x"],h="width";break;case"lr":a=["-x","+x"],h="width"}var l=n.lineHeight,c=l*Math.round(s),u=i[h]+l,f=a[0];Math.abs(c)>u&&(c=c<0?-1:1,c*=Math.ceil(u/l)*l),s<0&&(c+=""===o.vertical?i.height:i.width,a=a.reverse()),n.move(f,c)}else{var p=n.lineHeight/i.height*100;switch(o.lineAlign){case"middle":s-=p/2;break;case"end":s-=p}switch(o.vertical){case"":e.applyStyles({top:e.formatStyle(s,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(s,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(s,"%")})}a=["+y","-x","+x","-y"],n=new v(e)}var g=function(t,e){for(var n,o=new v(t),s=1,a=0;a<e.length;a++){for(;t.overlapsOppositeAxis(i,e[a])||t.within(i)&&t.overlapsAny(r);)t.move(e[a]);if(t.within(i))return t;var h=t.intersectPercentage(i);s>h&&(n=new v(t),s=h),t=new v(o)}return n||o}(n,a);e.move(g.toCSSCompatValues(i))}function b(){}g.prototype.applyStyles=function(t,e){for(var i in e=e||this.div,t)t.hasOwnProperty(i)&&(e.style[i]=t[i])},g.prototype.formatStyle=function(t,e){return 0===t?0:t+e},m.prototype=t(g.prototype),m.prototype.constructor=m,v.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},v.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},v.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},v.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},v.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},v.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},v.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},v.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,i=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,r=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||r,height:t.height||e,bottom:t.bottom||r+(t.height||e),width:t.width||i}},b.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},b.convertCueToDOMTree=function(t,e){return t&&e?c(t,e):null};var w=.05,T="sans-serif",x="1.5%";b.processCues=function(t,e,i){if(!t||!e||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var r=t.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=x,i.appendChild(r),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}(e)){var n=[],o=v.getSimpleBoxPosition(r),s={font:Math.round(o.height*w*100)/100+"px "+T};!function(){for(var i,a,h=0;h<e.length;h++)a=e[h],i=new m(t,a,s),r.appendChild(i.div),y(t,i,o,n),a.displayState=i.div,n.push(v.getSimpleBoxPosition(i))}()}else for(var a=0;a<e.length;a++)r.appendChild(e[a].displayState)},b.Parser=function(t,e,i){i||(i=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]},b.Parser.prototype={reportOrThrowError:function(t){if(!(t instanceof e))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){var s=this;function a(){for(var t=s.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var i=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,s.buffer=t.substr(e),i}function h(t){t.match(/X-TIMESTAMP-MAP/)?n(t,function(t,e){switch(t){case"X-TIMESTAMP-MAP":o=e,a=new r,n(o,function(t,e){switch(t){case"MPEGT":a.integer(t+"S",e);break;case"LOCA":a.set(t+"L",i(e))}},/[^\d]:/,/,/),s.ontimestampmap&&s.ontimestampmap({MPEGTS:a.get("MPEGTS"),LOCAL:a.get("LOCAL")})}var o,a},/=/):n(t,function(t,e){switch(t){case"Region":!function(t){var e=new r;if(n(t,function(t,i){switch(t){case"id":e.set(t,i);break;case"width":e.percent(t,i);break;case"lines":e.integer(t,i);break;case"regionanchor":case"viewportanchor":var n=i.split(",");if(2!==n.length)break;var o=new r;if(o.percent("x",n[0]),o.percent("y",n[1]),!o.has("x")||!o.has("y"))break;e.set(t+"X",o.get("x")),e.set(t+"Y",o.get("y"));break;case"scroll":e.alt(t,i,["up"])}},/=/,/\s/),e.has("id")){var i=new(s.vttjs.VTTRegion||s.window.VTTRegion);i.width=e.get("width",100),i.lines=e.get("lines",3),i.regionAnchorX=e.get("regionanchorX",0),i.regionAnchorY=e.get("regionanchorY",100),i.viewportAnchorX=e.get("viewportanchorX",0),i.viewportAnchorY=e.get("viewportanchorY",100),i.scroll=e.get("scroll",""),s.onregion&&s.onregion(i),s.regionList.push({id:e.get("id"),region:i})}}(e)}},/:/)}t&&(s.buffer+=s.decoder.decode(t,{stream:!0}));try{var l;if("INITIAL"===s.state){if(!/\r\n|\n/.test(s.buffer))return this;var c=(l=a()).match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new e(e.Errors.BadSignature);s.state="HEADER"}for(var u=!1;s.buffer;){if(!/\r\n|\n/.test(s.buffer))return this;switch(u?u=!1:l=a(),s.state){case"HEADER":/:/.test(l)?h(l):l||(s.state="ID");continue;case"NOTE":l||(s.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){s.state="NOTE";break}if(!l)continue;if(s.cue=new(s.vttjs.VTTCue||s.window.VTTCue)(0,0,""),s.state="CUE",-1===l.indexOf("--\x3e")){s.cue.id=l;continue}case"CUE":try{o(l,s.cue,s.regionList)}catch(p){s.reportOrThrowError(p),s.cue=null,s.state="BADCUE";continue}s.state="CUETEXT";continue;case"CUETEXT":var f=-1!==l.indexOf("--\x3e");if(!l||f&&(u=!0)){s.oncue&&s.oncue(s.cue),s.cue=null,s.state="ID";continue}s.cue.text&&(s.cue.text+="\n"),s.cue.text+=l;continue;case"BADCUE":l||(s.state="ID");continue}}}catch(p){s.reportOrThrowError(p),"CUETEXT"===s.state&&s.cue&&s.oncue&&s.oncue(s.cue),s.cue=null,s.state="INITIAL"===s.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new e(e.Errors.BadSignature)}catch(t){this.reportOrThrowError(t)}return this.onflush&&this.onflush(),this}},module.exports=b;
},{}],"cpc6":[function(require,module,exports) {
var e="auto",t={"":1,lr:1,rl:1},n={start:1,middle:1,end:1,left:1,right:1};function r(e){return"string"==typeof e&&(!!t[e.toLowerCase()]&&e.toLowerCase())}function i(e){return"string"==typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}function s(t,n,s){this.hasBeenReset=!1;var o="",u=!1,a=t,f=n,l=s,c=null,h="",g=!0,m="auto",w="start",b=50,d="middle",p=50,v="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return o},set:function(e){o=""+e}},pauseOnExit:{enumerable:!0,get:function(){return u},set:function(e){u=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");f=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(e){l=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(e){var t=r(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return m},set:function(t){if("number"!=typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return w},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return d},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");d=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");p=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}}}),this.displayState=void 0}s.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},module.exports=s;
},{}],"Q8lq":[function(require,module,exports) {
var e={"":!0,up:!0};function n(n){return"string"==typeof n&&(!!e[n.toLowerCase()]&&n.toLowerCase())}function r(e){return"number"==typeof e&&e>=0&&e<=100}function t(){var e=100,t=3,o=0,i=100,u=0,f=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(n){if(!r(n))throw new Error("Width must be between 0 and 100.");e=n}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!r(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!r(e))throw new Error("RegionAnchorY must be between 0 and 100.");o=e}},viewportAnchorY:{enumerable:!0,get:function(){return f},set:function(e){if(!r(e))throw new Error("ViewportAnchorY must be between 0 and 100.");f=e}},viewportAnchorX:{enumerable:!0,get:function(){return u},set:function(e){if(!r(e))throw new Error("ViewportAnchorX must be between 0 and 100.");u=e}},scroll:{enumerable:!0,get:function(){return c},set:function(e){var r=n(e);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");c=r}}})}module.exports=t;
},{}],"LvFr":[function(require,module,exports) {
var e=require("global/window"),T=module.exports={WebVTT:require("./vtt.js"),VTTCue:require("./vttcue.js"),VTTRegion:require("./vttregion.js")};e.vttjs=T,e.WebVTT=T.WebVTT;var i=T.VTTCue,r=T.VTTRegion,u=e.VTTCue,V=e.VTTRegion;T.shim=function(){e.VTTCue=i,e.VTTRegion=r},T.restore=function(){e.VTTCue=u,e.VTTRegion=V},e.VTTCue||T.shim();
},{"global/window":"iDvB","./vtt.js":"TjNu","./vttcue.js":"cpc6","./vttregion.js":"Q8lq"}],"FkUI":[function(require,module,exports) {
var define;
var r;!function(t){var e=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,a=/^([^\/?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,p={buildAbsoluteURL:function(r,t,e){if(e=e||{},r=r.trim(),!(t=t.trim())){if(!e.alwaysNormalize)return r;var o=p.parseURL(r);if(!o)throw new Error("Error trying to parse base URL.");return o.path=p.normalizePath(o.path),p.buildURLFromParts(o)}var n=p.parseURL(t);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return e.alwaysNormalize?(n.path=p.normalizePath(n.path),p.buildURLFromParts(n)):t;var i=p.parseURL(r);if(!i)throw new Error("Error trying to parse base URL.");if(!i.netLoc&&i.path&&"/"!==i.path[0]){var s=a.exec(i.path);i.netLoc=s[1],i.path=s[2]}i.netLoc&&!i.path&&(i.path="/");var h={scheme:i.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(h.netLoc=i.netLoc,"/"!==n.path[0]))if(n.path){var l=i.path,u=l.substring(0,l.lastIndexOf("/")+1)+n.path;h.path=p.normalizePath(u)}else h.path=i.path,n.params||(h.params=i.params,n.query||(h.query=i.query));return null===h.path&&(h.path=e.alwaysNormalize?p.normalizePath(n.path):n.path),p.buildURLFromParts(h)},parseURL:function(r){var t=e.exec(r);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(r){for(r=r.split("").reverse().join("").replace(o,"");r.length!==(r=r.replace(n,"")).length;);return r.split("").reverse().join("")},buildURLFromParts:function(r){return r.scheme+r.netLoc+r.path+r.params+r.query+r.fragment}};"object"==typeof exports&&"object"==typeof module?module.exports=p:"function"==typeof r&&r.amd?r([],function(){return p}):"object"==typeof exports?exports.URLToolkit=p:t.URLToolkit=p}(this);
},{}],"wb88":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Parser=exports.ParseStream=exports.LineStream=void 0;var t=e(require("global/window"));function e(t){return t&&t.__esModule?t:{default:t}}function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var s=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t].splice(i,1),i>-1},e.trigger=function(t){var e,i,a,r=this.listeners[t];if(r)if(2===arguments.length)for(i=r.length,e=0;e<i;++e)r[e].call(this,arguments[1]);else for(a=Array.prototype.slice.call(arguments,1),i=r.length,e=0;e<i;++e)r[e].apply(this,a)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",function(e){t.push(e)})},t}(),n=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return a(e,t),e.prototype.push=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(s);exports.LineStream=n;var u=function(){return new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')},o=function(t){for(var e,i=t.split(u()),a={},r=i.length;r--;)""!==i[r]&&((e=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),a[e[0]]=e[1]);return a},g=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}a(e,t);var i=e.prototype;return i.push=function(t){var e,i,a=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce(function(e,i){var a=i(t);return a===t?e:e.concat([a])},[t]).forEach(function(t){for(var r=0;r<a.customParsers.length;r++)if(a.customParsers[r].call(a,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))a.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return i={type:"tag",tagType:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void a.trigger("data",i);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void a.trigger("data",i);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"totalduration"},e[1]&&(i.duration=parseInt(e[1],10)),void a.trigger("data",i);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"version"},e[1]&&(i.version=parseInt(e[1],10)),void a.trigger("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void a.trigger("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void a.trigger("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return i={type:"tag",tagType:"playlist-type"},e[1]&&(i.playlistType=e[1]),void a.trigger("data",i);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"byterange"},e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),void a.trigger("data",i);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return i={type:"tag",tagType:"allow-cache"},e[1]&&(i.allowed=!/NO/.test(e[1])),void a.trigger("data",i);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"map"},e[1]){var s=o(e[1]);if(s.URI&&(i.uri=s.URI),s.BYTERANGE){var n=s.BYTERANGE.split("@"),u=n[0],g=n[1];i.byterange={},u&&(i.byterange.length=parseInt(u,10)),g&&(i.byterange.offset=parseInt(g,10))}}a.trigger("data",i)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"stream-inf"},e[1]){if(i.attributes=o(e[1]),i.attributes.RESOLUTION){var d=i.attributes.RESOLUTION.split("x"),c={};d[0]&&(c.width=parseInt(d[0],10)),d[1]&&(c.height=parseInt(d[1],10)),i.attributes.RESOLUTION=c}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}a.trigger("data",i)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return i={type:"tag",tagType:"media"},e[1]&&(i.attributes=o(e[1])),void a.trigger("data",i);if(e=/^#EXT-X-ENDLIST/.exec(t))a.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))a.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return i={type:"tag",tagType:"program-date-time"},e[1]&&(i.dateTimeString=e[1],i.dateTimeObject=new Date(e[1])),void a.trigger("data",i);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return i={type:"tag",tagType:"key"},e[1]&&(i.attributes=o(e[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void a.trigger("data",i);if(e=/^#EXT-X-START:?(.*)$/.exec(t))return i={type:"tag",tagType:"start"},e[1]&&(i.attributes=o(e[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void a.trigger("data",i);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out-cont"},e[1]?i.data=e[1]:i.data="",void a.trigger("data",i);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out"},e[1]?i.data=e[1]:i.data="",void a.trigger("data",i);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-in"},e[1]?i.data=e[1]:i.data="",void a.trigger("data",i);a.trigger("data",{type:"tag",data:t.slice(4)})}}}else a.trigger("data",{type:"comment",text:t.slice(1)})}):this.trigger("data",{type:"uri",uri:t}))},i.addParser=function(t){var e=this,i=t.expression,a=t.customType,r=t.dataParser,s=t.segment;"function"!=typeof r&&(r=function(t){return t}),this.customParsers.push(function(t){if(i.exec(t))return e.trigger("data",{type:"custom",data:r(t),customType:a,segment:s}),!0})},i.addTagMapper=function(t){var e=t.expression,i=t.map;this.tagMappers.push(function(t){return e.test(t)?i(t):t})},e}(s);function d(e){for(var i=t.default.atob(e||""),a=new Uint8Array(i.length),r=0;r<i.length;r++)a[r]=i.charCodeAt(r);return a}exports.ParseStream=g;var c=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new n,e.parseStream=new g,e.lineStream.pipe(e.parseStream);var a,s,u=r(e),o=[],c={},f={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},p=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(t){var e,r;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&(c.byterange=e,e.length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&(c.byterange=e,e.offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(c.duration=t.duration),0===t.duration&&(c.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:d(t.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(s.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else s=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,p=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){a={},t.uri&&(a.uri=t.uri),t.byterange&&(a.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||f,t.attributes?(c.attributes||(c.attributes={}),i(c.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||f,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var i=this.manifest.mediaGroups[t.attributes.TYPE];i[t.attributes["GROUP-ID"]]=i[t.attributes["GROUP-ID"]]||{},e=i[t.attributes["GROUP-ID"]],(r={default:/yes/i.test(t.attributes.DEFAULT)}).default?r.autoselect=!0:r.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(r.language=t.attributes.LANGUAGE),t.attributes.URI&&(r.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(r.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(r.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(r.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=r}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){p+=1,c.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),c.dateTimeString=t.dateTimeString,c.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){c.cueOut=t.data},"cue-out-cont":function(){c.cueOutCont=t.data},"cue-in":function(){c.cueIn=t.data}}[t.tagType]||function(){}).call(u)},uri:function(){c.uri=t.uri,o.push(c),!this.manifest.targetDuration||"duration"in c||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),c.duration=this.manifest.targetDuration),s&&(c.key=s),c.timeline=p,a&&(c.map=a),c={}},comment:function(){},custom:function(){t.segment?(c.custom=c.custom||{},c.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(u)}),e}a(e,t);var s=e.prototype;return s.push=function(t){this.lineStream.push(t)},s.end=function(){this.lineStream.push("\n")},s.addParser=function(t){this.parseStream.addParser(t)},s.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(s);exports.Parser=c;
},{"global/window":"iDvB"}],"NDkH":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseUTCTiming=exports.parse=exports.VERSION=void 0;var e=r(require("global/window"));function r(t){return t&&t.__esModule?t:{default:t}}var n="0.8.1",i=function(t){return!!t&&"object"==typeof t},a=function t(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.reduce(function(e,r){return Object.keys(r).forEach(function(n){Array.isArray(e[n])&&Array.isArray(r[n])?e[n]=e[n].concat(r[n]):i(e[n])&&i(r[n])?e[n]=t(e[n],r[n]):e[n]=r[n]}),e},{})},u=function(t){return Object.keys(t).map(function(e){return t[e]})},o=function(t,e){for(var r=[],n=t;n<e;n++)r.push(n);return r},s=function(t){return t.reduce(function(t,e){return t.concat(e)},[])},c=function(t){if(!t.length)return[];for(var e=[],r=0;r<t.length;r++)e.push(t[r]);return e},d=function(t,e){return t.reduce(function(t,r,n){return r[e]&&t.push(n),t},[])},l={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},m="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function f(t,e){return t(e={exports:{}},e.exports),e.exports}var p=f(function(t,e){var r,n,i,a,u;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,u={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var i=u.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=u.normalizePath(i.path),u.buildURLFromParts(i)}var a=u.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=u.normalizePath(a.path),u.buildURLFromParts(a)):e;var o=u.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var s=n.exec(o.path);o.netLoc=s[1],o.path=s[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var d=o.path,l=d.substring(0,d.lastIndexOf("/")+1)+a.path;c.path=u.normalizePath(l)}else c.path=o.path,a.params||(c.params=o.params,a.query||(c.query=o.query));return null===c.path&&(c.path=r.alwaysNormalize?u.normalizePath(a.path):a.path),u.buildURLFromParts(c)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=u}),v=function(t,r){return/^[a-z]+:/i.test(r)?r:(/\/\//i.test(t)||(t=p.buildAbsoluteURL(e.default.location.href,t)),p.buildAbsoluteURL(t,r))},h=function(t){var e=t.baseUrl,r=void 0===e?"":e,n=t.source,i=void 0===n?"":n,a=t.range,u=void 0===a?"":a,o=t.indexRange,s=void 0===o?"":o,c={uri:i,resolvedUri:v(r||"",i)};if(u||s){var d=(u||s).split("-"),l=parseInt(d[0],10),m=parseInt(d[1],10);c.byterange={length:m-l+1,offset:l}}return c},g=function(t){var e=t.offset+t.length-1;return t.offset+"-"+e},b={static:function(t){var e=t.duration,r=t.timescale,n=void 0===r?1:r,i=t.sourceDuration;return{start:0,end:Math.ceil(i/(e/n))}},dynamic:function(t){var e=t.NOW,r=t.clientOffset,n=t.availabilityStartTime,i=t.timescale,a=void 0===i?1:i,u=t.duration,o=t.start,s=void 0===o?0:o,c=t.minimumUpdatePeriod,d=void 0===c?0:c,l=t.timeShiftBufferDepth,m=void 0===l?1/0:l,f=(e+r)/1e3,p=n+s,v=f+d-p,h=Math.ceil(v*a/u),g=Math.floor((f-p-m)*a/u),b=Math.floor((f-p)*a/u);return{start:Math.max(0,g),end:Math.min(h,b)}}},I=function(t){return function(e,r){var n=t.duration,i=t.timescale,a=void 0===i?1:i,u=t.periodIndex,o=t.startNumber;return{number:(void 0===o?1:o)+e,duration:n/a,timeline:u,time:r*n}}},U=function(t){var e=t.type,r=void 0===e?"static":e,n=t.duration,i=t.timescale,a=void 0===i?1:i,u=t.sourceDuration,s=b[r](t),c=s.start,d=s.end,l=o(c,d).map(I(t));if("static"===r){var m=l.length-1;l[m].duration=u-n/a*m}return l},E=function(t){var e=t.baseUrl,r=t.initialization,n=void 0===r?{}:r,i=t.sourceDuration,a=t.timescale,u=void 0===a?1:a,o=t.indexRange,s=void 0===o?"":o,c=t.duration;if(!e)throw new Error(l.NO_BASE_URL);var d=h({baseUrl:e,source:n.sourceURL,range:n.range}),m=h({baseUrl:e,source:e,indexRange:s});if(m.map=d,c){var f=U(t);f.length&&(m.duration=f[0].duration,m.timeline=f[0].timeline)}else i&&(m.duration=i/u,m.timeline=0);return m.number=0,[m]},D=function(t,e,r){for(var n=t.sidx.map?t.sidx.map:null,i=t.sidx.duration,a=t.timeline||0,u=t.sidx.byterange,o=u.offset+u.length,s=e.timescale,c=e.references.filter(function(t){return 1!==t.referenceType}),d=[],l=o+e.firstOffset,m=0;m<c.length;m++){var f=e.references[m],p=f.referencedSize,v=f.subsegmentDuration,h=E({baseUrl:r,timescale:s,timeline:a,periodIndex:a,duration:v,sourceDuration:i,indexRange:l+"-"+(l+p-1)})[0];n&&(h.map=n),d.push(h),l+=p}return t.segments=d,t},N=function(t){return u(t.reduce(function(t,e){var r,n=e.attributes.id+(e.attributes.lang||"");t[n]?(e.segments[0]&&(e.segments[0].discontinuity=!0),(r=t[n].segments).push.apply(r,e.segments),e.attributes.contentProtection&&(t[n].attributes.contentProtection=e.attributes.contentProtection)):t[n]=e;return t},{})).map(function(t){return t.discontinuityStarts=d(t.segments,"discontinuity"),t})},S=function(t,e){if(void 0===e&&(e={}),!Object.keys(e).length)return t;for(var r in t){var n=t[r];if(n.sidx){var i=n.sidx.uri+"-"+g(n.sidx.byterange),a=e[i]&&e[i].sidx;n.sidx&&a&&D(n,a,n.sidx.resolvedUri)}}return t},y=function(t){var e,r=t.attributes,n=t.segments,i=t.sidx,a={attributes:(e={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1};return r.contentProtection&&(a.contentProtection=r.contentProtection),i&&(a.sidx=i),a},T=function(t){var e,r=t.attributes,n=t.segments;return void 0===n&&(n=[{uri:r.baseUrl,timeline:r.periodIndex,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration),{attributes:(e={NAME:r.id,BANDWIDTH:r.bandwidth},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:r.baseUrl||"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1}},L=function(t,e){var r;void 0===e&&(e={});var n=t.reduce(function(t,n){var i=n.attributes.role&&n.attributes.role.value||"",a=n.attributes.lang||"",u="main";if(a){var o=i?" ("+i+")":"";u=""+n.attributes.lang+o}return t[u]&&t[u].playlists[0].attributes.BANDWIDTH>n.attributes.bandwidth?t:(t[u]={language:a,autoselect:!0,default:"main"===i,playlists:S([y(n)],e),uri:""},void 0===r&&"main"===i&&((r=n).default=!0),t)},{});r||(n[Object.keys(n)[0]].default=!0);return n},R=function(t,e){return void 0===e&&(e={}),t.reduce(function(t,r){var n=r.attributes.lang||"text";return t[n]?t:(t[n]={language:n,default:!1,autoselect:!1,playlists:S([T(r)],e),uri:""},t)},{})},x=function(t){var e,r=t.attributes,n=t.segments,i=t.sidx,a={attributes:(e={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1};return r.contentProtection&&(a.contentProtection=r.contentProtection),i&&(a.sidx=i),a},M=function(t,e){var r;if(void 0===e&&(e={}),!t.length)return{};var n=t[0].attributes,i=n.sourceDuration,a=n.minimumUpdatePeriod,u=void 0===a?0:a,o=N(t.filter(function(t){var e=t.attributes;return"video/mp4"===e.mimeType||"video"===e.contentType})).map(x),s=N(t.filter(function(t){var e=t.attributes;return"audio/mp4"===e.mimeType||"audio"===e.contentType})),c=t.filter(function(t){var e=t.attributes;return"text/vtt"===e.mimeType||"text"===e.contentType}),d={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:i,playlists:S(o,e),minimumUpdatePeriod:1e3*u};return s.length&&(d.mediaGroups.AUDIO.audio=L(s,e)),c.length&&(d.mediaGroups.SUBTITLES.subs=R(c,e)),d},P=function(t,e,r){var n=t.NOW,i=t.clientOffset,a=t.availabilityStartTime,u=t.timescale,o=void 0===u?1:u,s=t.start,c=void 0===s?0:s,d=t.minimumUpdatePeriod,l=(n+i)/1e3+(void 0===d?0:d)-(a+c);return Math.ceil((l*o-e)/r)},A=function(t,e){for(var r=t.type,n=void 0===r?"static":r,i=t.minimumUpdatePeriod,a=void 0===i?0:i,u=t.media,o=void 0===u?"":u,s=t.sourceDuration,c=t.timescale,d=void 0===c?1:c,l=t.startNumber,m=void 0===l?1:l,f=t.periodIndex,p=[],v=-1,h=0;h<e.length;h++){var g=e[h],b=g.d,I=g.r||0,U=g.t||0;v<0&&(v=U),U&&U>v&&(v=U);var E=void 0;if(I<0){var D=h+1;E=D===e.length?"dynamic"===n&&a>0&&o.indexOf("$Number$")>0?P(t,v,b):(s*d-v)/b:(e[D].t-v)/b}else E=I+1;for(var N=m+p.length+E,S=m+p.length;S<N;)p.push({number:S,duration:b/d,time:v,timeline:f}),v+=b,S++}return p},O=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,_=function(t){return function(e,r,n,i){if("$$"===e)return"$";if(void 0===t[r])return e;var a=""+t[r];return"RepresentationID"===r?a:(i=n?parseInt(i,10):1,a.length>=i?a:""+new Array(i-a.length+1).join("0")+a)}},w=function(t,e){return t.replace(O,_(e))},F=function(t,e){return t.duration||e?t.duration?U(t):A(t,e):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]},C=function(t,e){var r={RepresentationID:t.id,Bandwidth:t.bandwidth||0},n=t.initialization,i=void 0===n?{sourceURL:"",range:""}:n,a=h({baseUrl:t.baseUrl,source:w(i.sourceURL,r),range:i.range});return F(t,e).map(function(e){r.Number=e.number,r.Time=e.time;var n=w(t.media||"",r);return{uri:n,timeline:e.timeline,duration:e.duration,resolvedUri:v(t.baseUrl||"",n),map:a,number:e.number}})},z=function(t,e){var r=t.baseUrl,n=t.initialization,i=void 0===n?{}:n,a=h({baseUrl:r,source:i.sourceURL,range:i.range}),u=h({baseUrl:r,source:e.media,range:e.mediaRange});return u.map=a,u},B=function(t,e){var r=t.duration,n=t.segmentUrls,i=void 0===n?[]:n;if(!r&&!e||r&&e)throw new Error(l.SEGMENT_TIME_UNSPECIFIED);var a,u=i.map(function(e){return z(t,e)});return r&&(a=U(t)),e&&(a=A(t,e)),a.map(function(t,e){if(u[e]){var r=u[e];return r.timeline=t.timeline,r.duration=t.duration,r.number=t.number,r}}).filter(function(t){return t})},G=function(t){var e,r,n=t.attributes,i=t.segmentInfo;i.template?(r=C,e=a(n,i.template)):i.base?(r=E,e=a(n,i.base)):i.list&&(r=B,e=a(n,i.list));var u={attributes:n};if(!r)return u;var o=r(e,i.timeline);if(e.duration){var s=e,c=s.duration,d=s.timescale,l=void 0===d?1:d;e.duration=c/l}else o.length?e.duration=o.reduce(function(t,e){return Math.max(t,Math.ceil(e.duration))},0):e.duration=0;return u.attributes=e,u.segments=o,i.base&&e.indexRange&&(u.sidx=o[0],u.segments=[]),u},H=function(t){return t.map(G)},j=function(t,e){return c(t.childNodes).filter(function(t){return t.tagName===e})},q=function(t){return t.textContent.trim()},k=function(t){var e=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!e)return 0;var r=e.slice(1),n=r[0],i=r[1],a=r[2],u=r[3],o=r[4],s=r[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(i||0)+86400*parseFloat(a||0)+3600*parseFloat(u||0)+60*parseFloat(o||0)+parseFloat(s||0)},$=function(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)},V={mediaPresentationDuration:function(t){return k(t)},availabilityStartTime:function(t){return $(t)/1e3},minimumUpdatePeriod:function(t){return k(t)},timeShiftBufferDepth:function(t){return k(t)},start:function(t){return k(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},duration:function(t){var e=parseInt(t,10);return isNaN(e)?k(t):e},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},W=function(t){return t&&t.attributes?c(t.attributes).reduce(function(t,e){var r=V[e.name]||V.DEFAULT;return t[e.name]=r(e.value),t},{}):{}};function Y(t){for(var r=e.default.atob(t),n=new Uint8Array(r.length),i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}var X={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Z=function(t,e){return e.length?s(t.map(function(t){return e.map(function(e){return v(t,q(e))})})):t},J=function(t){var e=j(t,"SegmentTemplate")[0],r=j(t,"SegmentList")[0],n=r&&j(r,"SegmentURL").map(function(t){return a({tag:"SegmentURL"},W(t))}),i=j(t,"SegmentBase")[0],u=r||e,o=u&&j(u,"SegmentTimeline")[0],s=r||i||e,c=s&&j(s,"Initialization")[0],d=e&&W(e);d&&c?d.initialization=c&&W(c):d&&d.initialization&&(d.initialization={sourceURL:d.initialization});var l={template:d,timeline:o&&j(o,"S").map(function(t){return W(t)}),list:r&&a(W(r),{segmentUrls:n,initialization:W(c)}),base:i&&a(W(i),{initialization:W(c)})};return Object.keys(l).forEach(function(t){l[t]||delete l[t]}),l},K=function(t,e,r){return function(n){var i=j(n,"BaseURL"),u=Z(e,i),o=a(t,W(n)),s=J(n);return u.map(function(t){return{segmentInfo:a(r,s),attributes:a(o,{baseUrl:t})}})}},Q=function(t){return t.reduce(function(t,e){var r=W(e),n=X[r.schemeIdUri];if(n){t[n]={attributes:r};var i=j(e,"cenc:pssh")[0];if(i){var a=q(i),u=a&&Y(a);t[n].pssh=u}}return t},{})},tt=function(t,e,r){return function(n){var i=W(n),u=Z(e,j(n,"BaseURL")),o=j(n,"Role")[0],c={role:W(o)},d=a(t,i,c),l=Q(j(n,"ContentProtection"));Object.keys(l).length&&(d=a(d,{contentProtection:l}));var m=J(n),f=j(n,"Representation"),p=a(r,m);return s(f.map(K(d,u,p)))}},et=function(t,r){return function(n,i){var u=Z(r,j(n,"BaseURL")),o=W(n),c=parseInt(o.id,10),d=e.default.isNaN(c)?i:c,l=a(t,{periodIndex:d}),m=j(n,"AdaptationSet"),f=J(n);return s(m.map(tt(l,u,f)))}},rt=function(t,e){void 0===e&&(e={});var r=e,n=r.manifestUri,i=void 0===n?"":n,a=r.NOW,u=void 0===a?Date.now():a,o=r.clientOffset,c=void 0===o?0:o,d=j(t,"Period");if(!d.length)throw new Error(l.INVALID_NUMBER_OF_PERIOD);var m=W(t),f=Z([i],j(t,"BaseURL"));return m.sourceDuration=m.mediaPresentationDuration||0,m.NOW=u,m.clientOffset=c,s(d.map(et(m,f)))},nt=function(t){if(""===t)throw new Error(l.DASH_EMPTY_MANIFEST);var r=(new e.default.DOMParser).parseFromString(t,"application/xml"),n=r&&"MPD"===r.documentElement.tagName?r.documentElement:null;if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(l.DASH_INVALID_XML);return n},it=function(t){var e=j(t,"UTCTiming")[0];if(!e)return null;var r=W(e);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT",r.value=Date.parse(r.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(l.UNSUPPORTED_UTC_TIMING_SCHEME)}return r},at=n;exports.VERSION=at;var ut=function(t,e){return void 0===e&&(e={}),M(H(rt(nt(t),e)),e.sidxMapping)};exports.parse=ut;var ot=function(t){return it(nt(t))};exports.parseUTCTiming=ot;
},{"global/window":"iDvB"}],"LulS":[function(require,module,exports) {
var n=function(n){return n>>>0},t=function(n){return("00"+n.toString(16)).slice(-2)};module.exports={toUnsigned:n,toHexString:t};
},{}],"f6c2":[function(require,module,exports) {
"use strict";var r,t,e,a,n,i,o=require("../utils/bin").toUnsigned,c=require("../utils/bin").toHexString;r=function(e,a){var n,i,c,u,d,f=[];if(!a.length)return null;for(n=0;n<e.byteLength;)i=o(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),c=t(e.subarray(n+4,n+8)),u=i>1?n+i:e.byteLength,c===a[0]&&(1===a.length?f.push(e.subarray(n+8,u)):(d=r(e.subarray(n+8,u),a.slice(1))).length&&(f=f.concat(d))),n=u;return f},t=function(r){var t="";return t+=String.fromCharCode(r[0]),t+=String.fromCharCode(r[1]),t+=String.fromCharCode(r[2]),t+=String.fromCharCode(r[3])},e=function(t){return r(t,["moov","trak"]).reduce(function(t,e){var a,n,i,c,u;return(a=r(e,["tkhd"])[0])?(n=a[0],c=o(a[i=0===n?12:20]<<24|a[i+1]<<16|a[i+2]<<8|a[i+3]),(u=r(e,["mdia","mdhd"])[0])?(i=0===(n=u[0])?12:20,t[c]=o(u[i]<<24|u[i+1]<<16|u[i+2]<<8|u[i+3]),t):null):null},{})},a=function(t,e){var a,n,i;return a=r(e,["moof","traf"]),n=[].concat.apply([],a.map(function(e){return r(e,["tfhd"]).map(function(a){var n,i;return n=o(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),i=t[n]||9e4,(r(e,["tfdt"]).map(function(r){var t,e;return t=r[0],e=o(r[4]<<24|r[5]<<16|r[6]<<8|r[7]),1===t&&(e*=Math.pow(2,32),e+=o(r[8]<<24|r[9]<<16|r[10]<<8|r[11])),e})[0]||1/0)/i})})),i=Math.min.apply(null,n),isFinite(i)?i:0},n=function(e){var a=r(e,["moov","trak"]),n=[];return a.forEach(function(e){var a=r(e,["mdia","hdlr"]),i=r(e,["tkhd"]);a.forEach(function(r,e){var a,o,c=t(r.subarray(8,12)),u=i[e];"vide"===c&&(o=0===(a=new DataView(u.buffer,u.byteOffset,u.byteLength)).getUint8(0)?a.getUint32(12):a.getUint32(20),n.push(o))})}),n},i=function(e){var a=r(e,["moov","trak"]),n=[];return a.forEach(function(e){var a,i,u={},d=r(e,["tkhd"])[0];d&&(i=(a=new DataView(d.buffer,d.byteOffset,d.byteLength)).getUint8(0),u.id=0===i?a.getUint32(12):a.getUint32(20));var f=r(e,["mdia","hdlr"])[0];if(f){var s=t(f.subarray(8,12));u.type="vide"===s?"video":"soun"===s?"audio":s}var v=r(e,["mdia","minf","stbl","stsd"])[0];if(v){var h=v.subarray(8);u.codec=t(h.subarray(4,8));var m,l=r(h,[u.codec])[0];l&&(/^[a-z]vc[1-9]$/i.test(u.codec)?(m=l.subarray(78),"avcC"===t(m.subarray(4,8))&&m.length>11?(u.codec+=".",u.codec+=c(m[9]),u.codec+=c(m[10]),u.codec+=c(m[11])):u.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(u.codec)&&(m=l.subarray(28),"esds"===t(m.subarray(4,8))&&m.length>20&&0!==m[19]?(u.codec+="."+c(m[19]),u.codec+="."+c(m[20]>>>2&63).replace(/^0/,"")):u.codec="mp4a.40.2"))}var b=r(e,["mdia","mdhd"])[0];if(b&&d){var g=0===i?12:20;u.timescale=o(b[g]<<24|b[g+1]<<16|b[g+2]<<8|b[g+3])}n.push(u)}),n},module.exports={findBox:r,parseType:t,timescale:e,startTime:a,videoTrackIds:n,tracks:i};
},{"../utils/bin":"LulS"}],"N5Pz":[function(require,module,exports) {
"use strict";var e,t,n=require("../mp4/probe").parseType,r=function(e){return new Date(1e3*e-20828448e5)},i=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},a=function(e){var t,n,r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=[];for(t=0;t+4<e.length;t+=n)if(n=r.getUint32(t),t+=4,n<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+e[t]&31)}return i},s={avc1:function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:n.getUint16(6),width:n.getUint16(24),height:n.getUint16(26),horizresolution:n.getUint16(28)+n.getUint16(30)/16,vertresolution:n.getUint16(32)+n.getUint16(34)/16,frameCount:n.getUint16(40),depth:n.getUint16(74),config:e(t.subarray(78,t.byteLength))}},avcC:function(e){var t,n,r,i,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},f=31&e[5];for(r=6,i=0;i<f;i++)n=a.getUint16(r),r+=2,s.sps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;for(t=e[r],r++,i=0;i<t;i++)n=a.getUint16(r),r+=2,s.pps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;return s},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={majorBrand:n(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;i<e.byteLength;)r.compatibleBrands.push(n(e.subarray(i,i+4))),i+=4;return r},dinf:function(t){return{boxes:e(t)}},dref:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:e(t.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:n(e.subarray(8,12)),name:""},r=8;for(r=24;r<e.byteLength;r++){if(0===e[r]){r++;break}t.name+=String.fromCharCode(e[r])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:a(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,a={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===a.version?(i+=4,a.creationTime=r(n.getUint32(i)),i+=8,a.modificationTime=r(n.getUint32(i)),i+=4,a.timescale=n.getUint32(i),i+=8,a.duration=n.getUint32(i)):(a.creationTime=r(n.getUint32(i)),i+=4,a.modificationTime=r(n.getUint32(i)),i+=4,a.timescale=n.getUint32(i),i+=4,a.duration=n.getUint32(i)),i+=4,t=n.getUint16(i),a.language+=String.fromCharCode(96+(t>>10)),a.language+=String.fromCharCode(96+((992&t)>>5)),a.language+=String.fromCharCode(96+(31&t)),a},mdia:function(t){return{boxes:e(t)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(t){return{boxes:e(t)}},mp4a:function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={dataReferenceIndex:n.getUint16(6),channelcount:n.getUint16(16),samplesize:n.getUint16(18),samplerate:n.getUint16(24)+n.getUint16(26)/65536};return t.byteLength>28&&(r.streamDescriptor=e(t.subarray(28))[0]),r},moof:function(t){return{boxes:e(t)}},moov:function(t){return{boxes:e(t)}},mvex:function(t){return{boxes:e(t)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=r(t.getUint32(n)),n+=8,i.modificationTime=r(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=8,i.duration=t.getUint32(n)):(i.creationTime=r(t.getUint32(n)),n+=4,i.modificationTime=r(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=4,i.duration=t.getUint32(n)),n+=4,i.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=t.getUint32(n),i},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},i=n.getUint16(22);for(t=24;i;t+=12,i--)r.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return r},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(t){return{boxes:e(t)}},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},i=n.getUint32(4);for(t=8;i;t+=4,i--)r.chunkOffsets.push(n.getUint32(t));return r},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=n.getUint32(4),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;r;t+=12,r--)i.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return i},stsd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:e(t.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)r.entries.push(n.getUint32(t));return r},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},i=n.getUint32(4);for(t=8;i;t+=8,i--)r.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return r},styp:function(e){return s.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],s=8&r.flags[2],f=16&r.flags[2],u=32&r.flags[2],o=65536&r.flags[0],g=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),a&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(r.defaultSampleDuration=n.getUint32(t),t+=4),f&&(r.defaultSampleSize=n.getUint32(t),t+=4),u&&(r.defaultSampleFlags=n.getUint32(t)),o&&(r.durationIsEmpty=!0),!i&&g&&(r.baseDataOffsetIsMoof=!0),r},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=r(t.getUint32(n)),n+=8,i.modificationTime=r(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=8,i.duration=t.getUint32(n)):(i.creationTime=r(t.getUint32(n)),n+=4,i.modificationTime=r(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=4,i.duration=t.getUint32(n)),n+=4,n+=8,i.layer=t.getUint16(n),n+=2,i.alternateGroup=t.getUint16(n),n+=2,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,i.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.height=t.getUint16(n)+t.getUint16(n+2)/16,i},traf:function(t){return{boxes:e(t)}},trak:function(t){return{boxes:e(t)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),a=1&n.flags[2],s=4&n.flags[2],f=1&n.flags[1],u=2&n.flags[1],o=4&n.flags[1],g=8&n.flags[1],b=r.getUint32(4),y=8;for(a&&(n.dataOffset=r.getInt32(y),y+=4),s&&b&&(t={flags:i(e.subarray(y,y+4))},y+=4,f&&(t.duration=r.getUint32(y),y+=4),u&&(t.size=r.getUint32(y),y+=4),g&&(t.compositionTimeOffset=r.getUint32(y),y+=4),n.samples.push(t),b--);b--;)t={},f&&(t.duration=r.getUint32(y),y+=4),u&&(t.size=r.getUint32(y),y+=4),o&&(t.flags=i(e.subarray(y,y+4)),y+=4),g&&(t.compositionTimeOffset=r.getUint32(y),y+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};e=function(e){for(var t,r,i,a,f,u=0,o=[],g=new ArrayBuffer(e.length),b=new Uint8Array(g),y=0;y<e.length;++y)b[y]=e[y];for(t=new DataView(g);u<e.byteLength;)r=t.getUint32(u),i=n(e.subarray(u+4,u+8)),a=r>1?u+r:e.byteLength,(f=(s[i]||function(e){return{data:e}})(e.subarray(u+8,a))).size=r,f.type=i,o.push(f),u=a;return o},t=function(e,n){var r;return n=n||0,r=new Array(2*n+1).join(" "),e.map(function(e,i){return r+e.type+"\n"+Object.keys(e).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(t){var n=r+"  "+t+": ",i=e[t];if(i instanceof Uint8Array||i instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return a?1===a.length?n+"<"+a.join("").slice(1)+">":n+"<\n"+a.map(function(e){return r+"  "+e}).join("\n")+"\n"+r+"  >":n+"<>"}return n+JSON.stringify(i,null,2).split("\n").map(function(e,t){return 0===t?e:r+"  "+e}).join("\n")}).join("\n")+(e.boxes?"\n"+t(e.boxes,n+1):"")}).join("\n")},module.exports={inspect:e,textify:t,parseTfdt:s.tfdt,parseHdlr:s.hdlr,parseTfhd:s.tfhd,parseTrun:s.trun,parseSidx:s.sidx};
},{"../mp4/probe":"f6c2"}],"e2oM":[function(require,module,exports) {
"use strict";var a=4,r=128,e=function(e){for(var o=0,t={payloadType:-1,payloadSize:0},n=0,l=0;o<e.byteLength&&e[o]!==r;){for(;255===e[o];)n+=255,o++;for(n+=e[o++];255===e[o];)l+=255,o++;if(l+=e[o++],!t.payload&&n===a){t.payloadType=n,t.payloadSize=l,t.payload=e.subarray(o,o+l);break}o+=l,n=0,l=0}return t},o=function(a){return 181!==a.payload[0]?null:49!=(a.payload[1]<<8|a.payload[2])?null:"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])?null:3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},t=function(a,r){var e,o,t,n,l=[];if(!(64&r[0]))return l;for(o=31&r[0],e=0;e<o;e++)n={type:3&r[(t=3*e)+2],pts:a},4&r[t+2]&&(n.ccData=r[t+3]<<8|r[t+4],l.push(n));return l},n=function(a){for(var r,e,o=a.byteLength,t=[],n=1;n<o-2;)0===a[n]&&0===a[n+1]&&3===a[n+2]?(t.push(n+2),n+=2):n++;if(0===t.length)return a;r=o-t.length,e=new Uint8Array(r);var l=0;for(n=0;n<r;l++,n++)l===t[0]&&(l++,t.shift()),e[n]=a[l];return e};module.exports={parseSei:e,parseUserData:o,parseCaptionPackets:t,discardEmulationPreventionBytes:n,USER_DATA_REGISTERED_ITU_T_T35:a};
},{}],"J7PA":[function(require,module,exports) {
"use strict";var t=function(){this.init=function(){var t={};this.on=function(i,n){t[i]||(t[i]=[]),t[i]=t[i].concat(n)},this.off=function(i,n){var e;return!!t[i]&&(e=t[i].indexOf(n),t[i]=t[i].slice(),t[i].splice(e,1),e>-1)},this.trigger=function(i){var n,e,o,r;if(n=t[i])if(2===arguments.length)for(o=n.length,e=0;e<o;++e)n[e].call(this,arguments[1]);else{for(r=[],e=arguments.length,e=1;e<arguments.length;++e)r.push(arguments[e]);for(o=n.length,e=0;e<o;++e)n[e].apply(this,r)}},this.dispose=function(){t={}}}};t.prototype.pipe=function(t){return this.on("data",function(i){t.push(i)}),this.on("done",function(i){t.flush(i)}),this.on("partialdone",function(i){t.partialFlush(i)}),this.on("endedtimeline",function(i){t.endTimeline(i)}),this.on("reset",function(i){t.reset(i)}),t},t.prototype.push=function(t){this.trigger("data",t)},t.prototype.flush=function(t){this.trigger("done",t)},t.prototype.partialFlush=function(t){this.trigger("partialdone",t)},t.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)},t.prototype.reset=function(t){this.trigger("reset",t)},module.exports=t;
},{}],"ZV7f":[function(require,module,exports) {
"use strict";var t=require("../utils/stream"),s=require("../tools/caption-packet-parser"),i=function(){i.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new r(0,0),new r(0,1),new r(1,0),new r(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("partialdone",this.trigger.bind(this,"partialdone")),t.on("done",this.trigger.bind(this,"done"))},this)};i.prototype=new t,i.prototype.push=function(t){var i,e,h;if("sei_rbsp"===t.nalUnitType&&(i=s.parseSei(t.escapedRBSP)).payloadType===s.USER_DATA_REGISTERED_ITU_T_T35&&(e=s.parseUserData(i)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));h=s.parseCaptionPackets(t.pts,e),this.captionPackets_=this.captionPackets_.concat(h),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},i.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(s){return"flush"===t?s.flush():s.partialFlush()},this)},i.prototype.flushStream=function(t){this.captionPackets_.length?(this.captionPackets_.forEach(function(t,s){t.presortIndex=s}),this.captionPackets_.sort(function(t,s){return t.pts===s.pts?t.presortIndex-s.presortIndex:t.pts-s.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0,this.flushCCStreams(t)):this.flushCCStreams(t)},i.prototype.flush=function(){return this.flushStream("flush")},i.prototype.partialFlush=function(){return this.flushStream("partialFlush")},i.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},i.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},i.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},i.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)},i.prototype.setsTextOrXDSActive=function(t){return 256==(28928&t.ccData)||4138==(30974&t.ccData)||6186==(30974&t.ccData)};var e={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},h=function(t){return null===t?"":(t=e[t]||t,String.fromCharCode(t))},o=14,n=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],a=function(){for(var t=[],s=o+1;s--;)t.push("");return t},r=function(t,s){r.prototype.init.call(this),this.field_=t||0,this.dataChannel_=s||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var s,i,e,o,r;if((s=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&s)?this.lastControlCode_=s:s!==this.PADDING_&&(this.lastControlCode_=null),e=s>>>8,o=255&s,s!==this.PADDING_)if(s===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(s===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=t.pts;else if(s===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(s===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(s===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(s===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(s===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(s===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=a();else if(s===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=a();else if(s===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=a()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(e,o))r=h((e=(3&e)<<8)|o),this[this.mode_](t.pts,r),this.column_++;else if(this.isExtCharacter(e,o))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),r=h((e=(3&e)<<8)|o),this[this.mode_](t.pts,r),this.column_++;else if(this.isMidRowCode(e,o))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&o)&&this.addFormatting(t.pts,["i"]),1==(1&o)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(e,o))this.column_+=3&o;else if(this.isPAC(e,o)){var _=n.indexOf(7968&s);"rollUp"===this.mode_&&(_-this.rollUpRows_+1<0&&(_=this.rollUpRows_-1),this.setRollUp(t.pts,_)),_!==this.row_&&(this.clearFormatting(t.pts),this.row_=_),1&o&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&s)&&(this.column_=4*((14&s)>>1)),this.isColorPAC(o)&&14==(14&o)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(e)&&(0===o&&(o=null),r=h(e),r+=h(o),this[this.mode_](t.pts,r),this.column_+=r.length)}else this.lastControlCode_=null}};r.prototype=new t,r.prototype.flushDisplayed=function(t){var s=this.displayed_.map(function(t){try{return t.trim()}catch(s){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");s.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:s,stream:this.name_})},r.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=a(),this.nonDisplayed_=a(),this.lastControlCode_=null,this.column_=0,this.row_=o,this.rollUpRows_=2,this.formatting_=[]},r.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},r.prototype.isSpecialCharacter=function(t,s){return t===this.EXT_&&s>=48&&s<=63},r.prototype.isExtCharacter=function(t,s){return(t===this.EXT_+1||t===this.EXT_+2)&&s>=32&&s<=63},r.prototype.isMidRowCode=function(t,s){return t===this.EXT_&&s>=32&&s<=47},r.prototype.isOffsetControlCode=function(t,s){return t===this.OFFSET_&&s>=33&&s<=35},r.prototype.isPAC=function(t,s){return t>=this.BASE_&&t<this.BASE_+8&&s>=64&&s<=127},r.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},r.prototype.isNormalChar=function(t){return t>=32&&t<=127},r.prototype.setRollUp=function(t,s){if("rollUp"!==this.mode_&&(this.row_=o,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=a(),this.displayed_=a()),void 0!==s&&s!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[s-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===s&&(s=this.row_),this.topRow_=s-this.rollUpRows_+1},r.prototype.addFormatting=function(t,s){this.formatting_=this.formatting_.concat(s);var i=s.reduce(function(t,s){return t+"<"+s+">"},"");this[this.mode_](t,i)},r.prototype.clearFormatting=function(t){if(this.formatting_.length){var s=this.formatting_.reverse().reduce(function(t,s){return t+"</"+s+">"},"");this.formatting_=[],this[this.mode_](t,s)}},r.prototype.popOn=function(t,s){var i=this.nonDisplayed_[this.row_];i+=s,this.nonDisplayed_[this.row_]=i},r.prototype.rollUp=function(t,s){var i=this.displayed_[this.row_];i+=s,this.displayed_[this.row_]=i},r.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<o+1;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},r.prototype.paintOn=function(t,s){var i=this.displayed_[this.row_];i+=s,this.displayed_[this.row_]=i},module.exports={CaptionStream:i,Cea608Stream:r};
},{"../utils/stream":"J7PA","../tools/caption-packet-parser":"e2oM"}],"qa7K":[function(require,module,exports) {
"use strict";var t=require("../tools/caption-packet-parser").discardEmulationPreventionBytes,i=require("../m2ts/caption-stream").CaptionStream,e=require("./probe"),n=require("../tools/mp4-inspector"),s=function(t,i){for(var e=t,n=0;n<i.length;n++){var s=i[n];if(e<s.size)return s;e-=s.size}return null},r=function(i,e,n){var r,a,o,u,l=new DataView(i.buffer,i.byteOffset,i.byteLength),f=[];for(a=0;a+4<i.length;a+=o)if(o=l.getUint32(a),a+=4,!(o<=0))switch(31&i[a]){case 6:var c=i.subarray(a+1,a+1+o),h=s(a,e);r={nalUnitType:"sei_rbsp",size:o,data:c,escapedRBSP:t(c),trackId:n},h?(r.pts=h.pts,r.dts=h.dts,u=h):(r.pts=u.pts,r.dts=u.dts),f.push(r)}return f},a=function(t,i,e){var s=i,r=e.defaultSampleDuration||0,a=e.defaultSampleSize||0,o=e.trackId,u=[];return t.forEach(function(t){var i=n.parseTrun(t).samples;i.forEach(function(t){void 0===t.duration&&(t.duration=r),void 0===t.size&&(t.size=a),t.trackId=o,t.dts=s,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=s+t.compositionTimeOffset,s+=t.duration}),u=u.concat(i)}),u},o=function(t,i){var s=e.findBox(t,["moof","traf"]),o=e.findBox(t,["mdat"]),u={},l=[];return o.forEach(function(t,i){var e=s[i];l.push({mdat:t,traf:e})}),l.forEach(function(t){var s,o,l=t.mdat,f=t.traf,c=e.findBox(f,["tfhd"]),h=n.parseTfhd(c[0]),p=h.trackId,d=e.findBox(f,["tfdt"]),m=d.length>0?n.parseTfdt(d[0]).baseMediaDecodeTime:0,v=e.findBox(f,["trun"]);i===p&&v.length>0&&(s=a(v,m,h),o=r(l,s,p),u[p]||(u[p]=[]),u[p]=u[p].concat(o))}),u},u=function(t,i,e){return null===i?null:{seiNals:o(t,i)[i],timescale:e}},l=function(){var t,e,n,s,r,a,o=!1;this.isInitialized=function(){return o},this.init=function(e){t=new i,o=!0,a=!!e&&e.isPartial,t.on("data",function(t){t.startTime=t.startPts/s,t.endTime=t.endPts/s,r.captions.push(t),r.captionStreams[t.stream]=!0})},this.isNewInit=function(t,i){return!(t&&0===t.length||i&&"object"==typeof i&&0===Object.keys(i).length)&&(n!==t[0]||s!==i[n])},this.parse=function(t,i,a){var o;if(!this.isInitialized())return null;if(!i||!a)return null;if(this.isNewInit(i,a))n=i[0],s=a[n];else if(null===n||!s)return e.push(t),null;for(;e.length>0;){var l=e.shift();this.parse(l,i,a)}return null!==(o=u(t,n,s))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):null},this.pushNals=function(i){if(!this.isInitialized()||!i||0===i.length)return null;i.forEach(function(i){t.push(i)})},this.flushStream=function(){if(!this.isInitialized())return null;a?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){e=[],n=null,s=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()};module.exports=l;
},{"../tools/caption-packet-parser":"e2oM","../m2ts/caption-stream":"ZV7f","./probe":"f6c2","../tools/mp4-inspector":"N5Pz"}],"jqwD":[function(require,module,exports) {
"use strict";module.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};
},{}],"SaC3":[function(require,module,exports) {
"use strict";var t=require("../utils/stream"),i=8589934592,e=4294967296,s="shared",n=function(t,s){var n=1;for(t>s&&(n=-1);Math.abs(s-t)>e;)t+=n*i;return t},r=function(t){var i,e;r.prototype.init.call(this),this.type_=t||s,this.push=function(t){this.type_!==s&&t.type!==this.type_||(void 0===e&&(e=t.dts),t.dts=n(t.dts,e),t.pts=n(t.pts,e),i=t.dts,this.trigger("data",t))},this.flush=function(){e=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){e=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};r.prototype=new t,module.exports={TimestampRolloverStream:r,handleRollover:n};
},{"../utils/stream":"J7PA"}],"i6ct":[function(require,module,exports) {
"use strict";var r=require("./stream-types.js"),e=function(r){var e=31&r[1];return e<<=8,e|=r[2]},t=function(r){return!!(64&r[1])},a=function(r){var e=0;return(48&r[3])>>>4>1&&(e+=r[4]+1),e},n=function(r,t){var a=e(r);return 0===a?"pat":a===t?"pmt":t?"pes":null},i=function(r){var e=t(r),n=4+a(r);return e&&(n+=r[n]+1),(31&r[n+10])<<8|r[n+11]},s=function(r){var e={},n=t(r),i=4+a(r);if(n&&(i+=r[i]+1),1&r[i+5]){var s;s=3+((15&r[i+1])<<8|r[i+2])-4;for(var u=12+((15&r[i+10])<<8|r[i+11]);u<s;){var _=i+u;e[(31&r[_+1])<<8|r[_+2]]=r[_],u+=5+((15&r[_+3])<<8|r[_+4])}return e}},u=function(t,a){switch(a[e(t)]){case r.H264_STREAM_TYPE:return"video";case r.ADTS_STREAM_TYPE:return"audio";case r.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},_=function(r){if(!t(r))return null;var e=4+a(r);if(e>=r.byteLength)return null;var n,i=null;return 192&(n=r[e+7])&&((i={}).pts=(14&r[e+9])<<27|(255&r[e+10])<<20|(254&r[e+11])<<12|(255&r[e+12])<<5|(254&r[e+13])>>>3,i.pts*=4,i.pts+=(6&r[e+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&r[e+14])<<27|(255&r[e+15])<<20|(254&r[e+16])<<12|(255&r[e+17])<<5|(254&r[e+18])>>>3,i.dts*=4,i.dts+=(6&r[e+18])>>>1)),i},c=function(r){switch(r){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},p=function(r){for(var e=4+a(r),t=r.subarray(e),n=0,i=0,s=!1;i<t.byteLength-3;i++)if(1===t[i+2]){n=i+5;break}for(;n<t.byteLength;)switch(t[n]){case 0:if(0!==t[n-1]){n+=2;break}if(0!==t[n-2]){n++;break}i+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===c(31&t[i+3])&&(s=!0);do{n++}while(1!==t[n]&&n<t.length);i=n-2,n+=3;break;case 1:if(0!==t[n-1]||0!==t[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===c(31&t[i+3])&&(s=!0),i=n-2,n+=3;break;default:n+=3}return t=t.subarray(i),n-=i,i=0,t&&t.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===c(31&t[i+3])&&(s=!0),s};module.exports={parseType:n,parsePat:i,parsePmt:s,parsePayloadUnitStartIndicator:t,parsePesType:u,parsePesTime:_,videoPacketContainsKeyFrame:p};
},{"./stream-types.js":"jqwD"}],"rMYU":[function(require,module,exports) {
"use strict";var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],e=function(r){return r[0]==="I".charCodeAt(0)&&r[1]==="D".charCodeAt(0)&&r[2]==="3".charCodeAt(0)},t=function(r){return r[0]<<21|r[1]<<14|r[2]<<7|r[3]},a=function(r,e,t){var a,n="";for(a=e;a<t;a++)n+="%"+("00"+r[a].toString(16)).slice(-2);return n},n=function(r,e,t){return unescape(a(r,e,t))},u=function(r,e){var t=r[e+6]<<21|r[e+7]<<14|r[e+8]<<7|r[e+9];return(16&r[e+5])>>4?t+20:t+10},i=function(r,e){var t=(224&r[e+5])>>5,a=r[e+4]<<3;return 6144&r[e+3]|a|t},o=function(r,e){return r[e]==="I".charCodeAt(0)&&r[e+1]==="D".charCodeAt(0)&&r[e+2]==="3".charCodeAt(0)?"timed-metadata":!0&r[e]&&240==(240&r[e+1])?"audio":null},c=function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return r[(60&e[t+2])>>>2];t++}return null},s=function(r){var e,a,u;e=10,64&r[5]&&(e+=4,e+=t(r.subarray(10,14)));do{if((a=t(r.subarray(e+4,e+8)))<1)return null;if("PRIV"===String.fromCharCode(r[e],r[e+1],r[e+2],r[e+3])){u=r.subarray(e+10,e+a+10);for(var i=0;i<u.byteLength;i++)if(0===u[i]){if("com.apple.streaming.transportStreamTimestamp"===n(u,0,i)){var o=u.subarray(i+1),c=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return c*=4,c+=3&o[7]}break}}e+=10,e+=a}while(e<r.byteLength);return null};module.exports={isLikelyAacData:e,parseId3TagSize:u,parseAdtsSize:i,parseType:o,parseSampleRate:c,parseAacTimestamp:s};
},{}],"gMmy":[function(require,module,exports) {
var o,n,e,u,s,t,T,r=9e4;o=function(o){return o*r},n=function(o,n){return o*n},e=function(o){return o/r},u=function(o,n){return o/n},s=function(n,e){return o(u(n,e))},t=function(o,u){return n(e(o),u)},T=function(o,n,u){return e(u?o:o-n)},module.exports={ONE_SECOND_IN_TS:r,secondsToVideoTs:o,secondsToAudioTs:n,videoTsToSeconds:e,audioTsToSeconds:u,audioTsToVideoTs:s,videoTsToAudioTs:t,metadataTsToSeconds:T};
},{}],"tSL0":[function(require,module,exports) {
"use strict";var e=require("../m2ts/stream-types.js"),t=require("../m2ts/timestamp-rollover-stream.js").handleRollover,a={};a.ts=require("../m2ts/probe.js"),a.aac=require("../aac/utils.js");var s=require("../utils/clock").ONE_SECOND_IN_TS,r=188,i=71,o=function(e,t){for(var s,o=0,d=r;d<e.byteLength;)if(e[o]!==i||e[d]!==i)o++,d++;else{switch(s=e.subarray(o,d),a.ts.parseType(s,t.pid)){case"pat":t.pid||(t.pid=a.ts.parsePat(s));break;case"pmt":t.table||(t.table=a.ts.parsePmt(s))}if(t.pid&&t.table)return;o+=r,d+=r}},d=function(e,t,s){for(var o,d,p,n,u=0,l=r,f=!1;l<=e.byteLength;)if(e[u]!==i||e[l]!==i&&l!==e.byteLength)u++,l++;else{switch(o=e.subarray(u,l),a.ts.parseType(o,t.pid)){case"pes":d=a.ts.parsePesType(o,t.table),p=a.ts.parsePayloadUnitStartIndicator(o),"audio"===d&&p&&(n=a.ts.parsePesTime(o))&&(n.type="audio",s.audio.push(n),f=!0)}if(f)break;u+=r,l+=r}for(u=(l=e.byteLength)-r,f=!1;u>=0;)if(e[u]!==i||e[l]!==i&&l!==e.byteLength)u--,l--;else{switch(o=e.subarray(u,l),a.ts.parseType(o,t.pid)){case"pes":d=a.ts.parsePesType(o,t.table),p=a.ts.parsePayloadUnitStartIndicator(o),"audio"===d&&p&&(n=a.ts.parsePesTime(o))&&(n.type="audio",s.audio.push(n),f=!0)}if(f)break;u-=r,l-=r}},p=function(e,t,s){for(var o,d,p,n,u,l,f,c=0,y=r,b=!1,m={data:[],size:0};y<e.byteLength;)if(e[c]!==i||e[y]!==i)c++,y++;else{switch(o=e.subarray(c,y),a.ts.parseType(o,t.pid)){case"pes":if(d=a.ts.parsePesType(o,t.table),p=a.ts.parsePayloadUnitStartIndicator(o),"video"===d&&(p&&!b&&(n=a.ts.parsePesTime(o))&&(n.type="video",s.video.push(n),b=!0),!s.firstKeyFrame)){if(p&&0!==m.size){for(u=new Uint8Array(m.size),l=0;m.data.length;)f=m.data.shift(),u.set(f,l),l+=f.byteLength;if(a.ts.videoPacketContainsKeyFrame(u)){var h=a.ts.parsePesTime(u);h?(s.firstKeyFrame=h,s.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}m.size=0}m.data.push(o),m.size+=o.byteLength}}if(b&&s.firstKeyFrame)break;c+=r,y+=r}for(c=(y=e.byteLength)-r,b=!1;c>=0;)if(e[c]!==i||e[y]!==i)c--,y--;else{switch(o=e.subarray(c,y),a.ts.parseType(o,t.pid)){case"pes":d=a.ts.parsePesType(o,t.table),p=a.ts.parsePayloadUnitStartIndicator(o),"video"===d&&p&&(n=a.ts.parsePesTime(o))&&(n.type="video",s.video.push(n),b=!0)}if(b)break;c-=r,y-=r}},n=function(e,a){if(e.audio&&e.audio.length){var r=a;void 0===r&&(r=e.audio[0].dts),e.audio.forEach(function(e){e.dts=t(e.dts,r),e.pts=t(e.pts,r),e.dtsTime=e.dts/s,e.ptsTime=e.pts/s})}if(e.video&&e.video.length){var i=a;if(void 0===i&&(i=e.video[0].dts),e.video.forEach(function(e){e.dts=t(e.dts,i),e.pts=t(e.pts,i),e.dtsTime=e.dts/s,e.ptsTime=e.pts/s}),e.firstKeyFrame){var o=e.firstKeyFrame;o.dts=t(o.dts,i),o.pts=t(o.pts,i),o.dtsTime=o.dts/s,o.ptsTime=o.dts/s}}},u=function(e){for(var t,r=!1,i=0,o=null,d=null,p=0,n=0;e.length-n>=3;){switch(a.aac.parseType(e,n)){case"timed-metadata":if(e.length-n<10){r=!0;break}if((p=a.aac.parseId3TagSize(e,n))>e.length){r=!0;break}null===d&&(t=e.subarray(n,n+p),d=a.aac.parseAacTimestamp(t)),n+=p;break;case"audio":if(e.length-n<7){r=!0;break}if((p=a.aac.parseAdtsSize(e,n))>e.length){r=!0;break}null===o&&(t=e.subarray(n,n+p),o=a.aac.parseSampleRate(t)),i++,n+=p;break;default:n++}if(r)return null}if(null===o||null===d)return null;var u=s/o;return{audio:[{type:"audio",dts:d,pts:d},{type:"audio",dts:d+1024*i*u,pts:d+1024*i*u}]}},l=function(t){var a={pid:null,table:null},s={};for(var r in o(t,a),a.table){if(a.table.hasOwnProperty(r))switch(a.table[r]){case e.H264_STREAM_TYPE:s.video=[],p(t,a,s),0===s.video.length&&delete s.video;break;case e.ADTS_STREAM_TYPE:s.audio=[],d(t,a,s),0===s.audio.length&&delete s.audio}}return s},f=function(e,t){var s;return(s=a.aac.isLikelyAacData(e)?u(e):l(e))&&(s.audio||s.video)?(n(s,t),s):null};module.exports={inspect:f,parseAudioPes_:d};
},{"../m2ts/stream-types.js":"jqwD","../m2ts/timestamp-rollover-stream.js":"SaC3","../m2ts/probe.js":"i6ct","../aac/utils.js":"rMYU","../utils/clock":"gMmy"}],"fIPZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad=t,exports.unpad=r,exports.VERSION=void 0;var e=void 0;function t(t){var r=e[t.byteLength%16||0],n=new Uint8Array(t.byteLength+r.length);return n.set(t),n.set(r,t.byteLength),n}function r(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}e=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]];var n="1.0.2";exports.VERSION=n;
},{}],"MKUx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AsyncStream=exports.Decrypter=exports.decrypt=void 0;var t=require("pkcs7"),e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),i=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},o=function(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]],e=t[0],r=t[1],i=e[4],n=r[4],o=void 0,s=void 0,u=void 0,c=[],l=[],f=void 0,a=void 0,p=void 0,h=void 0,y=void 0;for(o=0;o<256;o++)l[(c[o]=o<<1^283*(o>>7))^o]=o;for(s=u=0;!i[s];s^=f||1,u=l[u]||1)for(p=(p=u^u<<1^u<<2^u<<3^u<<4)>>8^255&p^99,i[s]=p,n[p]=s,y=16843009*c[a=c[f=c[s]]]^65537*a^257*f^16843008*s,h=257*c[p]^16843008*p,o=0;o<4;o++)e[o][s]=h=h<<24^h>>>8,r[o][p]=y=y<<24^y>>>8;for(o=0;o<5;o++)e[o]=e[o].slice(0),r[o]=r[o].slice(0);return t},s=null,u=function(){function t(r){e(this,t),s||(s=o()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var i=void 0,n=void 0,u=void 0,c=void 0,l=void 0,f=this._tables[0][4],a=this._tables[1],p=r.length,h=1;if(4!==p&&6!==p&&8!==p)throw new Error("Invalid aes key size");for(c=r.slice(0),l=[],this._key=[c,l],i=p;i<4*p+28;i++)u=c[i-1],(i%p==0||8===p&&i%p==4)&&(u=f[u>>>24]<<24^f[u>>16&255]<<16^f[u>>8&255]<<8^f[255&u],i%p==0&&(u=u<<8^u>>>24^h<<24,h=h<<1^283*(h>>7))),c[i]=c[i-p]^u;for(n=0;i;n++,i--)u=c[3&n?i:i-4],l[n]=i<=4||n<4?u:a[0][f[u>>>24]]^a[1][f[u>>16&255]]^a[2][f[u>>8&255]]^a[3][f[255&u]]}return t.prototype.decrypt=function(t,e,r,i,n,o){var s=this._key[1],u=t^s[0],c=i^s[1],l=r^s[2],f=e^s[3],a=void 0,p=void 0,h=void 0,y=s.length/4-2,d=void 0,v=4,b=this._tables[1],_=b[0],w=b[1],g=b[2],m=b[3],j=b[4];for(d=0;d<y;d++)a=_[u>>>24]^w[c>>16&255]^g[l>>8&255]^m[255&f]^s[v],p=_[c>>>24]^w[l>>16&255]^g[f>>8&255]^m[255&u]^s[v+1],h=_[l>>>24]^w[f>>16&255]^g[u>>8&255]^m[255&c]^s[v+2],f=_[f>>>24]^w[u>>16&255]^g[c>>8&255]^m[255&l]^s[v+3],v+=4,u=a,c=p,l=h;for(d=0;d<4;d++)n[(3&-d)+o]=j[u>>>24]<<24^j[c>>16&255]<<16^j[l>>8&255]<<8^j[255&f]^s[v++],a=u,u=c,c=l,l=f,f=a},t}(),c=function(){function t(){e(this,t),this.listeners={}}return t.prototype.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},t.prototype.off=function(t,e){if(!this.listeners[t])return!1;var r=this.listeners[t].indexOf(e);return this.listeners[t].splice(r,1),r>-1},t.prototype.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var r=e.length,i=0;i<r;++i)e[i].call(this,arguments[1]);else for(var n=Array.prototype.slice.call(arguments,1),o=e.length,s=0;s<o;++s)e[s].apply(this,n)},t.prototype.dispose=function(){this.listeners={}},t.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},t}(),l=function(t){function r(){e(this,r);var i=n(this,t.call(this,c));return i.jobs=[],i.delay=1,i.timeout_=null,i}return i(r,t),r.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},r.prototype.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},r}(c);exports.AsyncStream=l;var f=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},a=function(t,e,r){var i=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),n=new u(Array.prototype.slice.call(e)),o=new Uint8Array(t.byteLength),s=new Int32Array(o.buffer),c=void 0,l=void 0,a=void 0,p=void 0,h=void 0,y=void 0,d=void 0,v=void 0,b=void 0;for(c=r[0],l=r[1],a=r[2],p=r[3],b=0;b<i.length;b+=4)h=f(i[b]),y=f(i[b+1]),d=f(i[b+2]),v=f(i[b+3]),n.decrypt(h,y,d,v,s,b),s[b]=f(s[b]^c),s[b+1]=f(s[b+1]^l),s[b+2]=f(s[b+2]^a),s[b+3]=f(s[b+3]^p),c=h,l=y,a=d,p=v;return o};exports.decrypt=a;var p=function(){function i(r,n,o,s){e(this,i);var u=i.STEP,c=new Int32Array(r.buffer),a=new Uint8Array(r.byteLength),p=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(c.subarray(p,p+u),n,o,a)),p=u;p<c.length;p+=u)o=new Uint32Array([f(c[p-4]),f(c[p-3]),f(c[p-2]),f(c[p-1])]),this.asyncStream_.push(this.decryptChunk_(c.subarray(p,p+u),n,o,a));this.asyncStream_.push(function(){s(null,(0,t.unpad)(a))})}return i.prototype.decryptChunk_=function(t,e,r,i){return function(){var n=a(t,e,r);i.set(n,t.byteOffset)}},r(i,null,[{key:"STEP",get:function(){return 32e3}}]),i}();exports.Decrypter=p;
},{"pkcs7":"fIPZ"}],"qoWl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("global/window")),t=f(require("global/document")),i=f(require("safe-json-parse/tuple")),n=f(require("keycode")),r=f(require("xhr")),s=f(require("videojs-vtt.js")),a=f(require("url-toolkit")),o=require("m3u8-parser"),l=require("mpd-parser"),u=f(require("mux.js/lib/tools/mp4-inspector")),c=f(require("mux.js/lib/mp4/probe")),h=f(require("mux.js/lib/mp4/caption-parser")),d=f(require("mux.js/lib/tools/ts-inspector.js")),p=require("aes-decrypter");function f(e){return e&&e.__esModule?e:{default:e}}var m="7.6.5",g=[],v=function(t,i){return function(n,r,s){var a=i.levels[r],o=new RegExp("^("+a+")$");if("log"!==n&&s.unshift(n.toUpperCase()+":"),s.unshift(t+":"),g&&g.push([].concat(s)),e.default.console){var l=e.default.console[n];l||"debug"!==n||(l=e.default.console.info||e.default.console.log),l&&a&&o.test(n)&&l[Array.isArray(s)?"apply":"call"](e.default.console,s)}}};function y(e){var t,i="info",n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t("log",i,n)};return t=v(e,n),n.createLogger=function(t){return y(e+": "+t)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},n.level=function(e){if("string"==typeof e){if(!n.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');i=e}return i},(n.history=function(){return g?[].concat(g):[]}).filter=function(e){return(g||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},n.history.clear=function(){g&&(g.length=0)},n.history.disable=function(){null!==g&&(g.length=0,g=null)},n.history.enable=function(){null===g&&(g=[])},n.error=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t("error",i,n)},n.warn=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t("warn",i,n)},n.debug=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t("debug",i,n)},n}var _=y("VIDEOJS"),T=_.createLogger,b=Object.prototype.toString,k=function(e){return w(e)?Object.keys(e):[]};function S(e,t){k(e).forEach(function(i){return t(e[i],i)})}function C(e,t,i){return void 0===i&&(i=0),k(e).reduce(function(i,n){return t(i,e[n],n)},i)}function E(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[e].concat(i)):(i.forEach(function(t){t&&S(t,function(t,i){e[i]=t})}),e)}function w(e){return!!e&&"object"==typeof e}function P(e){return w(e)&&"[object Object]"===b.call(e)&&e.constructor===Object}function L(t,i){if(!t||!i)return"";if("function"==typeof e.default.getComputedStyle){var n=e.default.getComputedStyle(t);return n?n.getPropertyValue(i)||n[i]:""}return""}function A(e){return"string"==typeof e&&/\S/.test(e)}function I(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function x(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function O(){return t.default===e.default.document}function D(e){return w(e)&&1===e.nodeType}function M(){try{return e.default.parent!==e.default.self}catch(t){return!0}}function R(e){return function(i,n){if(!A(i))return t.default[e](null);A(n)&&(n=t.default.querySelector(n));var r=D(n)?n:t.default;return r[e]&&r[e](i)}}function B(e,i,n,r){void 0===e&&(e="div"),void 0===i&&(i={}),void 0===n&&(n={});var s=t.default.createElement(e);return Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(_.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+t+"."),s.setAttribute(e,t)):"textContent"===e?U(s,t):s[e]=t}),Object.getOwnPropertyNames(n).forEach(function(e){s.setAttribute(e,n[e])}),r&&ie(s,r),s}function U(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function j(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function N(e,t){return I(t),e.classList?e.classList.contains(t):x(t).test(e.className)}function F(e,t){return e.classList?e.classList.add(t):N(e,t)||(e.className=(e.className+" "+t).trim()),e}function H(e,t){return e.classList?e.classList.remove(t):(I(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function q(e,t,i){var n=N(e,t);if("function"==typeof i&&(i=i(e,t)),"boolean"!=typeof i&&(i=!n),i!==n)return i?F(e,t):H(e,t),e}function V(e,t){Object.getOwnPropertyNames(t).forEach(function(i){var n=t[i];null==n||!1===n?e.removeAttribute(i):e.setAttribute(i,!0===n?"":n)})}function W(e){var t={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,r=n.length-1;r>=0;r--){var s=n[r].name,a=n[r].value;"boolean"!=typeof e[s]&&-1===i.indexOf(","+s+",")||(a=null!==a),t[s]=a}return t}function G(e,t){return e.getAttribute(t)}function z(e,t,i){e.setAttribute(t,i)}function K(e,t){e.removeAttribute(t)}function Y(){t.default.body.focus(),t.default.onselectstart=function(){return!1}}function X(){t.default.onselectstart=function(){return!0}}function $(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(L(e,"height"))),i.width||(i.width=parseFloat(L(e,"width"))),i}}function Q(i){var n;if(i.getBoundingClientRect&&i.parentNode&&(n=i.getBoundingClientRect()),!n)return{left:0,top:0};var r=t.default.documentElement,s=t.default.body,a=r.clientLeft||s.clientLeft||0,o=e.default.pageXOffset||s.scrollLeft,l=n.left+o-a,u=r.clientTop||s.clientTop||0,c=e.default.pageYOffset||s.scrollTop,h=n.top+c-u;return{left:Math.round(l),top:Math.round(h)}}function J(e,t){var i={},n=Q(e),r=e.offsetWidth,s=e.offsetHeight,a=n.top,o=n.left,l=t.pageY,u=t.pageX;return t.changedTouches&&(u=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(a-l+s)/s)),i.x=Math.max(0,Math.min(1,(u-o)/r)),i}function Z(e){return w(e)&&3===e.nodeType}function ee(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function te(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),D(e)||Z(e)?e:"string"==typeof e&&/\S/.test(e)?t.default.createTextNode(e):void 0}).filter(function(e){return e})}function ie(e,t){return te(t).forEach(function(t){return e.appendChild(t)}),e}function ne(e,t){return ie(ee(e),t)}function re(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}var se,ae=R("querySelector"),oe=R("querySelectorAll"),le=Object.freeze({isReal:O,isEl:D,isInFrame:M,createEl:B,textContent:U,prependTo:j,hasClass:N,addClass:F,removeClass:H,toggleClass:q,setAttributes:V,getAttributes:W,getAttribute:G,setAttribute:z,removeAttribute:K,blockTextSelection:Y,unblockTextSelection:X,getBoundingClientRect:$,findPosition:Q,getPointerPosition:J,isTextNode:Z,emptyEl:ee,normalizeContent:te,appendContent:ie,insertContent:ne,isSingleLeftClick:re,$:ae,$$:oe}),ue=!1,ce=function(){if(O()&&!1!==se.options.autoSetup){var e=Array.prototype.slice.call(t.default.getElementsByTagName("video")),i=Array.prototype.slice.call(t.default.getElementsByTagName("audio")),n=Array.prototype.slice.call(t.default.getElementsByTagName("video-js")),r=e.concat(i,n);if(r&&r.length>0)for(var s=0,a=r.length;s<a;s++){var o=r[s];if(!o||!o.getAttribute){he(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&se(o)}else ue||he(1)}};function he(t,i){i&&(se=i),e.default.setTimeout(ce,t)}function de(){ue=!0,e.default.removeEventListener("load",de)}O()&&("complete"===t.default.readyState?de():e.default.addEventListener("load",de));var pe=function(e){var i=t.default.createElement("style");return i.className=e,i},fe=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},me=new WeakMap,ge=3,ve=ge;function ye(){return ve++}function _e(e,t){if(me.has(e)){var i=me.get(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&me.delete(e)}}function Te(e,t,i,n){i.forEach(function(i){e(t,i,n)})}function be(i){function n(){return!0}function r(){return!1}if(!i||!i.isPropagationStopped){var s=i||e.default.event;for(var a in i={},s)"layerX"!==a&&"layerY"!==a&&"keyLocation"!==a&&"webkitMovementX"!==a&&"webkitMovementY"!==a&&("returnValue"===a&&s.preventDefault||(i[a]=s[a]));if(i.target||(i.target=i.srcElement||t.default),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){s.preventDefault&&s.preventDefault(),i.returnValue=!1,s.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),i.cancelBubble=!0,s.cancelBubble=!0,i.isPropagationStopped=n},i.isPropagationStopped=r,i.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),i.isImmediatePropagationStopped=n,i.stopPropagation()},i.isImmediatePropagationStopped=r,null!==i.clientX&&void 0!==i.clientX){var o=t.default.documentElement,l=t.default.body;i.pageX=i.clientX+(o&&o.scrollLeft||l&&l.scrollLeft||0)-(o&&o.clientLeft||l&&l.clientLeft||0),i.pageY=i.clientY+(o&&o.scrollTop||l&&l.scrollTop||0)-(o&&o.clientTop||l&&l.clientTop||0)}i.which=i.charCode||i.keyCode,null!==i.button&&void 0!==i.button&&(i.button=1&i.button?0:4&i.button?1:2&i.button?2:0)}return i}var ke=!1;!function(){try{var t=Object.defineProperty({},"passive",{get:function(){ke=!0}});e.default.addEventListener("test",null,t),e.default.removeEventListener("test",null,t)}catch(i){}}();var Se=["touchstart","touchmove"];function Ce(e,t,i){if(Array.isArray(t))return Te(Ce,e,t,i);me.has(e)||me.set(e,{});var n=me.get(e);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),i.guid||(i.guid=ye()),n.handlers[t].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,i){if(!n.disabled){t=be(t);var r=n.handlers[t.type];if(r)for(var s=r.slice(0),a=0,o=s.length;a<o&&!t.isImmediatePropagationStopped();a++)try{s[a].call(e,t,i)}catch(l){_.error(l)}}}),1===n.handlers[t].length)if(e.addEventListener){var r=!1;ke&&Se.indexOf(t)>-1&&(r={passive:!0}),e.addEventListener(t,n.dispatcher,r)}else e.attachEvent&&e.attachEvent("on"+t,n.dispatcher)}function Ee(e,t,i){if(me.has(e)){var n=me.get(e);if(n.handlers){if(Array.isArray(t))return Te(Ee,e,t,i);var r=function(e,t){n.handlers[t]=[],_e(e,t)};if(void 0!==t){var s=n.handlers[t];if(s)if(i){if(i.guid)for(var a=0;a<s.length;a++)s[a].guid===i.guid&&s.splice(a--,1);_e(e,t)}else r(e,t)}else for(var o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&r(e,o)}}}function we(e,t,i){var n=me.has(e)?me.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=be(t),n.dispatcher&&n.dispatcher.call(e,t,i),r&&!t.isPropagationStopped()&&!0===t.bubbles)we.call(null,r,t,i);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){me.has(t.target)||me.set(t.target,{});var s=me.get(t.target);t.target[t.type]&&(s.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),s.disabled=!1)}return!t.defaultPrevented}function Pe(e,t,i){if(Array.isArray(t))return Te(Pe,e,t,i);var n=function n(){Ee(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||ye(),Ce(e,t,n)}function Le(e,t,i){var n=function n(){Ee(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||ye(),Ce(e,t,n)}var Ae,Ie=Object.freeze({fixEvent:be,on:Ce,off:Ee,trigger:we,one:Pe,any:Le}),xe=30,Oe=function(e,t,i){t.guid||(t.guid=ye());var n=t.bind(e);return n.guid=i?i+"_"+t.guid:t.guid,n},De=function(t,i){var n=e.default.performance.now();return function(){var r=e.default.performance.now();r-n>=i&&(t.apply(void 0,arguments),n=r)}},Me=function(t,i,n,r){var s;void 0===r&&(r=e.default);var a=function(){var e=this,a=arguments,o=function(){s=null,o=null,n||t.apply(e,a)};!s&&n&&t.apply(e,a),r.clearTimeout(s),s=r.setTimeout(o,i)};return a.cancel=function(){r.clearTimeout(s),s=null},a},Re=function(){};Re.prototype.allowedEvents_={},Re.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},Ce(this,e,t),this.addEventListener=i},Re.prototype.addEventListener=Re.prototype.on,Re.prototype.off=function(e,t){Ee(this,e,t)},Re.prototype.removeEventListener=Re.prototype.off,Re.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},Pe(this,e,t),this.addEventListener=i},Re.prototype.any=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},Le(this,e,t),this.addEventListener=i},Re.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=be(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),we(this,e)},Re.prototype.dispatchEvent=Re.prototype.trigger,Re.prototype.queueTrigger=function(t){var i=this;Ae||(Ae=new Map);var n=t.type||t,r=Ae.get(this);r||(r=new Map,Ae.set(this,r));var s=r.get(n);r.delete(n),e.default.clearTimeout(s);var a=e.default.setTimeout(function(){0===r.size&&(r=null,Ae.delete(i)),i.trigger(t)},0);r.set(n,a)};var Be=function(e){return e instanceof Re||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},Ue=function(e,t){Be(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},je=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Ne=function(e){if(!e.nodeName&&!Be(e))throw new Error("Invalid target; must be a DOM node or evented object.")},Fe=function(e){if(!je(e))throw new Error("Invalid event type; must be a non-empty string or array.")},He=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},qe=function(e,t){var i,n,r,s=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return s?(i=e.eventBusEl_,t.length>=3&&t.shift(),n=t[0],r=t[1]):(i=t[0],n=t[1],r=t[2]),Ne(i),Fe(n),He(r),{isTargetingSelf:s,target:i,type:n,listener:r=Oe(e,r)}},Ve=function(e,t,i,n){Ne(e),e.nodeName?Ie[t](e,i,n):e[t](i,n)},We={on:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=qe(this,i),s=r.isTargetingSelf,a=r.target,o=r.type,l=r.listener;if(Ve(a,"on",o,l),!s){var u=function(){return e.off(a,o,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,Ve(this,"on","dispose",u),Ve(a,"on","dispose",c)}},one:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=qe(this,i),s=r.isTargetingSelf,a=r.target,o=r.type,l=r.listener;if(s)Ve(a,"one",o,l);else{var u=function t(){e.off(a,o,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};u.guid=l.guid,Ve(a,"one",o,u)}},any:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=qe(this,i),s=r.isTargetingSelf,a=r.target,o=r.type,l=r.listener;if(s)Ve(a,"any",o,l);else{var u=function t(){e.off(a,o,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};u.guid=l.guid,Ve(a,"any",o,u)}},off:function(e,t,i){if(!e||je(e))Ee(this.eventBusEl_,e,t);else{var n=e,r=t;Ne(n),Fe(r),He(i),i=Oe(this,i),this.off("dispose",i),n.nodeName?(Ee(n,r,i),Ee(n,"dispose",i)):Be(n)&&(n.off(r,i),n.off("dispose",i))}},trigger:function(e,t){return we(this.eventBusEl_,e,t)}};function Ge(t,i){void 0===i&&(i={});var n=i.eventBusKey;if(n){if(!t[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');t.eventBusEl_=t[n]}else t.eventBusEl_=B("span",{className:"vjs-event-bus"});return E(t,We),t.eventedCallbacks&&t.eventedCallbacks.forEach(function(e){e()}),t.on("dispose",function(){t.off(),e.default.setTimeout(function(){t.eventBusEl_=null},0)}),t}var ze={state:{},setState:function(e){var t,i=this;return"function"==typeof e&&(e=e()),S(e,function(e,n){i.state[n]!==e&&((t=t||{})[n]={from:i.state[n],to:e}),i.state[n]=e}),t&&Be(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Ke(e,t){return E(e,ze),e.state=E({},e.state,t),"function"==typeof e.handleStateChanged&&Be(e)&&e.on("statechanged",e.handleStateChanged),e}var Ye=function(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})},Xe=function(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})},$e=function(e,t){return Xe(e)===Xe(t)};function Qe(){for(var e={},t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach(function(t){t&&S(t,function(t,i){P(t)?(P(e[i])||(e[i]={}),e[i]=Qe(e[i],t)):e[i]=t})}),e}var Je=function(){function t(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.parentComponent_=null,this.options_=Qe({},this.options_),t=this.options_=Qe(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var n=e&&e.id&&e.id()||"no_player";this.id_=n+"_component_"+ye()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&Ge(this,{eventBusKey:this.el_?"el_":null}),Ke(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var i=t.prototype;return i.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),me.has(this.el_)&&me.delete(this.el_),this.el_=null),this.player_=null},i.player=function(){return this.player_},i.options=function(e){return e?(this.options_=Qe(this.options_,e),this.options_):this.options_},i.el=function(){return this.el_},i.createEl=function(e,t,i){return B(e,t,i)},i.localize=function(e,t,i){void 0===i&&(i=e);var n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),s=r&&r[n],a=n&&n.split("-")[0],o=r&&r[a],l=i;return s&&s[e]?l=s[e]:o&&o[e]&&(l=o[e]),t&&(l=l.replace(/\{(\d+)\}/g,function(e,i){var n=t[i-1],r=n;return void 0===n&&(r=e),r})),l},i.contentEl=function(){return this.contentEl_||this.el_},i.id=function(){return this.id_},i.name=function(){return this.name_},i.children=function(){return this.children_},i.getChildById=function(e){return this.childIndex_[e]},i.getChild=function(e){if(e)return this.childNameIndex_[e]},i.addChild=function(e,i,n){var r,s;if(void 0===i&&(i={}),void 0===n&&(n=this.children_.length),"string"==typeof e){s=Xe(e);var a=i.componentClass||s;i.name=s;var o=t.getComponent(a);if(!o)throw new Error("Component "+a+" does not exist");if("function"!=typeof o)return null;r=new o(this.player_||this,i)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(s=s||r.name&&Xe(r.name()))&&(this.childNameIndex_[s]=r,this.childNameIndex_[Ye(s)]=r),"function"==typeof r.el&&r.el()){var l=this.contentEl().children[n]||null;this.contentEl().insertBefore(r.el(),l)}return r},i.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Xe(e.name())]=null,this.childNameIndex_[Ye(e.name())]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},i.initChildren=function(){var e=this,i=this.options_.children;if(i){var n,r=this.options_,s=t.getComponent("Tech");(n=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(e){return!n.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(t){var n,r;return"string"==typeof t?r=i[n=t]||e.options_[n]||{}:(n=t.name,r=t),{name:n,opts:r}}).filter(function(e){var i=t.getComponent(e.opts.componentClass||Xe(e.name));return i&&!s.isTech(i)}).forEach(function(t){var i=t.name,n=t.opts;if(void 0!==r[i]&&(n=r[i]),!1!==n){!0===n&&(n={}),n.playerOptions=e.options_.playerOptions;var s=e.addChild(i,n);s&&(e[i]=s)}})}},i.buildCSSClass=function(){return""},i.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},i.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},i.$=function(e,t){return ae(e,t||this.contentEl())},i.$$=function(e,t){return oe(e,t||this.contentEl())},i.hasClass=function(e){return N(this.el_,e)},i.addClass=function(e){F(this.el_,e)},i.removeClass=function(e){H(this.el_,e)},i.toggleClass=function(e,t){q(this.el_,e,t)},i.show=function(){this.removeClass("vjs-hidden")},i.hide=function(){this.addClass("vjs-hidden")},i.lockShowing=function(){this.addClass("vjs-lock-showing")},i.unlockShowing=function(){this.removeClass("vjs-lock-showing")},i.getAttribute=function(e){return G(this.el_,e)},i.setAttribute=function(e,t){z(this.el_,e,t)},i.removeAttribute=function(e){K(this.el_,e)},i.width=function(e,t){return this.dimension("width",e,t)},i.height=function(e,t){return this.dimension("height",e,t)},i.dimensions=function(e,t){this.width(e,!0),this.height(t)},i.dimension=function(e,t,i){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[e],r=n.indexOf("px");return-1!==r?parseInt(n.slice(0,r),10):parseInt(this.el_["offset"+Xe(e)],10)},i.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=L(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var i="offset"+Xe(e);t=this.el_[i]}return t},i.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},i.currentWidth=function(){return this.currentDimension("width")},i.currentHeight=function(){return this.currentDimension("height")},i.focus=function(){this.el_.focus()},i.blur=function(){this.el_.blur()},i.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},i.handleKeyPress=function(e){this.handleKeyDown(e)},i.emitTapEvents=function(){var t,i=0,n=null;this.on("touchstart",function(r){1===r.touches.length&&(n={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},i=e.default.performance.now(),t=!0)}),this.on("touchmove",function(e){if(e.touches.length>1)t=!1;else if(n){var i=e.touches[0].pageX-n.pageX,r=e.touches[0].pageY-n.pageY;Math.sqrt(i*i+r*r)>10&&(t=!1)}});var r=function(){t=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",function(r){(n=null,!0===t)&&(e.default.performance.now()-i<200&&(r.preventDefault(),this.trigger("tap")))})},i.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=Oe(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var i=function(i){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",i),this.on("touchcancel",i)}},i.setTimeout=function(t,i){var n,r=this;return t=Oe(this,t),this.clearTimersOnDispose_(),n=e.default.setTimeout(function(){r.setTimeoutIds_.has(n)&&r.setTimeoutIds_.delete(n),t()},i),this.setTimeoutIds_.add(n),n},i.clearTimeout=function(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),e.default.clearTimeout(t)),t},i.setInterval=function(t,i){t=Oe(this,t),this.clearTimersOnDispose_();var n=e.default.setInterval(t,i);return this.setIntervalIds_.add(n),n},i.clearInterval=function(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),e.default.clearInterval(t)),t},i.requestAnimationFrame=function(t){var i,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),t=Oe(this,t),i=e.default.requestAnimationFrame(function(){n.rafIds_.has(i)&&n.rafIds_.delete(i),t()}),this.rafIds_.add(i),i):this.setTimeout(t,1e3/60)},i.cancelAnimationFrame=function(t){return this.supportsRaf_?(this.rafIds_.has(t)&&(this.rafIds_.delete(t),e.default.cancelAnimationFrame(t)),t):this.clearTimeout(t)},i.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var i=t[0],n=t[1];e[i].forEach(e[n],e)}),e.clearingTimersOnDispose_=!1}))},t.registerComponent=function(e,i){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var n,r=t.getComponent("Tech"),s=r&&r.isTech(i),a=t===i||t.prototype.isPrototypeOf(i.prototype);if(s||!a)throw n=s?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+e+'"; '+n+".");e=Xe(e),t.components_||(t.components_={});var o=t.getComponent("Player");if("Player"===e&&o&&o.players){var l=o.players,u=Object.keys(l);if(l&&u.length>0&&u.map(function(e){return l[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[e]=i,t.components_[Ye(e)]=i,i},t.getComponent=function(e){if(e&&t.components_)return t.components_[e]},t}();function Ze(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function it(e,t,i){return(it=tt()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&et(r,i.prototype),r}).apply(null,arguments)}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Je.prototype.supportsRaf_="function"==typeof e.default.requestAnimationFrame&&"function"==typeof e.default.cancelAnimationFrame,Je.registerComponent("Component",Je);var rt=e.default.navigator&&e.default.navigator.userAgent||"",st=/AppleWebKit\/([\d.]+)/i.exec(rt),at=st?parseFloat(st.pop()):null,ot=/iPad/i.test(rt),lt=/iPhone/i.test(rt)&&!ot,ut=/iPod/i.test(rt),ct=lt||ot||ut,ht=function(){var e=rt.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),dt=/Android/i.test(rt),pt=function(){var e=rt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),ft=dt&&pt<5&&at<537,mt=/Firefox/i.test(rt),gt=/Edge/i.test(rt),vt=!gt&&(/Chrome/i.test(rt)||/CriOS/i.test(rt)),yt=function(){var e=rt.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),_t=function(){var e=/MSIE\s(\d+)\.\d/.exec(rt),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(rt)&&/rv:11.0/.test(rt)&&(t=11),t}(),Tt=/Safari/i.test(rt)&&!vt&&!dt&&!gt,bt=(Tt||ct)&&!vt,kt=/Windows/i.test(rt),St=O()&&("ontouchstart"in e.default||e.default.navigator.maxTouchPoints||e.default.DocumentTouch&&e.default.document instanceof e.default.DocumentTouch),Ct=Object.freeze({IS_IPAD:ot,IS_IPHONE:lt,IS_IPOD:ut,IS_IOS:ct,IOS_VERSION:ht,IS_ANDROID:dt,ANDROID_VERSION:pt,IS_NATIVE_ANDROID:ft,IS_FIREFOX:mt,IS_EDGE:gt,IS_CHROME:vt,CHROME_VERSION:yt,IE_VERSION:_t,IS_SAFARI:Tt,IS_ANY_SAFARI:bt,IS_WINDOWS:kt,TOUCH_ENABLED:St});function Et(e,t,i){if("number"!=typeof t||t<0||t>i)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}function wt(e,t,i,n){return Et(e,n,i.length-1),i[n][t]}function Pt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:wt.bind(null,"start",0,e),end:wt.bind(null,"end",1,e)}}function Lt(e,t){return Array.isArray(e)?Pt(e):void 0===e||void 0===t?Pt():Pt([[e,t]])}function At(e,t){var i,n,r=0;if(!t)return 0;e&&e.length||(e=Lt(0,0));for(var s=0;s<e.length;s++)i=e.start(s),(n=e.end(s))>t&&(n=t),r+=n-i;return r/t}for(var It,xt={prefixed:!0},Ot=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Dt=Ot[0],Mt=0;Mt<Ot.length;Mt++)if(Ot[Mt][1]in t.default){It=Ot[Mt];break}if(It){for(var Rt=0;Rt<It.length;Rt++)xt[Dt[Rt]]=It[Rt];xt.prefixed=It[0]!==Dt[0]}function Bt(e){if(e instanceof Bt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:w(e)&&("number"==typeof e.code&&(this.code=e.code),E(this,e)),this.message||(this.message=Bt.defaultMessages[this.code]||"")}Bt.prototype.code=0,Bt.prototype.message="",Bt.prototype.status=null,Bt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Bt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ut=0;Ut<Bt.errorTypes.length;Ut++)Bt[Bt.errorTypes[Ut]]=Ut,Bt.prototype[Bt.errorTypes[Ut]]=Ut;function jt(e){return null!=e&&"function"==typeof e.then}function Nt(e){jt(e)&&e.then(null,function(e){})}var Ft=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,i,n){return e[i]&&(t[i]=e[i]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},Ht=function(e){var t=e.$$("track"),i=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=Ft(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===i.indexOf(e)}).map(Ft))},qt=function(e,t){return e.forEach(function(e){var i=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return i.addCue(e)})}),t.textTracks()},Vt={textTracksToJson:Ht,jsonToTextTracks:qt,trackToJson_:Ft},Wt="vjs-modal-dialog",Gt=function(i){function r(e,t){var n;return(n=i.call(this,e,t)||this).opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=B("div",{className:Wt+"-content"},{role:"document"}),n.descEl_=B("p",{className:Wt+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),U(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}Ze(r,i);var s=r.prototype;return s.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},s.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,i.prototype.dispose.call(this)},s.buildCSSClass=function(){return Wt+" vjs-hidden "+i.prototype.buildCSSClass.call(this)},s.label=function(){return this.localize(this.options_.label||"Modal Window")},s.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},s.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},s.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},s.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},s.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close)}!t&&i&&(this.off(i,"close",this.close),this.removeChild(i),i.dispose())}return this.closeable_},s.fill=function(){this.fillWith(this.content())},s.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),ne(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);var r=this.getChild("closeButton");r&&i.appendChild(r.el_)},s.empty=function(){this.trigger("beforemodalempty"),ee(this.contentEl()),this.trigger("modalempty")},s.content=function(e){return void 0!==e&&(this.content_=e),this.content_},s.conditionalFocus_=function(){var e=t.default.activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,(i.contains(e)||i===e)&&(this.previouslyActiveEl_=e,this.focus())},s.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},s.handleKeyDown=function(e){if(e.stopPropagation(),n.default.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(n.default.isEventKey(e,"Tab")){for(var i,r=this.focusableEls_(),s=this.el_.querySelector(":focus"),a=0;a<r.length;a++)if(s===r[a]){i=a;break}t.default.activeElement===this.el_&&(i=0),e.shiftKey&&0===i?(r[r.length-1].focus(),e.preventDefault()):e.shiftKey||i!==r.length-1||(r[0].focus(),e.preventDefault())}},s.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(t){return(t instanceof e.default.HTMLAnchorElement||t instanceof e.default.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof e.default.HTMLInputElement||t instanceof e.default.HTMLSelectElement||t instanceof e.default.HTMLTextAreaElement||t instanceof e.default.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof e.default.HTMLIFrameElement||t instanceof e.default.HTMLObjectElement||t instanceof e.default.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},r}(Je);Gt.prototype.options_={pauseOnOpen:!0,temporary:!0},Je.registerComponent("ModalDialog",Gt);var zt=function(e){function t(t){var i;void 0===t&&(t=[]),(i=e.call(this)||this).tracks_=[],Object.defineProperty(nt(i),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<t.length;n++)i.addTrack(t[n]);return i}Ze(t,e);var i=t.prototype;return i.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this}))},i.removeTrack=function(e){for(var t,i=0,n=this.length;i<n;i++)if(this[i]===e){(t=this[i]).off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},i.getTrackById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},t}(Re);for(var Kt in zt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},zt.prototype.allowedEvents_)zt.prototype["on"+Kt]=null;var Yt=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)},Xt=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].enabled){Yt(t,t[n]);break}return(i=e.call(this,t)||this).changing_=!1,i}Ze(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;t.enabled&&Yt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){i.changing_||(i.changing_=!0,Yt(i,t),i.changing_=!1,i.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(zt),$t=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)},Qt=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].selected){$t(t,t[n]);break}return(i=e.call(this,t)||this).changing_=!1,Object.defineProperty(nt(i),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i}Ze(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;t.selected&&$t(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){i.changing_||(i.changing_=!0,$t(i,t),i.changing_=!1,i.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(zt),Jt=function(e){function t(){return e.apply(this,arguments)||this}Ze(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return i.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return i.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(zt),Zt=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},t.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),ei=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,i=0,n=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<n)for(i=t;i<n;i++)r.call(this,i)},t.getCueById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},e}(),ti={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ii={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},ni={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ri={disabled:"disabled",hidden:"hidden",showing:"showing"},si=function(e){function t(t){var i;void 0===t&&(t={}),i=e.call(this)||this;var n={id:t.id||"vjs_track_"+ye(),kind:t.kind||"",label:t.label||"",language:t.language||""},r=function(e){Object.defineProperty(nt(i),e,{get:function(){return n[e]},set:function(){}})};for(var s in n)r(s);return i}return Ze(t,e),t}(Re),ai=function(i){var n=["protocol","hostname","port","pathname","search","hash","host"],r=t.default.createElement("a");r.href=i;var s,a=""===r.host&&"file:"!==r.protocol;a&&((s=t.default.createElement("div")).innerHTML='<a href="'+i+'"></a>',r=s.firstChild,s.setAttribute("style","display:none; position:absolute;"),t.default.body.appendChild(s));for(var o={},l=0;l<n.length;l++)o[n[l]]=r[n[l]];return"http:"===o.protocol&&(o.host=o.host.replace(/:80$/,"")),"https:"===o.protocol&&(o.host=o.host.replace(/:443$/,"")),o.protocol||(o.protocol=e.default.location.protocol),a&&t.default.body.removeChild(s),o},oi=function(e){if(!e.match(/^https?:\/\//)){var i=t.default.createElement("div");i.innerHTML='<a href="'+e+'">x</a>',e=i.firstChild.href}return e},li=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},ui=function(t){var i=e.default.location,n=ai(t);return(":"===n.protocol?i.protocol:n.protocol)+n.host!==i.protocol+i.host},ci=Object.freeze({parseUrl:ai,getAbsoluteURL:oi,getFileExtension:li,isCrossOrigin:ui}),hi=function(t,i){var n=new e.default.WebVTT.Parser(e.default,e.default.vttjs,e.default.WebVTT.StringDecoder()),r=[];n.oncue=function(e){i.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){i.trigger({type:"loadeddata",target:i})},n.parse(t),r.length>0&&(e.default.console&&e.default.console.groupCollapsed&&e.default.console.groupCollapsed("Text Track parsing errors for "+i.src),r.forEach(function(e){return _.error(e)}),e.default.console&&e.default.console.groupEnd&&e.default.console.groupEnd()),n.flush()},di=function(t,i){var n={uri:t},s=ui(t);s&&(n.cors=s),(0,r.default)(n,Oe(this,function(t,n,r){if(t)return _.error(t,n);i.loaded_=!0,"function"!=typeof e.default.WebVTT?i.tech_&&i.tech_.any(["vttjsloaded","vttjserror"],function(e){if("vttjserror"!==e.type)return hi(r,i);_.error("vttjs failed to load, stopping trying to process "+i.src)}):hi(r,i)}))},pi=function(t){function i(e){var i;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var n=Qe(e,{kind:ni[e.kind]||"subtitles",language:e.language||e.srclang||""}),r=ri[n.mode]||"disabled",s=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(r="hidden"),(i=t.call(this,n)||this).tech_=n.tech,i.cues_=[],i.activeCues_=[];var a=new ei(i.cues_),o=new ei(i.activeCues_),l=!1,u=Oe(nt(i),function(){this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1)});return"disabled"!==r&&i.tech_.ready(function(){i.tech_.on("timeupdate",u)},!0),Object.defineProperties(nt(i),{default:{get:function(){return s},set:function(){}},mode:{get:function(){return r},set:function(e){var t=this;ri[e]&&("disabled"!==(r=e)?this.tech_.ready(function(){t.tech_.on("timeupdate",u)},!0):this.tech_.off("timeupdate",u),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var e=this.tech_.currentTime(),t=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];r.startTime<=e&&r.endTime>=e?t.push(r):r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e&&t.push(r)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var s=0;s<t.length;s++)-1===this.activeCues_.indexOf(t[s])&&(l=!0);return this.activeCues_=t,o.setCues_(this.activeCues_),o},set:function(){}}}),n.src?(i.src=n.src,di(n.src,nt(i))):i.loaded_=!0,i}Ze(i,t);var n=i.prototype;return n.addCue=function(t){var i=t;if(e.default.vttjs&&!(t instanceof e.default.vttjs.VTTCue)){for(var n in i=new e.default.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)n in i||(i[n]=t[n]);i.id=t.id,i.originalCue_=t}for(var r=this.tech_.textTracks(),s=0;s<r.length;s++)r[s]!==this&&r[s].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},i}(si);pi.prototype.allowedEvents_={cuechange:"cuechange"};var fi=function(e){function t(t){var i;void 0===t&&(t={});var n=Qe(t,{kind:ii[t.kind]||""});i=e.call(this,n)||this;var r=!1;return Object.defineProperty(nt(i),"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return Ze(t,e),t}(si),mi=function(e){function t(t){var i;void 0===t&&(t={});var n=Qe(t,{kind:ti[t.kind]||""});i=e.call(this,n)||this;var r=!1;return Object.defineProperty(nt(i),"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return Ze(t,e),t}(si),gi=0,vi=1,yi=2,_i=3,Ti=function(e){function t(t){var i,n;void 0===t&&(t={}),i=e.call(this)||this;var r=new pi(t);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i.default=r.default,Object.defineProperties(nt(i),{readyState:{get:function(){return n}},track:{get:function(){return r}}}),n=gi,r.addEventListener("loadeddata",function(){n=yi,i.trigger({type:"load",target:nt(i)})}),i}return Ze(t,e),t}(Re);Ti.prototype.allowedEvents_={load:"load"},Ti.NONE=gi,Ti.LOADING=vi,Ti.LOADED=yi,Ti.ERROR=_i;var bi={audio:{ListClass:Xt,TrackClass:fi,capitalName:"Audio"},video:{ListClass:Qt,TrackClass:mi,capitalName:"Video"},text:{ListClass:Jt,TrackClass:pi,capitalName:"Text"}};Object.keys(bi).forEach(function(e){bi[e].getterName=e+"Tracks",bi[e].privateName=e+"Tracks_"});var ki={remoteText:{ListClass:Jt,TrackClass:pi,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Zt,TrackClass:Ti,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Si=Qe(bi,ki);function Ci(e,t,i,n,r){void 0===r&&(r={});var s=e.textTracks();r.kind=t,i&&(r.label=i),n&&(r.language=n),r.tech=e;var a=new Si.text.TrackClass(r);return s.addTrack(a),a}ki.names=Object.keys(ki),bi.names=Object.keys(bi),Si.names=[].concat(ki.names).concat(bi.names);var Ei=function(i){function n(e,t){var n;return void 0===e&&(e={}),void 0===t&&(t=function(){}),e.reportTouchActivity=!1,(n=i.call(this,null,e,t)||this).hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),Si.names.forEach(function(t){var i=Si[t];e&&e[i.getterName]&&(n[i.privateName]=e[i.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){!1===e["native"+t+"Tracks"]&&(n["featuresNative"+t+"Tracks"]=!1)}),!1===e.nativeCaptions||!1===e.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.autoRemoteTextTracks_=new Si.text.ListClass,n.initTrackListeners(),e.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}Ze(n,i);var r=n.prototype;return r.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},r.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},r.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},r.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Oe(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},r.onDurationChange=function(e){this.duration_=this.duration()},r.buffered=function(){return Lt(0,0)},r.bufferedPercent=function(){return At(this.buffered(),this.duration_)},r.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},r.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},r.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.dispose=function(){this.clearTracks(bi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),i.prototype.dispose.call(this)},r.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(e){for(var i=t[e+"Tracks"]()||[],n=i.length;n--;){var r=i[n];"text"===e&&t.removeRemoteTextTrack(r),i.removeTrack(r)}})},r.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var i=e[t];this.removeRemoteTextTrack(i)}},r.reset=function(){},r.error=function(e){return void 0!==e&&(this.error_=new Bt(e),this.trigger("error")),this.error_},r.played=function(){return this.hasStarted_?Lt(0,0):Lt()},r.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.initTrackListeners=function(){var e=this;bi.names.forEach(function(t){var i=bi[t],n=function(){e.trigger(t+"trackchange")},r=e[i.getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),e.on("dispose",function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)})})},r.addWebVttScript_=function(){var i=this;if(!e.default.WebVTT)if(t.default.body.contains(this.el())){if(!this.options_["vtt.js"]&&P(s.default)&&Object.keys(s.default).length>0)return void this.trigger("vttjsloaded");var n=t.default.createElement("script");n.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",n.onload=function(){i.trigger("vttjsloaded")},n.onerror=function(){i.trigger("vttjserror")},this.on("dispose",function(){n.onload=null,n.onerror=null}),e.default.WebVTT=!0,this.el().parentNode.appendChild(n)}else this.ready(this.addWebVttScript_)},r.emulateTextTracks=function(){var e=this,t=this.textTracks(),i=this.remoteTextTracks(),n=function(e){return t.addTrack(e.track)},r=function(e){return t.removeTrack(e.track)};i.on("addtrack",n),i.on("removetrack",r),this.addWebVttScript_();var s=function(){return e.trigger("texttrackchange")},a=function(){s();for(var e=0;e<t.length;e++){var i=t[e];i.removeEventListener("cuechange",s),"showing"===i.mode&&i.addEventListener("cuechange",s)}};a(),t.addEventListener("change",a),t.addEventListener("addtrack",a),t.addEventListener("removetrack",a),this.on("dispose",function(){i.off("addtrack",n),i.off("removetrack",r),t.removeEventListener("change",a),t.removeEventListener("addtrack",a),t.removeEventListener("removetrack",a);for(var e=0;e<t.length;e++){t[e].removeEventListener("cuechange",s)}})},r.addTextTrack=function(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return Ci(this,e,t,i)},r.createRemoteTextTrack=function(e){var t=Qe(e,{tech:this});return new ki.remoteTextEl.TrackClass(t)},r.addRemoteTextTrack=function(e,t){var i=this;void 0===e&&(e={});var n=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(_.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==t&&this.ready(function(){return i.autoRemoteTextTracks_.addTrack(n.track)}),n},r.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},r.getVideoPlaybackQuality=function(){return{}},r.requestPictureInPicture=function(){var t=this.options_.Promise||e.default.Promise;if(t)return t.reject()},r.setPoster=function(){},r.playsinline=function(){},r.setPlaysinline=function(){},r.overrideNativeAudioTracks=function(){},r.overrideNativeVideoTracks=function(){},r.canPlayType=function(){return""},n.canPlayType=function(){return""},n.canPlaySource=function(e,t){return n.canPlayType(e.type)},n.isTech=function(e){return e.prototype instanceof n||e instanceof n||e===n},n.registerTech=function(e,t){if(n.techs_||(n.techs_={}),!n.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!n.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!n.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Xe(e),n.techs_[e]=t,n.techs_[Ye(e)]=t,"Tech"!==e&&n.defaultTechOrder_.push(e),t},n.getTech=function(t){if(t)return n.techs_&&n.techs_[t]?n.techs_[t]:(t=Xe(t),e.default&&e.default.videojs&&e.default.videojs[t]?(_.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),e.default.videojs[t]):void 0)},n}(Je);Si.names.forEach(function(e){var t=Si[e];Ei.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Ei.prototype.featuresVolumeControl=!0,Ei.prototype.featuresMuteControl=!0,Ei.prototype.featuresFullscreenResize=!1,Ei.prototype.featuresPlaybackRate=!1,Ei.prototype.featuresProgressEvents=!1,Ei.prototype.featuresSourceset=!1,Ei.prototype.featuresTimeupdateEvents=!1,Ei.prototype.featuresNativeTextTracks=!1,Ei.withSourceHandlers=function(e){e.registerSourceHandler=function(t,i){var n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),void 0===i&&(i=n.length),n.splice(i,0,t)},e.canPlayType=function(t){for(var i,n=e.sourceHandlers||[],r=0;r<n.length;r++)if(i=n[r].canPlayType(t))return i;return""},e.selectSourceHandler=function(t,i){for(var n=e.sourceHandlers||[],r=0;r<n.length;r++)if(n[r].canHandleSource(t,i))return n[r];return null},e.canPlaySource=function(t,i){var n=e.selectSourceHandler(t,i);return n?n.canHandleSource(t,i):""};["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var i=e.selectSourceHandler(t,this.options_);i||(e.nativeSourceHandler?i=e.nativeSourceHandler:_.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),i!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Je.registerComponent("Tech",Ei),Ei.registerTech("Tech",Ei),Ei.defaultTechOrder_=[];var wi={},Pi={},Li={};function Ai(e,t){wi[e]=wi[e]||[],wi[e].push(t)}function Ii(e,t,i){e.setTimeout(function(){return qi(t,wi[t.type],i,e)},1)}function xi(e,t){e.forEach(function(e){return e.setTech&&e.setTech(t)})}function Oi(e,t,i){return e.reduceRight(ji(i),t[i]())}function Di(e,t,i,n){return t[i](e.reduce(ji(i),n))}function Mi(e,t,i,n){void 0===n&&(n=null);var r="call"+Xe(i),s=e.reduce(ji(r),n),a=s===Li,o=a?null:t[i](s);return Ni(e,i,o,a),o}var Ri={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1,volume:1},Bi={setCurrentTime:1,setVolume:1},Ui={play:1,pause:1};function ji(e){return function(t,i){return t===Li?Li:i[e]?i[e](t):t}}function Ni(e,t,i,n){for(var r=e.length-1;r>=0;r--){var s=e[r];s[t]&&s[t](n,i)}}function Fi(e){Pi[e.id()]=null}function Hi(e,t){var i=Pi[e.id()],n=null;if(null==i)return n=t(e),Pi[e.id()]=[[t,n]],n;for(var r=0;r<i.length;r++){var s=i[r],a=s[0],o=s[1];a===t&&(n=o)}return null===n&&(n=t(e),i.push([t,n])),n}function qi(e,t,i,n,r,s){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===s&&(s=!1);var a=t,o=a[0],l=a.slice(1);if("string"==typeof o)qi(e,wi[o],i,n,r,s);else if(o){var u=Hi(n,o);if(!u.setSource)return r.push(u),qi(e,l,i,n,r,s);u.setSource(E({},e),function(t,a){if(t)return qi(e,l,i,n,r,s);r.push(u),qi(a,e.type===a.type?l:wi[a.type],i,n,r,s)})}else l.length?qi(e,l,i,n,r,s):s?i(e,r):qi(e,wi["*"],i,n,r,!0)}var Vi={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Wi=function(e){void 0===e&&(e="");var t=li(e);return Vi[t.toLowerCase()]||""},Gi=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(e){return e.src===t});if(i.length)return i[0].type;for(var n=e.$$("source"),r=0;r<n.length;r++){var s=n[r];if(s.type&&s.src&&s.src===t)return s.type}return Wi(t)},zi=function e(t){if(Array.isArray(t)){var i=[];t.forEach(function(t){t=e(t),Array.isArray(t)?i=i.concat(t):w(t)&&i.push(t)}),t=i}else t="string"==typeof t&&t.trim()?[Ki({src:t})]:w(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[Ki(t)]:[];return t};function Ki(e){if(!e.type){var t=Wi(e.src);t&&(e.type=t)}return e}var Yi=function(e){function t(t,i,n){var r,s=Qe({createEl:!1},i);if(r=e.call(this,t,s,n)||this,i.playerOptions.sources&&0!==i.playerOptions.sources.length)t.src(i.playerOptions.sources);else for(var a=0,o=i.playerOptions.techOrder;a<o.length;a++){var l=Xe(o[a]),u=Ei.getTech(l);if(l||(u=Je.getComponent(l)),u&&u.isSupported()){t.loadTech_(l);break}}return r}return Ze(t,e),t}(Je);Je.registerComponent("MediaLoader",Yi);var Xi=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).emitTapEvents(),n.enable(),n}Ze(t,e);var i=t.prototype;return i.createEl=function(t,i,n){void 0===t&&(t="div"),void 0===i&&(i={}),void 0===n&&(n={}),i=E({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i),"button"===t&&_.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),n=E({role:"button"},n),this.tabIndex_=i.tabIndex;var r=e.prototype.createEl.call(this,t,i,n);return this.createControlTextEl(r),r},i.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},i.createControlTextEl=function(e){return this.controlTextEl_=B("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},i.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,U(this.controlTextEl_,i),this.nonIconControl||t.setAttribute("title",i)},i.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},i.handleClick=function(e){},i.handleKeyDown=function(t){n.default.isEventKey(t,"Space")||n.default.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(Je);Je.registerComponent("ClickableComponent",Xi);var $i=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update(),t.on("posterchange",Oe(nt(n),n.update)),n}Ze(t,e);var i=t.prototype;return i.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},i.createEl=function(){return B("div",{className:"vjs-poster",tabIndex:-1})},i.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},i.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},i.handleClick=function(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Nt(this.player_.play()):this.player_.pause())},t}(Xi);Je.registerComponent("PosterImage",$i);var Qi="#222",Ji="#ccc",Zi={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function en(e,t){var i;if(4===e.length)i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");i=e.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function tn(e,t,i){try{e.style[t]=i}catch(n){return}}var nn=function(t){function i(i,n,r){var s;s=t.call(this,i,n,r)||this;var a=Oe(nt(s),s.updateDisplay);return i.on("loadstart",Oe(nt(s),s.toggleDisplay)),i.on("texttrackchange",a),i.on("loadedmetadata",Oe(nt(s),s.preselectTrack)),i.ready(Oe(nt(s),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else{i.on("fullscreenchange",a),i.on("playerresize",a),e.default.addEventListener("orientationchange",a),i.on("dispose",function(){return e.default.removeEventListener("orientationchange",a)});for(var t=this.options_.playerOptions.tracks||[],n=0;n<t.length;n++)this.player_.addRemoteTextTrack(t[n],!0);this.preselectTrack()}})),s}Ze(i,t);var n=i.prototype;return n.preselectTrack=function(){for(var e,t,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,a=0;a<r.length;a++){var o=r[a];s&&s.enabled&&s.language&&s.language===o.language&&o.kind in n?o.kind===s.kind?i=o:i||(i=o):s&&!s.enabled?(i=null,e=null,t=null):o.default&&("descriptions"!==o.kind||e?o.kind in n&&!t&&(t=o):e=o)}i?i.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof e.default.WebVTT&&e.default.WebVTT.processCues(e.default,[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var i=[],n=0;n<e.length;++n){var r=e[n];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{for(var s=null,a=null,o=e.length;o--;){var l=e[o];"showing"===l.mode&&("descriptions"===l.kind?s=l:a=l)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):s&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(s))}},n.updateDisplayState=function(t){for(var i=this.player_.textTrackSettings.getValues(),n=t.activeCues,r=n.length;r--;){var s=n[r];if(s){var a=s.displayState;if(i.color&&(a.firstChild.style.color=i.color),i.textOpacity&&tn(a.firstChild,"color",en(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(a.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&tn(a.firstChild,"backgroundColor",en(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?tn(a,"backgroundColor",en(i.windowColor,i.windowOpacity)):a.style.backgroundColor=i.windowColor),i.edgeStyle&&("dropshadow"===i.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px "+Qi+", 2px 2px 4px "+Qi+", 2px 2px 5px "+Qi:"raised"===i.edgeStyle?a.firstChild.style.textShadow="1px 1px "+Qi+", 2px 2px "+Qi+", 3px 3px "+Qi:"depressed"===i.edgeStyle?a.firstChild.style.textShadow="1px 1px "+Ji+", 0 1px "+Ji+", -1px -1px "+Qi+", 0 -1px "+Qi:"uniform"===i.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px "+Qi+", 0 0 4px "+Qi+", 0 0 4px "+Qi+", 0 0 4px "+Qi)),i.fontPercent&&1!==i.fontPercent){var o=e.default.parseFloat(a.style.fontSize);a.style.fontSize=o*i.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}i.fontFamily&&"default"!==i.fontFamily&&("small-caps"===i.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=Zi[i.fontFamily])}}},n.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof e.default.WebVTT&&!t.every(function(e){return!e.activeCues})){for(var i=[],n=0;n<t.length;++n)for(var r=t[n],s=0;s<r.activeCues.length;++s)i.push(r.activeCues[s]);e.default.WebVTT.processCues(e.default,i,this.el_);for(var a=0;a<t.length;++a){for(var o=t[a],l=0;l<o.activeCues.length;++l){var u=o.activeCues[l].displayState;F(u,"vjs-text-track-cue"),F(u,"vjs-text-track-cue-"+(o.language?o.language:a))}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},i}(Je);Je.registerComponent("TextTrackDisplay",nn);var rn=function(e){function t(){return e.apply(this,arguments)||this}return Ze(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),i=this.localize(t?"Audio Player":"Video Player"),n=B("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])}),r=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r},t}(Je);Je.registerComponent("LoadingSpinner",rn);var sn=function(e){function t(){return e.apply(this,arguments)||this}Ze(t,e);var i=t.prototype;return i.createEl=function(e,t,i){void 0===t&&(t={}),void 0===i&&(i={}),t=E({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),i=E({type:"button"},i);var n=Je.prototype.createEl.call(this,"button",t,i);return this.createControlTextEl(n),n},i.addChild=function(e,t){void 0===t&&(t={});var i=this.constructor.name;return _.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),Je.prototype.addChild.call(this,e,t)},i.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(t){n.default.isEventKey(t,"Space")||n.default.isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(Xi);Je.registerComponent("Button",sn);var an=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-big-play-button"},i.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return Nt(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());var i=this.player_.getChild("controlBar"),n=i&&i.getChild("playToggle");if(n){var r=function(){return n.focus()};jt(t)?t.then(r,function(){}):this.setTimeout(r,1)}else this.player_.tech(!0).focus()},i.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},i.handleMouseDown=function(e){this.mouseused_=!0},t}(sn);an.prototype.controlText_="Play Video",Je.registerComponent("BigPlayButton",an);var on=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).controlText(i&&i.controlText||n.localize("Close")),n}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},i.handleKeyDown=function(t){n.default.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(sn);Je.registerComponent("CloseButton",on);var ln=function(e){function t(t,i){var n;return void 0===i&&(i={}),n=e.call(this,t,i)||this,i.replay=void 0===i.replay||i.replay,n.on(t,"play",n.handlePlay),n.on(t,"pause",n.handlePause),i.replay&&n.on(t,"ended",n.handleEnded),n}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},i.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(sn);ln.prototype.controlText_="Play",Je.registerComponent("PlayToggle",ln);var un=function(e,t){e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),s=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=n=i="-"),(r=r>0||a>0?r+":":"")+(n=((r||s>=10)&&n<10?"0"+n:n)+":")+(i=i<10?"0"+i:i)},cn=un;function hn(e){cn=e}function dn(){cn=un}function pn(e,t){return void 0===t&&(t=e),cn(e,t)}var fn=function(e){function i(t,i){var n;return(n=e.call(this,t,i)||this).throttledUpdateContent=De(Oe(nt(n),n.updateContent),xe),n.on(t,"timeupdate",n.throttledUpdateContent),n}Ze(i,e);var n=i.prototype;return n.createEl=function(){var t=this.buildCSSClass(),i=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=B("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),this.updateTextNode_(),i.appendChild(this.contentEl_),i},n.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},n.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=t.default.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},n.formatTime_=function(e){return pn(e)},n.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},n.updateContent=function(e){},i}(Je);fn.prototype.labelText_="Time",fn.prototype.controlText_="Time",Je.registerComponent("TimeDisplay",fn);var mn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"ended",n.handleEnded),n}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},i.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},t}(fn);mn.prototype.labelText_="Current Time",mn.prototype.controlText_="Current Time",Je.registerComponent("CurrentTimeDisplay",mn);var gn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"durationchange",n.updateContent),n.on(t,"loadstart",n.updateContent),n.on(t,"loadedmetadata",n.throttledUpdateContent),n}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-duration"},i.updateContent=function(e){var t=this.player_.duration();this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},t}(fn);gn.prototype.labelText_="Duration",gn.prototype.controlText_="Duration",Je.registerComponent("DurationDisplay",gn);var vn=function(e){function t(){return e.apply(this,arguments)||this}return Ze(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(Je);Je.registerComponent("TimeDivider",vn);var yn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"durationchange",n.throttledUpdateContent),n.on(t,"ended",n.handleEnded),n}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-remaining-time"},i.createEl=function(){var t=e.prototype.createEl.call(this);return t.insertBefore(B("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},i.updateContent=function(e){"number"==typeof this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},i.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},t}(fn);yn.prototype.labelText_="Remaining Time",yn.prototype.controlText_="Remaining Time",Je.registerComponent("RemainingTimeDisplay",yn);var _n=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}Ze(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=B("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},i.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},i.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Je);Je.registerComponent("LiveDisplay",_n);var Tn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatus),n}Ze(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=B("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},i.updateLiveEdgeStatus=function(e){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,e.prototype.dispose.call(this)},t}(sn);Tn.prototype.controlText_="Seek to live, currently playing live",Je.registerComponent("SeekToLive",Tn);var bn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}Ze(t,e);var i=t.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function(t,i,n){return void 0===i&&(i={}),void 0===n&&(n={}),i.className=i.className+" vjs-slider",i=E({tabIndex:0},i),n=E({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),e.prototype.createEl.call(this,t,i,n)},i.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||vt||e.preventDefault(),Y(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},i.handleMouseMove=function(e){},i.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;X(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},i.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var i=(100*e).toFixed(2)+"%",n=t.el().style,r=this.vertical()?"height":"width";return n[r]!==i&&(n[r]=i),e}}},i.calculateDistance=function(e){var t=J(this.el_,e);return this.vertical()?t.y:t.x},i.handleKeyDown=function(t){n.default.isEventKey(t,"Left")||n.default.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):n.default.isEventKey(t,"Right")||n.default.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){e.stopPropagation(),e.preventDefault()},i.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Je);Je.registerComponent("Slider",bn);var kn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).partEls_=[],n.on(t,"progress",n.update),n}Ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})},i.dispose=function(){this.partEls_=null,e.prototype.dispose.call(this)},i.update=function(e){var t=this.player_.liveTracker,i=this.player_.buffered(),n=t&&t.isLive()?t.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),s=this.partEls_,a=this.$(".vjs-control-text-loaded-percentage"),o=function(e,t,i){var n=e/t||0;return n=100*(n>=1?1:n),i&&(n=n.toFixed(2)),n+"%"};this.el_.style.width=o(r,n),U(a,o(r,n,!0));for(var l=0;l<i.length;l++){var u=i.start(l),c=i.end(l),h=s[l];h||(h=this.el_.appendChild(B()),s[l]=h),h.style.left=o(u,r),h.style.width=o(c-u,r)}for(var d=s.length;d>i.length;d--)this.el_.removeChild(s[d-1]);s.length=i.length},t}(Je);Je.registerComponent("LoadProgressBar",kn);var Sn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=De(Oe(nt(n),n.update),xe),n}Ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function(e,t,i){var n=$(this.el_),r=$(this.player_.el()),s=e.width*t;if(r&&n){var a=e.left-r.left+s,o=e.width-s+(r.right-e.right),l=n.width/2;a<l?l+=l-a:o<l&&(l=o),l<0?l=0:l>n.width&&(l=n.width),this.el_.style.right="-"+l+"px",this.write(i)}},i.write=function(e){U(this.el_,e)},i.updateTime=function(e,t,i,n){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var s,a=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var o=r.player_.liveTracker.liveWindow(),l=o-t*o;s=(l<1?"":"-")+pn(l,o)}else s=pn(i,a);r.update(e,t,s),n&&n()})},t}(Je);Je.registerComponent("TimeTooltip",Sn);var Cn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=De(Oe(nt(n),n.update),xe),n}Ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(e,t){var i=this.getChild("timeTooltip");if(i){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,n)}},t}(Je);Cn.prototype.options_={children:[]},ct||dt||Cn.prototype.options_.children.push("timeTooltip"),Je.registerComponent("PlayProgressBar",Cn);var En=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=De(Oe(nt(n),n.update),xe),n}Ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(e,t){var i=this,n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,function(){i.el_.style.left=e.width*t+"px"})},t}(Je);En.prototype.options_={children:["timeTooltip"]},Je.registerComponent("MouseTimeDisplay",En);var wn=5,Pn=12,Ln=30,An=function(e){function i(t,i){var n;return(n=e.call(this,t,i)||this).setEventHandlers_(),n}Ze(i,e);var r=i.prototype;return r.setEventHandlers_=function(){this.update=De(Oe(this,this.update),Ln),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.on(this.player_,"durationchange",this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in t.default&&"visibilityState"in t.default&&this.on(t.default,"visibilitychange",this.toggleVisibility_)},r.toggleVisibility_=function(e){t.default.hidden?this.disableInterval_(e):(this.enableInterval_(),this.requestAnimationFrame(this.update))},r.enableInterval_=function(){var e=this;this.clearInterval(this.updateInterval),this.updateInterval=this.setInterval(function(){e.requestAnimationFrame(e.update)},Ln)},r.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&"ended"!==e.type||this.clearInterval(this.updateInterval)},r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},r.update_=function(e,t){var i=this.player_.liveTracker,n=this.player_.duration();i&&i.isLive()&&(n=this.player_.liveTracker.liveCurrentTime()),this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[pn(e,n),pn(n,n)],"{1} of {2}")),this.bar&&this.bar.update($(this.el_),t)},r.update=function(t){if(null!==this.el().offsetParent){var i=e.prototype.update.call(this);return this.update_(this.getCurrentTime_(),i),i}},r.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},r.handleEnded=function(e){this.update_(this.player_.duration(),1)},r.getPercent=function(){var e,t=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(e=(t-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e>=1?1:e||0},r.handleMouseDown=function(t){re(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},r.handleMouseMove=function(e){if(re(e)){var t,i=this.calculateDistance(e),n=this.player_.liveTracker;if(n&&n.isLive()){var r=n.seekableStart(),s=n.liveCurrentTime();if((t=r+i*n.liveWindow())>=s&&(t=s),t<=r&&(t=r+.1),t===1/0)return}else(t=i*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},r.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},r.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},r.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Nt(this.player_.play())},r.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+wn)},r.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-wn)},r.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},r.handleKeyDown=function(t){if(n.default.isEventKey(t,"Space")||n.default.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(n.default.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(0);else if(n.default.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test((0,n.default)(t))){t.preventDefault(),t.stopPropagation();var i=10*(n.default.codes[(0,n.default)(t)]-n.default.codes[0])/100;this.player_.currentTime(this.player_.duration()*i)}else n.default.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-wn*Pn)):n.default.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+wn*Pn)):e.prototype.handleKeyDown.call(this,t)},i}(bn);An.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},ct||dt||An.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Je.registerComponent("SeekBar",An);var In=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).handleMouseMove=De(Oe(nt(n),n.handleMouseMove),xe),n.throttledHandleMouseSeek=De(Oe(nt(n),n.handleMouseSeek),xe),n.enable(),n}Ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var i=t.getChild("mouseTimeDisplay"),n=t.el(),r=$(n),s=J(n,e).x;s>1?s=1:s<0&&(s=0),i&&i.update(r,s)}},i.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},i.enabled=function(){return this.enabled_},i.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},i.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},i.handleMouseUp=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(Je);In.prototype.options_={children:["seekBar"]},Je.registerComponent("ProgressControl",In);var xn=function(e){function i(i,n){var r;return(r=e.call(this,i,n)||this).on(i,["enterpictureinpicture","leavepictureinpicture"],r.handlePictureInPictureChange),t.default.pictureInPictureEnabled||r.disable(),r}Ze(i,e);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},i}(sn);xn.prototype.controlText_="Picture-in-Picture",Je.registerComponent("PictureInPictureToggle",xn);var On=function(e){function i(i,n){var r;return(r=e.call(this,i,n)||this).on(i,"fullscreenchange",r.handleFullscreenChange),!1===t.default[i.fsApi_.fullscreenEnabled]&&r.disable(),r}Ze(i,e);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},i}(sn);On.prototype.controlText_="Fullscreen",Je.registerComponent("FullscreenToggle",On);var Dn=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},Mn=function(e){function t(){return e.apply(this,arguments)||this}return Ze(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Je);Je.registerComponent("VolumeLevel",Mn);var Rn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on("slideractive",n.updateLastVolume_),n.on(t,"volumechange",n.updateARIAAttributes),t.ready(function(){return n.updateARIAAttributes()}),n}Ze(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function(t){re(t)&&e.prototype.handleMouseDown.call(this,t)},i.handleMouseMove=function(e){re(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},i.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},i.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},i.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},t}(bn);Rn.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Rn.prototype.playerEvent="volumechange",Je.registerComponent("VolumeBar",Rn);var Bn=function(e){function t(t,i){var n;return void 0===i&&(i={}),i.vertical=i.vertical||!1,(void 0===i.volumeBar||P(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),n=e.call(this,t,i)||this,Dn(nt(n),t),n.throttledHandleMouseMove=De(Oe(nt(n),n.handleMouseMove),xe),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}Ze(t,e);var i=t.prototype;return i.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},i.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},i.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},i.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Je);Bn.prototype.options_={children:["volumeBar"]},Je.registerComponent("VolumeControl",Bn);var Un=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},jn=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,Un(nt(n),t),n.on(t,["loadstart","volumechange"],n.update),n}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){var t=this.player_.volume(),i=this.player_.lastVolume_();if(0===t){var n=i<.1?.1:i;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},i.update=function(e){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function(){var e=this.player_.volume(),t=3;ct&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var i=0;i<4;i++)H(this.el_,"vjs-vol-"+i);F(this.el_,"vjs-vol-"+t)},i.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(sn);jn.prototype.controlText_="Mute",Je.registerComponent("MuteToggle",jn);var Nn=function(e){function i(t,i){var n;return void 0===i&&(i={}),void 0!==i.inline?i.inline=i.inline:i.inline=!0,(void 0===i.volumeControl||P(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(n=e.call(this,t,i)||this).on(t,["loadstart"],n.volumePanelState_),n.on(n.muteToggle,"keyup",n.handleKeyPress),n.on(n.volumeControl,"keyup",n.handleVolumeControlKeyUp),n.on("keydown",n.handleKeyPress),n.on("mouseover",n.handleMouseOver),n.on("mouseout",n.handleMouseOut),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}Ze(i,e);var r=i.prototype;return r.sliderActive_=function(){this.addClass("vjs-slider-active")},r.sliderInactive_=function(){this.removeClass("vjs-slider-active")},r.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},r.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},r.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},r.handleVolumeControlKeyUp=function(e){n.default.isEventKey(e,"Esc")&&this.muteToggle.focus()},r.handleMouseOver=function(e){this.addClass("vjs-hover"),Ce(t.default,"keyup",Oe(this,this.handleKeyPress))},r.handleMouseOut=function(e){this.removeClass("vjs-hover"),Ee(t.default,"keyup",Oe(this,this.handleKeyPress))},r.handleKeyPress=function(e){n.default.isEventKey(e,"Esc")&&this.handleMouseOut()},i}(Je);Nn.prototype.options_={children:["muteToggle","volumeControl"]},Je.registerComponent("VolumePanel",Nn);var Fn=function(e){function i(t,i){var n;return n=e.call(this,t,i)||this,i&&(n.menuButton_=i.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyDown),n.boundHandleBlur_=Oe(nt(n),n.handleBlur),n.boundHandleTapClick_=Oe(nt(n),n.handleTapClick),n}Ze(i,e);var r=i.prototype;return r.addEventListenerForItem=function(e){e instanceof Je&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},r.removeEventListenerForItem=function(e){e instanceof Je&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},r.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},r.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},r.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=B(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),Ce(i,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),i},r.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},r.handleBlur=function(e){var i=e.relatedTarget||t.default.activeElement;if(!this.children().some(function(e){return e.el()===i})){var n=this.menuButton_;n&&n.buttonPressed_&&i!==n.el().firstChild&&n.unpressButton()}},r.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var i=t.filter(function(t){return t.el()===e.target})[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}},r.handleKeyDown=function(e){n.default.isEventKey(e,"Left")||n.default.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(n.default.isEventKey(e,"Right")||n.default.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},r.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},r.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},r.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},i}(Je);Je.registerComponent("Menu",Fn);var Hn=function(e){function i(i,n){var r;void 0===n&&(n={}),(r=e.call(this,i,n)||this).menuButton_=new sn(i,n),r.menuButton_.controlText(r.controlText_),r.menuButton_.el_.setAttribute("aria-haspopup","true");var s=sn.prototype.buildCSSClass();return r.menuButton_.el_.className=r.buildCSSClass()+" "+s,r.menuButton_.removeClass("vjs-control"),r.addChild(r.menuButton_),r.update(),r.enabled_=!0,r.on(r.menuButton_,"tap",r.handleClick),r.on(r.menuButton_,"click",r.handleClick),r.on(r.menuButton_,"keydown",r.handleKeyDown),r.on(r.menuButton_,"mouseenter",function(){r.addClass("vjs-hover"),r.menu.show(),Ce(t.default,"keyup",Oe(nt(r),r.handleMenuKeyUp))}),r.on("mouseleave",r.handleMouseLeave),r.on("keydown",r.handleSubmenuKeyDown),r}Ze(i,e);var r=i.prototype;return r.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},r.createMenu=function(){var e=new Fn(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=B("li",{className:"vjs-menu-title",innerHTML:Xe(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var i=new Je(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},r.createItems=function(){},r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},r.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+sn.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},r.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},r.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},r.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},r.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},r.handleMouseLeave=function(e){this.removeClass("vjs-hover"),Ee(t.default,"keyup",Oe(this,this.handleMenuKeyUp))},r.focus=function(){this.menuButton_.focus()},r.blur=function(){this.menuButton_.blur()},r.handleKeyDown=function(e){n.default.isEventKey(e,"Esc")||n.default.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),n.default.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(n.default.isEventKey(e,"Up")||n.default.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},r.handleMenuKeyUp=function(e){(n.default.isEventKey(e,"Esc")||n.default.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},r.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},r.handleSubmenuKeyDown=function(e){(n.default.isEventKey(e,"Esc")||n.default.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),n.default.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},r.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ct&&M())return;this.menu.focus()}},r.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},r.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},r.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},i}(Je);Je.registerComponent("MenuButton",Hn);var qn=function(e){function t(t,i){var n,r=i.tracks;if((n=e.call(this,t,i)||this).items.length<=1&&n.hide(),!r)return nt(n);var s=Oe(nt(n),n.update);return r.addEventListener("removetrack",s),r.addEventListener("addtrack",s),n.player_.on("ready",s),n.player_.on("dispose",function(){r.removeEventListener("removetrack",s),r.removeEventListener("addtrack",s)}),n}return Ze(t,e),t}(Hn);Je.registerComponent("TrackButton",qn);var Vn=["Tab","Esc","Up","Down","Right","Left"],Wn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).selectable=i.selectable,n.isSelected_=i.selected||!1,n.multiSelectable=i.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}Ze(t,e);var i=t.prototype;return i.createEl=function(t,i,n){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",E({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},i),n)},i.handleKeyDown=function(t){Vn.some(function(e){return n.default.isEventKey(t,e)})||e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){this.selected(!0)},i.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(Xi);Je.registerComponent("MenuItem",Wn);var Gn=function(i){function n(n,r){var s,a=r.track,o=n.textTracks();r.label=a.label||a.language||"Unknown",r.selected="showing"===a.mode,(s=i.call(this,n,r)||this).track=a,s.kinds=(r.kinds||[r.kind||s.track.kind]).filter(Boolean);var l,u=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s.handleTracksChange.apply(nt(s),t)},c=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s.handleSelectedLanguageChange.apply(nt(s),t)};(n.on(["loadstart","texttrackchange"],u),o.addEventListener("change",u),o.addEventListener("selectedlanguagechange",c),s.on("dispose",function(){n.off(["loadstart","texttrackchange"],u),o.removeEventListener("change",u),o.removeEventListener("selectedlanguagechange",c)}),void 0===o.onchange)&&s.on(["tap","click"],function(){if("object"!=typeof e.default.Event)try{l=new e.default.Event("change")}catch(i){}l||(l=t.default.createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(l)});return s.handleTracksChange(),s}Ze(n,i);var r=n.prototype;return r.handleClick=function(e){var t=this.track,n=this.player_.textTracks();if(i.prototype.handleClick.call(this,e),n)for(var r=0;r<n.length;r++){var s=n[r];-1!==this.kinds.indexOf(s.kind)&&(s===t?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled"))}},r.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},r.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},r.dispose=function(){this.track=null,i.prototype.dispose.call(this)},n}(Wn);Je.registerComponent("TextTrackMenuItem",Gn);var zn=function(e){function t(t,i){return i.track={player:t,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,e.call(this,t,i)||this}Ze(t,e);var i=t.prototype;return i.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var s=t[n];if(this.options_.kinds.indexOf(s.kind)>-1&&"showing"===s.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},i.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var s=t[n];if(["captions","descriptions","subtitles"].indexOf(s.kind)>-1&&"showing"===s.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(Gn);Je.registerComponent("OffTextTrackMenuItem",zn);var Kn=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.textTracks(),e.call(this,t,i)||this}return Ze(t,e),t.prototype.createItems=function(e,t){var i;void 0===e&&(e=[]),void 0===t&&(t=Gn),this.label_&&(i=this.label_+" off"),e.push(new zn(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var s=n[r];if(this.kinds_.indexOf(s.kind)>-1){var a=new t(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});a.addClass("vjs-"+s.kind+"-menu-item"),e.push(a)}}return e},t}(qn);Je.registerComponent("TextTrackButton",Kn);var Yn=function(e){function t(t,i){var n,r=i.track,s=i.cue,a=t.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=s.text,i.selected=s.startTime<=a&&a<s.endTime,(n=e.call(this,t,i)||this).track=r,n.cue=s,r.addEventListener("cuechange",Oe(nt(n),n.update)),n}Ze(t,e);var i=t.prototype;return i.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},i.update=function(e){var t=this.cue,i=this.player_.currentTime();this.selected(t.startTime<=i&&i<t.endTime)},t}(Wn);Je.registerComponent("ChaptersTrackMenuItem",Yn);var Xn=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},i.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},i.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},i.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var i=e[t];if(i.kind===this.kind_)return i}},i.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Xe(this.kind_))},i.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},i.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,n=t.length;i<n;i++){var r=t[i],s=new Yn(this.player_,{track:this.track_,cue:r});e.push(s)}return e},t}(Kn);Xn.prototype.kind_="chapters",Xn.prototype.controlText_="Chapters",Je.registerComponent("ChaptersButton",Xn);var $n=function(e){function t(t,i,n){var r;r=e.call(this,t,i,n)||this;var s=t.textTracks(),a=Oe(nt(r),r.handleTracksChange);return s.addEventListener("change",a),r.on("dispose",function(){s.removeEventListener("change",a)}),r}Ze(t,e);var i=t.prototype;return i.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,n=0,r=t.length;n<r;n++){var s=t[n];if(s.kind!==this.kind_&&"showing"===s.mode){i=!0;break}}i?this.disable():this.enable()},i.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Kn);$n.prototype.kind_="descriptions",$n.prototype.controlText_="Descriptions",Je.registerComponent("DescriptionsButton",$n);var Qn=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Kn);Qn.prototype.kind_="subtitles",Qn.prototype.controlText_="Subtitles",Je.registerComponent("SubtitlesButton",Qn);var Jn=function(e){function t(t,i){var n;return i.track={player:t,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(n=e.call(this,t,i)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+i.kind+" settings dialog"),n}return Ze(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(Gn);Je.registerComponent("CaptionSettingsMenuItem",Jn);var Zn=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Jn(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Kn);Zn.prototype.kind_="captions",Zn.prototype.controlText_="Captions",Je.registerComponent("CaptionsButton",Zn);var er=function(e){function t(){return e.apply(this,arguments)||this}return Ze(t,e),t.prototype.createEl=function(t,i,n){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),r+="</span>",e.prototype.createEl.call(this,t,E({innerHTML:r},i),n)},t}(Gn);Je.registerComponent("SubsCapsMenuItem",er);var tr=function(e){function t(t,i){var n;return void 0===i&&(i={}),(n=e.call(this,t,i)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(Xe(n.label_)),n}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Jn(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,er)},t}(Kn);tr.prototype.kinds_=["captions","subtitles"],tr.prototype.controlText_="Subtitles",Je.registerComponent("SubsCapsButton",tr);var ir=function(e){function t(t,i){var n,r=i.track,s=t.audioTracks();i.label=r.label||r.language||"Unknown",i.selected=r.enabled,(n=e.call(this,t,i)||this).track=r,n.addClass("vjs-"+r.kind+"-menu-item");var a=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(nt(n),t)};return s.addEventListener("change",a),n.on("dispose",function(){s.removeEventListener("change",a)}),n}Ze(t,e);var i=t.prototype;return i.createEl=function(t,i,n){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),r+="</span>",e.prototype.createEl.call(this,t,E({innerHTML:r},i),n)},i.handleClick=function(t){var i=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var n=0;n<i.length;n++){var r=i[n];r.enabled=r===this.track}},i.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Wn);Je.registerComponent("AudioTrackMenuItem",ir);var nr=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.audioTracks(),e.call(this,t,i)||this}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var n=t[i];e.push(new ir(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e},t}(qn);nr.prototype.controlText_="Audio Track",Je.registerComponent("AudioTrackButton",nr);var rr=function(e){function t(t,i){var n,r=i.rate,s=parseFloat(r,10);return i.label=r,i.selected=1===s,i.selectable=!0,i.multiSelectable=!1,(n=e.call(this,t,i)||this).label=r,n.rate=s,n.on(t,"ratechange",n.update),n}Ze(t,e);var i=t.prototype;return i.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Wn);rr.prototype.contentElType="button",Je.registerComponent("PlaybackRateMenuItem",rr);var sr=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateVisibility(),n.updateLabel(),n.on(t,"loadstart",n.updateVisibility),n.on(t,"ratechange",n.updateLabel),n}Ze(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=B("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},i.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},i.createMenu=function(){var e=new Fn(this.player()),t=this.playbackRates();if(t)for(var i=t.length-1;i>=0;i--)e.addChild(new rr(this.player(),{rate:t[i]+"x"}));return e},i.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function(e){for(var t=this.player().playbackRate(),i=this.playbackRates(),n=i[0],r=0;r<i.length;r++)if(i[r]>t){n=i[r];break}this.player().playbackRate(n)},i.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},i.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},i.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(Hn);sr.prototype.controlText_="Playback Rate",Je.registerComponent("PlaybackRateMenuButton",sr);var ar=function(e){function t(){return e.apply(this,arguments)||this}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Je);Je.registerComponent("Spacer",ar);var or=function(e){function t(){return e.apply(this,arguments)||this}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(ar);Je.registerComponent("CustomControlSpacer",or);var lr=function(e){function t(){return e.apply(this,arguments)||this}return Ze(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Je);lr.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in t.default&&lr.prototype.options_.children.splice(lr.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Je.registerComponent("ControlBar",lr);var ur=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"error",n.open),n}Ze(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},i.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Gt);ur.prototype.options_=Qe(Gt.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Je.registerComponent("ErrorDisplay",ur);var cr="vjs-text-track-settings",hr=["#000","Black"],dr=["#00F","Blue"],pr=["#0FF","Cyan"],fr=["#0F0","Green"],mr=["#F0F","Magenta"],gr=["#F00","Red"],vr=["#FFF","White"],yr=["#FF0","Yellow"],_r=["1","Opaque"],Tr=["0.5","Semi-Transparent"],br=["0","Transparent"],kr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[hr,vr,gr,fr,dr,yr,mr,pr]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[_r,Tr,br]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[vr,hr,gr,fr,dr,yr,mr,pr]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[_r,Tr]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[br,Tr,_r]}};function Sr(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function Cr(e,t){return Sr(e.options[e.options.selectedIndex].value,t)}function Er(e,t,i){if(t)for(var n=0;n<e.options.length;n++)if(Sr(e.options[n].value,i)===t){e.selectedIndex=n;break}}kr.windowColor.options=kr.backgroundColor.options;var wr=function(t){function i(e,i){var n;return i.temporary=!1,(n=t.call(this,e,i)||this).updateDisplay=Oe(nt(n),n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=B("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===i.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),S(kr,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}Ze(i,t);var n=i.prototype;return n.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},n.createElSelect_=function(e,t,i){var n=this;void 0===t&&(t=""),void 0===i&&(i="label");var r=kr[e],s=r.id.replace("%s",this.id_),a=[t,s].join(" ").trim();return["<"+i+' id="'+s+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(r.label),"</"+i+">",'<select aria-labelledby="'+a+'">'].concat(r.options.map(function(e){var t=s+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+a+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return B("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return B("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return B("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e=this;return C(kr,function(t,i,n){var r=Cr(e.$(i.selector),i.parser);return void 0!==r&&(t[n]=r),t},{})},n.setValues=function(e){var t=this;S(kr,function(i,n){Er(t.$(i.selector),e[n],i.parser)})},n.setDefaults=function(){var e=this;S(kr,function(t){var i=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=i})},n.restoreSettings=function(){var t;try{t=JSON.parse(e.default.localStorage.getItem(cr))}catch(i){_.warn(i)}t&&this.setValues(t)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?e.default.localStorage.setItem(cr,JSON.stringify(t)):e.default.localStorage.removeItem(cr)}catch(i){_.warn(i)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()},i}(Gt);Je.registerComponent("TextTrackSettings",wr);var Pr=function(t){function i(i,n){var r,s=n.ResizeObserver||e.default.ResizeObserver;null===n.ResizeObserver&&(s=!1);var a=Qe({createEl:!s,reportTouchActivity:!1},n);return(r=t.call(this,i,a)||this).ResizeObserver=n.ResizeObserver||e.default.ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=Me(function(){r.resizeHandler()},100,!1,nt(r)),s?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(i.el())):(r.loadListener_=function(){if(r.el_&&r.el_.contentWindow){var e=r.debouncedHandler_,t=r.unloadListener_=function(){Ee(this,"resize",e),Ee(this,"unload",t),t=null};Ce(r.el_.contentWindow,"unload",t),Ce(r.el_.contentWindow,"resize",e)}},r.one("load",r.loadListener_)),r}Ze(i,t);var n=i.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},i}(Je);Je.registerComponent("ResizeManager",Pr);var Lr=function(e){var t=Math.floor(e.length/2),i=[].concat(e).sort(function(e,t){return e-t});return e.length%2!=0?i[t]:(i[t-1]+i[t])/2},Ar=function(e){function i(i,n){var r,s=Qe({createEl:!1},n);return(r=e.call(this,i,s)||this).reset_(),r.on(r.player_,"durationchange",r.handleDurationchange),_t&&"hidden"in t.default&&"visibilityState"in t.default&&r.on(t.default,"visibilitychange",r.handleVisibilityChange),r}Ze(i,e);var n=i.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(t.default.hidden?this.stopTracking():this.startTracking())},n.isBehind_=function(){if(!this.timeupdateSeen_)return!1;var e=this.liveCurrentTime(),t=this.player_.currentTime(),i=2*this.seekableIncrement_+.07;return e!==1/0&&e-i>=t},n.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var e=this.player_.seekable();if(e&&e.length){var t=this.seekableEnd();t!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrementList_=this.seekableIncrementList_.slice(-11),this.seekableIncrementList_.push(Math.abs(t-this.lastSeekEnd_)),this.seekableIncrementList_.length>3&&(this.seekableIncrement_=Lr(this.seekableIncrementList_))),this.pastSeekEnd_=0,this.lastSeekEnd_=t,this.trigger("seekableendchange")),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.player_.duration()===1/0?this.startTracking():this.stopTracking()},n.startTracking=function(){var e=this;this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.timeupdateSeen_||(this.one(this.player_,"play",this.handlePlay),this.handleTimeupdate=function(){e.timeupdateSeen_=!0,e.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},n.reset_=function(){this.pastSeekEnd_=0,this.lastSeekEnd_=null,this.behindLiveEdge_=null,this.timeupdateSeen_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.seekableIncrement_=12,this.seekableIncrementList_=[],this.off(this.player_,"play",this.trackLive_),this.off(this.player_,"pause",this.trackLive_),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.seekToLiveEdge),this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)},n.stopTracking=function(){this.isTracking()&&this.reset_()},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?1/0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){return this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"==typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},n.dispose=function(){this.stopTracking(),e.prototype.dispose.call(this)},i}(Je);Je.registerComponent("LiveTracker",Ar);var Ir=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var i=e.$$("source"),n=[],r="";if(!i.length)return!1;for(var s=0;s<i.length;s++){var a=i[s].src;a&&-1===n.indexOf(a)&&n.push(a)}return!!n.length&&(1===n.length&&(r=n[0]),e.triggerSourceset(r),!0)},xr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(i){var n=t.default.createElement(this.nodeName.toLowerCase());n.innerHTML=i;for(var r=t.default.createDocumentFragment();n.childNodes.length;)r.appendChild(n.childNodes[0]);return this.innerText="",e.default.Element.prototype.appendChild.call(this,r),this.innerHTML}}),Or=function(e,t){for(var i={},n=0;n<e.length&&!((i=Object.getOwnPropertyDescriptor(e[n],t))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i},Dr=function(t){return Or([t.el(),e.default.HTMLMediaElement.prototype,e.default.Element.prototype,xr],"innerHTML")},Mr=function(e){var t=e.el();if(!t.resetSourceWatch_){var i={},n=Dr(e),r=function(i){return function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i.apply(t,r);return Ir(e),a}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){t[e]&&(i[e]=t[e],t[e]=r(i[e]))}),Object.defineProperty(t,"innerHTML",Qe(n,{set:r(n.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(i).forEach(function(e){t[e]=i[e]}),Object.defineProperty(t,"innerHTML",n)},e.one("sourceset",t.resetSourceWatch_)}},Rr=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?oi(e.default.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return e.default.Element.prototype.setAttribute.call(this,"src",t),t}}),Br=function(t){return Or([t.el(),e.default.HTMLMediaElement.prototype,Rr],"src")},Ur=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var i=Br(e),n=t.setAttribute,r=t.load;Object.defineProperty(t,"src",Qe(i,{set:function(n){var r=i.set.call(t,n);return e.triggerSourceset(t.src),r}})),t.setAttribute=function(i,r){var s=n.call(t,i,r);return/src/i.test(i)&&e.triggerSourceset(t.src),s},t.load=function(){var i=r.call(t);return Ir(e)||(e.triggerSourceset(""),Mr(e)),i},t.currentSrc?e.triggerSourceset(t.currentSrc):Ir(e)||Mr(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=r,t.setAttribute=n,Object.defineProperty(t,"src",i),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},jr=function(i){function n(e,t){var n;n=i.call(this,e,t)||this;var r=e.source,s=!1;if(r&&(n.el_.currentSrc!==r.src||e.tag&&3===e.tag.initNetworkState_)?n.setSource(r):n.handleLateInit_(n.el_),e.enableSourceset&&n.setupSourcesetHandling_(),n.el_.hasChildNodes()){for(var a=n.el_.childNodes,o=a.length,l=[];o--;){var u=a[o];"track"===u.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(u),n.remoteTextTracks().addTrack(u.track),n.textTracks().addTrack(u.track),s||n.el_.hasAttribute("crossorigin")||!ui(u.src)||(s=!0)):l.push(u))}for(var c=0;c<l.length;c++)n.el_.removeChild(l[c])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&s&&_.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(St||lt||ft)&&!0===e.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}Ze(n,i);var r=n.prototype;return r.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),n.disposeMediaElement(this.el_),this.options_=null,i.prototype.dispose.call(this)},r.setupSourcesetHandling_=function(){Ur(this)},r.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),i=function(){e=[];for(var i=0;i<t.length;i++){var n=t[i];"metadata"===n.kind&&e.push({track:n,storedMode:n.mode})}};i(),t.addEventListener("change",i),this.on("dispose",function(){return t.removeEventListener("change",i)});var n=function i(){for(var n=0;n<e.length;n++){var r=e[n];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}t.removeEventListener("change",i)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",i),t.removeEventListener("change",n),t.addEventListener("change",n)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",i),t.addEventListener("change",i),t.removeEventListener("change",n)})},r.overrideNative_=function(e,t){var i=this;if(t===this["featuresNative"+e+"Tracks"]){var n=e.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){i.el()[n+"Tracks"].removeEventListener(e,i[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},r.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},r.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},r.proxyNativeTracksForType_=function(e){var t=this,i=bi[e],n=this.el()[i.getterName],r=this[i.getterName]();if(this["featuresNative"+i.capitalName+"Tracks"]&&n&&n.addEventListener){var s={change:function(e){r.trigger({type:"change",target:r,currentTarget:r,srcElement:r})},addtrack:function(e){r.addTrack(e.track)},removetrack:function(e){r.removeTrack(e.track)}},a=function(){for(var e=[],t=0;t<r.length;t++){for(var i=!1,s=0;s<n.length;s++)if(n[s]===r[t]){i=!0;break}i||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[i.getterName+"Listeners_"]=s,Object.keys(s).forEach(function(e){var i=s[e];n.addEventListener(e,i),t.on("dispose",function(t){return n.removeEventListener(e,i)})}),this.on("loadstart",a),this.on("dispose",function(e){return t.off("loadstart",a)})}},r.proxyNativeTracks_=function(){var e=this;bi.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},r.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),n.disposeMediaElement(e),e=i}else{e=t.default.createElement("video");var r=Qe({},this.options_.tag&&W(this.options_.tag));St&&!0===this.options_.nativeControlsForTouch||delete r.controls,V(e,E(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&z(e,"preload",this.options_.preload);for(var s=["loop","muted","playsinline","autoplay"],a=0;a<s.length;a++){var o=s[a],l=this.options_[o];void 0!==l&&(l?z(e,o,o):K(e,o),e[o]=l)}return e},r.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,i=function(){t=!0};this.on("loadstart",i);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",n),t||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),e.readyState>=2&&r.push("loadeddata"),e.readyState>=3&&r.push("canplay"),e.readyState>=4&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},r.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(t){_(t,"Video is not ready. (Video.js)")}},r.duration=function(){var e=this;if(this.el_.duration===1/0&&dt&&vt&&0===this.el_.currentTime){return this.on("timeupdate",function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN}return this.el_.duration||NaN},r.width=function(){return this.el_.offsetWidth},r.height=function(){return this.el_.offsetHeight},r.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",function(){e.off("webkitbeginfullscreen",i),e.off("webkitendfullscreen",t)})}},r.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=e.default.navigator&&e.default.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},r.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},r.exitFullScreen=function(){this.el_.webkitExitFullScreen()},r.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},r.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},r.reset=function(){n.resetMediaElement(this.el_)},r.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},r.setControls=function(e){this.el_.controls=!!e},r.addTextTrack=function(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):i.prototype.addTextTrack.call(this,e,t,n)},r.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return i.prototype.createRemoteTextTrack.call(this,e);var n=t.default.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n},r.addRemoteTextTrack=function(e,t){var n=i.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},r.removeRemoteTextTrack=function(e){if(i.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),n=t.length;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])},r.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),e.default.performance&&"function"==typeof e.default.performance.now?t.creationTime=e.default.performance.now():e.default.performance&&e.default.performance.timing&&"number"==typeof e.default.performance.timing.navigationStart&&(t.creationTime=e.default.Date.now()-e.default.performance.timing.navigationStart),t},n}(Ei);if(O()){jr.TEST_VID=t.default.createElement("video");var Nr=t.default.createElement("track");Nr.kind="captions",Nr.srclang="en",Nr.label="English",jr.TEST_VID.appendChild(Nr)}jr.isSupported=function(){try{jr.TEST_VID.volume=.5}catch(e){return!1}return!(!jr.TEST_VID||!jr.TEST_VID.canPlayType)},jr.canPlayType=function(e){return jr.TEST_VID.canPlayType(e)},jr.canPlaySource=function(e,t){return jr.canPlayType(e.type)},jr.canControlVolume=function(){try{var e=jr.TEST_VID.volume;return jr.TEST_VID.volume=e/2+.1,e!==jr.TEST_VID.volume}catch(t){return!1}},jr.canMuteVolume=function(){try{var e=jr.TEST_VID.muted;return jr.TEST_VID.muted=!e,jr.TEST_VID.muted?z(jr.TEST_VID,"muted","muted"):K(jr.TEST_VID,"muted","muted"),e!==jr.TEST_VID.muted}catch(t){return!1}},jr.canControlPlaybackRate=function(){if(dt&&vt&&yt<58)return!1;try{var e=jr.TEST_VID.playbackRate;return jr.TEST_VID.playbackRate=e/2+.1,e!==jr.TEST_VID.playbackRate}catch(t){return!1}},jr.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(t.default.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(t.default.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(t.default.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(t.default.createElement("audio"),"innerHTML",{get:e,set:e})}catch(i){return!1}return!0},jr.supportsNativeTextTracks=function(){return bt||ct&&vt},jr.supportsNativeVideoTracks=function(){return!(!jr.TEST_VID||!jr.TEST_VID.videoTracks)},jr.supportsNativeAudioTracks=function(){return!(!jr.TEST_VID||!jr.TEST_VID.audioTracks)},jr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],jr.prototype.featuresVolumeControl=jr.canControlVolume(),jr.prototype.featuresMuteControl=jr.canMuteVolume(),jr.prototype.featuresPlaybackRate=jr.canControlPlaybackRate(),jr.prototype.featuresSourceset=jr.canOverrideAttributes(),jr.prototype.movingMediaElementInDOM=!ct,jr.prototype.featuresFullscreenResize=!0,jr.prototype.featuresProgressEvents=!0,jr.prototype.featuresTimeupdateEvents=!0,jr.prototype.featuresNativeTextTracks=jr.supportsNativeTextTracks(),jr.prototype.featuresNativeVideoTracks=jr.supportsNativeVideoTracks(),jr.prototype.featuresNativeAudioTracks=jr.supportsNativeAudioTracks();var Fr=jr.TEST_VID&&jr.TEST_VID.constructor.prototype.canPlayType,Hr=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;jr.patchCanPlayType=function(){pt>=4&&!mt&&!vt&&(jr.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&Hr.test(e)?"maybe":Fr.call(this,e)})},jr.unpatchCanPlayType=function(){var e=jr.TEST_VID.constructor.prototype.canPlayType;return jr.TEST_VID.constructor.prototype.canPlayType=Fr,e},jr.patchCanPlayType(),jr.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(t){}}()}},jr.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){jr.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){jr.prototype["set"+Xe(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){jr.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(e){jr.prototype["set"+Xe(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){jr.prototype[e]=function(){return this.el_[e]()}}),Ei.withSourceHandlers(jr),jr.nativeSourceHandler={},jr.nativeSourceHandler.canPlayType=function(e){try{return jr.TEST_VID.canPlayType(e)}catch(t){return""}},jr.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return jr.nativeSourceHandler.canPlayType(e.type);if(e.src){var i=li(e.src);return jr.nativeSourceHandler.canPlayType("video/"+i)}return""},jr.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},jr.nativeSourceHandler.dispose=function(){},jr.registerSourceHandler(jr.nativeSourceHandler),Ei.registerTech("Html5",jr);var qr=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Vr={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Wr=["tiny","xsmall","small","medium","large","xlarge","huge"],Gr={};Wr.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Gr[e]="vjs-layout-"+t});var zr={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Kr=function(r){function s(e,t,i){var n;if(e.id=e.id||t.id||"vjs_video_"+ye(),(t=E(s.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var a=e.closest("[lang]");a&&a.getAttribute&&(t.language=a.getAttribute("lang"))}else for(var o=e;o&&1===o.nodeType;){if(W(o).hasOwnProperty("lang")){t.language=o.getAttribute("lang");break}o=o.parentNode}if((n=r.call(this,null,t,i)||this).boundDocumentFullscreenChange_=Oe(nt(n),n.documentFullscreenChange_),n.boundFullWindowOnEscKey_=Oe(nt(n),n.fullWindowOnEscKey),n.log=T(n.id_),n.fsApi_=xt,n.isPosterFromTech_=!1,n.queuedCallbacks_=[],n.isReady_=!1,n.hasStarted_=!1,n.userActive_=!1,!n.options_||!n.options_.techOrder||!n.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(n.tag=e,n.tagAttributes=e&&W(e),n.language(n.options_.language),t.languages){var l={};Object.getOwnPropertyNames(t.languages).forEach(function(e){l[e.toLowerCase()]=t.languages[e]}),n.languages_=l}else n.languages_=s.prototype.options_.languages;n.resetCache_(),n.poster_=t.poster||"",n.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),n.changingSrc_=!1,n.playCallbacks_=[],n.playTerminatedQueue_=[],e.hasAttribute("autoplay")?n.autoplay(!0):n.autoplay(n.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(e){if("function"!=typeof n[e])throw new Error('plugin "'+e+'" does not exist')}),n.scrubbing_=!1,n.el_=n.createEl(),Ge(nt(n),{eventBusKey:"el_"}),n.fluid_&&n.on("playerreset",n.updateStyleEl_);var u=Qe(n.options_);t.plugins&&Object.keys(t.plugins).forEach(function(e){n[e](t.plugins[e])}),n.options_.playerOptions=u,n.middleware_=[],n.initChildren(),n.isAudio("audio"===e.nodeName.toLowerCase()),n.controls()?n.addClass("vjs-controls-enabled"):n.addClass("vjs-controls-disabled"),n.el_.setAttribute("role","region"),n.isAudio()?n.el_.setAttribute("aria-label",n.localize("Audio Player")):n.el_.setAttribute("aria-label",n.localize("Video Player")),n.isAudio()&&n.addClass("vjs-audio"),n.flexNotSupported_()&&n.addClass("vjs-no-flex"),St&&n.addClass("vjs-touch-enabled"),ct||n.addClass("vjs-workinghover"),s.players[n.id_]=nt(n);var c=m.split(".")[0];return n.addClass("vjs-v"+c),n.userActive(!0),n.reportUserActivity(),n.one("play",n.listenForUserActivity_),n.on("stageclick",n.handleStageClick_),n.on("keydown",n.handleKeyDown),n.breakpoints(n.options_.breakpoints),n.responsive(n.options_.responsive),n}Ze(s,r);var a=s.prototype;return a.dispose=function(){var e=this;this.trigger("dispose"),this.off("dispose"),Ee(t.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ee(t.default,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),s.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Fi(this),Si.names.forEach(function(t){var i=Si[t],n=e[i.getterName]();n&&n.off&&n.off()}),r.prototype.dispose.call(this)},a.createEl=function(){var i,n=this.tag,s=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),a="video-js"===this.tag.tagName.toLowerCase();s?i=this.el_=n.parentNode:a||(i=this.el_=r.prototype.createEl.call(this,"div"));var o=W(n);if(a){for(i=this.el_=n,n=this.tag=t.default.createElement("video");i.children.length;)n.appendChild(i.firstChild);N(i,"video-js")||F(i,"video-js"),i.appendChild(n),s=this.playerElIngest_=i,Object.keys(i).forEach(function(e){n[e]=i[e]})}if(n.setAttribute("tabindex","-1"),o.tabindex="-1",(_t||vt&&kt)&&(n.setAttribute("role","application"),o.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in o&&delete o.width,"height"in o&&delete o.height,Object.getOwnPropertyNames(o).forEach(function(e){a&&"class"===e||i.setAttribute(e,o[e]),a&&n.setAttribute(e,o[e])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=i.player=this,this.addClass("vjs-paused"),!0!==e.default.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=pe("vjs-styles-dimensions");var l=ae(".vjs-styles-defaults"),u=ae("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var c=n.getElementsByTagName("a"),h=0;h<c.length;h++){var d=c.item(h);F(d,"vjs-hidden"),d.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!s&&n.parentNode.insertBefore(i,n),j(n,i),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=i,i},a.width=function(e){return this.dimension("width",e)},a.height=function(e){return this.dimension("height",e)},a.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?_.error('Improper value "'+t+'" supplied for for '+e):(this[i]=n,this.updateStyleEl_())},a.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,Be(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),Ue(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},a.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},a.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},a.updateStyleEl_=function(){if(!0!==e.default.VIDEOJS_NO_DYNAMIC_STYLE){var t,i,n,r=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),s=r[1]/r[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/s:this.videoWidth()||300,i=void 0!==this.height_?this.height_:t*s,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),fe(this.styleEl_,"\n      ."+n+" {\n        width: "+t+"px;\n        height: "+i+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*s+"%;\n      }\n    ")}else{var a="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();l&&(a>=0&&(l.width=a),o>=0&&(l.height=o))}},a.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_();var n=Xe(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(Ei.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var s={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Si.names.forEach(function(e){var t=Si[e];s[t.getterName]=i[t.privateName]}),E(s,this.options_[n]),E(s,this.options_[r]),E(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);var a=Ei.getTech(e);if(!a)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new a(s),this.tech_.ready(Oe(this,this.handleTechReady_),!0),Vt.jsonToTextTracks(this.textTracksJson_||[],this.tech_),qr.forEach(function(e){i.on(i.tech_,e,i["handleTech"+Xe(e)+"_"])}),Object.keys(Vr).forEach(function(e){i.on(i.tech_,e,function(t){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+Vr[e]+"_"].bind(i),event:t}):i["handleTech"+Vr[e]+"_"](t)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||j(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},a.unloadTech_=function(){var e=this;Si.names.forEach(function(t){var i=Si[t];e[i.privateName]=e[i.getterName]()}),this.textTracksJson_=Vt.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},a.tech=function(e){return void 0===e&&_.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},a.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},a.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},a.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},a.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},a.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var i,n=function(){var e=t.muted();t.muted(!0);var i=function(){t.muted(e)};t.playTerminatedQueue_.push(i);var n=t.play();if(jt(n))return n.catch(i)};if("any"===e&&!0!==this.muted()?jt(i=this.play())&&(i=i.catch(n)):i="muted"===e&&!0!==this.muted()?n():this.play(),jt(i))return i.then(function(){t.trigger({type:"autoplay-success",autoplay:e})}).catch(function(i){t.trigger({type:"autoplay-failure",autoplay:e})})}},a.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,i="";"string"!=typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=Gi(this,t)),this.cache_.source=Qe({},e,{src:t,type:i});for(var n=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),r=[],s=this.$$("source"),a=[],o=0;o<s.length;o++){var l=W(s[o]);r.push(l),l.src&&l.src===t&&a.push(l.src)}a.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},a.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var i=function(e){return t.updateSourceCaches_(e)},n=this.currentSource().src,r=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==n)&&(i=function(){}),i(r),e.src||this.tech_.any(["sourceset","loadstart"],function(e){if("sourceset"!==e.type){var i=t.techGet("currentSrc");t.lastSource_.tech=i,t.updateSourceCaches_(i)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},a.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},a.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},a.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},a.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",function i(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",i))})},a.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},a.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},a.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},a.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},a.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},a.handleTechFirstPlay_=function(){this.options_.starttime&&(_.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},a.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},a.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},a.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},a.handleTechClick_=function(e){re(e)&&this.controls_&&(this.paused()?Nt(this.play()):this.pause())},a.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},a.handleTechTap_=function(){this.userActive(!this.userActive())},a.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},a.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},a.handleTechTouchEnd_=function(e){e.preventDefault()},a.handleStageClick_=function(){this.reportUserActivity()},a.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},a.documentFullscreenChange_=function(e){var i=this.el(),n=t.default[this.fsApi_.fullscreenElement]===i;!n&&i.matches?n=i.matches(":"+this.fsApi_.fullscreen):!n&&i.msMatchesSelector&&(n=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n),!1===this.isFullscreen()&&Ee(t.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed&&this.trigger("fullscreenchange")},a.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},a.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},a.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},a.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},a.handleTechError_=function(){var e=this.tech_.error();this.error(e)},a.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},a.getCache=function(){return this.cache_},a.resetCache_=function(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},a.techCall_=function(e,t){this.ready(function(){if(e in Bi)return Di(this.middleware_,this.tech_,e,t);if(e in Ui)return Mi(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(i){throw _(i),i}},!0)},a.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Ri)return Oi(this.middleware_,this.tech_,e);if(e in Ui)return Mi(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw _("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw _("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw _(t),t}}},a.play=function(){var t=this,i=this.options_.Promise||e.default.Promise;return i?new i(function(e){t.play_(e)}):this.play_()},a.play_=function(e){var t=this;void 0===e&&(e=Nt),this.playCallbacks_.push(e);var i=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(i||!bt&&!ct||this.load());var n=this.techGet_("play");null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)},a.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},a.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})},a.pause=function(){this.techCall_("pause")},a.paused=function(){return!1!==this.techGet_("paused")},a.played=function(){return this.techGet_("played")||Lt(0,0)},a.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},a.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},a.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(e)||this.trigger("durationchange"))},a.remainingTime=function(){return this.duration()-this.currentTime()},a.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},a.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=Lt(0,0)),e},a.bufferedPercent=function(){return At(this.buffered(),this.duration())},a.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return i>t&&(i=t),i},a.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},a.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},a.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},a.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},a.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},a.isFullscreen=function(e){return void 0!==e?(this.isFullscreen_=!!e,void this.toggleFullscreenClass_()):!!this.isFullscreen_},a.requestFullscreen=function(e){var i;this.isFullscreen(!0),this.fsApi_.requestFullscreen?(Ce(t.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed||(i=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(i=e)),Nt(this.el_[this.fsApi_.requestFullscreen](i))):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},a.exitFullscreen=function(){this.isFullscreen(!1),this.fsApi_.requestFullscreen?Nt(t.default[this.fsApi_.exitFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},a.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=t.default.documentElement.style.overflow,Ce(t.default,"keydown",this.boundFullWindowOnEscKey_),t.default.documentElement.style.overflow="hidden",F(t.default.body,"vjs-full-window"),this.trigger("enterFullWindow")},a.fullWindowOnEscKey=function(e){n.default.isEventKey(e,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},a.exitFullWindow=function(){this.isFullWindow=!1,Ee(t.default,"keydown",this.boundFullWindowOnEscKey_),t.default.documentElement.style.overflow=this.docOrigOverflow,H(t.default.body,"vjs-full-window"),this.trigger("exitFullWindow")},a.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},a.requestPictureInPicture=function(){if("pictureInPictureEnabled"in t.default)return this.techGet_("requestPictureInPicture")},a.exitPictureInPicture=function(){if("pictureInPictureEnabled"in t.default)return t.default.exitPictureInPicture()},a.handleKeyDown=function(e){var t=this.options_.userActions;if(t&&t.hotkeys){(function(e){var t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;if("input"===t)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type);return-1!==["textarea"].indexOf(t)})(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}},a.handleHotkeys=function(e){var i=this.options_.userActions?this.options_.userActions.hotkeys:{},r=i.fullscreenKey,s=void 0===r?function(e){return n.default.isEventKey(e,"f")}:r,a=i.muteKey,o=void 0===a?function(e){return n.default.isEventKey(e,"m")}:a,l=i.playPauseKey,u=void 0===l?function(e){return n.default.isEventKey(e,"k")||n.default.isEventKey(e,"Space")}:l;if(s.call(this,e)){e.preventDefault(),e.stopPropagation();var c=Je.getComponent("FullscreenToggle");!1!==t.default[this.fsApi_.fullscreenEnabled]&&c.prototype.handleClick.call(this,e)}else if(o.call(this,e)){e.preventDefault(),e.stopPropagation(),Je.getComponent("MuteToggle").prototype.handleClick.call(this,e)}else if(u.call(this,e)){e.preventDefault(),e.stopPropagation(),Je.getComponent("PlayToggle").prototype.handleClick.call(this,e)}},a.canPlayType=function(e){for(var t,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],s=Ei.getTech(r);if(s||(s=Je.getComponent(r)),s){if(s.isSupported()&&(t=s.canPlayType(e)))return t}else _.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},a.selectSource=function(e){var t,i=this,n=this.options_.techOrder.map(function(e){return[e,Ei.getTech(e)]}).filter(function(e){var t=e[0],i=e[1];return i?i.isSupported():(_.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(e,t,i){var n;return e.some(function(e){return t.some(function(t){if(n=i(e,t))return!0})}),n},s=function(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}};return(this.options_.sourceOrder?r(e,n,(t=s,function(e,i){return t(i,e)})):r(n,e,s))||!1},a.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";var i=zi(e);i.length?(this.changingSrc_=!0,this.cache_.sources=i,this.updateSourceCaches_(i[0]),Ii(this,i[0],function(e,n){if(t.middleware_=n,t.cache_.sources=i,t.updateSourceCaches_(e),t.src_(e))return i.length>1?t.src(i.slice(1)):(t.changingSrc_=!1,t.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void t.triggerReady());xi(n,t.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},a.src_=function(e){var t=this,i=this.selectSource([e]);return!i||($e(i.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(function(){t.changingSrc_=!1}),!1))},a.load=function(){this.techCall_("load")},a.reset=function(){var t=this,i=this.options_.Promise||e.default.Promise;this.paused()||!i?this.doReset_():Nt(this.play().then(function(){return t.doReset_()}))},a.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Be(this)&&this.trigger("playerreset")},a.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},a.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,i=e.remainingTimeDisplay;t&&t.updateContent(),i&&i.updateContent()},a.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},a.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},a.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},a.currentSource=function(){return this.cache_.source||{}},a.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},a.currentType=function(){return this.currentSource()&&this.currentSource().type||""},a.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},a.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},a.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},a.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},a.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},a.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},a.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},a.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},a.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&e.message&&e.message===this.localize(this.options_.notSupportedMessage)){var t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Bt(e),this.addClass("vjs-error"),_.error("(CODE:"+this.error_.code+" "+Bt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},a.reportUserActivity=function(e){this.userActivity_=!0},a.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},a.listenForUserActivity_=function(){var e,t,i,n=Oe(this,this.reportUserActivity);this.on("mousedown",function(){n(),this.clearInterval(e),e=this.setInterval(n,250)}),this.on("mousemove",function(e){e.screenX===t&&e.screenY===i||(t=e.screenX,i=e.screenY,n())}),this.on("mouseup",function(t){n(),this.clearInterval(e)});var r,s=this.getChild("controlBar");!s||ct||dt||(s.on("mouseenter",function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),s.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",n),this.on("keyup",n),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(r);var e=this.options_.inactivityTimeout;e<=0||(r=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},a.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},a.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},a.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},a.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},a.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},a.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},a.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},a.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},a.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},a.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},a.languages=function(){return Qe(s.prototype.options_.languages,this.languages_)},a.toJSON=function(){var e=Qe(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var n=t[i];(n=Qe(n)).player=void 0,e.tracks[i]=n}return e},a.createModal=function(e,t){var i=this;(t=t||{}).content=e||"";var n=new Gt(this,t);return this.addChild(n),n.on("dispose",function(){i.removeChild(n)}),n.open(),n},a.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),i=0;i<Wr.length;i++){var n=Wr[i];if(t<=this.breakpoints_[n]){if(e===n)return;e&&this.removeClass(Gr[e]),this.addClass(Gr[n]),this.breakpoint_=n;break}}},a.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},a.breakpoints=function(e){return void 0===e?E(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=E({},zr,e),this.updateCurrentBreakpoint_(),E(this.breakpoints_))},a.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},a.currentBreakpoint=function(){return this.breakpoint_},a.currentBreakpointClass=function(){return Gr[this.breakpoint_]||""},a.loadMedia=function(e,t){var i=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=Qe(e);var n=this.cache_.media,r=n.artwork,s=n.poster,a=n.src,o=n.textTracks;!r&&s&&(this.cache_.media.artwork=[{src:s,type:Wi(s)}]),a&&this.src(a),s&&this.poster(s),Array.isArray(o)&&o.forEach(function(e){return i.addRemoteTextTrack(e,!1)}),this.ready(t)}},a.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Wi(t.poster)}]),t}return Qe(this.cache_.media)},s.getTagSettings=function(e){var t={sources:[],tracks:[]},n=W(e),r=n["data-setup"];if(N(e,"vjs-fill")&&(n.fill=!0),N(e,"vjs-fluid")&&(n.fluid=!0),null!==r){var s=(0,i.default)(r||"{}"),a=s[0],o=s[1];a&&_.error(a),E(n,o)}if(E(t,n),e.hasChildNodes())for(var l=e.childNodes,u=0,c=l.length;u<c;u++){var h=l[u],d=h.nodeName.toLowerCase();"source"===d?t.sources.push(W(h)):"track"===d&&t.tracks.push(W(h))}return t},a.flexNotSupported_=function(){var e=t.default.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},s}(Je);Si.names.forEach(function(e){var t=Si[e];Kr.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Kr.players={};var Yr=e.default.navigator;Kr.prototype.options_={techOrder:Ei.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Yr&&(Yr.languages&&Yr.languages[0]||Yr.userLanguage||Yr.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Kr.prototype[e]=function(){return this.techGet_(e)}}),qr.forEach(function(e){Kr.prototype["handleTech"+Xe(e)+"_"]=function(){return this.trigger(e)}}),Je.registerComponent("Player",Kr);var Xr="plugin",$r="activePlugins_",Qr={},Jr=function(e){return Qr.hasOwnProperty(e)},Zr=function(e){return Jr(e)?Qr[e]:void 0},es=function(e,t){e[$r]=e[$r]||{},e[$r][t]=!0},ts=function(e,t,i){var n=(i?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)},is=function(e,t){var i=function(){ts(this,{name:e,plugin:t,instance:null},!0);var i=t.apply(this,arguments);return es(this,e),ts(this,{name:e,plugin:t,instance:i}),i};return Object.keys(t).forEach(function(e){i[e]=t[e]}),i},ns=function(e,t){return t.prototype.name=e,function(){ts(this,{name:e,plugin:t,instance:null},!0);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var s=it(t,[this].concat(n));return this[e]=function(){return s},ts(this,s.getEventHash()),s}},rs=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,Ge(this),delete this.trigger,Ke(this,this.constructor.defaultState),es(t,this.name),this.dispose=Oe(this,this.dispose),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),we(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[$r][e]=!1,this.player=this.state=null,t[e]=ns(e,Qr[e])},e.isBasic=function(t){var i="string"==typeof t?Zr(t):t;return"function"==typeof i&&!e.prototype.isPrototypeOf(i.prototype)},e.registerPlugin=function(t,i){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(Jr(t))_.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Kr.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof i)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof i+".");return Qr[t]=i,t!==Xr&&(e.isBasic(i)?Kr.prototype[t]=is(t,i):Kr.prototype[t]=ns(t,i)),i},e.deregisterPlugin=function(e){if(e===Xr)throw new Error("Cannot de-register base plugin.");Jr(e)&&(delete Qr[e],delete Kr.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(Qr)),e.forEach(function(e){var i=Zr(e);i&&((t=t||{})[e]=i)}),t},e.getPluginVersion=function(e){var t=Zr(e);return t&&t.VERSION||""},e}();rs.getPlugin=Zr,rs.BASE_PLUGIN_NAME=Xr,rs.registerPlugin(Xr,rs),Kr.prototype.usingPlugin=function(e){return!!this[$r]&&!0===this[$r][e]},Kr.prototype.hasPlugin=function(e){return!!Jr(e)};var ss=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},as=function(e,t){void 0===t&&(t={});var i=function(){e.apply(this,arguments)},n={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),n=t):"function"==typeof t&&(i=t),ss(i,e),n)n.hasOwnProperty(r)&&(i.prototype[r]=n[r]);return i},os=function(e){return 0===e.indexOf("#")?e.slice(1):e};function ls(e,t,i){var n=ls.getPlayer(e);if(n)return t&&_.warn('Player "'+e+'" is already initialised. Options will not be applied.'),i&&n.ready(i),n;var r="string"==typeof e?ae("#"+os(e)):e;if(!D(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||_.warn("The element supplied is not included in the DOM"),t=t||{},ls.hooks("beforesetup").forEach(function(e){var i=e(r,Qe(t));w(i)&&!Array.isArray(i)?t=Qe(t,i):_.error("please return an object in beforesetup hooks")});var s=Je.getComponent("Player");return n=new s(r,t,i),ls.hooks("setup").forEach(function(e){return e(n)}),n}if(ls.hooks_={},ls.hooks=function(e,t){return ls.hooks_[e]=ls.hooks_[e]||[],t&&(ls.hooks_[e]=ls.hooks_[e].concat(t)),ls.hooks_[e]},ls.hook=function(e,t){ls.hooks(e,t)},ls.hookOnce=function(e,t){ls.hooks(e,[].concat(t).map(function(t){return function i(){return ls.removeHook(e,i),t.apply(void 0,arguments)}}))},ls.removeHook=function(e,t){var i=ls.hooks(e).indexOf(t);return!(i<=-1)&&(ls.hooks_[e]=ls.hooks_[e].slice(),ls.hooks_[e].splice(i,1),!0)},!0!==e.default.VIDEOJS_NO_DYNAMIC_STYLE&&O()){var us=ae(".vjs-styles-defaults");if(!us){us=pe("vjs-styles-defaults");var cs=ae("head");cs&&cs.insertBefore(us,cs.firstChild),fe(us,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}he(1,ls),ls.VERSION=m,ls.options=Kr.prototype.options_,ls.getPlayers=function(){return Kr.players},ls.getPlayer=function(e){var t,i=Kr.players;if("string"==typeof e){var n=os(e),r=i[n];if(r)return r;t=ae("#"+n)}else t=e;if(D(t)){var s=t,a=s.player,o=s.playerId;if(a||i[o])return a||i[o]}},ls.getAllPlayers=function(){return Object.keys(Kr.players).map(function(e){return Kr.players[e]}).filter(Boolean)},ls.players=Kr.players,ls.getComponent=Je.getComponent,ls.registerComponent=function(e,t){Ei.isTech(t)&&_.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Je.registerComponent.call(Je,e,t)},ls.getTech=Ei.getTech,ls.registerTech=Ei.registerTech,ls.use=Ai,Object.defineProperty(ls,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(ls.middleware,"TERMINATOR",{value:Li,writeable:!1,enumerable:!0}),ls.browser=Ct,ls.TOUCH_ENABLED=St,ls.extend=as,ls.mergeOptions=Qe,ls.bind=Oe,ls.registerPlugin=rs.registerPlugin,ls.deregisterPlugin=rs.deregisterPlugin,ls.plugin=function(e,t){return _.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),rs.registerPlugin(e,t)},ls.getPlugins=rs.getPlugins,ls.getPlugin=rs.getPlugin,ls.getPluginVersion=rs.getPluginVersion,ls.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),ls.options.languages=Qe(ls.options.languages,((i={})[e]=t,i)),ls.options.languages[e]},ls.log=_,ls.createLogger=T,ls.createTimeRange=ls.createTimeRanges=Lt,ls.formatTime=pn,ls.setFormatTime=hn,ls.resetFormatTime=dn,ls.parseUrl=ai,ls.isCrossOrigin=ui,ls.EventTarget=Re,ls.on=Ce,ls.one=Pe,ls.off=Ee,ls.trigger=we,ls.xhr=r.default,ls.TextTrack=pi,ls.AudioTrack=fi,ls.VideoTrack=mi,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){ls[e]=function(){return _.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),le[e].apply(null,arguments)}}),ls.computedStyle=L,ls.dom=le,ls.url=ci;var hs=function(t,i){return/^[a-z]+:/i.test(i)?i:(/\/\//i.test(t)||(t=a.default.buildAbsoluteURL(e.default.location.href,t)),a.default.buildAbsoluteURL(t,i))},ds=function(e,t,i){return e&&i.responseURL&&t!==i.responseURL?i.responseURL:t},ps=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},fs=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),ms=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0},gs=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},vs=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},ys=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(l){r=!0,s=l}finally{try{!n&&o.return&&o.return()}finally{if(r)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_s=ls.mergeOptions,Ts=ls.EventTarget,bs=ls.log,ks=function(e,t){["AUDIO","SUBTITLES"].forEach(function(i){for(var n in e.mediaGroups[i])for(var r in e.mediaGroups[i][n]){var s=e.mediaGroups[i][n][r];t(s,i,n,r)}})},Ss=function(e,t,i){var n=t.slice();i=i||0;for(var r=Math.min(e.length,t.length+i),s=i;s<r;s++)n[s-i]=_s(e[s],n[s-i]);return n},Cs=function(e,t){e.resolvedUri||(e.resolvedUri=hs(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=hs(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=hs(t,e.map.uri))},Es=function(e,t){var i=_s(e,{}),n=i.playlists[t.uri];if(!n)return null;if(n.segments&&t.segments&&n.segments.length===t.segments.length&&n.endList===t.endList&&n.mediaSequence===t.mediaSequence)return null;var r=_s(n,t);n.segments&&(r.segments=Ss(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),r.segments.forEach(function(e){Cs(e,r.resolvedUri)});for(var s=0;s<i.playlists.length;s++)i.playlists[s].uri===t.uri&&(i.playlists[s]=r);return i.playlists[t.uri]=r,i},ws=function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];e.playlists[i.uri]=i,i.resolvedUri=hs(e.uri,i.uri),i.id=t,i.attributes||(i.attributes={},bs.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},Ps=function(e){ks(e,function(t){t.uri&&(t.resolvedUri=hs(e.uri,t.uri))})},Ls=function(e,t){var i=e.segments[e.segments.length-1];return t&&i&&i.duration?1e3*i.duration:500*(e.targetDuration||10)},As=function(t){function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ps(this,i);var r=vs(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),s=n.withCredentials,a=void 0!==s&&s,o=n.handleManifestRedirects,l=void 0!==o&&o;r.srcUrl=e,r.hls_=t,r.withCredentials=a,r.handleManifestRedirects=l;var u=t.options_;if(r.customTagParsers=u&&u.customTagParsers||[],r.customTagMappers=u&&u.customTagMappers||[],!r.srcUrl)throw new Error("A non-empty playlist URL is required");return r.state="HAVE_NOTHING",r.on("mediaupdatetimeout",function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",r.request=r.hls_.xhr({uri:hs(r.master.uri,r.media().uri),withCredentials:r.withCredentials},function(e,t){if(r.request)return e?r.playlistRequestError(r.request,r.media().uri,"HAVE_METADATA"):void r.haveMetadata(r.request,r.media().uri)}))}),r}return gs(i,Ts),fs(i,[{key:"playlistRequestError",value:function(e,t,i){this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(t,i){var n=this;this.request=null,this.state="HAVE_METADATA";var r=new o.Parser;this.customTagParsers.forEach(function(e){return r.addParser(e)}),this.customTagMappers.forEach(function(e){return r.addTagMapper(e)}),r.push(t.responseText),r.end(),r.manifest.uri=i,r.manifest.attributes=r.manifest.attributes||{};var s=Es(this.master,r.manifest);this.targetDuration=r.manifest.targetDuration,s?(this.master=s,this.media_=this.master.playlists[r.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(e.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=e.default.setTimeout(function(){n.trigger("mediaupdatetimeout")},Ls(this.media(),!!s))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),e.default.clearTimeout(this.mediaUpdateTimeout),e.default.clearTimeout(this.finalRenditionTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(t,i){var n=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(e.default.clearTimeout(this.finalRenditionTimeout),i){var r=t.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=e.default.setTimeout(this.media.bind(this,t,!1),r)}else{var s=this.state,a=!this.media_||t.uri!==this.media_.uri;if(this.master.playlists[t.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(a&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(a){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},function(e,i){if(n.request){if(t.resolvedUri=ds(n.handleManifestRedirects,t.resolvedUri,i),e)return n.playlistRequestError(n.request,t.uri,s);n.haveMetadata(i,t.uri),"HAVE_MASTER"===s?n.trigger("loadedmetadata"):n.trigger("mediachange")}})}}}},{key:"pause",value:function(){this.stopRequest(),e.default.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(t){var i=this;e.default.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(t){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=e.default.setTimeout(function(){return i.load()},r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var t=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,n){if(t.request){if(t.request=null,i)return t.error={status:n.status,message:"HLS playlist request error at URL: "+t.srcUrl+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");var r=new o.Parser;return t.customTagParsers.forEach(function(e){return r.addParser(e)}),t.customTagMappers.forEach(function(e){return r.addTagMapper(e)}),r.push(n.responseText),r.end(),t.state="HAVE_MASTER",t.srcUrl=ds(t.handleManifestRedirects,t.srcUrl,n),r.manifest.uri=t.srcUrl,r.manifest.playlists?(t.master=r.manifest,ws(t.master),Ps(t.master),t.trigger("loadedplaylist"),void(t.request||t.media(r.manifest.playlists[0]))):(t.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:e.default.location.href,playlists:[{uri:t.srcUrl,id:0,resolvedUri:t.srcUrl,attributes:{}}]},t.master.playlists[t.srcUrl]=t.master.playlists[0],t.haveMetadata(n,t.srcUrl),t.trigger("loadedmetadata"))}})}}]),i}(),Is=ls.createTimeRange,xs=function(e,t){var i=0,n=t-e.mediaSequence,r=e.segments[n];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if(void 0!==(r=e.segments[n]).end)return{result:i+r.end,precise:!0};if(i+=r.duration,void 0!==r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}},Os=function(e,t){for(var i=0,n=void 0,r=t-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(n=e.segments[r]).start)return{result:n.start-i,precise:!0};if(i+=n.duration,void 0!==n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}},Ds=function(e,t,i){var n,r;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(n=xs(e,t)).precise?n.result:(r=Os(e,t)).precise?r.result:n.result+i},Ms=function(t,i,n){if(!t)return 0;if("number"!=typeof n&&(n=0),void 0===i){if(t.totalDuration)return t.totalDuration;if(!t.endList)return e.default.Infinity}return Ds(t,i,n)},Rs=function(e,t,i){var n=0;if(t>i){var r=[i,t];t=r[0],i=r[1]}if(t<0){for(var s=t;s<Math.min(0,i);s++)n+=e.targetDuration;t=0}for(var a=t;a<i;a++)n+=e.segments[a].duration;return n},Bs=function(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,i=e.segments[t].duration||e.targetDuration,n=i+2*e.targetDuration;t--&&!((i+=e.segments[t].duration)>=n););return Math.max(0,t)},Us=function(e,t,i){if(!e||!e.segments)return null;if(e.endList)return Ms(e);if(null===t)return null;t=t||0;var n=i?Bs(e):e.segments.length;return Ds(e,e.mediaSequence+n,t)},js=function(e,t){var i=t||0,n=Us(e,t,!0);return null===n?Is():Is(i,n)},Ns=function(e){return e-Math.floor(e)==0},Fs=function(e,t){if(Ns(t))return t+.1*e;for(var i=t.toString().split(".")[1].length,n=1;n<=i;n++){var r=Math.pow(10,n),s=t*r;if(Ns(s)||n===i)return(s+e)/r}},Hs=Fs.bind(null,1),qs=Fs.bind(null,-1),Vs=function(e,t,i,n){var r=void 0,s=void 0,a=e.segments.length,o=t-n;if(o<0){if(i>0)for(r=i-1;r>=0;r--)if(s=e.segments[r],(o+=qs(s.duration))>0)return{mediaIndex:r,startTime:n-Rs(e,i,r)};return{mediaIndex:0,startTime:t}}if(i<0){for(r=i;r<0;r++)if((o-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};i=0}for(r=i;r<a;r++)if(s=e.segments[r],(o-=Hs(s.duration))<0)return{mediaIndex:r,startTime:n+Rs(e,i,r)};return{mediaIndex:a-1,startTime:t}},Ws=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Gs=function(e){return e.excludeUntil&&e.excludeUntil===1/0},zs=function(e){var t=Ws(e);return!e.disabled&&!t},Ks=function(e){return e.disabled},Ys=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},Xs=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},$s=function(e,t){return t.attributes&&t.attributes[e]},Qs=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return $s("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*n)/t:NaN},Js=function(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!zs(e)&&(e.attributes.BANDWIDTH||0)<i}).length},Zs={duration:Ms,seekable:js,safeLiveIndex:Bs,getMediaInfoForTime:Vs,isEnabled:zs,isDisabled:Ks,isBlacklisted:Ws,isIncompatible:Gs,playlistEnd:Us,isAes:Ys,isFmp4:Xs,hasAttribute:$s,estimateSegmentRequestTime:Qs,isLowestEnabledRendition:Js},ea=ls.xhr,ta=ls.mergeOptions,ia=function(){return function e(t,i){t=ta({timeout:45e3},t);var n=e.beforeRequest||ls.Hls.xhr.beforeRequest;if(n&&"function"==typeof n){var r=n(t);r&&(t=r)}var s=ea(t,function(e,t){var n=s.response;!e&&n&&(s.responseTime=Date.now(),s.roundTripTime=s.responseTime-s.requestTime,s.bytesReceived=n.byteLength||n.length,s.bandwidth||(s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3))),t.headers&&(s.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(s.timedout=!0),e||s.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(s&&(n||s.responseText)))),i(e,s)}),a=s.abort;return s.abort=function(){return s.aborted=!0,a.apply(s,arguments)},s.uri=t.uri,s.requestTime=Date.now(),s}},na=function(e){var t;return t=e.offset+e.length-1,"bytes="+e.offset+"-"+t},ra=function(e){var t={};return e.byterange&&(t.Range=na(e.byterange)),t},sa=function(e,t){return e.start(t)+"-"+e.end(t)},aa=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},oa=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},la=function(e){var t={};return Object.keys(e).forEach(function(i){var n=e[i];ArrayBuffer.isView(n)?t[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[i]=n}),t},ua=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},ca=function(e){return e.resolvedUri},ha=function(e){for(var t=Array.prototype.slice.call(e),i="",n=0;n<t.length/16;n++)i+=t.slice(16*n,16*n+16).map(aa).join("")+" "+t.slice(16*n,16*n+16).map(oa).join("")+"\n";return i},da=function(e){var t=e.bytes;return ha(t)},pa=function(e){var t="",i=void 0;for(i=0;i<e.length;i++)t+=sa(e,i)+" ";return t},fa=Object.freeze({createTransferableMessage:la,initSegmentId:ua,segmentKeyId:ca,hexDump:ha,tagDump:da,textRanges:pa}),ma=.25,ga=function(e,t){if(!t.dateTimeObject)return null;var i=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+i);return new Date(t.dateTimeObject.getTime()+1e3*n)},va=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},ya=function(e,t){var i=void 0;try{i=new Date(e)}catch(l){return null}if(!t||!t.segments||0===t.segments.length)return null;var n=t.segments[0];if(i<n.dateTimeObject)return null;for(var r=0;r<t.segments.length-1;r++){if(n=t.segments[r],i<t.segments[r+1].dateTimeObject)break}var s=t.segments[t.segments.length-1],a=s.dateTimeObject,o=s.videoTimingInfo?va(s.videoTimingInfo):s.duration+s.duration*ma;return i>new Date(a.getTime()+1e3*o)?null:(i>a&&(n=s),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Zs.duration(t,t.mediaSequence+t.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},_a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var i=0,n=void 0,r=0;r<t.segments.length&&!(e<=(i=(n=t.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);var s=t.segments[t.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+s.duration*ma)return null;n=s}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},Ta=function(e,t){var i=void 0,n=void 0;try{i=new Date(e),n=new Date(t)}catch(s){}var r=i.getTime();return(n.getTime()-r)/1e3},ba=function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++){if(!e.segments[t].dateTimeObject)return!1}return!0},ka=function(e){var t=e.playlist,i=e.time,n=void 0===i?void 0:i,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===n)return r({message:"getProgramTime: playlist and time must be provided"});var s=_a(n,t);if(!s)return r({message:"valid programTime was not found"});if("estimate"===s.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var a={mediaSeconds:n},o=ga(n,s.segment);return o&&(a.programDateTime=o.toISOString()),r(null,a)},Sa=function e(t){var i=t.programTime,n=t.playlist,r=t.retryCount,s=void 0===r?2:r,a=t.seekTo,o=t.pauseAfterSeek,l=void 0===o||o,u=t.tech,c=t.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(void 0===i||!n||!a)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!ba(n))return c({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var h=ya(i,n);if(!h)return c({message:i+" was not found in the stream"});var d=h.segment,p=Ta(d.dateTimeObject,i);if("estimate"===h.type)return 0===s?c({message:i+" is not buffered yet. Try again"}):(a(h.estimatedStart+p),void u.one("seeked",function(){e({programTime:i,playlist:n,retryCount:s-1,seekTo:a,pauseAfterSeek:l,tech:u,callback:c})}));var f=d.start+p;u.one("seeked",function(){return c(null,u.currentTime())}),l&&u.pause(),a(f)},Ca=1/30,Ea=3*Ca,wa=function(e,t){var i=[],n=void 0;if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return ls.createTimeRanges(i)},Pa=function(e,t){return wa(e,function(e,i){return e-Ea<=t&&i+Ea>=t})},La=function(e,t){return wa(e,function(e){return e-Ca>=t})},Aa=function(e){if(e.length<2)return ls.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var n=e.end(i-1),r=e.start(i);t.push([n,r])}return ls.createTimeRanges(t)},Ia=function(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},xa=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return((e.length?e.end(e.length-1):0)-t)/i},Oa=function(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t},Da=function(e,t,i){var n=t.player_;if(i.captions&&i.captions.length)for(var r in e.inbandTextTracks_||(e.inbandTextTracks_={}),i.captionStreams)if(!e.inbandTextTracks_[r]){n.tech_.trigger({type:"usage",name:"hls-608"});var s=n.textTracks().getTrackById(r);e.inbandTextTracks_[r]=s||n.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}i.metadata&&i.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType)},Ma=function(e,t,i){var n=void 0,r=void 0;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime<=t&&r.endTime>=e&&i.removeCue(r)},Ra=function(e){Object.defineProperties(e.frame,{id:{get:function(){return ls.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return ls.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return ls.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},Ba=function(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e},Ua=function(t,i,n){var r=e.default.WebKitDataCue||e.default.VTTCue;if(i&&i.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},t),n){var s=Ba(t.mediaSource_.duration);if(n.forEach(function(t){var i=t.cueTime+this.timestampOffset;!("number"!=typeof i||e.default.isNaN(i)||i<0)&&i<1/0&&t.frames.forEach(function(e){var t=new r(i,i,e.value||e.url||e.data||"");t.frame=e,t.value=e,Ra(t),this.metadataTrack_.addCue(t)},this)},t),t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){for(var a=t.metadataTrack_.cues,o=[],l=0;l<a.length;l++)a[l]&&o.push(a[l]);var u=o.reduce(function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e},{}),c=Object.keys(u).sort(function(e,t){return Number(e)-Number(t)});c.forEach(function(e,t){var i=u[e],n=Number(c[t+1])||s;i.forEach(function(e){e.endTime=n})})}}},ja="undefined"!=typeof window?window:{},Na="undefined"==typeof Symbol?"__target":Symbol(),Fa="application/javascript",Ha=ja.BlobBuilder||ja.WebKitBlobBuilder||ja.MozBlobBuilder||ja.MSBlobBuilder,qa=ja.URL||ja.webkitURL||qa&&qa.msURL,Va=ja.Worker;function Wa(e,t){return function(i){var n=this;if(!t)return new Va(e);if(Va&&!i){var r=Ya(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[Na]=new Va(r),Xa(this[Na],r),this[Na]}var s={postMessage:function(e){n.onmessage&&setTimeout(function(){n.onmessage({data:e,target:s})})}};t.call(s),this.postMessage=function(e){setTimeout(function(){s.onmessage({data:e,target:n})})},this.isThisThread=!0}}if(Va){var Ga,za=Ya("self.onmessage = function () {}"),Ka=new Uint8Array(1);try{(Ga=new Va(za)).postMessage(Ka,[Ka.buffer])}catch(su){Va=null}finally{qa.revokeObjectURL(za),Ga&&Ga.terminate()}}function Ya(e){try{return qa.createObjectURL(new Blob([e],{type:Fa}))}catch(su){var t=new Ha;return t.append(e),qa.createObjectURL(t.getBlob(type))}}function Xa(e,t){if(e&&t){var i=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&qa.revokeObjectURL(e.objURL),i.call(e)}}}var $a=new Wa("./transmuxer-worker.worker.js",function(e,t){var i=this;!function(){var e=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var i,n,r,s;if(i=e[t])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(s=[],n=arguments.length,n=1;n<arguments.length;++n)s.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,s)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,n,r,s,a,o,l,u,c,h,d,p,f,m,g,v,y,_,T,b,k,S,C,E,w,P,L,A,I,x,O,D,M,R,B,U,j,N,F,H,q=e,V=Math.pow(2,32)-1;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),w=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),E=new Uint8Array([0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:P,audio:L},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),x=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),M=D,R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),B=D,I=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,i,n=[],r=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)r+=n[t].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(e,4),t=0,r=8;t<n.length;t++)i.set(n[t],r),r+=n[t].byteLength;return i},n=function(){return t(S.dinf,t(S.dref,O))},r=function(e){return t(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return t(S.hdlr,A[e])},m=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(i[12]=e.samplerate>>>24&255,i[13]=e.samplerate>>>16&255,i[14]=e.samplerate>>>8&255,i[15]=255&e.samplerate),t(S.mdhd,i)},f=function(e){return t(S.mdia,m(e),g(e.type),o(e))},a=function(e){return t(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(e){return t(S.minf,"video"===e.type?t(S.vmhd,I):t(S.smhd,x),n(),y(e))},l=function(e,i){for(var n=[],r=i.length;r--;)n[r]=T(i[r]);return t.apply(null,[S.moof,a(e)].concat(n))},u=function(e){for(var i=e.length,n=[];i--;)n[i]=d(e[i]);return t.apply(null,[S.moov,h(4294967295)].concat(n).concat(c(e)))},c=function(e){for(var i=e.length,n=[];i--;)n[i]=b(e[i]);return t.apply(null,[S.mvex].concat(n))},h=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(S.mvhd,i)},v=function(e){var i,n,r=e.samples||[],s=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,s[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t(S.sdtp,s)},y=function(e){return t(S.stbl,_(e),t(S.stts,B),t(S.stsc,M),t(S.stsz,R),t(S.stco,D))},_=function(e){return t(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):j(e))},U=function(e){var i,n,r=e.sps||[],s=e.pps||[],a=[],o=[];for(i=0;i<r.length;i++)a.push((65280&r[i].byteLength)>>>8),a.push(255&r[i].byteLength),a=a.concat(Array.prototype.slice.call(r[i]));for(i=0;i<s.length;i++)o.push((65280&s[i].byteLength)>>>8),o.push(255&s[i].byteLength),o=o.concat(Array.prototype.slice.call(s[i]));if(n=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],a,[s.length],o))),t(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],u=e.sarRatio[1];n.push(t(S.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return t.apply(null,n)},j=function(e){return t(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},p=function(e){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(S.tkhd,i)},T=function(e){var i,n,r,s,a,o;return i=t(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/(V+1)),o=Math.floor(e.baseMediaDecodeTime%(V+1)),n=t(S.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),92,"audio"===e.type?(r=k(e,92),t(S.traf,i,n,r)):(s=v(e),r=k(e,s.length+92),t(S.traf,i,n,r,s))},d=function(e){return e.duration=e.duration||4294967295,t(S.trak,p(e),f(e))},b=function(e){var i=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(i[i.length-1]=0),t(S.trex,i)},H=function(e,t){var i=0,n=0,r=0,s=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(s=8)),[0,0,i|n|r|s,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},F=function(e,i){var n,r,s,a;for(i+=20+16*(r=e.samples||[]).length,n=H(r,i),a=0;a<r.length;a++)s=r[a],n=n.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size,s.flags.isLeading<<2|s.flags.dependsOn,s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,61440&s.flags.degradationPriority,15&s.flags.degradationPriority,(4278190080&s.compositionTimeOffset)>>>24,(16711680&s.compositionTimeOffset)>>>16,(65280&s.compositionTimeOffset)>>>8,255&s.compositionTimeOffset]);return t(S.trun,new Uint8Array(n))},N=function(e,i){var n,r,s,a;for(i+=20+8*(r=e.samples||[]).length,n=H(r,i),a=0;a<r.length;a++)s=r[a],n=n.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size]);return t(S.trun,new Uint8Array(n))},k=function(e,t){return"audio"===e.type?N(e,t):F(e,t)};s=function(){return t(S.ftyp,C,E,C,w)};var W,G,z,K,Y,X,$,Q,J=function(e){return t(S.mdat,e)},Z=l,ee=function(e){var t,i=s(),n=u(e);return(t=new Uint8Array(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t},te=function(e,t){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=4*e.length,i.size+=e.byteLength,e.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},ie=function(e){var t,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,n.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},ne=function(e){var t,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},re=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},se=function(e,t){var i,n,r,s,a,o=t||0,l=[];for(i=0;i<e.length;i++)for(s=e[i],n=0;n<s.length;n++)a=s[n],o+=(r=te(a,o)).size,l.push(r);return l},ae=function(e){var t,i,n,r,s,a,o=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),h=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],i=0;i<r.length;i++)for(s=r[i],n=0;n<s.length;n++)a=s[n],h.setUint32(o,a.data.byteLength),o+=4,c.set(a.data,o),o+=a.data.byteLength;return c},oe=[33,16,5,32,164,27],le=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ue=function(e){for(var t=[];e--;)t.push(0);return t},ce={96000:[oe,[227,64],ue(154),[56]],88200:[oe,[231],ue(170),[56]],64000:[oe,[248,192],ue(240),[56]],48000:[oe,[255,192],ue(268),[55,148,128],ue(54),[112]],44100:[oe,[255,192],ue(268),[55,163,128],ue(84),[112]],32000:[oe,[255,192],ue(268),[55,234],ue(226),[112]],24000:[oe,[255,192],ue(268),[55,255,128],ue(268),[111,112],ue(126),[224]],16000:[oe,[255,192],ue(268),[55,255,128],ue(268),[111,255],ue(269),[223,108],ue(195),[1,192]],12000:[le,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,253,128],ue(259),[56]],11025:[le,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,255,192],ue(268),[55,175,128],ue(108),[112]],8000:[le,ue(268),[3,121,16],ue(47),[7]]},he=(W=ce,Object.keys(W).reduce(function(e,t){return e[t]=new Uint8Array(W[t].reduce(function(e,t){return e.concat(t)},[])),e},{}));X=function(e,t){return G(Y(e,t))},$=function(e,t){return z(K(e),t)},Q=function(e,t,i){return K(i?e:e-t)};var de=9e4,pe=(G=function(e){return 9e4*e},z=function(e,t){return e*t},K=function(e){return e/9e4},Y=function(e,t){return e/t},X),fe=$,me=Q,ge=function(e,t,i,n){var r,s,a,o,l,u=0,c=0,h=0;if(t.length&&(r=pe(e.baseMediaDecodeTime,e.samplerate),s=Math.ceil(de/(e.samplerate/1024)),i&&n&&(u=r-Math.max(i,n),h=(c=Math.floor(u/s))*s),!(c<1||h>de/2))){for((a=he[e.samplerate])||(a=t[0].data),o=0;o<c;o++)l=t[0],t.splice(0,0,{data:a,dts:l.dts-s,pts:l.pts-s});e.baseMediaDecodeTime-=Math.floor(fe(h,e.samplerate))}},ve=function(e,t,i){return t.minSegmentDts>=i?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=i&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},ye=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],n.push({size:i.data.byteLength,duration:1024});return n},_e=function(e){var t,i,n=0,r=new Uint8Array(function(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t].data.byteLength;return i}(e));for(t=0;t<e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;return r},Te=de,be=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},ke=function(e,t){var i,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===e.type&&(i*=e.samplerate/Te,i=Math.floor(i)),i},Se=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Ce=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}t+=r,n=0,r=0}return i},Ee=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},we=function(e,t){var i,n,r,s,a=[];if(!(64&t[0]))return a;for(n=31&t[0],i=0;i<n;i++)s={type:3&t[2+(r=3*i)],pts:e},4&t[r+2]&&(s.ccData=t[r+3]<<8|t[r+4],a.push(s));return a},Pe=4,Le=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new De(0,0),new De(0,1),new De(1,0),new De(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)};(Le.prototype=new q).push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&(t=Ce(e.escapedRBSP)).payloadType===Pe&&(i=Ee(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=we(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Le.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return"flush"===e?t.flush():t.partialFlush()},this)},Le.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},Le.prototype.flush=function(){return this.flushStream("flush")},Le.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Le.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},Le.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Le.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},Le.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},Le.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var Ae={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ie=function(e){return null===e?"":(e=Ae[e]||e,String.fromCharCode(e))},xe=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Oe=function(){for(var e=[],t=15;t--;)e.push("");return e},De=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,s;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Oe();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Oe();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Oe()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,r))s=Ie((n=(3&n)<<8)|r),this[this.mode_](e.pts,s),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),s=Ie((n=(3&n)<<8)|r),this[this.mode_](e.pts,s),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var a=xe.indexOf(7968&t);"rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(e.pts,a)),a!==this.row_&&(this.clearFormatting(e.pts),this.row_=a),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),s=Ie(n),s+=Ie(r),this[this.mode_](e.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};De.prototype=new q,De.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(su){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},De.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Oe(),this.nonDisplayed_=Oe(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},De.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},De.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},De.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},De.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},De.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},De.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},De.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},De.prototype.isNormalChar=function(e){return e>=32&&e<=127},De.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Oe(),this.displayed_=Oe()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},De.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},De.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},De.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},De.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},De.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},De.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var Me={CaptionStream:Le,Cea608Stream:De},Re={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Be=function(e,t){var i=1;for(e>t&&(i=-1);Math.abs(t-e)>4294967296;)e+=8589934592*i;return e},Ue=function e(t){var i,n;e.prototype.init.call(this),this.type_=t||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=Be(e.dts,n),e.pts=Be(e.pts,n),i=e.dts,this.trigger("data",e))},this.flush=function(){n=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ue.prototype=new q;var je,Ne=Ue,Fe=function(e,t,i){var n,r="";for(n=t;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r},He=function(e,t,i){return decodeURIComponent(Fe(e,t,i))},qe=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Ve={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=He(e.data,1,t),e.value=He(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=He(e.data,1,t),e.url=He(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,i;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(i=e.data,unescape(Fe(i,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(je=function(e){var t,i={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},n=0,r=[],s=0;if(je.prototype.init.call(this),this.dispatchType=Re.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,a,o,l,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(s=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))i.debug&&console.log("Skipping unrecognized metadata packet");else if(r.push(e),s+=e.data.byteLength,1===r.length&&(n=qe(e.data.subarray(6,10)),n+=10),!(s<n)){for(t={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},u=0;u<n;)t.data.set(r[0].data.subarray(0,n-u),u),u+=r[0].data.byteLength,s-=r[0].data.byteLength,r.shift();a=10,64&t.data[5]&&(a+=4,a+=qe(t.data.subarray(10,14)),n-=qe(t.data.subarray(16,20)));do{if((o=qe(t.data.subarray(a+4,a+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((l={id:String.fromCharCode(t.data[a],t.data[a+1],t.data[a+2],t.data[a+3]),data:t.data.subarray(a+10,a+o+10)}).key=l.id,Ve[l.id]&&(Ve[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var c=l.data,h=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;h*=4,h+=3&c[7],l.timeStamp=h,void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),a+=10,a+=o}while(a<n);this.trigger("data",t)}}}).prototype=new q;var We,Ge,ze,Ke=je,Ye=Ne;(We=function(){var e=new Uint8Array(188),t=0;We.prototype.init.call(this),this.push=function(i){var n,r=0,s=188;for(t?((n=new Uint8Array(i.byteLength+t)).set(e.subarray(0,t)),n.set(i,t),t=0):n=i;s<n.byteLength;)71!==n[r]||71!==n[s]?(r++,s++):(this.trigger("data",n.subarray(r,s)),r+=188,s+=188);r<n.byteLength&&(e.set(n.subarray(r),0),t=n.byteLength-r)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new q,(Ge=function(){var e,t,i,n;Ge.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var r=0;n.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},i=function(e,t){var i,r;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<i;){var s=e[r],a=(31&e[r+1])<<8|e[r+2];s===Re.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=a:s===Re.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=a:s===Re.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][a]=s),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===i.pid)i.type="pat",e(t.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",e(t.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,i]):this.processPes_(t,n,i)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=Re.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=Re.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new q,Ge.STREAM_TYPES={h264:27,adts:15},(ze=function(){var e,t=this,i={data:[],size:0},n={data:[],size:0},r={data:[],size:0},s=function(e,i,n){var r,s,a=new Uint8Array(e.size),o={type:i},l=0,u=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,l=0;l<e.data.length;l++)s=e.data[l],a.set(s.data,u),u+=s.data.byteLength;var c,h,d;c=a,(h=o).packetLength=6+(c[4]<<8|c[5]),h.dataAlignmentIndicator=0!=(4&c[6]),192&(d=c[7])&&(h.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,h.pts*=4,h.pts+=(6&c[13])>>>1,h.dts=h.pts,64&d&&(h.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,h.dts*=4,h.dts+=(6&c[18])>>>1)),h.data=c.subarray(9+c[8]),r="video"===i||o.packetLength<=e.size,(n||r)&&(e.size=0,e.data.length=0),r&&t.trigger("data",o)}};ze.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,t;switch(a.streamType){case Re.H264_STREAM_TYPE:case Re.H264_STREAM_TYPE:e=i,t="video";break;case Re.ADTS_STREAM_TYPE:e=n,t="audio";break;case Re.METADATA_STREAM_TYPE:e=r,t="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&s(e,t,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};null!==(e=a.programMapTable).video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}})[a.type]()},this.reset=function(){i.size=0,i.data.length=0,n.size=0,n.data.length=0,this.trigger("reset")},this.flushStreams_=function(){s(i,"video"),s(n,"audio"),s(r,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new q;var Xe={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:We,TransportParseStream:Ge,ElementaryStream:ze,TimestampRolloverStream:Ye,CaptionStream:Me.CaptionStream,Cea608Stream:Me.Cea608Stream,MetadataStream:Ke};for(var $e in Re)Re.hasOwnProperty($e)&&(Xe[$e]=Re[$e]);var Qe,Je=Xe,Ze=de,et=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Qe=function(e){var t,i=0;Qe.prototype.init.call(this),this.push=function(n){var r,s,a,o,l,u,c=0;if(e||(i=0),"audio"===n.type)for(t?(o=t,(t=new Uint8Array(o.byteLength+n.data.byteLength)).set(o),t.set(n.data,o.byteLength)):t=n.data;c+5<t.length;)if(255===t[c]&&240==(246&t[c+1])){if(s=2*(1&~t[c+1]),r=(3&t[c+3])<<11|t[c+4]<<3|(224&t[c+5])>>5,u=(l=1024*(1+(3&t[c+6])))*Ze/et[(60&t[c+2])>>>2],a=c+r,t.byteLength<a)return;if(this.trigger("data",{pts:n.pts+i*u,dts:n.dts+i*u,sampleCount:l,audioobjecttype:1+(t[c+2]>>>6&3),channelcount:(1&t[c+2])<<2|(192&t[c+3])>>>6,samplerate:et[(60&t[c+2])>>>2],samplingfrequencyindex:(60&t[c+2])>>>2,samplesize:16,data:t.subarray(c+7+s,a)}),i++,t.byteLength===a)return void(t=void 0);t=t.subarray(a)}else c++},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new q;var tt,it,nt,rt=Qe,st=function(e){var t=e.byteLength,i=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var r=e.byteLength-t,s=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");s.set(e.subarray(r,r+a)),i=new DataView(s.buffer).getUint32(0),n=8*a,t-=a},this.skipBits=function(e){var r;n>e?(i<<=e,n-=e):(e-=n,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),i<<=e,n-=e)},this.readBits=function(e){var r=Math.min(n,e),s=i>>>32-r;return(n-=r)>0?i<<=r:t>0&&this.loadWord(),(r=e-r)>0?s<<r|this.readBits(r):s},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(0!=(i&2147483648>>>e))return i<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(it=function(){var e,t,i=0;it.prototype.init.call(this),this.push=function(n){var r;t?((r=new Uint8Array(t.byteLength+n.data.byteLength)).set(t),r.set(n.data,t.byteLength),t=r):t=n.data;for(var s=t.byteLength;i<s-3;i++)if(1===t[i+2]){e=i+5;break}for(;e<s;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}i+3!==e-2&&this.trigger("data",t.subarray(i+3,e-2));do{e++}while(1!==t[e]&&e<s);i=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(i+3,e-2)),i=e-2,e+=3;break;default:e+=3}t=t.subarray(i),e-=i,i=0},this.reset=function(){t=null,i=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(i+3)),t=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new q,nt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(tt=function(){var e,t,i,n,r,s,a,o=new it;tt.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,i=e.pts,n=e.dts,o.push(e))},o.on("data",function(a){var o={trackId:t,pts:i,dts:n,data:a};switch(31&a[0]){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(a.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(a.subarray(1)),o.config=s(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)}),o.on("done",function(){e.trigger("done")}),o.on("partialdone",function(){e.trigger("partialdone")}),o.on("reset",function(){e.trigger("reset")}),o.on("endedtimeline",function(){e.trigger("endedtimeline")}),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},a=function(e,t){var i,n=8,r=8;for(i=0;i<e;i++)0!==r&&(r=(n+t.readExpGolomb()+256)%256),n=0===r?n:r},r=function(e){for(var t,i,n=e.byteLength,r=[],s=1;s<n-2;)0===e[s]&&0===e[s+1]&&3===e[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var a=0;for(s=0;s<t;a++,s++)a===r[0]&&(a++,r.shift()),i[s]=e[a];return i},s=function(e){var t,i,n,r,s,o,l,u,c,h,d,p,f,m=0,g=0,v=0,y=0,_=1;if(i=(t=new st(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),nt[i]&&(3===(s=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==s?8:12,f=0;f<d;f++)t.readBoolean()&&a(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),f=0;f<l;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(h=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}p&&(_=p[0]/p[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:Math.ceil((16*(u+1)-2*m-2*g)*_),height:(2-h)*(c+1)*16-2*v-2*y,sarRatio:p}}}).prototype=new q;var at,ot={H264Stream:tt,NalByteStream:it},lt=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},ut=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10},ct=function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i};(at=function(){var e=new Uint8Array,t=0;at.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(i){var n,r,s,a,o=0,l=0;for(e.length?(a=e.length,(e=new Uint8Array(i.byteLength+a)).set(e.subarray(0,a)),e.set(i,a)):e=i;e.length-l>=3;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255!=(255&e[l])||240!=(240&e[l+1]))l++;else{if(e.length-l<7)break;if(l+(o=ct(e,l))>e.length)break;s={type:"audio",data:e.subarray(l,l+o),pts:t,dts:t},this.trigger("data",s),l+=o}else{if(e.length-l<10)break;if(l+(o=ut(e,l))>e.length)break;r={type:"timed-metadata",data:e.subarray(l,l+o)},this.trigger("data",r),l+=o}n=e.length-l,e=n>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new q;var ht,dt,pt,ft,mt=at,gt=ot.H264Stream,vt=lt,yt=de,_t=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Tt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],bt=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},kt=function(e,t,i,n,r,s){return{start:{dts:e,pts:e+(i-t)},end:{dts:e+(n-t),pts:e+(r-i)},prependedContentDuration:s,baseMediaDecodeTime:e}};(dt=function(e,t){var i=[],n=0,r=0,s=0,a=1/0;t=t||{},dt.prototype.init.call(this),this.push=function(t){Se(e,t),e&&_t.forEach(function(i){e[i]=t[i]}),i.push(t)},this.setEarliestDts=function(t){r=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){a=e},this.setAudioAppendStart=function(e){s=e},this.flush=function(){var o,l,u,c,h;0!==i.length?(o=ve(i,e,r),e.baseMediaDecodeTime=ke(e,t.keepOriginalTimestamps),ge(e,o,s,a),e.samples=ye(o),u=J(_e(o)),i=[],l=Z(n,[e]),c=new Uint8Array(l.byteLength+u.byteLength),n++,c.set(l),c.set(u,l.byteLength),be(e),h=Math.ceil(1024*yt/e.samplerate),o.length&&this.trigger("timingInfo",{start:o[0].dts,end:o[0].dts+o.length*h}),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){be(e),i=[],this.trigger("reset")}}).prototype=new q,(ht=function(e,t){var i,n,r=0,s=[],a=[];t=t||{},ht.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){Se(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],Tt.forEach(function(t){e[t]=i[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),s.push(t)},this.flush=function(){for(var i,n,o,l,u,c,h,d,p=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=ie(s),(o=ne(i))[0][0].keyFrame||((n=this.getGopForFusion_(s[0],e))?(p=n.duration,o.unshift(n),o.byteLength+=n.byteLength,o.nalCount+=n.nalCount,o.pts=n.pts,o.dts=n.dts,o.duration+=n.duration):o=re(o)),a.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");be(e),o=f}Se(e,o),e.samples=se(o),u=J(ae(o)),e.baseMediaDecodeTime=ke(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),h=o[0],d=o[o.length-1],this.trigger("segmentTimingInfo",kt(e.baseMediaDecodeTime,h.dts,h.pts,d.dts+d.duration,d.pts+d.duration,p)),this.trigger("timingInfo",{start:o[0].dts,end:o[o.length-1].dts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=Z(r,[e]),c=new Uint8Array(l.byteLength+u.byteLength),r++,c.set(l),c.set(u,l.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),s=[],this.gopCache_.length=0,a.length=0,this.trigger("reset")},this.resetStream_=function(){be(e),i=void 0,n=void 0},this.getGopForFusion_=function(t){var i,n,r,s,a,o=1/0;for(a=0;a<this.gopCache_.length;a++)r=(s=this.gopCache_[a]).gop,e.pps&&bt(e.pps[0],s.pps[0])&&e.sps&&bt(e.sps[0],s.sps[0])&&(r.dts<e.timelineStartInfo.dts||(i=t.dts-r.dts-r.duration)>=-1e4&&i<=45e3&&(!n||o>i)&&(n=s,o=i));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,i,n,r,s,o,l,u;for(s=e.byteLength,o=e.nalCount,l=e.duration,t=i=0;t<a.length&&i<e.length&&(n=a[t],r=e[i],n.pts!==r.pts);)r.pts>n.pts?t++:(i++,s-=r.byteLength,o-=r.nalCount,l-=r.duration);return 0===i?e:i===e.length?null:((u=e.slice(i)).byteLength=s,u.duration=l,u.nalCount=o,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,i,n,r,s,o,l;for(t=a.length-1,i=e.length-1,s=null,o=!1;t>=0&&i>=0;){if(n=a[t],r=e[i],n.pts===r.pts){o=!0;break}n.pts>r.pts?t--:(t===a.length-1&&(s=i),i--)}if(!o&&null===s)return null;if(0===(l=o?i:s))return e;var u=e.slice(l),c=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){a=e}}).prototype=new q,(ft=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ft.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new q,ft.prototype.flush=function(e){var t,i,n,r,s=0,a={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,Tt.forEach(function(e){a.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,_t.forEach(function(e){a.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,n=ee(this.pendingTracks),a.initSegment=new Uint8Array(n.byteLength),a.initSegment.set(n),a.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)a.data.set(this.pendingBoxes[r],s),s+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=me(t.startPts,o,this.keepOriginalTimestamps),t.endTime=me(t.endPts,o,this.keepOriginalTimestamps),a.captionStreams[t.stream]=!0,a.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=me(i.pts,o,this.keepOriginalTimestamps),a.metadata.push(i);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),r=0;r<a.captions.length;r++)t=a.captions[r],this.trigger("caption",t);for(r=0;r<a.metadata.length;r++)i=a.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ft.prototype.setRemux=function(e){this.remuxTracks=e},(pt=function(e){var t,i,n=this,r=!0;pt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new Je.MetadataStream,r.aacStream=new mt,r.audioTimestampRolloverStream=new Je.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Je.TimestampRolloverStream("timed-metadata"),r.adtsStream=new rt,r.coalesceStream=new ft(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",function(e){r.aacStream.setTimestamp(e.timeStamp)}),r.aacStream.on("data",function(s){"timed-metadata"!==s.type||r.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new dt(i,e),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t})}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new Je.MetadataStream,r.packetStream=new Je.TransportPacketStream,r.parseStream=new Je.TransportParseStream,r.elementaryStream=new Je.ElementaryStream,r.timestampRolloverStream=new Je.TimestampRolloverStream,r.adtsStream=new rt,r.h264Stream=new gt,r.captionStream=new Je.CaptionStream,r.coalesceStream=new ft(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",function(s){var a;if("metadata"===s.type){for(a=s.tracks.length;a--;)t||"video"!==s.tracks[a].type?i||"audio"!==s.tracks[a].type||((i=s.tracks[a]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=s.tracks[a]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new ht(t,e),r.videoSegmentStream.on("timelineStartInfo",function(e){i&&(i.timelineStartInfo=e,r.audioSegmentStream.setEarliestDts(e.dts))}),r.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",function(e){i&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),r.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new dt(i,e),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t})}}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",function(e){e.dispatchType=r.metadataStream.dispatchType,n.trigger("id3Frame",e)}),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(n){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,be(i),e.keepOriginalTimestamps||(i.timelineStartInfo.baseMediaDecodeTime=n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,be(t),r.captionStream.reset(),e.keepOriginalTimestamps||(t.timelineStartInfo.baseMediaDecodeTime=n)),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var i=this.transmuxPipeline_;e.remux=t,i&&i.coalesceStream&&i.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(r){var t=vt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new q;var St={Transmuxer:pt,VideoSegmentStream:ht,AudioSegmentStream:dt,AUDIO_PROPERTIES:_t,VIDEO_PROPERTIES:Tt,generateVideoSegmentTimingInfo:kt},Ct=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Et=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),wt=function(){function e(t,i){Ct(this,e),this.options=i||{},this.self=t,this.init()}return Et(e,[{key:"init",value:function(){var e,t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new St.Transmuxer(this.options),e=this.self,(t=this.transmuxer).on("data",function(t){var i=t.initSegment;t.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),t.captionStream&&t.captionStream.on("data",function(t){e.postMessage({action:"caption",data:t})}),t.on("done",function(t){e.postMessage({action:"done"})}),t.on("gopInfo",function(t){e.postMessage({action:"gopInfo",gopInfo:t})}),t.on("videoSegmentTimingInfo",function(t){e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})})}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),e}();new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new wt(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new wt(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(i)}()}),Qa={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},Ja=function(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})})},Za=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i={codecCount:0};return i.codecCount=t.split(",").length,i.codecCount=i.codecCount||2,(e=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(t))&&(i.videoCodec=e[2],i.videoObjectTypeIndicator=e[3]),i.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t),i.audioProfile=i.audioProfile&&i.audioProfile[2],i},eo=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return Ja([e])[0]})},to=function(e,t,i){return e+"/"+t+'; codecs="'+i.filter(function(e){return!!e}).join(", ")+'"'},io=function(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"},no=function(e){var t=e.attributes||{};return t.CODECS?Za(t.CODECS):Qa},ro=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var r=i[n];if(r.default&&r.playlists)return Za(r.playlists[0].attributes.CODECS).audioProfile}return null},so=function(e,t){var i=io(t),n=no(t),r=t.attributes||{},s=!0,a=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&r.AUDIO){var o=e.mediaGroups.AUDIO[r.AUDIO];if(o)for(var l in a=!0,s=!1,o)if(!o[l].uri&&!o[l].playlists){s=!0;break}}a&&!n.audioProfile&&(s||(n.audioProfile=ro(e,r.AUDIO)),n.audioProfile||(ls.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),n.audioProfile=Qa.audioProfile));var u={};n.videoCodec&&(u.video=""+n.videoCodec+n.videoObjectTypeIndicator),n.audioProfile&&(u.audio="mp4a.40."+n.audioProfile);var c=to("audio",i,[u.audio]),h=to("video",i,[u.video]),d=to("video",i,[u.video,u.audio]);return a?!s&&u.video?[h,c]:s||u.video?[d,c]:[c,c]:u.video?[d]:[c]},ao=function(e){var t={type:"",parameters:{}},i=e.trim().split(";");return t.type=i.shift().trim(),i.forEach(function(e){var i=e.trim().split("=");if(i.length>1){var n=i[0].replace(/"/g,"").trim(),r=i[1].replace(/"/g,"").trim();t.parameters[n]=r}}),t},oo=function(e){return/mp4a\.\d+.\d+/i.test(e)},lo=function(e){return/avc1\.[\da-f]+/i.test(e)},uo=function(e,t,i){if(null==t||!e.length)return[];var n=Math.ceil(9e4*(t-i+3)),r=void 0;for(r=0;r<e.length&&!(e[r].pts>n);r++);return e.slice(r)},co=function(e,t,i){if(!t.length)return e;if(i)return t.slice();for(var n=t[0].pts,r=0;r<e.length&&!(e[r].pts>=n);r++);return e.slice(0,r).concat(t)},ho=function(e,t,i,n){for(var r=Math.ceil(9e4*(t-n)),s=Math.ceil(9e4*(i-n)),a=e.slice(),o=e.length;o--&&!(e[o].pts<=s););if(-1===o)return a;for(var l=o+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),a.splice(l,o-l+1),a},po=function(e,t,i){var n=null,r=null,s=0,a=[],o=[];if(!e&&!t)return ls.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(i)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return ls.createTimeRange();for(var l=e.buffered,u=t.buffered,c=l.length;c--;)a.push({time:l.start(c),type:"start"}),a.push({time:l.end(c),type:"end"});for(c=u.length;c--;)a.push({time:u.start(c),type:"start"}),a.push({time:u.end(c),type:"end"});for(a.sort(function(e,t){return e.time-t.time}),c=0;c<a.length;c++)"start"===a[c].type?2===++s&&(n=a[c].time):"end"===a[c].type&&1===--s&&(r=a[c].time),null!==n&&null!==r&&(o.push([n,r]),n=null,r=null);return ls.createTimeRanges(o)},fo=9e4,mo=function(e,t){var i=e.addSourceBuffer(t),n=Object.create(null);n.updating=!1,n.realBuffer_=i;var r=function(e){"function"==typeof i[e]?n[e]=function(){return i[e].apply(i,arguments)}:void 0===n[e]&&Object.defineProperty(n,e,{get:function(){return i[e]},set:function(t){return i[e]=t}})};for(var s in i)r(s);return n},go=function(e){function t(e,i){ps(this,t);var n=vs(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ls.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=e,n.codecs_=i,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=ls.browser.IE_VERSION>=11;var r={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach(function(e){oo(e)?n.audioCodec_=e:lo(e)&&(n.videoCodec_=e)}),n.transmuxer_=new $a,n.transmuxer_.postMessage({action:"init",options:r}),n.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):"videoSegmentTimingInfo"===e.data.action?n.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo):void 0},Object.defineProperty(n,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(n,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(n,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function(){return po(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}return gs(t,e),fs(t,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),Da(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"videoSegmentTimingInfo_",value:function(e){var t={start:{decode:e.start.dts/fo,presentation:e.start.pts/fo},end:{decode:e.end.dts/fo,presentation:e.end.pts/fo},baseMediaDecodeTime:e.baseMediaDecodeTime/fo};e.prependedContentDuration&&(t.prependedContentDuration=e.prependedContentDuration/fo),this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}},{key:"createRealSourceBuffers_",value:function(){var e=this,t=["audio","video"];t.forEach(function(i){if(e[i+"Codec_"]&&!e[i+"Buffer_"]){var n=null;if(e.mediaSource_[i+"Buffer_"])(n=e.mediaSource_[i+"Buffer_"]).updating=!1;else{var r=i+'/mp4;codecs="'+e[i+"Codec_"]+'"';n=mo(e.mediaSource_.nativeMediaSource_,r),e.mediaSource_[i+"Buffer_"]=n}e[i+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(r){n.addEventListener(r,function(){if("audio"!==i||!e.audioDisabled_)return"updateend"===r&&(e[i+"Buffer_"].updating=!1),t.every(function(t){return!("audio"!==t||!e.audioDisabled_)||(i===t||!e[t+"Buffer_"]||!e[t+"Buffer_"].updating)})?e.trigger(r):void 0})})}})}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:uo(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=co(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=ho(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),Ma(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)Ma(e,t,this.inbandTextTracks_[i])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length)return this.trigger("updateend"),void(this.bufferUpdating_=!1);e=this.pendingBuffers_.reduce(function(e,t){var i=t.type,n=t.data,r=t.initSegment;return e[i].segments.push(n),e[i].bytes+=n.byteLength,e[i].initSegment=r,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[i].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),Ua(this,e.captions,e.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var i=0,n=void 0;if(e.bytes){n=new Uint8Array(e.bytes),e.segments.forEach(function(e){n.set(e,i),i+=e.byteLength});try{t.updating=!0,t.appendBuffer(n)}catch(r){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:r.message,originalError:r})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),t}(ls.EventTarget),vo=function(i){function n(){ps(this,n);var i=vs(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),r=void 0;for(r in i.nativeMediaSource_=new e.default.MediaSource,i.nativeMediaSource_)r in n.prototype||"function"!=typeof i.nativeMediaSource_[r]||(i[r]=i.nativeMediaSource_[r].bind(i.nativeMediaSource_));return i.duration_=NaN,Object.defineProperty(i,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){this.duration_=e,e===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(i,"seekable",{get:function(){return this.duration_===1/0?ls.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(i,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(i,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),i.sourceBuffers=[],i.activeSourceBuffers_=[],i.updateActiveSourceBuffers_=function(){if(i.activeSourceBuffers_.length=0,1===i.sourceBuffers.length){var e=i.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void i.activeSourceBuffers_.push(e)}for(var t=!1,n=!0,r=0;r<i.player_.audioTracks().length;r++){var s=i.player_.audioTracks()[r];if(s.enabled&&"main"!==s.kind){t=!0,n=!1;break}}i.sourceBuffers.forEach(function(e,r){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=t;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,n=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=r?n:!n,e.audioDisabled_))return;i.activeSourceBuffers_.push(e)})},i.onPlayerMediachange_=function(){i.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},i.onHlsReset_=function(){i.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},i.onHlsSegmentTimeMapping_=function(e){i.sourceBuffers.forEach(function(t){return t.timeMapping_=e.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},i),i.on("sourceopen",function(e){var n=t.default.querySelector('[src="'+i.url_+'"]');n&&(i.player_=ls(n.parentNode),i.player_&&(i.player_.tech_.on("hls-reset",i.onHlsReset_),i.player_.tech_.on("hls-segment-time-mapping",i.onHlsSegmentTimeMapping_),i.player_.audioTracks&&i.player_.audioTracks()&&(i.player_.audioTracks().on("change",i.updateActiveSourceBuffers_),i.player_.audioTracks().on("addtrack",i.updateActiveSourceBuffers_),i.player_.audioTracks().on("removetrack",i.updateActiveSourceBuffers_)),i.player_.on("mediachange",i.onPlayerMediachange_)))}),i.on("sourceended",function(e){for(var t=Ba(i.duration),n=0;n<i.sourceBuffers.length;n++){var r=i.sourceBuffers[n],s=r.metadataTrack_&&r.metadataTrack_.cues;s&&s.length&&(s[s.length-1].endTime=t)}}),i.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),i}return gs(n,i),fs(n,[{key:"addSeekableRange_",value:function(e,t){var i=void 0;if(this.duration!==1/0)throw(i=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",i.code=11,i;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,i=ao(e);if(/^(video|audio)\/mp2t$/i.test(i.type)){var n=[];i.parameters&&i.parameters.codecs&&(n=i.parameters.codecs.split(","),n=(n=Ja(n)).filter(function(e){return oo(e)||lo(e)})),0===n.length&&(n=["avc1.4d400d","mp4a.40.2"]),t=new go(this,n),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),n}(ls.EventTarget),yo=0;ls.mediaSources={};var _o=function(e,t){var i=ls.mediaSources[e];if(!i)throw new Error("Media Source not found (Video.js)");i.trigger({type:"sourceopen",swfId:t})},To=function(){return!!e.default.MediaSource&&!!e.default.MediaSource.isTypeSupported&&e.default.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},bo=function(){if(this.MediaSource={open:_o,supportsNativeMediaSources:To},To())return new vo;throw new Error("Cannot use create a virtual MediaSource for this video")};bo.open=_o,bo.supportsNativeMediaSources=To;var ko={createObjectURL:function(t){var i=void 0;return t instanceof vo?(i=e.default.URL.createObjectURL(t.nativeMediaSource_),t.url_=i,i):t instanceof vo?(i="blob:vjs-media-source/"+yo,yo++,ls.mediaSources[i]=t,i):(i=e.default.URL.createObjectURL(t),t.url_=i,i)}};ls.MediaSource=bo,ls.URL=ko;var So=ls.EventTarget,Co=ls.mergeOptions,Eo=function(e,t){for(var i=void 0,n=Co(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),r=0;r<t.playlists.length;r++){var s=Es(n,t.playlists[r]);s?n=s:i=!0}return ks(t,function(e,t,r,s){if(e.playlists&&e.playlists.length){var a=e.playlists[0].uri,o=Es(n,e.playlists[0]);o&&((n=o).mediaGroups[t][r][s].playlists[0]=n.playlists[a],i=!1)}}),i?null:n},wo=function(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+"-"+e.byterange.offset+"-"+t},Po=function(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},Lo=function(e,t){var i={};for(var n in e){var r=e[n].sidx;if(r){var s=wo(r);if(!t[s])break;var a=t[s].sidxInfo;Po(a,r)&&(i[s]=t[s])}}return i},Ao=function(e,t,i,n){var r=(0,l.parse)(e,{manifestUri:t,clientOffset:i}),s=Lo(r.playlists,n);return ks(r,function(e,t,i,r){if(e.playlists&&e.playlists.length){var a=e.playlists;s=Co(s,Lo(a,n))}}),s},Io=function(e,t,i,n,r){var s={uri:ds(n.handleManifestRedirects,e.resolvedUri),byterange:e.byterange,playlist:t};return i(ls.mergeOptions(s,{responseType:"arraybuffer",headers:ra(s)}),r)},xo=function(t){function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3];ps(this,i);var s=vs(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),a=n.withCredentials,o=void 0!==a&&a,l=n.handleManifestRedirects,u=void 0!==l&&l;if(s.hls_=t,s.withCredentials=o,s.handleManifestRedirects=u,!e)throw new Error("A non-empty playlist URL or playlist is required");return s.on("minimumUpdatePeriod",function(){s.refreshXml_()}),s.on("mediaupdatetimeout",function(){s.refreshMedia_(s.media().uri)}),s.state="HAVE_NOTHING",s.loadedPlaylists_={},"string"==typeof e?(s.srcUrl=e,s.sidxMapping_={},vs(s)):(s.setupChildLoader(r,e),s)}return gs(i,So),fs(i,[{key:"setupChildLoader",value:function(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t}},{key:"dispose",value:function(){this.stopRequest(),this.loadedPlaylists_={},e.default.clearTimeout(this.minimumUpdatePeriodTimeout_),e.default.clearTimeout(this.mediaRequest_),e.default.clearTimeout(this.mediaUpdateTimeout)}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"sidxRequestFinished_",value:function(e,t,i,n){var r=this;return function(s,a){if(r.request){if(r.request=null,s)return r.error={status:a.status,message:"DASH playlist request error at URL: "+e.uri,response:a.response,code:2},i&&(r.state=i),r.trigger("error"),n(t,null);var o=new Uint8Array(a.response),l=u.default.parseSidx(o.subarray(8));return n(t,l)}}}},{key:"media",value:function(t){var i=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}var r=!this.media_||t.uri!==this.media_.uri;if(r&&this.loadedPlaylists_[t.uri]&&this.loadedPlaylists_[t.uri].endList)return this.state="HAVE_METADATA",this.media_=t,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r)if(this.media_&&this.trigger("mediachanging"),t.sidx){var s=void 0,a=void 0;this.masterPlaylistLoader_?(s=this.masterPlaylistLoader_.master,a=this.masterPlaylistLoader_.sidxMapping_):(s=this.master,a=this.sidxMapping_);var o=wo(t.sidx);a[o]={sidxInfo:t.sidx},this.request=Io(t.sidx,t,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(t,s,n,function(e,r){if(!e||!r)throw new Error("failed to request sidx");a[o].sidx=r,i.haveMetadata({startingState:n,playlist:e.playlists[t.uri]})}))}else this.mediaRequest_=e.default.setTimeout(this.haveMetadata.bind(this,{startingState:n,playlist:t}),0)}},{key:"haveMetadata",value:function(e){var t=e.startingState,i=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[i.uri]=i,this.mediaRequest_=null,this.refreshMedia_(i.uri),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function(){this.stopRequest(),e.default.clearTimeout(this.mediaUpdateTimeout),e.default.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(t){var i=this;e.default.clearTimeout(this.mediaUpdateTimeout),e.default.clearTimeout(this.minimumUpdatePeriodTimeout_);var n=this.media();if(t){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=e.default.setTimeout(function(){return i.load()},r)}else this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var e=(0,l.parse)(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});e.uri=this.srcUrl;for(var t=0;t<e.playlists.length;t++){var i="placeholder-uri-"+t;e.playlists[t].uri=i,e.playlists[i]=e.playlists[t]}return ks(e,function(t,i,n,r){if(t.playlists&&t.playlists.length){var s="placeholder-uri-"+i+"-"+n+"-"+r;t.playlists[0].uri=s,e.playlists[s]=t.playlists[0]}}),ws(e),Ps(e),e}},{key:"start",value:function(){var t=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=e.default.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,i){if(t.request){if(t.request=null,e)return t.error={status:i.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:i.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.masterXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?t.masterLoaded_=Date.parse(i.responseHeaders.date):t.masterLoaded_=Date.now(),t.srcUrl=ds(t.handleManifestRedirects,t.srcUrl,i),t.syncClientServerClock_(t.onClientServerClockSync_.bind(t))}})}},{key:"syncClientServerClock_",value:function(e){var t=this,i=(0,l.parseUTCTiming)(this.masterXml_);return null===i?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===i.method?(this.clientOffset_=i.value-Date.now(),e()):void(this.request=this.hls_.xhr({uri:hs(this.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},function(n,r){if(t.request){if(n)return t.clientOffset_=t.masterLoaded_-Date.now(),e();var s=void 0;s="HEAD"===i.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.clientOffset_=s-Date.now(),e()}}))}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var t=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=e.default.setTimeout(function(){t.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var t=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,n){if(t.request){if(t.request=null,i)return t.error={status:n.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.masterXml_=n.responseText,t.sidxMapping_=Ao(t.masterXml_,t.srcUrl,t.clientOffset_,t.sidxMapping_);var r=t.parseMasterXml(),s=Eo(t.master,r),a=t.media().sidx;if(s)if(a){var o=wo(a);if(!t.sidxMapping_[o]){var l=t.media();t.request=Io(l.sidx,l,t.hls_.xhr,{handleManifestRedirects:t.handleManifestRedirects},t.sidxRequestFinished_(l,r,t.state,function(i,n){if(!i||!n)throw new Error("failed to request sidx on minimumUpdatePeriod");t.sidxMapping_[o].sidx=n,t.minimumUpdatePeriodTimeout_=e.default.setTimeout(function(){t.trigger("minimumUpdatePeriod")},t.master.minimumUpdatePeriod),t.refreshMedia_(t.media().uri)}))}}else t.master=s;t.minimumUpdatePeriodTimeout_=e.default.setTimeout(function(){t.trigger("minimumUpdatePeriod")},t.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(t){var i=this;if(!t)throw new Error("refreshMedia_ must take a media uri");var n=void 0,r=void 0;this.masterPlaylistLoader_?(n=this.masterPlaylistLoader_.master,r=this.masterPlaylistLoader_.parseMasterXml()):(n=this.master,r=this.parseMasterXml());var s=Eo(n,r);s?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=s:this.master=s,this.media_=s.playlists[t]):(this.media_=r.playlists[t],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=e.default.setTimeout(function(){i.trigger("mediaupdatetimeout")},Ls(this.media(),!!s))),this.trigger("loadedplaylist")}}]),i}(),Oo=function(e){return ls.log.debug?ls.log.debug.bind(ls,"VHS:",e+" >"):function(){}};function Do(){}var Mo=function(){function e(t,i,n,r){ps(this,e),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=n,this.mimeType_=i,this.logger_=Oo("SourceUpdater["+n+"]["+i+"]"),"closed"===t.readyState?t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,i,r)):this.createSourceBuffer_(i,r)}return fs(e,[{key:"createSourceBuffer_",value:function(e,t){var i=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",function(){i.start_()}):this.start_()}},{key:"start_",value:function(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.sourceBuffer_.removing=!1,e.logger_("buffered ["+Ia(e.buffered())+"]"),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function(e,t){var i=this;this.processedAppend_=!0,this.queueCallback_(function(){e.videoSegmentTimingInfoCallback&&i.sourceBuffer_.addEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),i.sourceBuffer_.appendBuffer(e.bytes)},function(){e.videoSegmentTimingInfoCallback&&i.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),t()})}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:ls.createTimeRanges()}},{key:"remove",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Do;this.processedAppend_&&this.queueCallback_(function(){i.logger_("remove ["+e+" => "+t+"]"),i.sourceBuffer_.removing=!0,i.sourceBuffer_.remove(e,t)},n)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==Do}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e,t.runCallback_()}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){var e=this,t=function t(){e.sourceBuffer_&&"open"===e.mediaSource.readyState&&e.sourceBuffer_.abort(),e.sourceBuffer_.removeEventListener("updateend",t)};this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",t):t()}}]),e}(),Ro={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Bo={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Uo=function(e){e.forEach(function(e){e.abort()})},jo=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},No=function(e){var t=e.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},Fo=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Bo.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Bo.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Bo.FAILURE,xhr:t}:null},Ho=function(e,t){return function(i,n){var r=n.response,s=Fo(i,n);if(s)return t(s,e);if(16!==r.byteLength)return t({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:Bo.FAILURE,xhr:n},e);var a=new DataView(r);return e.key.bytes=new Uint32Array([a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12)]),t(null,e)}},qo=function(e,t,i){return function(n,r){var s=r.response,a=Fo(n,r);return a?i(a,e):0===s.byteLength?i({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Bo.FAILURE,xhr:r},e):(e.map.bytes=new Uint8Array(r.response),t&&!t.isInitialized()&&t.init(),e.map.timescales=c.default.timescale(e.map.bytes),e.map.videoTrackIds=c.default.videoTrackIds(e.map.bytes),i(null,e))}},Vo=function(e,t,i){return function(n,r){var s=r.response,a=Fo(n,r),o=void 0;return a?i(a,e):0===s.byteLength?i({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Bo.FAILURE,xhr:r},e):(e.stats=jo(r),e.key?e.encryptedBytes=new Uint8Array(r.response):e.bytes=new Uint8Array(r.response),t&&e.map&&e.map.bytes&&(t.isInitialized()||t.init(),(o=t.parse(e.bytes,e.map.videoTrackIds,e.map.timescales))&&o.captions&&(e.captionStreams=o.captionStreams,e.fmp4Captions=o.captions)),i(null,e))}},Wo=function(e,t,i){e.addEventListener("message",function n(r){if(r.data.source===t.requestId){e.removeEventListener("message",n);var s=r.data.decrypted;return t.bytes=new Uint8Array(s.bytes,s.byteOffset,s.byteLength),i(null,t)}});var n=void 0;n=t.key.bytes.slice?t.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.key.bytes)),e.postMessage(la({source:t.requestId,encrypted:t.encryptedBytes,key:n,iv:t.key.iv}),[t.encryptedBytes.buffer,n.buffer])},Go=function(e,t,i){var n=0,r=!1;return function(s,a){if(!r)return s?(r=!0,Uo(e),i(s,a)):(n+=1)===e.length?(a.endOfAllRequests=Date.now(),a.encryptedBytes?Wo(t,a,i):i(null,a)):void 0}},zo=function(e,t){return function(i){return e.stats=ls.mergeOptions(e.stats,No(i)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(i,e)}},Ko=function(e,t,i,n,r,s,a){var o=[],l=Go(o,i,a);if(r.key&&!r.key.bytes){var u=e(ls.mergeOptions(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),Ho(r,l));o.push(u)}if(r.map&&!r.map.bytes){var c=e(ls.mergeOptions(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:ra(r.map)}),qo(r,n,l));o.push(c)}var h=e(ls.mergeOptions(t,{uri:r.resolvedUri,responseType:"arraybuffer",headers:ra(r)}),Vo(r,n,l));return h.addEventListener("progress",zo(r,s)),o.push(h),function(){return Uo(o)}},Yo=function(t,i){var n;return t&&(n=e.default.getComputedStyle(t))?n[i]:""},Xo=function(e,t){var i=e.slice();e.sort(function(e,n){var r=t(e,n);return 0===r?i.indexOf(e)-i.indexOf(n):r})},$o=function(t,i){var n=void 0,r=void 0;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||e.default.Number.MAX_VALUE,i.attributes.BANDWIDTH&&(r=i.attributes.BANDWIDTH),n-(r=r||e.default.Number.MAX_VALUE)},Qo=function(t,i){var n=void 0,r=void 0;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||e.default.Number.MAX_VALUE,i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(r=i.attributes.RESOLUTION.width),n===(r=r||e.default.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&i.attributes.BANDWIDTH?t.attributes.BANDWIDTH-i.attributes.BANDWIDTH:n-r},Jo=function(t,i,n,r,s){var a=t.playlists.map(function(t){var i,n;return i=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,n=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height,{bandwidth:t.attributes.BANDWIDTH||e.default.Number.MAX_VALUE,width:i,height:n,playlist:t}});Xo(a,function(e,t){return e.bandwidth-t.bandwidth});var o=(a=a.filter(function(e){return!Zs.isIncompatible(e.playlist)})).filter(function(e){return Zs.isEnabled(e.playlist)});o.length||(o=a.filter(function(e){return!Zs.isDisabled(e.playlist)}));var l=o.filter(function(e){return e.bandwidth*Ro.BANDWIDTH_VARIANCE<i}),u=l[l.length-1],c=l.filter(function(e){return e.bandwidth===u.bandwidth})[0];if(!1===s){var h=c||o[0]||a[0];return h?h.playlist:null}var d=l.filter(function(e){return e.width&&e.height});Xo(d,function(e,t){return e.width-t.width});var p=d.filter(function(e){return e.width===n&&e.height===r});u=p[p.length-1];var f=p.filter(function(e){return e.bandwidth===u.bandwidth})[0],m=void 0,g=void 0,v=void 0;f||(g=(m=d.filter(function(e){return e.width>n||e.height>r})).filter(function(e){return e.width===m[0].width&&e.height===m[0].height}),u=g[g.length-1],v=g.filter(function(e){return e.bandwidth===u.bandwidth})[0]);var y=v||f||c||o[0]||a[0];return y?y.playlist:null},Zo=function(){return Jo(this.playlists.master,this.systemBandwidth,parseInt(Yo(this.tech_.el(),"width"),10),parseInt(Yo(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},el=function(e){var t=e.master,i=e.currentTime,n=e.bandwidth,r=e.duration,s=e.segmentDuration,a=e.timeUntilRebuffer,o=e.currentTimeline,l=e.syncController,u=t.playlists.filter(function(e){return!Zs.isIncompatible(e)}),c=u.filter(Zs.isEnabled);c.length||(c=u.filter(function(e){return!Zs.isDisabled(e)}));var h=c.filter(Zs.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=l.getSyncPoint(e,r,o,i)?1:2;return{playlist:e,rebufferingImpact:Zs.estimateSegmentRequestTime(s,n,e)*t-a}}),d=h.filter(function(e){return e.rebufferingImpact<=0});return Xo(d,function(e,t){return $o(t.playlist,e.playlist)}),d.length?d[0]:(Xo(h,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),h[0]||null)},tl=function(){var e=this.playlists.master.playlists.filter(Zs.isEnabled);return Xo(e,function(e,t){return $o(e,t)}),e.filter(function(e){return Za(e.attributes.CODECS).videoCodec})[0]||null},il=function(e,t,i){for(var n in i)if(!e[n]){t.trigger({type:"usage",name:"hls-608"});var r=t.textTracks().getTrackById(n);e[n]=r||t.addRemoteTextTrack({kind:"captions",id:n,label:n},!1).track}},nl=function(e){var t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;if(i){var r=window.WebKitDataCue||window.VTTCue;i.forEach(function(e){var i=e.stream,s=e.startTime,a=e.endTime;t[i]&&(s+=n,a+=n,t[i].addCue(new r(s,a,e.text)))})}},rl=500,sl=function(e,t,i){if(!e||!t)return!1;var n=i===e.segments.length;return e.endList&&"open"===t.readyState&&n},al=function(e){return"number"==typeof e&&isFinite(e)},ol=function(e,t,i){return"main"===e&&t&&i?i.containsAudio||i.containsVideo?t.containsVideo&&!i.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.containsVideo&&i.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null},ll=function(e,t,i){var n=void 0;return n=e.length&&e.start(0)>0&&e.start(0)<t?e.start(0):t-30,Math.min(n,t-i)},ul=function(e){var t=e.segment,i=t.start,n=t.end,r=e.playlist,s=r.mediaSequence,a=r.id,o=r.segments,l=void 0===o?[]:o,u=e.mediaIndex,c=e.timeline;return["appending ["+u+"] of ["+s+", "+(s+l.length)+"] from playlist ["+a+"]","["+i+" => "+n+"] in timeline ["+c+"]"].join(" ")},cl=function(t){function i(e){ps(this,i);var t=vs(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=e.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=void 0,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.inbandTextTracks_=e.inbandTextTracks,t.state_="INIT",t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.mimeType_=null,t.sourceUpdater_=null,t.xhrOptions_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.cacheEncryptionKeys_=e.cacheEncryptionKeys,t.keyCache_={},"main"===t.loaderType_?t.captionParser_=new h.default:t.captionParser_=null,t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={segmentIndex:0,time:0},t.syncController_.on("syncinfoupdate",function(){return t.trigger("syncinfoupdate")}),t.mediaSource_.addEventListener("sourceopen",function(){return t.ended_=!1}),t.fetchAtBuffer_=!1,t.logger_=Oo("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(t,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),t}return gs(i,t),fs(i,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():ls.createTimeRanges()}},{key:"initSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=ua(e),n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),n||e}},{key:"segmentKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=ca(e),n=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[i]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(n||e).resolvedUri};return n&&(r.bytes=n.bytes),r}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new Mo(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(i&&i.uri===e.uri){var s=e.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+s+"]"),null!==this.mediaIndex&&(this.mediaIndex-=s),n&&(n.mediaIndex-=s,n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(e.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),e),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t,i){if(this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,i),Ma(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)Ma(e,t,this.inbandTextTracks_[n])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&e.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=e.default.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&e.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=e.default.setTimeout(this.monitorBufferTick_.bind(this),rl)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(this.isEndOfStream_(e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&(e.timeline!==this.currentTimeline_&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(e)))}}},{key:"isEndOfStream_",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.playlist_;return sl(t,this.mediaSource_,e)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(e,t,i,n,r,s){var a=0,o=void 0;e.length&&(a=e.end(e.length-1));var l=Math.max(0,a-r);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!n&&l>=1)return null;if(null===s)return i=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,i,null,!0);if(null!==i){t.segments[i];return o=a,this.generateSegmentInfo_(t,i+1,o,!1)}if(this.fetchAtBuffer_){var u=Zs.getMediaInfoForTime(t,a,s.segmentIndex,s.time);i=u.mediaIndex,o=u.startTime}else{var c=Zs.getMediaInfoForTime(t,r,s.segmentIndex,s.time);i=c.mediaIndex,o=c.startTime}return this.generateSegmentInfo_(t,i,o,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var i=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return i.length?i[Math.min(i.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,i,n){if(t<0||t>=e.segments.length)return null;var r=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:t,isSyncRequest:n,startOfSegment:i,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,r=Zs.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),s=xa(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(r<=s)return!1;var a=el({master:this.hls_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(a){var o=r-s-a.rebufferingImpact,l=.5;return s<=Ca&&(l=1),!a.playlist||a.playlist.uri===this.playlist_.uri||o<l?!1:(this.bandwidth=a.playlist.attributes.BANDWIDTH*Ro.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Ko(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t=ll(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,i={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=n}return t.map&&(i.map=this.initSegment(t.map)),i}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Bo.ABORTED?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===Bo.TIMEOUT?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),t.key&&this.segmentKey(t.key,!0),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(il(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),nl({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,i=t.segment,n=this.syncController_.probeSegmentInfo(t);void 0===this.startingMedia_&&n&&(n.containsAudio||n.containsVideo)&&(this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo});var r=ol(this.loaderType_,this.startingMedia_,n);if(r)return this.error({message:r,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");if(null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()){if(n&&n.segmentTimestampInfo){var s=n.segmentTimestampInfo[0].ptsTime,a=n.segmentTimestampInfo[0].dtsTime;t.timestampOffset-=s-a}this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset")}var o=this.syncController_.mappingForTimeline(t.timeline);if(null!==o&&this.trigger({type:"segmenttimemapping",mapping:o}),this.state="APPENDING",i.map){var l=ua(i.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==l){var u=this.initSegment(i.map);this.sourceUpdater_.appendBuffer({bytes:u.bytes},function(){e.activeInitSegmentId_=l})}}t.byteLength=t.bytes.byteLength,"number"==typeof i.start&&"number"==typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration,this.logger_(ul(t)),this.sourceUpdater_.appendBuffer({bytes:t.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,t.requestId)},this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment;i.videoTimingInfo||(i.videoTimingInfo={}),i.videoTimingInfo.transmuxerPrependedSeconds=t.videoSegmentTimingInfo.prependedContentDuration||0,i.videoTimingInfo.transmuxedPresentationStart=t.videoSegmentTimingInfo.start.presentation,i.videoTimingInfo.transmuxedPresentationEnd=t.videoSegmentTimingInfo.end.presentation,i.videoTimingInfo.baseMediaDecodeTime=t.videoSegmentTimingInfo.baseMediaDecodeTime}}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,i=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(i&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(e.mediaIndex+1,e.playlist)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(t){if(this.segmentMetadataTrack_){var i=t.segment,n=i.start,r=i.end;if(al(n)&&al(r)){Ma(n,r,this.segmentMetadataTrack_);var s=e.default.WebKitDataCue||e.default.VTTCue,a={custom:i.custom,dateTimeObject:i.dateTimeObject,dateTimeString:i.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.uri,start:n,end:r},o=new s(n,r,JSON.stringify(a));o.value=a,this.segmentMetadataTrack_.addCue(o)}}}}]),i}(ls.EventTarget),hl=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},dl=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),pl=function(t){function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ps(this,i);var n=vs(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return n.mediaSource_=null,n.subtitlesTrack_=null,n}return gs(i,cl),fs(i,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return ls.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return ls.createTimeRanges([[t,i]])}},{key:"initSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=ua(e),n=this.initSegments_[i];if(t&&!n&&e.bytes){var r=dl.byteLength+e.bytes.byteLength,s=new Uint8Array(r);s.set(e.bytes),s.set(dl,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:s}}return n||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e?this.subtitlesTrack_:(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}},{key:"remove",value:function(e,t){Ma(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var i=this.pendingSegment_,n=i.segment;if("function"!=typeof e.default.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var r=void 0,s=function(){t.subtitlesTrack_.tech_.off("vttjsloaded",r),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")};return r=function(){t.subtitlesTrack_.tech_.off("vttjserror",s),t.handleSegment_()},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",r),void this.subtitlesTrack_.tech_.one("vttjserror",s)}n.requested=!0;try{this.parseVTTCues_(i)}catch(su){return this.error({message:su.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=n.duration,i.cues.length&&this.remove(i.cues[0].endTime,i.cues[i.cues.length-1].endTime),i.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(t){var i=void 0,n=!1;"function"==typeof e.default.TextDecoder?i=new e.default.TextDecoder("utf8"):(i=e.default.WebVTT.StringDecoder(),n=!0);var r=new e.default.WebVTT.Parser(e.default,e.default.vttjs,i);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=t.cues.push.bind(t.cues),r.ontimestampmap=function(e){return t.timestampmap=e},r.onparsingerror=function(e){ls.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map){var s=t.segment.map.bytes;n&&(s=hl(s)),r.parse(s)}var a=t.bytes;n&&(a=hl(a)),r.parse(a),r.flush()}},{key:"updateTimeMapping_",value:function(e,t,i){var n=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,s=r.MPEGTS/9e4-r.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=s,e.endTime+=s}),!i.syncInfo){var a=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(a,o-n.duration)}}}else n.empty=!0}}]),i}(),fl=function(e,t){for(var i=e.cues,n=0;n<i.length;n++){var r=i[n];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},ml=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t.segments)for(var r=n,s=void 0,a=0;a<t.segments.length;a++){var o=t.segments[a];if(s||(s=fl(i,r+o.duration/2)),s){if("cueIn"in o){s.endTime=r,s.adEndTime=r,r+=o.duration,s=null;continue}if(r<s.endTime){r+=o.duration;continue}s.endTime+=o.duration}else if("cueOut"in o&&((s=new e.default.VTTCue(r,r+o.duration,o.cueOut)).adStartTime=r,s.adEndTime=r+parseFloat(o.cueOut),i.addCue(s)),"cueOutCont"in o){var l,u,c=o.cueOutCont.split("/").map(parseFloat),h=ys(c,2);l=h[0],u=h[1],(s=new e.default.VTTCue(r,r+o.duration,"")).adStartTime=r-l,s.adEndTime=s.adStartTime+u,i.addCue(s)}r+=o.duration}},gl=d.default.inspect,vl=[{name:"VOD",run:function(e,t,i,n,r){if(i!==1/0){return{time:0,segmentIndex:0}}return null}},{name:"ProgramDateTime",run:function(e,t,i,n,r){if(!e.datetimeToDisplayTime)return null;var s=t.segments||[],a=null,o=null;r=r||0;for(var l=0;l<s.length;l++){var u=s[l];if(u.dateTimeObject){var c=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,h=Math.abs(r-c);if(null!==o&&(0===h||o<h))break;o=h,a={time:c,segmentIndex:l}}}return a}},{name:"Segment",run:function(e,t,i,n,r){var s=t.segments||[],a=null,o=null;r=r||0;for(var l=0;l<s.length;l++){var u=s[l];if(u.timeline===n&&void 0!==u.start){var c=Math.abs(r-u.start);if(null!==o&&o<c)break;(!a||null===o||o>=c)&&(o=c,a={time:u.start,segmentIndex:l})}}return a}},{name:"Discontinuity",run:function(e,t,i,n,r){var s=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var a=null,o=0;o<t.discontinuityStarts.length;o++){var l=t.discontinuityStarts[o],u=t.discontinuitySequence+o+1,c=e.discontinuities[u];if(c){var h=Math.abs(r-c.time);if(null!==a&&a<h)break;(!s||null===a||a>=h)&&(a=h,s={time:c.time,segmentIndex:l})}}return s}},{name:"Playlist",run:function(e,t,i,n,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],yl=function(e){function t(){ps(this,t);var e=vs(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=Oo("SyncController"),e}return gs(t,e),fs(t,[{key:"getSyncPoint",value:function(e,t,i,n){var r=this.runStrategies_(e,t,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+Rs(e,n.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,i,n){for(var r=[],s=0;s<vl.length;s++){var a=vl[s],o=a.run(this,e,t,i,n);o&&(o.strategy=a.name,r.push({strategy:a.name,syncPoint:o}))}return r}},{key:"selectSyncPoint_",value:function(e,t){for(var i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,s=1;s<e.length;s++){var a=Math.abs(e[s].syncPoint[t.key]-t.value);a<n&&(n=a,i=e[s].syncPoint,r=e[s].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+"]"),i}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var i=t.mediaSequence-e.mediaSequence-1;i>=0;i--){var n=e.segments[i];if(n&&void 0!==n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t=e.segment,i=e.playlist,n=void 0;return(n=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,n)&&(this.saveDiscontinuitySyncInfo_(e),i.syncInfo||(i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:t.start})),n}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,i=c.default.timescale(t.map.bytes),n=c.default.startTime(i,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=n),{start:n,end:n+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=gl(e.bytes,this.inspectCache_),i=void 0,n=void 0,r=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,i=t.video[0].dtsTime,n=t.video[1].dtsTime,r=t.video):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,i=t.audio[0].dtsTime,n=t.audio[1].dtsTime,r=t.audio),{segmentTimestampInfo:r,start:i,end:n,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var i=e.segment,n=this.timelines[e.timeline];if(null!==e.timestampOffset)n={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=n,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+n.time+"] [mapping: "+n.mapping+"]"),i.start=e.startOfSegment,i.end=t.end+n.mapping;else{if(!n)return!1;i.start=t.start+n.mapping,i.end=t.end+n.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var r=t.discontinuityStarts[n],s=t.discontinuitySequence+n+1,a=r-e.mediaIndex,o=Math.abs(a);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>o){var l=void 0;l=a<0?i.start-Rs(t,e.mediaIndex,r):i.end+Rs(t,e.mediaIndex+1,r),this.discontinuities[s]={time:l,accuracy:o}}}}}]),t}(ls.EventTarget),_l=new Wa("./decrypter-worker.worker.js",function(e,t){var i=this;!function(){var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],n=t[4],r=i[4],s=void 0,a=void 0,o=void 0,l=[],u=[],c=void 0,h=void 0,d=void 0,p=void 0,f=void 0;for(s=0;s<256;s++)u[(l[s]=s<<1^283*(s>>7))^s]=s;for(a=o=0;!n[a];a^=c||1,o=u[o]||1)for(d=(d=o^o<<1^o<<2^o<<3^o<<4)>>8^255&d^99,n[a]=d,r[d]=a,f=16843009*l[h=l[c=l[a]]]^65537*h^257*c^16843008*a,p=257*l[d]^16843008*d,s=0;s<4;s++)t[s][a]=p=p<<24^p>>>8,i[s][d]=f=f<<24^f>>>8;for(s=0;s<5;s++)t[s]=t[s].slice(0),i[s]=i[s].slice(0);return e},s=null,a=function(){function t(i){e(this,t),s||(s=r()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var n=void 0,a=void 0,o=void 0,l=void 0,u=void 0,c=this._tables[0][4],h=this._tables[1],d=i.length,p=1;if(4!==d&&6!==d&&8!==d)throw new Error("Invalid aes key size");for(l=i.slice(0),u=[],this._key=[l,u],n=d;n<4*d+28;n++)o=l[n-1],(n%d==0||8===d&&n%d==4)&&(o=c[o>>>24]<<24^c[o>>16&255]<<16^c[o>>8&255]<<8^c[255&o],n%d==0&&(o=o<<8^o>>>24^p<<24,p=p<<1^283*(p>>7))),l[n]=l[n-d]^o;for(a=0;n;a++,n--)o=l[3&a?n:n-4],u[a]=n<=4||a<4?o:h[0][c[o>>>24]]^h[1][c[o>>16&255]]^h[2][c[o>>8&255]]^h[3][c[255&o]]}return t.prototype.decrypt=function(e,t,i,n,r,s){var a=this._key[1],o=e^a[0],l=n^a[1],u=i^a[2],c=t^a[3],h=void 0,d=void 0,p=void 0,f=a.length/4-2,m=void 0,g=4,v=this._tables[1],y=v[0],_=v[1],T=v[2],b=v[3],k=v[4];for(m=0;m<f;m++)h=y[o>>>24]^_[l>>16&255]^T[u>>8&255]^b[255&c]^a[g],d=y[l>>>24]^_[u>>16&255]^T[c>>8&255]^b[255&o]^a[g+1],p=y[u>>>24]^_[c>>16&255]^T[o>>8&255]^b[255&l]^a[g+2],c=y[c>>>24]^_[o>>16&255]^T[l>>8&255]^b[255&u]^a[g+3],g+=4,o=h,l=d,u=p;for(m=0;m<4;m++)r[(3&-m)+s]=k[o>>>24]<<24^k[l>>16&255]<<16^k[u>>8&255]<<8^k[255&c]^a[g++],h=o,o=l,l=u,u=c,c=h},t}(),o=function(){function t(){e(this,t),this.listeners={}}return t.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),i>-1},t.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=t.length,a=0;a<s;++a)t[a].apply(this,r)},t.prototype.dispose=function(){this.listeners={}},t.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},t}(),l=function(t){function i(){e(this,i);var r=n(this,t.call(this,o));return r.jobs=[],r.delay=1,r.timeout_=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),i.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},i}(o),u=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},c=function(){function i(t,n,r,s){e(this,i);var a=i.STEP,o=new Int32Array(t.buffer),c=new Uint8Array(t.byteLength),h=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(o.subarray(h,h+a),n,r,c)),h=a;h<o.length;h+=a)r=new Uint32Array([u(o[h-4]),u(o[h-3]),u(o[h-2]),u(o[h-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(h,h+a),n,r,c));this.asyncStream_.push(function(){var e;s(null,(e=c).subarray(0,e.byteLength-e[e.byteLength-1]))})}return i.prototype.decryptChunk_=function(e,t,i,n){return function(){var r=function(e,t,i){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new a(Array.prototype.slice.call(t)),s=new Uint8Array(e.byteLength),o=new Int32Array(s.buffer),l=void 0,c=void 0,h=void 0,d=void 0,p=void 0,f=void 0,m=void 0,g=void 0,v=void 0;for(l=i[0],c=i[1],h=i[2],d=i[3],v=0;v<n.length;v+=4)p=u(n[v]),f=u(n[v+1]),m=u(n[v+2]),g=u(n[v+3]),r.decrypt(p,f,m,g,o,v),o[v]=u(o[v]^l),o[v+1]=u(o[v+1]^c),o[v+2]=u(o[v+2]^h),o[v+3]=u(o[v+3]^d),l=p,c=f,h=m,d=g;return s}(e,t,i);n.set(r,e.byteOffset)}},t(i,null,[{key:"STEP",get:function(){return 32e3}}]),i}();new function(e){e.onmessage=function(t){var i=t.data,n=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),r=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4),s=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new c(n,r,s,function(t,n){var r,s;e.postMessage((r={source:i.source,decrypted:n},s={},Object.keys(r).forEach(function(e){var t=r[e];ArrayBuffer.isView(t)?s[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:s[e]=t}),s),[n.buffer])})}}(i)}()}),Tl=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},bl=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},kl=function(e,t){t.activePlaylistLoader=e,e.load()},Sl=function(e,t){return function(){var i=t.segmentLoaders,n=i[e],r=i.main,s=t.mediaTypes[e],a=s.activeTrack(),o=s.activeGroup(a),l=s.activePlaylistLoader;bl(n,s),o&&(o.playlistLoader?(n.resyncLoader(),kl(o.playlistLoader,s)):l&&r.resetEverything())}},Cl=function(e,t){return function(){var i=t.segmentLoaders,n=i[e],r=i.main,s=t.mediaTypes[e],a=s.activeTrack(),o=s.activeGroup(a),l=s.activePlaylistLoader;bl(n,s),o&&(o.playlistLoader?l!==o.playlistLoader?(n.track&&n.track(a),n.resetEverything(),kl(o.playlistLoader,s)):kl(o.playlistLoader,s):r.resetEverything())}},El={AUDIO:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;bl(i,n);var s=n.activeTrack(),a=n.activeGroup(),o=(a.filter(function(e){return e.default})[0]||a[0]).id,l=n.tracks[o];if(s!==l){for(var u in ls.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[u].enabled=n.tracks[u]===l;n.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e];ls.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),bl(i,n);var r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}}},wl={AUDIO:function(e,t,i){if(t){var n=i.tech,r=i.requestOptions,s=i.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();s.playlist(e,r),(!n.paused()||e.endList&&"none"!==n.preload())&&s.load()}),t.on("loadedplaylist",function(){s.playlist(t.media(),r),n.paused()||s.load()}),t.on("error",El[e](e,i))}},SUBTITLES:function(e,t,i){var n=i.tech,r=i.requestOptions,s=i.segmentLoaders[e],a=i.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();s.playlist(e,r),s.track(a.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&s.load()}),t.on("loadedplaylist",function(){s.playlist(t.media(),r),n.paused()||s.load()}),t.on("error",El[e](e,i))}},Pl={AUDIO:function(e,t){var i=t.hls,n=t.sourceType,r=t.segmentLoaders[e],s=t.requestOptions,a=t.master.mediaGroups,o=t.mediaTypes[e],l=o.groups,u=o.tracks,c=t.masterPlaylistLoader;for(var h in a[e]&&0!==Object.keys(a[e]).length||(a[e]={main:{default:{default:!0}}}),a[e])for(var d in l[h]||(l[h]=[]),a[e][h]){var p=a[e][h][d],f=void 0;if(f=p.resolvedUri?new As(p.resolvedUri,i,s):p.playlists&&"dash"===n?new xo(p.playlists[0],i,s,c):null,p=ls.mergeOptions({id:d,playlistLoader:f},p),wl[e](e,p.playlistLoader,t),l[h].push(p),void 0===u[d]){var m=new ls.AudioTrack({id:d,kind:Tl(p),enabled:!1,language:p.language,default:p.default,label:d});u[d]=m}}r.on("error",El[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,n=t.hls,r=t.sourceType,s=t.segmentLoaders[e],a=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,h=t.masterPlaylistLoader;for(var d in o[e])for(var p in u[d]||(u[d]=[]),o[e][d])if(!o[e][d][p].forced){var f=o[e][d][p],m=void 0;if("hls"===r?m=new As(f.resolvedUri,n,a):"dash"===r&&(m=new xo(f.playlists[0],n,a,h)),f=ls.mergeOptions({id:p,playlistLoader:m},f),wl[e](e,f.playlistLoader,t),u[d].push(f),void 0===c[p]){var g=i.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track;c[p]=g}}s.on("error",El[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,n=t.master.mediaGroups,r=t.mediaTypes[e],s=r.groups,a=r.tracks;for(var o in n[e])for(var l in s[o]||(s[o]=[]),n[e][o]){var u=n[e][o][l];if(u.instreamId.match(/CC\d/)&&(s[o].push(ls.mergeOptions({id:l},u)),void 0===a[l])){var c=i.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default&&u.autoselect,language:u.language,label:l},!1).track;a[l]=c}}}},Ll=function(e,t){return function(i){var n=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,s=n.media();if(!s)return null;var a=null;return s.attributes[e]&&(a=r[s.attributes[e]]),a=a||r.main,void 0===i?a:null===i?null:a.filter(function(e){return e.id===i.id})[0]||null}},Al={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if(i[n].enabled)return i[n];return null}},SUBTITLES:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if("showing"===i[n].mode)return i[n];return null}}},Il=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){Pl[t](t,e)});var t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,r=e.hls;["AUDIO","SUBTITLES"].forEach(function(i){t[i].activeGroup=Ll(i,e),t[i].activeTrack=Al[i](i,e),t[i].onGroupChanged=Sl(i,e),t[i].onTrackChanged=Cl(i,e)});var s=t.AUDIO.activeGroup(),a=(s.filter(function(e){return e.default})[0]||s[0]).id;t.AUDIO.tracks[a].enabled=!0,t.AUDIO.onTrackChanged(),i.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return t[e].onGroupChanged()})});var o=function(){t.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"hls-audio-change"})};for(var l in n.audioTracks().addEventListener("change",o),n.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",function(){n.audioTracks().removeEventListener("change",o),n.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),n.clearTracks("audio"),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[l])},xl=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Do,activeTrack:Do,onGroupChanged:Do,onTrackChanged:Do}}),e},Ol=120,Dl=void 0,Ml=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Rl=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Bl=function(t){function i(e){ps(this,i);var t=vs(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),n=e.url,r=e.handleManifestRedirects,s=e.withCredentials,a=e.tech,o=e.bandwidth,l=e.externHls,u=e.useCueTags,c=e.blacklistDuration,h=e.enableLowInitialPlaylist,d=e.sourceType,p=e.seekTo,f=e.cacheEncryptionKeys;if(!n)throw new Error("A non-empty playlist URL is required");Dl=l,t.withCredentials=s,t.tech_=a,t.hls_=a.hls,t.seekTo_=p,t.sourceType_=d,t.useCueTags_=u,t.blacklistDuration=c,t.enableLowInitialPlaylist=h,t.useCueTags_&&(t.cueTagsTrack_=t.tech_.addTextTrack("metadata","ad-cues"),t.cueTagsTrack_.inBandMetadataTrackDispatchType=""),t.requestOptions_={withCredentials:s,handleManifestRedirects:r,timeout:null},t.mediaTypes_=xl(),t.mediaSource=new ls.MediaSource,t.mediaSource.addEventListener("sourceopen",t.handleSourceOpen_.bind(t)),t.seekable_=ls.createTimeRanges(),t.hasPlayed_=function(){return!1},t.syncController_=new yl(e),t.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,t.decrypter_=new _l,t.inbandTextTracks_={};var m={hls:t.hls_,mediaSource:t.mediaSource,currentTime:t.tech_.currentTime.bind(t.tech_),seekable:function(){return t.seekable()},seeking:function(){return t.tech_.seeking()},duration:function(){return t.mediaSource.duration},hasPlayed:function(){return t.hasPlayed_()},goalBufferLength:function(){return t.goalBufferLength()},bandwidth:o,syncController:t.syncController_,decrypter:t.decrypter_,sourceType:t.sourceType_,inbandTextTracks:t.inbandTextTracks_,cacheEncryptionKeys:f};return t.masterPlaylistLoader_="dash"===t.sourceType_?new xo(n,t.hls_,t.requestOptions_):new As(n,t.hls_,t.requestOptions_),t.setupMasterPlaylistLoaderListeners_(),t.mainSegmentLoader_=new cl(ls.mergeOptions(m,{segmentMetadataTrack:t.segmentMetadataTrack_,loaderType:"main"}),e),t.audioSegmentLoader_=new cl(ls.mergeOptions(m,{loaderType:"audio"}),e),t.subtitleSegmentLoader_=new pl(ls.mergeOptions(m,{loaderType:"vtt"}),e),t.setupSegmentLoaderListeners_(),Ml.forEach(function(e){t[e+"_"]=Rl.bind(t,e)}),t.logger_=Oo("MPC"),t.masterPlaylistLoader_.load(),t}return gs(i,t),fs(i,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;Js(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),Il({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,hls:e.hls_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t);try{e.setupSourceBuffers_()}catch(su){return ls.log.warn("Failed to create SourceBuffers",su),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=e.masterPlaylistLoader_.media();if(!t){e.excludeUnsupportedVariants_();var i=void 0;return e.enableLowInitialPlaylist&&(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),e.initialMedia_=i,void e.masterPlaylistLoader_.media(e.initialMedia_)}if(e.useCueTags_&&e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),e.tech_.paused()||(e.mainSegmentLoader_.load(),e.audioSegmentLoader_&&e.audioSegmentLoader_.load()),!t.endList){var n=function(){var t=e.seekable();0!==t.length&&e.mediaSource.addSeekableRange_(t.start(0),t.end(0))};if(e.duration()!==1/0){e.tech_.one("durationchange",function t(){e.duration()===1/0?n():e.tech_.one("durationchange",t)})}else n()}}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;Js(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(e,t){var i=e.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(var s in i.AUDIO)for(var a in i.AUDIO[s]){i.AUDIO[s][a].uri||(n=!1)}n&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),Dl.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),Dl.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var t=e.selectPlaylist(),i=e.masterPlaylistLoader_.media(),n=e.tech_.buffered(),r=n.length?n.end(n.length-1)-e.tech_.currentTime():0,s=e.bufferLowWaterLine();(!i.endList||e.duration()<Ro.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH<i.attributes.BANDWIDTH||r>=s)&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},Ol)}),this.mainSegmentLoader_.on("reseteverything",function(){e.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(t){e.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})}),this.audioSegmentLoader_.on("ended",function(){e.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything(function(){ls.browser.IE_VERSION||ls.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.seekTo_(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(ls.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.seekTo_(i.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(i.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(su){return ls.log.warn("Failed to create Source Buffers",su),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e){this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(su){ls.log.warn("Failed to call media source endOfStream",su)}}}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var i=Dl.Playlist.playlistEnd(e,t),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=Ea;var s=r.end(r.length-1);return s-n<=Ea&&i-s<=Ea}},{key:"blacklistCurrentPlaylist",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1],n=void 0;if(n=t.playlist||this.masterPlaylistLoader_.media(),i=i||t.blacklistDuration||this.blacklistDuration,!n){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(su){return this.trigger("error")}}var r=1===this.masterPlaylistLoader_.master.playlists.filter(zs).length,s=this.masterPlaylistLoader_.master.playlists;return 1===s.length?(ls.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(r)):(r&&(ls.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),s.forEach(function(e){e.excludeUntil!==1/0&&delete e.excludeUntil}),this.tech_.trigger("retryplaylist")),n.excludeUntil=Date.now()+1e3*i,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),e=this.selectPlaylist(),ls.log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(e,r))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=Pa(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:Dl.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var i=this.masterPlaylistLoader_.media();if(i){var n=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(null!==n&&0!==(e=Dl.Playlist.seekable(i,n)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(i=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(i,this.mediaSource.duration)))return;if(0===(t=Dl.Playlist.seekable(i,n)).length)return}var r=void 0,s=void 0;this.seekable_&&this.seekable_.length&&(r=this.seekable_.end(0),s=this.seekable_.start(0)),t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=ls.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===r&&this.seekable_.start(0)===s||(this.logger_("seekable updated ["+Ia(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},{key:"updateDuration",value:function(){var e=this,t=this.mediaSource.duration,i=Dl.Playlist.duration(this.masterPlaylistLoader_.media()),n=this.tech_.buffered(),r=function t(){e.logger_("Setting duration from "+e.mediaSource.duration+" => "+i);try{e.mediaSource.duration=i}catch(su){ls.log.warn("Failed to set media source duration",su)}e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)};n.length>0&&(i=Math.max(i,n.end(n.length-1))),t!==i&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",r):r())}},{key:"dispose",value:function(){var e=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(t){var i=e.mediaTypes_[t].groups;for(var n in i)i[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=so(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}}},{key:"configureLoaderMimeTypes_",value:function(e){var t=e.length>1&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new ls.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(t){t.attributes.CODECS&&e.default.MediaSource&&e.default.MediaSource.isTypeSupported&&!e.default.MediaSource.isTypeSupported('video/mp4; codecs="'+eo(t.attributes.CODECS)+'"')&&(t.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(e){var t=2,i=null,n=void 0;e.attributes.CODECS&&(n=Za(e.attributes.CODECS),i=n.videoCodec,t=n.codecCount),this.master().playlists.forEach(function(e){var n={codecCount:2,videoCodec:null};e.attributes.CODECS&&(n=Za(e.attributes.CODECS)),n.codecCount!==t&&(e.excludeUntil=1/0),n.videoCodec!==i&&(e.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(e){var t=0,i=this.seekable();i.length&&(t=i.start(0)),ml(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=Ro.GOAL_BUFFER_LENGTH,i=Ro.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,Ro.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=Ro.BUFFER_LOW_WATER_LINE,i=Ro.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,Ro.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,n)}}]),i}(ls.EventTarget),Ul=function(e,t,i){return function(n){var r=e.master.playlists[t],s=Gs(r),a=zs(r);return void 0===n?a:(n?delete r.disabled:r.disabled=!0,n===a||s||(i(),n?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),n)}},jl=function e(t,i,n){ps(this,e);var r=t.masterPlaylistController_,s=r[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(r);if(i.attributes.RESOLUTION){var a=i.attributes.RESOLUTION;this.width=a.width,this.height=a.height}this.bandwidth=i.attributes.BANDWIDTH,this.id=n,this.enabled=Ul(t.playlists,i.uri,s)},Nl=function(e){var t=e.playlists;e.representations=function(){return t.master.playlists.filter(function(e){return!Gs(e)}).map(function(t,i){return new jl(e,t,t.uri)})}},Fl=["seeking","seeked","pause","playing","error"],Hl=function(){function t(i){var n=this;ps(this,t),this.tech_=i.tech,this.seekable=i.seekable,this.seekTo=i.seekTo,this.allowSeeksWithinUnsafeLiveWindow=i.allowSeeksWithinUnsafeLiveWindow,this.media=i.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Oo("PlaybackWatcher"),this.logger_("initialize");var r=function(){return n.monitorCurrentTime_()},s=function(){return n.techWaiting_()},a=function(){return n.cancelTimer_()},o=function(){return n.fixesBadSeeks_()};this.tech_.on("seekablechanged",o),this.tech_.on("waiting",s),this.tech_.on(Fl,a),this.tech_.on("canplay",r),this.dispose=function(){n.logger_("dispose"),n.tech_.off("seekablechanged",o),n.tech_.off("waiting",s),n.tech_.off(Fl,a),n.tech_.off("canplay",r),n.checkCurrentTimeTimeout_&&e.default.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}return fs(t,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&e.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=e.default.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Ea>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var e=this.seekable(),t=this.tech_.currentTime(),i=void 0;this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(i=e.end(e.length-1));this.beforeSeekableWindow_(e,t)&&(i=e.start(0)+Ea);return void 0!==i&&(this.logger_("Trying to seek outside of seekable at time "+t+" with seekable range "+Ia(e)+". Seeking to "+i+"."),this.seekTo(i),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),i=Pa(t,e);return i.length&&e+3<=i.end(0)?(this.cancelTimer_(),this.seekTo(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.seekTo(i),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.buffered(),r=La(n,t);if(this.videoUnderflow_(r,n,t))return this.cancelTimer_(),this.seekTo(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(r.length>0){var s=r.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+s+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.length)return!1;var r=e.end(e.length-1)+Ea;return!i.endList&&n&&(r=e.end(e.length-1)+3*i.targetDuration),t>r}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-Ea)}},{key:"videoUnderflow_",value:function(e,t,i){if(0===e.length){var n=this.gapFromVideoUnderflow_(t,i);if(n)return this.logger_("Encountered a gap in video from "+n.start+" to "+n.end+". Seeking to current time "+i),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),n=La(t,i);this.cancelTimer_(),0!==n.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.seekTo(n.start(0)+Ca),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var i=Aa(e),n=0;n<i.length;n++){var r=i.start(n),s=i.end(n);if(t-r<4&&t-r>2)return{start:r,end:s}}return null}}]),t}(),ql={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},Vl=function e(t,i){var n=0,r=0,s=ls.mergeOptions(ql,i);t.ready(function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var a=function(){r&&t.currentTime(r)},o=function(e){null!=e&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",a),t.src(e),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){if(Date.now()-n<1e3*s.errorInterval)t.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(s.getSource&&"function"==typeof s.getSource)return n=Date.now(),s.getSource.call(t,o);ls.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function e(){t.off("loadedmetadata",a),t.off("error",l),t.off("dispose",e)};t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=function(i){u(),e(t,i)}},Wl=function(e){Vl(this,e)},Gl="1.10.6";ls.use("*",function(e){return{setSource:function(e,t){t(null,e)},setCurrentTime:function(t){return e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(t),t},play:function(){e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(e.tech_.currentTime())}}});var zl={PlaylistLoader:As,Playlist:Zs,Decrypter:p.Decrypter,AsyncStream:p.AsyncStream,decrypt:p.decrypt,utils:fa,STANDARD_PLAYLIST_SELECTOR:Zo,INITIAL_PLAYLIST_SELECTOR:tl,comparePlaylistBandwidth:$o,comparePlaylistResolution:Qo,xhr:ia()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(e){Object.defineProperty(zl,e,{get:function(){return ls.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),Ro[e]},set:function(t){ls.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?ls.log.warn("value of Hls."+e+" must be greater than or equal to 0"):Ro[e]=t}})});var Kl="videojs-vhs",Yl=function(e){if(/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e))return"hls";return/^application\/dash\+xml/i.test(e)?"dash":null},Xl=function(e,t){for(var i=t.media(),n=-1,r=0;r<e.length;r++)if(e[r].id===i.uri){n=r;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})},$l=function(e,t){t.representations().forEach(function(t){e.addQualityLevel(t)}),Xl(e,t.playlists)};zl.canPlaySource=function(){return ls.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Ql=function(e,t,i){if(!e)return e;var n={};for(var r in e)n[r]={audioContentType:'audio/mp4; codecs="'+i.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+t.attributes.CODECS+'"'},t.contentProtection&&t.contentProtection[r]&&t.contentProtection[r].pssh&&(n[r].pssh=t.contentProtection[r].pssh),"string"==typeof e[r]&&(n[r].url=e[r]);return ls.mergeOptions(e,n)},Jl=function(e){if("dash"===e.options_.sourceType){var t=ls.players[e.tech_.options_.playerId];if(t.eme){var i=Ql(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());i&&(t.currentSource().keySystems=i,t.eme.initializeMediaKeys&&t.eme.initializeMediaKeys())}}},Zl=function(){if(!window.localStorage)return null;var e=window.localStorage.getItem(Kl);if(!e)return null;try{return JSON.parse(e)}catch(su){return null}},eu=function(e){if(!window.localStorage)return!1;var t=Zl();t=t?ls.mergeOptions(t,e):e;try{window.localStorage.setItem(Kl,JSON.stringify(t))}catch(su){return!1}return t};zl.supportsNativeHls=function(){var e=t.default.createElement("video");if(!ls.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),zl.supportsNativeDash=!!ls.getTech("Html5").isSupported()&&/maybe|probably/i.test(t.default.createElement("video").canPlayType("application/dash+xml")),zl.supportsTypeNatively=function(e){return"hls"===e?zl.supportsNativeHls:"dash"===e&&zl.supportsNativeDash},zl.isSupported=function(){return ls.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var tu=ls.getComponent("Component"),iu=function(e){function i(e,n,r){ps(this,i);var s=vs(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,r.hls));if(n.options_&&n.options_.playerId){var a=ls(n.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return ls.log.warn("player.hls is deprecated. Use player.tech().hls instead."),n.trigger({type:"usage",name:"hls-player-access"}),s},configurable:!0}),a.vhs=s,a.dash=s,s.player_=a}if(s.tech_=n,s.source_=e,s.stats={},s.setOptions_(),s.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(t.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var i=t.default.fullscreenElement||t.default.webkitFullscreenElement||t.default.mozFullScreenElement||t.default.msFullscreenElement;i&&i.contains(s.tech_.el())&&s.masterPlaylistController_.smoothQualityChange_()}),s.on(s.tech_,"seeking",function(){0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),s.on(s.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}return gs(i,tu),fs(i,[{key:"setOptions_",value:function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Zl();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Ro.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ro.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach(function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(e,t){var i=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=zl,this.options_.sourceType=Yl(t),this.options_.seekTo=function(e){i.tech_.setCurrentTime(e),i.setCurrentTime(e)},this.masterPlaylistController_=new Bl(this.options_),this.playbackWatcher_=new Hl(ls.mergeOptions(this.options_,{seekable:function(){return i.seekable()},media:function(){return i.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){ls.players[i.tech_.options_.playerId].error(i.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):zl.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=zl.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=void 0;return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){ls.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Oa(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Oa(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){i.options_.useBandwidthFromLocalStorage&&eu({bandwidth:i.bandwidth,throughput:Math.round(i.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){Nl(i),Jl(i)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return i.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(ls.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,t=ls.players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){$l(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){Xl(e.qualityLevels_,e.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,ms(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(e,t){return ka({playlist:this.masterPlaylistController_.media(),time:e,callback:t})}},{key:"seekToProgramTime",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return Sa({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}]),i}(),nu={name:"videojs-http-streaming",VERSION:Gl,canHandleSource:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=ls.mergeOptions(ls.options,t);return nu.canPlayType(e.type,i)},handleSource:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ls.mergeOptions(ls.options,i);return t.hls=new iu(e,t,n),t.hls.xhr=ia(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=ls.mergeOptions(ls.options,t).hls.overrideNative,n=Yl(e);return n&&(!zl.supportsTypeNatively(n)||i)?"maybe":""}};void 0!==ls.MediaSource&&void 0!==ls.URL||(ls.MediaSource=bo,ls.URL=ko),bo.supportsNativeMediaSources()&&ls.getTech("Html5").registerSourceHandler(nu,0),ls.HlsHandler=iu,ls.HlsSourceHandler=nu,ls.Hls=zl,ls.use||ls.registerComponent("Hls",zl),ls.options.hls=ls.options.hls||{},ls.registerPlugin?ls.registerPlugin("reloadSourceOnError",Wl):ls.plugin("reloadSourceOnError",Wl);var ru=ls;exports.default=ru;
},{"global/window":"iDvB","global/document":"rTOJ","safe-json-parse/tuple":"XNMF","keycode":"VHLu","xhr":"aGZ0","videojs-vtt.js":"LvFr","url-toolkit":"FkUI","m3u8-parser":"wb88","mpd-parser":"NDkH","mux.js/lib/tools/mp4-inspector":"N5Pz","mux.js/lib/mp4/probe":"f6c2","mux.js/lib/mp4/caption-parser":"qa7K","mux.js/lib/tools/ts-inspector.js":"tSL0","aes-decrypter":"MKUx"}],"OQuU":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={WIDEVINE:"com.widevine.alpha",FAIRPLAY:"com.apple.fps.1_0",PLAYREADY:"com.microsoft.playready"},o=function(){function n(){e(this,n)}return r(n,null,[{key:"buildKeySystems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r={};return e.forEach(function(e){var t=n.vendors[e.type];if(n.vendors.FAIRPLAY===t){var o=e.certificateUrl,i=e.licenseUrl;r[t]={certificateUri:o,licenseUri:i}}else r[t]=e.licenseUrl}),{keySystems:r}}},{key:"buildKeySystemOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=[];return e.forEach(function(e){var t=n.vendors[e.type],o={};o.name=t,o.options={serverURL:e.licenseUrl},r.push(o)}),r}},{key:"hasDrm",value:function(e){return e.some(function(e){var n=e.keySystemOptions;return n&&n.length>0})}},{key:"vendors",get:function(){return t}}]),n}(),i=o;exports.default=i;
},{}],"mKEu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.containQualities=n,exports.isSourceHD=r,exports.types=exports.list=void 0;var t=["SD","HD","HQ"];exports.list=t;var e={HD:t[1],HQ:t[2],SD:t[0]};function n(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[e.SD,e.HD];return!(r.length<1||r.some(function(e){return!t.includes(e)}))&&n.filter(function(t){return r.includes(t.quality)}).filter(function(t,e,n){return n.findIndex(function(e){return e.quality===t.quality})===e}).length===r.length}function r(t){var n=t.quality;return e.SD!==n}exports.types=e;
},{}],"SrUl":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=["ON_DEMAND","LIVE","DVR"],u={DVR:r[2],LIVE:r[1],ON_DEMAND:r[0]},i=function(){function t(){e(this,t)}return n(t,null,[{key:"evaluate",value:function(e,n){return e&&n?t.types.DVR:n?t.types.LIVE:t.types.ON_DEMAND}},{key:"isDvr",value:function(e){return t.types.DVR===e}},{key:"isLive",value:function(e){return t.types.LIVE===e}},{key:"isOnDemand",value:function(e){return t.types.ON_DEMAND===e}},{key:"list",get:function(){return r}},{key:"types",get:function(){return u}}]),t}(),o=i;exports.default=o;
},{}],"xj5b":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r={WIDTH700:"/scale/width/700",WIDTH200:"/scale/width/200",WIDTH300:"/scale/width/300",WIDTH344:"/16x9/scale/width/344"},u=function(){function t(){e(this,t)}return n(t,null,[{key:"WIDTH700",get:function(){return r.WIDTH700}},{key:"WIDTH200",get:function(){return r.WIDTH200}},{key:"WIDTH300",get:function(){return r.WIDTH300}},{key:"WIDTH344",get:function(){return r.WIDTH344}}]),t}(),o=u;exports.default=o;
},{}],"I0qx":[function(require,module,exports) {
module.exports={"Audio Player":"Audio Player","Video Player":"Video Player",Play:"Play",Pause:"Pause",Replay:"Replay","Current Time":"Current Time",Duration:"Duration","Remaining Time":"Remaining Time","Stream Type":"Stream Type",LIVE:"LIVE",Loaded:"Loaded",Progress:"Progress","Progress Bar":"Progress Bar","progress bar timing: currentTime={1} duration={2}":"{1} of {2}",Fullscreen:"Fullscreen","Non-Fullscreen":"Non-Fullscreen",Mute:"Mute",Unmute:"Unmute","Playback Rate":"Playback Rate",Subtitles:"Subtitles","subtitles off":"subtitles off",Captions:"Captions","captions off":"captions off",Chapters:"Chapters",Descriptions:"Descriptions","descriptions off":"descriptions off","Audio Track":"Audio Track","Volume Level":"Volume Level","You aborted the media playback":"You aborted the media playback","A network error caused the media download to fail part-way.":"A network error caused the media download to fail part-way.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"The media could not be loaded, either because the server or network failed or because the format is not supported.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.","No compatible source was found for this media.":"No compatible source was found for this media.","The media is encrypted and we do not have the keys to decrypt it.":"The media is encrypted and we do not have the keys to decrypt it.","Play Video":"Play Video",Close:"Close","Close Modal Dialog":"Close Modal Dialog","Modal Window":"Modal Window","This is a modal window":"This is a modal window","This modal can be closed by pressing the Escape key or activating the close button.":"This modal can be closed by pressing the Escape key or activating the close button.",", opens captions settings dialog":", opens captions settings dialog",", opens subtitles settings dialog":", opens subtitles settings dialog",", opens descriptions settings dialog":", opens descriptions settings dialog",", selected":", selected","captions settings":"captions settings","subtitles settings":"subtitles settings","descriptions settings":"descriptions settings",Text:"Text",White:"White",Black:"Black",Red:"Red",Green:"Green",Blue:"Blue",Yellow:"Yellow",Magenta:"Magenta",Cyan:"Cyan",Background:"Background",Window:"Window",Transparent:"Transparent","Semi-Transparent":"Semi-Transparent",Opaque:"Opaque","Font Size":"Font Size","Text Edge Style":"Text Edge Style",None:"None",Raised:"Raised",Depressed:"Depressed",Uniform:"Uniform",Dropshadow:"Dropshadow","Font Family":"Font Family","Proportional Sans-Serif":"Proportional Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportional Serif","Monospace Serif":"Monospace Serif",Casual:"Casual",Script:"Script","Small Caps":"Small Caps",Reset:"Reset","restore all settings to the default values":"restore all settings to the default values",Done:"Done","Caption Settings Dialog":"Caption Settings Dialog","Beginning of dialog window. Escape will cancel and close the window.":"Beginning of dialog window. Escape will cancel and close the window.","End of dialog window.":"End of dialog window.","ISO-639-1":"en","10 seconds backward":"10 seconds backward","30 seconds forward":"30 seconds forward",Audio:"Audio","Audio and subtitles":"Audio and subtitles","Audio Description":"Audio Description","Auto play":"Auto play",Back:"Back","Casting to":"Casting to","Content will be available in {1} days":"Content will be available in {1} days","Current position":"Current position","Current subject":"Current subject",Days:"Days","Duration: {1}":"Duration: {1}","Edit player settings":"Edit player settings",Episode:"Episode",HD:"HD","Continuous Playback":"Continuous Playback",Cancel:"Cancel","Coming next":"Coming next",copy:"copy","Copy link":"Copy link",Facebook:"Facebook","Font size level {1}":"Font size level {1}",Hours:"Hours",Integrate:"Integrate",LinkedIn:"LinkedIn",Mail:"Mail",Minutes:"Minutes",Off:"Off","Open {1} in Play {2}":"Open {1} in Play {2}","Playback will begin shortly":"Playback will begin shortly",Quality:"Quality",SD:"SD",Seconds:"Seconds","Seek to live, currently behind live":"Seek to live, currently behind live","Seek to live, currently playing live":"Seek to live, currently playing live","Share at current position":"Share at current position","Share by e-mail":"Share by e-mail",Share:"Share","Share on {1}":"Share on {1}","Share on Facebook":"Share on Facebook","Share on Linkedin":"Share on Linkedin","Share on Twitter":"Share on Twitter","Share on Whatsapp":"Share on Whatsapp","Share the current subject":"Share the current subject","Share the episode":"Share the episode",Copied:"Copied",Speed:"Speed","Start casting":"Start casting","Start pip":"Start picture in picture",Stop:"Stop","Stop casting":"Stop casting","Stop pip":"Stop picture in picture","The content cannot be played.":"The content cannot be played.","The content was skipped due to legal restriction":"The content was skipped due to legal restriction","This commercial media is not available.":"This commercial media is not available.","This content is not available.":"This content is not available.","This content is not available anymore.":"This content is not available anymore.","This content is not available due to legal restrictions.":"This content is not available due to legal restrictions.","This content is not available outside Switzerland.":"This content is not available outside Switzerland.","This content is not yet available. Please try again later.":"This content is not yet available. Please try again later.","To protect children, this content is only available between 8PM and 6AM.":"To protect children, this content is only available between 8PM and 6AM.","To protect children, this content is only available between 11PM and 5AM.":"To protect children, this content is only available between 11PM and 5AM.",Twitter:"Twitter","Unable to display the content. For more information and help, click here...":"Unable to display the content. For more information and help, click here...","Unfortunately the 360 playback experience is not compatible with your browser version.":"Unfortunately the 360 playback experience is not compatible with your browser version.","Unfortunately this format is not compatible with your browser.":"Unfortunately this format is not compatible with your browser.",WhatsApp:"WhatsApp"};
},{}],"LWrW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../lang/en.json"));function o(e){return e&&e.__esModule?e:{default:e}}var a={ERROR_DRM_NOT_SUPPORTED_MESSAGE:{code:5,type:"ERROR_DRM_NOT_SUPPORTED_MESSAGE",hasLink:!0,message:e.default["Unable to display the content. For more information and help, click here..."],iconClass:"vjs-icon-error"},"360_UNSUPPORTED":{code:7,type:"360_UNSUPPORTED",message:e.default["Unfortunately the 360 playback experience is not compatible with your browser version."],iconClass:"vjs-icon-error"},ERROR_INCOMPATIBLE_BROWSER_MESSAGE:{code:8,type:"ERROR_INCOMPATIBLE_BROWSER_MESSAGE",message:e.default["Unfortunately this format is not compatible with your browser."],iconClass:"vjs-icon-error"},ERROR_BLOCKING_REASON_STARTDATE:{code:9,type:"ERROR_BLOCKING_REASON_STARTDATE",message:e.default["This content is not yet available. Please try again later."],iconClass:"vjs-icon-clock"},ERROR_BLOCKING_REASON_ENDDATE:{code:10,type:"ERROR_BLOCKING_REASON_ENDDATE",message:e.default["This content is not available anymore."],iconClass:"vjs-icon-clock"},ERROR_BLOCKING_REASON_LEGAL:{code:11,type:"ERROR_BLOCKING_REASON_LEGAL",message:e.default["This content is not available due to legal restrictions."],iconClass:"vjs-icon-legal"},ERROR_BLOCKING_REASON_COMMERCIAL:{code:12,type:"ERROR_BLOCKING_REASON_COMMERCIAL",message:e.default["This commercial media is not available."],iconClass:"vjs-icon-legal"},ERROR_BLOCKING_REASON_GEOBLOCK:{code:13,type:"ERROR_BLOCKING_REASON_GEOBLOCK",message:e.default["This content is not available outside Switzerland."],iconClass:"vjs-icon-out-of-switzerland"},ERROR_BLOCKING_REASON_AGERATING18:{code:14,type:"ERROR_BLOCKING_REASON_AGERATING18",message:e.default["To protect children, this content is only available between 11PM and 5AM."],iconClass:"vjs-icon-age-rating"},ERROR_BLOCKING_REASON_AGERATING12:{code:15,type:"ERROR_BLOCKING_REASON_AGERATING12",message:e.default["To protect children, this content is only available between 8PM and 6AM."],iconClass:"vjs-icon-age-rating"},ERROR_BLOCKING_REASON_UNKNOWN:{code:16,type:"ERROR_BLOCKING_REASON_UNKNOWN",message:e.default["This content is not available."],iconClass:"vjs-icon-error"},IL_ERROR:{code:17,type:"IL_ERROR",message:e.default["The content cannot be played."],iconClass:"vjs-icon-network"},MEDIACOMPOSITION_CHANGE_KILLSWITCH:{code:18,type:"KILLSWITCH",message:e.default["Unknown error"],iconClass:"vjs-icon-error"},ERROR_UNKNOWN:{code:19,type:"ERROR_UNKNOWN",message:e.default["The content cannot be played."],iconClass:"vjs-icon-error"}},s=a;exports.default=s;
},{"../lang/en.json":"I0qx"}],"ULoR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../errors/errors.js"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var E={STARTDATE:"STARTDATE",ENDDATE:"ENDDATE",LEGAL:"LEGAL",COMMERCIAL:"COMMERCIAL",GEOBLOCK:"GEOBLOCK",AGERATING18:"AGERATING18",AGERATING12:"AGERATING12",UNKNOWN:"UNKNOWN"},A=function(){function t(){n(this,t)}return u(t,null,[{key:"toError",value:function(t){switch(t){case E.STARTDATE:return e.default.ERROR_BLOCKING_REASON_STARTDATE;case E.ENDDATE:return e.default.ERROR_BLOCKING_REASON_ENDDATE;case E.LEGAL:return e.default.ERROR_BLOCKING_REASON_LEGAL;case E.COMMERCIAL:return e.default.ERROR_BLOCKING_REASON_COMMERCIAL;case E.GEOBLOCK:return e.default.ERROR_BLOCKING_REASON_GEOBLOCK;case E.AGERATING18:return e.default.ERROR_BLOCKING_REASON_AGERATING18;case E.AGERATING12:return e.default.ERROR_BLOCKING_REASON_AGERATING12;case E.UNKNOWN:return e.default.ERROR_BLOCKING_REASON_UNKNOWN;default:return-1}}},{key:"isStartDate",value:function(e){return e===E.STARTDATE}},{key:"isEndDate",value:function(e){return e===E.ENDDATE}},{key:"isGeoBlock",value:function(e){return e===E.GEOBLOCK}},{key:"isLegal",value:function(e){return e===E.LEGAL}},{key:"isCommercial",value:function(e){return e===E.COMMERCIAL}},{key:"isAgeRating18",value:function(e){return e===E.AGERATING18}},{key:"isAgeRating12",value:function(e){return e===E.AGERATING12}},{key:"isUnknown",value:function(e){return e===E.UNKNOWN}},{key:"isPermanentlyBlocked",value:function(e){return e&&!this.isStartDate(e)&&!this.isEndDate(e)}},{key:"isBlocked",value:function(e){return!!e}},{key:"AGERATING12",get:function(){return E.AGERATING12}},{key:"AGERATING18",get:function(){return E.AGERATING18}},{key:"COMMERCIAL",get:function(){return E.COMMERCIAL}},{key:"ENDDATE",get:function(){return E.ENDDATE}},{key:"GEOBLOCK",get:function(){return E.GEOBLOCK}},{key:"LEGAL",get:function(){return E.LEGAL}},{key:"STARTDATE",get:function(){return E.STARTDATE}},{key:"UNKNOWN",get:function(){return E.UNKNOWN}}]),t}(),R=A;exports.default=R;
},{"../errors/errors.js":"LWrW"}],"csCP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("video.js"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e){return u(e)||i(e)||o(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function i(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function u(e){if(Array.isArray(e))return a(e)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var s=function(){function t(){c(this,t)}return d(t,null,[{key:"getEnvironment",value:function(){return window.location.origin.match(/localhost|test|stage|github/)?"preprod":"prod"}},{key:"getSecondsSinceMidnight",value:function(){var e=new Date;return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds()}},{key:"formatTime",value:function(t){return e.default.formatTime(t,600)}},{key:"millisecondsToSeconds",value:function(e){return 0===e?0:e/1e3}},{key:"copyTextToClipboard",value:function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},{key:"isAudioDescription",value:function(e){return["descriptions","description","main-desc"].includes(e)}},{key:"removeUndefinedValuesFromObject",value:function(t){var n=e.default.mergeOptions({},t);return Object.keys(n).forEach(function(e){return void 0===n[e]&&delete n[e]}),n}},{key:"getKeyboardFocusableElements",value:function(){return n((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll('a, button, input, textarea, select, details,[tabindex]:not([tabindex="-1"])')).filter(function(e){return!e.hasAttribute("disabled")}).filter(function(e){return!e.hasAttribute("hidden")})}},{key:"truncateText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=e.trim();if(e.length<t)return n;var r=n.substring(0,t).trim();return"".concat(r,"...")}},{key:"hideFromAccessibility",value:function(e,t){t.setAttribute("aria-hidden",e),e?t.setAttribute("hidden",e):t.removeAttribute("hidden")}}]),t}(),f=s;exports.default=f;
},{"video.js":"qoWl"}],"ZOM8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../../utils/Drm.js")),t=o(require("../../utils/SRGQuality.js")),r=s(require("../../utils/SRGStreamType.js")),n=s(require("../../utils/ImageProperties.js")),i=s(require("../../utils/BlockingReason.js")),a=s(require("../../utils/Utils.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return f(e)||g(e)||b(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e){if(Array.isArray(e))return M(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){return S(e)||g(e)||b(e)||m()}function g(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function v(e,t){return S(e)||O(e,t)||b(e,t)||m()}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var u,o=e[Symbol.iterator]();!(n=(u=o.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(s){i=!0,a=s}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}}function S(e){if(Array.isArray(e))return e}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),e}var D=function(){function u(){k(this,u)}return C(u,[{key:"findChapterByUrn",value:function(e){if(this.chapterList)return v(this.chapterList.filter(function(t){return t.urn===e}),1)[0]}},{key:"filterMainResourcesByQuality",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.types.HD;return this.getMainResources().filter(function(t){return t.quality===e})}},{key:"findResourceListByUrn",value:function(e){var t=this.findChapterByUrn(e);if(t)return t.resourceList}},{key:"getMainChapterImageUrl",value:function(){var e=this.getMainChapter();if(e&&e.imageUrl)return e.imageUrl+n.default.WIDTH700}},{key:"getChapters",value:function(){return this.chapterList}},{key:"getMainBlockReason",value:function(){var e=this.getMainChapter();if(e){var t=e.blockReason;return!t&&new Date<this.getMainValidFromDate()&&(t=i.default.STARTDATE),t}}},{key:"getMainValidFromDate",value:function(){var e=this.getMainChapter();if(e){var t=e.validFrom;if(t)return new Date(t)}return new Date(0)}},{key:"getMainChapter",value:function(){if(this.cachedMainChapter||(this.cachedMainChapter=this.findChapterByUrn(this.chapterUrn)),!this.cachedMainChapter&&this.chapterList&&this.chapterList.length>0){var e=v(this.chapterList,1);this.cachedMainChapter=e[0]}return this.cachedMainChapter}},{key:"getMainResources",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=this.getResourceList();if(o&&o.length){var s=o&&o.map(function(n){var i,u=e.default.buildKeySystems(n.drmList).keySystems,o=d(e.default.buildKeySystemOptions(n.drmList)).slice(0),s=n.analyticsData,c=n.analyticsMetadata,l=n.dvr,f=n.live,y=n.mimeType,p=n.presentation,h=n.quality,g=n.streaming,v=n.tokenType,m=n.url,b=t.getMergedAnalyticsData(s),M=t.getMergedAnalyticsMetadata(c),O=t.findMainSegment(),S=t.getMainChapter(),k=S.id,j=S.eventData,C=S.imageCopyright,D=S.mediaType,L=S.vendor;return i=t.pendingSeek?t.pendingSeek:O?a.default.millisecondsToSeconds(O.markIn):void 0,{analyticsData:b,analyticsMetadata:M,bu:L,eventData:j,id:k,imageCopyright:C,keySystems:u,keySystemOptions:o,mediaType:D,presentation:p,quality:h,src:m,streaming:g,streamType:r.default.evaluate(l,f),tokenType:v,type:y,pendingSegment:O,pendingSeek:i,playbackSettings:t.playbackSettings}}),c=u.orderMainResourcesByQuality(s,n);return c=u.orderMainResourcesByStreamType(c,i)}}},{key:"getMergedAnalyticsData",value:function(e){return p(p(p({},this.analyticsData),this.getMainChapter().analyticsData),e)}},{key:"getMergedAnalyticsMetadata",value:function(e){return p(p(p({},this.analyticsMetadata),this.getMainChapter().analyticsMetadata),e)}},{key:"getFilteredExternalSubtitles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log,t=this.getMainChapter().subtitleList,r=p({},v(this.getResourceList().filter(function(e){return e.subtitleInformationList}),1)[0]).subtitleInformationList;return!t&&!r||!t&&r?[]:t&&!r?(e("MediaComposition: No subtitleInformationList found"),t.filter(function(e){return"TTML"!==e.format})):t.filter(function(e){var t=!r.find(function(t){return t.locale===e.locale&&e.type===t.type});return"TTML"!==e.format&&t})}},{key:"getResourceList",value:function(){var e=this.getMainChapter();return e&&e.resourceList}},{key:"getMainSegments",value:function(){var e=this.getMainChapter();return!this.cachedSegments&&e&&e.segmentList&&(this.cachedSegments=e.segmentList),this.cachedSegments||[]}},{key:"findMainSegment",value:function(){var e=this;if(this.segmentUrn){var t=this.getMainChapter().segmentList;if(t)return v(t.filter(function(t){return t.urn===e.segmentUrn}),1)[0]}}},{key:"getSubdivisions",value:function(){var e=this.getChapters(),t=this.getMainChapter(),r=[],n=this.getMainSegments().filter(function(e){return e.displayable});return 1===e.length&&0===n.length?[]:(e.forEach(function(e){e.urn===t.urn&&n.length>=1?r.push.apply(r,c(n)):r.push(e)}),r)}}],[{key:"cleanCache",value:function(e){var t=Object.assign({},e);return t.cachedMainChapter=void 0,t.cachedSegments=void 0,t}},{key:"findDrmListByResource",value:function(e){return e.drmList}},{key:"orderMainResourcesByQuality",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.types.HD,n=t.list.filter(function(e){return r!==e});return n.push(r),c(e).sort(function(e,t){var r=n.indexOf(e.quality);return n.indexOf(t.quality)-r})}},{key:"orderMainResourcesByStreamType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.default.types.DVR,n=r.default.list.filter(function(e){return t!==e});return n.push(t),c(e).sort(function(e,t){var r=n.indexOf(e.streamType);return n.indexOf(t.streamType)-r})}}]),u}();exports.default=D;
},{"../../utils/Drm.js":"OQuU","../../utils/SRGQuality.js":"mKEu","../../utils/SRGStreamType.js":"SrUl","../../utils/ImageProperties.js":"xj5b","../../utils/BlockingReason.js":"ULoR","../../utils/Utils.js":"csCP"}],"fGvm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../model/MediaComposition.js"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"il.srgssr.ch";n(this,t),this.setIlHost(e)}return i(t,[{key:"setIlHost",value:function(e){this.baseUrl="".concat(e,"/integrationlayer/2.0/")}},{key:"getMediaCompositionByUrn",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o="https://".concat(this.baseUrl,"mediaComposition/byUrn/").concat(t,".json?onlyChapters=").concat(n,"&vector=portalplay"),i={url:o};return fetch(o).then(function(t){return i.httpStatusCode=t.status,i.httpStatusText=t.statusText,t.ok?t.json().then(function(t){return{mediaComposition:Object.assign(new e.default,t,{onlyChapters:n}),diagnostic:i}}):Promise.reject(i)}).catch(function(e){return i.httpStatusText=e.message,Promise.reject(i)})}},{key:"getEndScreenList",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:18,i=e.toLowerCase();return["rts","srf"].includes(i)&&"video"===t.toLowerCase()?this.getRecommendedList(i,n,o):this.getTrendingList(i,t,o)}},{key:"getRecommendedList",value:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18,i="https://".concat(this.baseUrl).concat(e.toLowerCase(),"/mediaList/video/recommended/").concat(n,".json?pageSize=").concat(o);return t.fetchMediaList(i)}},{key:"getTrendingList",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"video",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18,i="https://".concat(this.baseUrl).concat(e.toLowerCase(),"/mediaList/").concat(n.toLowerCase(),"/trending.json?pageSize=").concat(o);return t.fetchMediaList(i)}}],[{key:"fetchMediaList",value:function(e){return fetch(e).then(function(e){return e.ok?e.json().then(function(e){return{mediaList:e.mediaList,recommendationId:e.recommendationId}}):Promise.reject(e)}).catch(function(e){return Promise.reject(e)})}}]),t}(),a=r;exports.default=a;
},{"../model/MediaComposition.js":"ZOM8"}],"lUBw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WAITING=exports.VOLUME_CHANGE=exports.TRANSITION_END=exports.TIME_UPDATE=exports.SUSPEND=exports.STALLED=exports.SEEKING=exports.SEEKED=exports.RESIZE=exports.RATE_CHANGE=exports.PROGRESS=exports.PLAYING=exports.PLAY=exports.PAUSE=exports.LOAD_START=exports.LOADED_METADATA=exports.LOADED_DATA=exports.ERROR=exports.ENDED=exports.EMPTIED=exports.DURATION_CHANGE=exports.CAN_PLAY_THROUGH=exports.CAN_PLAY=exports.ABORT=void 0;var r="abort";exports.ABORT=r;var e="canplay";exports.CAN_PLAY=e;var t="canplaythrough";exports.CAN_PLAY_THROUGH=t;var s="durationchange";exports.DURATION_CHANGE=s;var o="emptied";exports.EMPTIED=o;var p="ended";exports.ENDED=p;var E="error";exports.ERROR=E;var A="loadeddata";exports.LOADED_DATA=A;var a="loadedmetadata";exports.LOADED_METADATA=a;var x="loadstart";exports.LOAD_START=x;var D="pause";exports.PAUSE=D;var T="play";exports.PLAY=T;var N="playing";exports.PLAYING=N;var v="progress";exports.PROGRESS=v;var R="ratechange";exports.RATE_CHANGE=R;var _="resize";exports.RESIZE=_;var S="seeked";exports.SEEKED=S;var O="seeking";exports.SEEKING=O;var I="stalled";exports.STALLED=I;var L="suspend";exports.SUSPEND=L;var d="timeupdate";exports.TIME_UPDATE=d;var P="transitionend";exports.TRANSITION_END=P;var G="volumechange";exports.VOLUME_CHANGE=G;var n="waiting";exports.WAITING=n;
},{}],"M9YT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.USER_INACTIVE=exports.QUALITY_CHANGE=exports.USER_ACTIVE=exports.READY=exports.PLAYER_RESIZE=exports.FIRST_PLAY=exports.DISPOSE=void 0;var e="dispose";exports.DISPOSE=e;var r="firstplay";exports.FIRST_PLAY=r;var s="playerresize";exports.PLAYER_RESIZE=s;var t="ready";exports.READY=t;var E="useractive";exports.USER_ACTIVE=E;var o="qualityChange";exports.QUALITY_CHANGE=o;var p="userinactive";exports.USER_INACTIVE=p;
},{}],"a5op":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MENU_VALUE_UPDATED=exports.MENU_VALUE_SCROLL=exports.TEXT_TRACK_SIZE_CHANGE=exports.SUBDIVISION_VISIBILITY_CHANGED=exports.SOCIAL_SHARING=exports.SEGMENT_SWITCHED=exports.SEGMENT_CHANGE=exports.RECOMMENDATION_HIT=exports.RECOMMENDATION_DISPLAYED=exports.PREPARE_TO_PLAY=exports.ON_ESC_PRESSED=exports.MEDIACOMPOSITION_LOADED=exports.CONTINUOUS_PLAYBACK_HIT=exports.CONTINUOUSPLAYBACK_DONE=exports.CONTINUOUS_PLAYBACK_INTEGRATION_CHANGE=exports.CONTINUOUS_PLAYBACK_DISPLAYED=exports.CONTINUOUS_PLAYBACK_CHANGE=exports.CONTINUOUSPLAYBACK_CANCEL=exports.CHROMECAST_SCRIPT_LOADED=exports.BLOCKED_SEGMENT_SKIPPED=exports.ASPECT_RATIO=exports.AUTOPLAY_CHANGE=exports.AIRPLAY_PLAYBACK_STATE=void 0;var o="srgssr/",t="".concat(o,"airplayPlaybackState");exports.AIRPLAY_PLAYBACK_STATE=t;var e="".concat(o,"autoplayChange");exports.AUTOPLAY_CHANGE=e;var a="".concat(o,"aspectRatio");exports.ASPECT_RATIO=a;var A="".concat(o,"blockedSegmentSkipped");exports.BLOCKED_SEGMENT_SKIPPED=A;var r="".concat(o,"chromecastScriptLoaded");exports.CHROMECAST_SCRIPT_LOADED=r;var E="".concat(o,"continuousPlaybackCancel");exports.CONTINUOUSPLAYBACK_CANCEL=E;var _="".concat(o,"continuousPlaybackChange");exports.CONTINUOUS_PLAYBACK_CHANGE=_;var C="".concat(o,"continuousPlaybackDisplayed");exports.CONTINUOUS_PLAYBACK_DISPLAYED=C;var c="".concat(o,"continuousPlaybackIntegrationChange");exports.CONTINUOUS_PLAYBACK_INTEGRATION_CHANGE=c;var s="".concat(o,"continuousPlaybackDone");exports.CONTINUOUSPLAYBACK_DONE=s;var N="".concat(o,"continuousPlaybackHit");exports.CONTINUOUS_PLAYBACK_HIT=N;var I="".concat(o,"mediaCompositionLoaded");exports.MEDIACOMPOSITION_LOADED=I;var O="".concat(o,"onEscPressed");exports.ON_ESC_PRESSED=O;var S="".concat(o,"prepareToPlay");exports.PREPARE_TO_PLAY=S;var T="".concat(o,"recommendationDisplayed");exports.RECOMMENDATION_DISPLAYED=T;var p="".concat(o,"recommendationHit");exports.RECOMMENDATION_HIT=p;var n="".concat(o,"segmentChange");exports.SEGMENT_CHANGE=n;var P="".concat(o,"segmentSwitched");exports.SEGMENT_SWITCHED=P;var x="".concat(o,"socialSharing");exports.SOCIAL_SHARING=x;var L="".concat(o,"subdivisionVisibilityChanged");exports.SUBDIVISION_VISIBILITY_CHANGED=L;var D="".concat(o,"textTrackSizeChange");exports.TEXT_TRACK_SIZE_CHANGE=D;var U="".concat(o,"menuValueScroll");exports.MENU_VALUE_SCROLL=U;var i="".concat(o,"menuValueUpdated");exports.MENU_VALUE_UPDATED=i;
},{}],"Like":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={ADD_TRACK:!0,ANIMATION_END:!0,BEFOREUNLOAD:!0,CHANGE:!0,CLICK:!0,KEY_DOWN:!0,MOUSE_ENTER:!0,WEBKIT_PLAYBACK_TARGET_AVAILABILITY_CHANGED:!0,WEBKIT_CURRENT_PLAYBACK_TARGET_IS_WIRELESS_CHANGED:!0};exports.WEBKIT_CURRENT_PLAYBACK_TARGET_IS_WIRELESS_CHANGED=exports.WEBKIT_PLAYBACK_TARGET_AVAILABILITY_CHANGED=exports.MOUSE_ENTER=exports.KEY_DOWN=exports.CLICK=exports.CHANGE=exports.BEFOREUNLOAD=exports.ANIMATION_END=exports.ADD_TRACK=void 0;var r=require("./PlayerEvents.js");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var t=require("./VideojsEvents.js");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var o=require("./SRGEvents.js");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===o[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});var E="addtrack";exports.ADD_TRACK=E;var s="animationend";exports.ANIMATION_END=s;var A="beforeunload";exports.BEFOREUNLOAD=A;var _="change";exports.CHANGE=_;var a="click";exports.CLICK=a;var p="keydown";exports.KEY_DOWN=p;var n="mouseenter";exports.MOUSE_ENTER=n;var T="webkitplaybacktargetavailabilitychanged";exports.WEBKIT_PLAYBACK_TARGET_AVAILABILITY_CHANGED=T;var c="webkitcurrentplaybacktargetiswirelesschanged";exports.WEBKIT_CURRENT_PLAYBACK_TARGET_IS_WIRELESS_CHANGED=c;
},{"./PlayerEvents.js":"lUBw","./VideojsEvents.js":"M9YT","./SRGEvents.js":"a5op"}],"KSE4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TAB=exports.SPACE=exports.Q=exports.PLUS=exports.P=exports.HYPHEN=exports.ESCAPE=exports.ENTER=exports.ARROW_UP=exports.ARROW_RIGHT=exports.ARROW_LEFT=exports.ARROW_DOWN=void 0;var r="ArrowDown";exports.ARROW_DOWN=r;var e="ArrowLeft";exports.ARROW_LEFT=e;var o="ArrowRight";exports.ARROW_RIGHT=o;var t="ArrowUp";exports.ARROW_UP=t;var s=13;exports.ENTER=s;var p=27;exports.ESCAPE=p;var x="-";exports.HYPHEN=x;var R=80;exports.P=R;var A="+";exports.PLUS=A;var v=81;exports.Q=v;var E=32;exports.SPACE=E;var a=9;exports.TAB=a;
},{}],"bjuv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("video.js")),r=u(require("../dataProvider/services/DataProviderService.js")),t=require("./Events.js"),i=s(require("./KeyCodes.js")),n=require("./SRGQuality.js"),o=u(require("./SRGStreamType.js"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function u(e){return e&&e.__esModule?e:{default:e}}function l(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function c(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,r,t){return r&&c(e.prototype,r),t&&c(e,t),e}var p="lbw-keyboard-navigation",f=function(e){var r=e.key;return[0,1,2,3,4,5,6,7,8,9].includes(parseInt(r,10))},v=function(e,r){var t=e.currentSource().streamType;(o.default.isDvr(t)||o.default.isOnDemand(t))&&(e.scrubbing(!0),e.trigger("seeking"),e.currentTime(r),e.scrubbing(!1),e.trigger("seeked"))},y=function(e,r){var t=e.volume()+r;e.volume(t),e.muted(e.volume()<=0)},h=function(e){var r=e.player().options().SRGProviders.mediaComposition;(0,n.containQualities)(r.getMainResources())&&e.trigger({type:t.MENU_VALUE_UPDATED,data:{quality:!(0,n.isSourceHD)(e.currentSource())}})},g=function(e){e.paused()?e.play():e.pause()},m=function(){function n(){l(this,n)}return d(n,null,[{key:"defaultPlayerOptions",value:function(n){return{children:{warningMessageComponent:!0,mediaLoader:!0,headerComponent:!0,posterImage:!0,overlayComponent:!0,endScreen:!0,continuousPlaybackScreen:!0,textTrackDisplay:!0,textTrackSettings:!0,loadingSpinner:!0,errorDisplay:!0,resizeManager:!0,imageCopyright:!0,subdivisionsContainer:!0},controls:!0,controlBar:{children:["playToggle","backwardButton","forwardButton","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","chaptersButton","descriptionButton","subtitlesMenu","settingsMenu","pictureInPictureToggle","airplayButton","chromecastToggleComponent","fullscreenToggle","playbackRateMenu","SRGSSRButtonComponent"]},html5:{hls:{overrideNative:!e.default.browser.IS_SAFARI}},playbackRates:[.5,.75,1,1.5,2],liveTracker:!0,liveui:!0,preload:"auto",responsive:!0,SRGProviders:{dataService:new r.default,letterbox:n},techOrder:["html5"],userActions:{hotkeys:function(e){var r=this;if(this.handleHotkeys(e),[i.ARROW_DOWN,i.ARROW_UP].includes(e.key)&&(e.preventDefault(),e.stopPropagation()),e.which!==i.ESCAPE)if([i.ARROW_UP,i.PLUS].includes(e.key))y(this,.1);else if([i.ARROW_DOWN,i.HYPHEN].includes(e.key))y(this,-.1);else if(e.key===i.ARROW_LEFT&&this.currentTime()>0)v(this,this.currentTime()-10);else if(e.key===i.ARROW_RIGHT&&this.currentTime()<this.duration())v(this,this.currentTime()+30);else{if(e.which===i.TAB&&!this.hasClass(p)){return this.addClass(p),void this.on(t.CLICK,function e(i){var n=i.screenX,o=void 0===n?0:n,a=i.screenY;0!==o&&0!==(void 0===a?0:a)&&(r.removeClass(p),r.off(t.CLICK,e))})}if(f(e)){var n=(0|e.key)/10;v(this,this.duration()*n)}else e.which!==i.Q?e.which===i.P&&g(this):h(this)}else this.trigger(t.ON_ESC_PRESSED)}},breakpoints:{tiny:224,xsmall:304,small:384,medium:464,large:624}}}}]),n}(),b=m;exports.default=b;
},{"video.js":"qoWl","../dataProvider/services/DataProviderService.js":"fGvm","./Events.js":"Like","./KeyCodes.js":"KSE4","./SRGQuality.js":"mKEu","./SRGStreamType.js":"SrUl"}],"KCTJ":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=function(){function r(){e(this,r)}return o(r,null,[{key:"store",value:function(t,e,o){if(r.storage){var n=r.getStorageByName(t);n[e]=o,r.storage.setItem(t,JSON.stringify(n))}}},{key:"getStorageByName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!r.storage)return e;var o,n=r.storage.getItem(t);try{o=r.parseObject(n)}catch(a){o=e,r.storage.setItem(t,JSON.stringify(o))}return o}},{key:"parseObject",value:function(e){var r=JSON.parse(e);if("object"!==t(r)||null===r)throw new Error("LocalStorage is not an Object");return r}},{key:"storage",get:function(){try{return localStorage}catch(t){return}}}]),r}(),a=n;exports.default=a;
},{}],"IxAk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./LocalStorage.js")),t=n(require("./Events.js")),r=i(require("./SRGStreamType.js"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(null==e)return{};var r,a,n=c(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function c(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}function y(e,t){return g(e)||h(e,t)||f(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function h(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,n=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(a=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(l){n=!0,i=l}finally{try{a||null==u.return||u.return()}finally{if(n)throw i}}return r}}function g(e){if(Array.isArray(e))return e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function v(e,t,r){return t&&k(e.prototype,t),r&&k(e,r),e}var m=function(){function a(e){b(this,a),this.player=e,this.initListeners()}return v(a,[{key:"selectAudioTrack",value:function(){var e=a.playbackSettings.audioTrack;if(e){var t=y(e.split("#"),2),r=t[0],n=t[1],i=Array.from(this.player.audioTracks()).filter(function(e){return e.language===r});if(i.length>0){var o,u=i.filter(function(e){return e.kind===n});o=u.length>0?u.shift():i.shift(),this.player.options().SRGProviders.letterbox.audioLanguage(o.id)}}}},{key:"addTextTrack",value:function(e){var t=a.kind,r=a.mode,n=a.playbackSettings,i=e.track;i.kind!==t.metadata&&this.player&&(n.textTrack&&n.textTrack===i.language?setTimeout(function(){i.mode=r.showing},0):i.mode=r.hidden)}},{key:"audioTrackChange",value:function(){var e=a.storageKey,t=this.player.audioTracks().tracks_.find(function(e){return e.enabled}),r=t?"".concat(t.language,"#").concat(t.kind):null;a.store(e.audioTrack,r)}},{key:"initListeners",value:function(){this.player.on([t.CAN_PLAY,t.PREPARE_TO_PLAY],this.prepareToPlay.bind(this)),this.player.audioTracks().on(t.CHANGE,this.audioTrackChange.bind(this)),this.player.textTracks().on(t.ADD_TRACK,this.addTextTrack.bind(this)),this.player.textTracks().on(t.CHANGE,this.textTrackChange.bind(this)),this.player.on(t.RATE_CHANGE,this.rateChange.bind(this)),this.player.on(t.TEXT_TRACK_SIZE_CHANGE,this.textTrackSizeChange.bind(this)),this.player.on(t.VOLUME_CHANGE,this.volumeChange.bind(this)),this.player.on(t.LOADED_METADATA,this.selectAudioTrack.bind(this))}},{key:"prepareToPlay",value:function(e){var r=a.playbackSettings,n=e.type;n!==t.PREPARE_TO_PLAY||e.data.ready||(this.mediaReady=!1,this.canplay=!1),n===t.PREPARE_TO_PLAY&&e.data.ready&&(this.mediaReady=!0,this.player.muted(r.muted),this.player.volume(r.volume),this.player.options().SRGProviders.letterbox.subtitlesSize(r.textTrackSize)),n===t.CAN_PLAY&&(this.canplay=!0)}},{key:"rateChange",value:function(){var e=this,n=a.playbackSettings,i=a.storageKey;this.canplay&&this.mediaReady&&this.player.hasStarted()?a.store(i.playbackRate,this.player.playbackRate()):this.player.one(t.LOADED_METADATA,function(){r.default.isOnDemand(e.player.currentSource().streamType)&&e.player.options().playbackRates.includes(n.playbackRate)?e.player.playbackRate(n.playbackRate):a.store(i.playbackRate,void 0)})}},{key:"textTrackChange",value:function(){var e=a.kind,t=a.mode,r=a.playbackSettings,n=a.storageKey,i=Array.from(this.player.textTracks()),o=function(t){return t.kind!==e.metadata};if(this.canplay&&this.mediaReady){if(this.player.hasStarted()){var u=i.filter(o).find(function(e){return e.mode===t.showing}),l=u?u.language:null;a.store(n.textTrack,l)}}else i.filter(o).forEach(function(e){var a=e;a.language===r.textTrack?a.mode=t.showing:a.mode=t.hidden})}},{key:"textTrackSizeChange",value:function(e){var t=e.data;a.store(a.storageKey.textTrackSize,t)}},{key:"volumeChange",value:function(){var e=a.playbackSettings,t=a.storageKey;if(!this.mediaReady)return this.player.muted(e.muted),void this.player.volume(e.volume);a.store(t.muted,this.player.muted()),a.store(t.volume,this.player.volume())}}],[{key:"store",value:function(t,r){e.default.store(a.USER_STORAGE,t,r)}},{key:"kind",get:function(){return{metadata:"metadata"}}},{key:"mode",get:function(){return{showing:"showing",hidden:"hidden"}}},{key:"playbackSettings",get:function(){var t=a.USER_STORAGE;return e.default.getStorageByName(t,a.defaultUserSettings)}},{key:"setUserSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hdMode,r=void 0===t||t,n=s(e,["hdMode"]);a.defaultUserSettings=u({hdMode:r},n)}},{key:"storageKey",get:function(){return{audioTrack:"audioTrack",autoplay:"autoplay",continuousPlayback:"continuousPlayback",hdMode:"hdMode",muted:"muted",playbackRate:"playbackRate",textTrack:"textTrack",textTrackSize:"textTrackSize",volume:"volume"}}},{key:"USER_STORAGE",get:function(){return"srgssr/letterbox/userStorage"}}]),a}(),T=m;exports.default=T;
},{"./LocalStorage.js":"KCTJ","./Events.js":"Like","./SRGStreamType.js":"SrUl"}],"rfp5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.emeErrorHandler=exports.setupSessions=exports.getOptions=exports.handleMsNeedKeyEvent=exports.handleWebKitNeedKeyEvent=exports.handleEncryptedEvent=exports.removeSession=exports.hasSession=exports.default=void 0;var e=r(require("global/document")),t=r(require("video.js")),n=r(require("global/window"));function r(e){return e&&e.__esModule?e:{default:e}}var i=function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},s=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},a=function(t){var n=e.default.createElement("a");return n.href=t,n.hostname},o=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<n.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0},c=function(e){return e instanceof Uint8Array||e instanceof Uint16Array?e.buffer:e},u=function(){var e=t.default.mergeOptions.apply(t.default,arguments);return Object.keys(e).forEach(function(t){null===e[t]&&delete e[t]}),e},d=function(e){var t=(new n.default.DOMParser).parseFromString(String.fromCharCode.apply(null,new Uint16Array(e)),"application/xml"),r=t.getElementsByTagName("HttpHeaders")[0],i={};if(r)for(var s=r.getElementsByTagName("name"),a=r.getElementsByTagName("value"),o=0;o<s.length;o++)i[s[o].childNodes[0].nodeValue]=a[o].childNodes[0].nodeValue;var c,u=t.getElementsByTagName("Challenge")[0];return u&&(c=n.default.atob(u.childNodes[0].nodeValue)),{headers:i,message:c}},y=function(e,n,r,i){var s=d(n),a=s.message,o=u(s.headers,r.emeHeaders,e.licenseHeaders);t.default.xhr({uri:e.url,method:"post",headers:o,body:a,responseType:"arraybuffer"},i)},f=function(e){var t;return Object.keys(e).forEach(function(r){var i={},s=e[r].audioContentType,a=e[r].videoContentType;s&&(i.audioCapabilities=[{contentType:s}]),a&&(i.videoCapabilities=[{contentType:a}]),t=t?t.catch(function(e){return n.default.navigator.requestMediaKeySystemAccess(r,[i])}):n.default.navigator.requestMediaKeySystemAccess(r,[i])}),t},m=function(e){var n=e.mediaKeys,r=e.initDataType,i=e.initData,s=e.options,a=e.getLicense,o=e.removeSession,c=e.eventBus,u=n.createSession();return new Promise(function(e,n){u.addEventListener("message",function(t){a(s,t.message).then(function(t){e(u.update(t))}).catch(function(e){n(e)})},!1),u.addEventListener("keystatuseschange",function(e){var n=!1;u.keyStatuses.forEach(function(r,i){switch(c.trigger({keyId:i,status:r,target:u,type:"keystatuschange"}),r){case"expired":n=!0;break;case"internal-error":t.default.log.warn('Key status reported as "internal-error." Leaving the session open since we don\'t have enough details to know if this error is fatal.',e)}}),n&&u.close().then(function(){o(i)})},!1),u.generateRequest(r,i).catch(function(){n("Unable to create or initialize key session")})})},l=function(e){var t=e.video,n=e.initDataType,r=e.initData,i=e.options,s=e.getLicense,a=e.removeSession,o=e.eventBus;return t.mediaKeysObject?m({mediaKeys:t.mediaKeysObject,initDataType:n,initData:r,options:i,getLicense:s,removeSession:a,eventBus:o}):(t.pendingSessionData.push({initDataType:n,initData:r}),Promise.resolve())},v=function(e){var t=e.video,n=e.certificate,r=e.createdMediaKeys,i=e.options,s=e.getLicense,a=e.removeSession,o=e.eventBus;t.mediaKeysObject=r;var c=[];n&&c.push(r.setServerCertificate(n));for(var u=0;u<t.pendingSessionData.length;u++){var d=t.pendingSessionData[u];c.push(m({mediaKeys:t.mediaKeysObject,initDataType:d.initDataType,initData:d.initData,options:i,getLicense:s,removeSession:a,eventBus:o}))}return t.pendingSessionData=[],c.push(t.setMediaKeys(r)),Promise.all(c)},p=function(e){return function(t,n,r){y(e,n,t,function(e,t,n){e?r(e):r(null,n)})}},g=function(e){return function(n,r,i){var s=u({"Content-type":"application/octet-stream"},n.emeHeaders,e.licenseHeaders);t.default.xhr({uri:e.url,method:"POST",responseType:"arraybuffer",body:r,headers:s},function(e,t,n){e?i(e):i(null,n)})}},h=function(e,t){return function(n,r){return new Promise(function(i,s){e(n,r,function(e,n){t&&t.trigger("licenserequestattempted"),e?s(e):i(n)})})}},k=function(e,t){if("string"==typeof t&&(t={url:t}),!t.url&&!t.getLicense)throw new Error("Neither URL nor getLicense function provided to get license");return t.url&&!t.getLicense&&(t.getLicense="com.microsoft.playready"===e?p(t):g(t)),t},S=function(e){var t,n,r=e.video,i=e.initDataType,s=e.initData,a=e.keySystemAccess,o=e.options,c=e.removeSession,u=e.eventBus,d=Promise.resolve();void 0===r.mediaKeysObject&&(r.mediaKeysObject=null,r.pendingSessionData=[],d=new Promise(function(e,i){r.keySystem=a.keySystem,(n=k(a.keySystem,o.keySystems[a.keySystem])).getCertificate?n.getCertificate(o,function(n,r){n?i(n):(t=r,e())}):e(a)}).then(function(){return a.createMediaKeys()}).then(function(e){return v({video:r,certificate:t,createdMediaKeys:e,options:o,getLicense:h(n.getLicense,u),removeSession:c,eventBus:u})}).catch(function(e){return e?Promise.reject(e):Promise.reject("Failed to create and initialize a MediaKeys object")}));return d.then(function(){return l({video:r,initDataType:i,initData:s,options:o,getLicense:r.keySystem?h(k(r.keySystem,o.keySystems[r.keySystem]).getLicense,u):null,removeSession:c,eventBus:u})})},b="com.apple.fps.1_0",w=function(e){var t=e.initData,n=e.id,r=e.cert;"string"==typeof n&&(n=i(n));var s=0,a=new ArrayBuffer(t.byteLength+4+n.byteLength+4+r.byteLength),o=new DataView(a);new Uint8Array(a,s,t.byteLength).set(t),s+=t.byteLength,o.setUint32(s,n.byteLength,!0),s+=4;var c=new Uint16Array(a,s,n.length);return c.set(n),s+=c.byteLength,o.setUint32(s,r.byteLength,!0),s+=4,new Uint8Array(a,s,r.byteLength).set(r),new Uint8Array(a,0,a.byteLength)},D=function(e){var t=e.video,r=e.contentId,i=e.initData,s=e.cert,a=e.options,o=e.getLicense,c=e.eventBus;return new Promise(function(e,u){if(!t.webkitKeys)try{t.webkitSetMediaKeys(new n.default.WebKitMediaKeys(b))}catch(y){return void u("Could not create MediaKeys")}var d;try{d=t.webkitKeys.createSession("video/mp4",w({id:r,initData:i,cert:s}))}catch(y){return void u("Could not create key session")}d.contentId=r,d.addEventListener("webkitkeymessage",function(e){o(a,r,e.message,function(e,t){c&&c.trigger("licenserequestattempted"),e?u(e):d.update(new Uint8Array(t))})}),d.addEventListener("webkitkeyadded",function(){e()}),d.addEventListener("webkitkeyerror",function(){var e=d.error;u("KeySession error: code "+e.code+", systemCode "+e.systemCode)})})},L=function(e){return function(n,r){var i=u(n.emeHeaders,e.certificateHeaders);t.default.xhr({uri:e.certificateUri,responseType:"arraybuffer",headers:i},function(e,t,n){e?r(e):r(null,new Uint8Array(n))})}},K=function(e,t){return a(s(t))},E=function(e){return function(n,r,i,s){var a=u({"Content-type":"application/octet-stream"},n.emeHeaders,e.licenseHeaders);t.default.xhr({uri:e.licenseUri,method:"POST",responseType:"arraybuffer",body:i,headers:a},function(e,t,n){e?s(e):s(null,n)})}},_=function(e){var t=e.video,n=e.initData,r=e.options,i=e.eventBus,s=r.keySystems[b],a=s.getCertificate||L(s),o=s.getContentId||K,c=s.getLicense||E(s);return new Promise(function(e,t){a(r,function(n,r){n?t(n):e(r)})}).then(function(e){return D({video:t,cert:e,initData:n,getLicense:c,options:r,contentId:o(r,n),eventBus:i})})},x="com.microsoft.playready",C=function(e,t,n,r){var i=e.keySystems[x];"function"!=typeof i.getKey?("string"==typeof i?i={url:i}:"boolean"==typeof i&&(i={}),i.url||(i.url=n.destinationURL),y(i,n.message.buffer,e,function(e,n){r&&r.trigger("licenserequestattempted"),e?r.trigger({message:"Unable to request key from url: "+i.url,target:t,type:"mskeyerror"}):t.update(new Uint8Array(n.body))})):i.getKey(e,n.destinationURL,n.message.buffer,function(e,n){e?r.trigger({message:"Unable to get key: "+e,target:t,type:"mskeyerror"}):t.update(n)})},U=function(e,t,n,r){var i=e.msKeys.createSession("video/mp4",t);if(!i)throw new Error("Could not create key session.");i.addEventListener("mskeymessage",function(e){C(n,i,e,r)}),i.addEventListener("mskeyerror",function(e){r.trigger({message:"Unexpected key error from key session with code: "+i.error.code+" and systemCode: "+i.error.systemCode,target:i,type:"mskeyerror"})}),i.addEventListener("mskeyadded",function(){r.trigger({target:i,type:"mskeyadded"})})},T=function(e){var t=e.video,r=e.initData,i=e.options,s=e.eventBus;t.msKeys&&delete t.msKeys;try{t.msSetMediaKeys(new n.default.MSMediaKeys(x))}catch(a){throw new Error("Unable to create media keys for PlayReady key system. Error: "+a.message)}U(t,r,i,s)},A=function(e,t){for(var n=0;n<e.length;n++)if(e[n].initData){var r=c(e[n].initData),i=c(t);if(o(r,i))return!0}return!1};exports.hasSession=A;var B=function(e,t){for(var n=0;n<e.length;n++)if(e[n].initData===t)return void e.splice(n,1)};exports.removeSession=B;var M=function(e,t,n,r){if(!t||!t.keySystems)return Promise.resolve();var i=e.initData;return f(t.keySystems).then(function(s){var a=s.keySystem;return t.keySystems[a]&&t.keySystems[a].pssh&&(i=t.keySystems[a].pssh),A(n,i)||!i?Promise.resolve():(n.push({initData:i}),S({video:e.target,initDataType:e.initDataType,initData:i,keySystemAccess:s,options:t,removeSession:B.bind(null,n),eventBus:r}))})};exports.handleEncryptedEvent=M;var P=function(e,t,n){return t.keySystems&&t.keySystems[b]&&e.initData?_({video:e.target,initData:e.initData,options:t,eventBus:n}):Promise.resolve()};exports.handleWebKitNeedKeyEvent=P;var O=function(e,t,n,r){if(t.keySystems&&t.keySystems[x]&&!n.reduce(function(e,t){return e||t.playready},!1)){var i=e.initData;t.keySystems[x]&&t.keySystems[x].pssh&&(i=t.keySystems[x].pssh),i&&(n.push({playready:!0,initData:i}),T({video:e.target,initData:i,options:t,eventBus:r}))}};exports.handleMsNeedKeyEvent=O;var j=function(e){return t.default.mergeOptions(e.currentSource(),e.eme.options)};exports.getOptions=j;var N=function(e){var t=e.src();t!==e.eme.activeSrc&&(e.eme.activeSrc=t,e.eme.sessions=[])};exports.setupSessions=N;var H=function(e){return function(t){var n=t?t.message||t:null;e.error({code:5,message:n})}};exports.emeErrorHandler=H;var q=function(e,r){"video"===e.$(".vjs-tech").tagName.toLowerCase()&&(N(e),n.default.navigator.userAgent.match(/Safari/i)&&!n.default.navigator.userAgent.match(/Chrome/i)?e.tech_.el_.addEventListener("webkitneedkey",function(t){N(e),P(t,j(e),e.tech_).catch(r)}):e.tech_.el_.addEventListener("encrypted",function(t){N(e),M(t,j(e),e.eme.sessions,e.tech_).catch(r)}),t.default.browser.IS_EDGE||(e.tech_.el_.addEventListener("msneedkey",function(t){N(e);try{O(t,j(e),e.eme.sessions,e.tech_)}catch(n){r(n)}}),e.tech_.on("mskeyerror",r),e.on("dispose",function(){e.tech_.off("mskeyerror",r)})))},I=function(e){void 0===e&&(e={});var n=this,r=H(n);n.ready(function(){return q(n,r)}),n.eme={initializeMediaKeys:function(i,s,a){void 0===i&&(i={}),void 0===s&&(s=function(){}),void 0===a&&(a=!1);var o=t.default.mergeOptions(n.currentSource(),e,i),c={initDataType:"cenc",initData:null,target:n.tech_.el_};if(N(n),n.tech_.el_.setMediaKeys)M(c,o,n.eme.sessions,n.tech_).then(function(){return s()}).catch(function(e){s(e),a||r(e)});else if(n.tech_.el_.msSetMediaKeys){var u=function e(t){n.tech_.off("mskeyadded",e),n.tech_.off("mskeyerror",e),"mskeyerror"===t.type?(s(t.target.error),a||r(t.message)):s()};n.tech_.one("mskeyadded",u),n.tech_.one("mskeyerror",u);try{O(c,o,n.eme.sessions,n.tech_)}catch(d){n.tech_.off("mskeyadded",u),n.tech_.off("mskeyerror",u),s(d),a||r(d)}}},options:e}},V=t.default.registerPlugin||t.default.plugin;V("eme",I);var R=I;exports.default=R;
},{"global/document":"rTOJ","video.js":"qoWl","global/window":"iDvB"}],"NqGT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}();function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var e=function(){function e(){i(this,e),this.init()}return t(e,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.UTF8="utf-8",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)"}}]),e}(),s=new e;exports.default=s,module.exports=exports.default;
},{}],"Nprb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function i(){e(this,i),this.init()}return t(i,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),i}(),n=new i;exports.default=n,module.exports=exports.default;
},{}],"KAF6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){var n=void 0,t=[],e={},r={};function a(n,e){for(var r in t){var a=t[r];if(a.context===n&&a.name===e)return a.instance}return null}function o(n,t){return t[n]}function c(n,t,e){n in e&&(e[n]=t)}function i(t,e,r){var a=void 0,o=t.__dashjs_factory_name,c=e[o];if(c){var i=c.instance;if(!c.override)return i.apply({context:e,factory:n},r);for(var u in a=t.apply({context:e},r),i=i.apply({context:e,factory:n,parent:a},r))a.hasOwnProperty(u)&&(a[u]=i[u])}else a=t.apply({context:e},r);return a.getClassName=function(){return o},a}return n={extend:function(n,t,e,r){!r[n]&&t&&(r[n]={instance:t,override:e})},getSingletonInstance:a,setSingletonInstance:function(n,e,r){for(var a in t){var o=t[a];if(o.context===n&&o.name===e)return void(t[a].instance=r)}t.push({name:e,context:n,instance:r})},getSingletonFactory:function(n){var r=o(n.__dashjs_factory_name,e);return r||(r=function(e){var r=void 0;return void 0===e&&(e={}),{getInstance:function(){return r||(r=a(e,n.__dashjs_factory_name)),r||(r=i(n,e,arguments),t.push({name:n.__dashjs_factory_name,context:e,instance:r})),r}}},e[n.__dashjs_factory_name]=r),r},getSingletonFactoryByName:function(n){return o(n,e)},updateSingletonFactory:function(n,t){c(n,t,e)},getClassFactory:function(n){var t=o(n.__dashjs_factory_name,r);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return i(n,t,arguments)}}},r[n.__dashjs_factory_name]=t),t},getClassFactoryByName:function(n){return o(n,r)},updateClassFactory:function(n,t){c(n,t,r)}}}();exports.default=n,module.exports=exports.default;
},{}],"ASRh":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./FactoryMaker"),t=e(r),n=0,o=5e3;function i(){var e={};function r(r,t,n){var o=-1;return e[r]?(e[r].some(function(e,r){if(e&&e.callback===t&&(!n||n===e.scope))return o=r,!0}),o):o}return{on:function(t,o,i){var u=arguments.length<=3||void 0===arguments[3]?n:arguments[3];if(!t)throw new Error("event type cannot be null or undefined");if(!o||"function"!=typeof o)throw new Error("listener must be a function: "+o);if(!(r(t,o,i)>=0)){e[t]=e[t]||[];var a={callback:o,scope:i,priority:u};e[t].some(function(r,n){if(r&&u>r.priority)return e[t].splice(n,0,a),!0})||e[t].push(a)}},off:function(t,n,o){if(t&&n&&e[t]){var i=r(t,n,o);i<0||(e[t][i]=null)}},trigger:function(r,t){if(r&&e[r]){if((t=t||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=r,e[r]=e[r].filter(function(e){return e}),e[r].forEach(function(e){return e&&e.callback.call(e.scope,t)})}},reset:function(){e={}}}}i.__dashjs_factory_name="EventBus";var u=t.default.getSingletonFactory(i);u.EVENT_PRIORITY_LOW=n,u.EVENT_PRIORITY_HIGH=o,t.default.updateSingletonFactory(i.__dashjs_factory_name,u),exports.default=u,module.exports=exports.default;
},{"./FactoryMaker":"KAF6"}],"Y3I9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}();function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(){n(this,r)}return e(r,[{key:"extend",value:function(e,n){if(e){var r=!!n&&n.override,t=!!n&&n.publicOnly;for(var o in e)!e.hasOwnProperty(o)||this[o]&&!r||t&&-1===e[o].indexOf("public_")||(this[o]=e[o])}}}]),r}();exports.default=r,module.exports=exports.default;
},{}],"Hf7C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e,t,E){for(var i=!0;i;){var o=e,r=t,s=E;i=!1,null===o&&(o=Function.prototype);var n=Object.getOwnPropertyDescriptor(o,r);if(void 0!==n){if("value"in n)return n.value;var a=n.get;if(void 0===a)return;return a.call(s)}var _=Object.getPrototypeOf(o);if(null===_)return;e=_,t=r,E=s,i=!0,n=_=void 0}};function t(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=require("./EventsBase"),r=t(o),s=function(t){function o(){E(this,o),e(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return i(o,r["default"]),o}();exports.default=s,module.exports=exports.default;
},{"./EventsBase":"Y3I9"}],"VXzW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,e,r){for(var o=!0;o;){var n=t,u=e,i=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,u);if(void 0!==a){if("value"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(i)}var f=Object.getPrototypeOf(n);if(null===f)return;t=f,e=u,r=i,o=!0,a=f=void 0}};function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=require("./CoreEvents"),u=e(n),i=function(e){function n(){r(this,n),t(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return o(n,u["default"]),n}(),a=new i;exports.default=a,module.exports=exports.default;
},{"./CoreEvents":"Hf7C"}],"TOyU":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};e.ACTION_DOWNLOAD="download",e.ACTION_COMPLETE="complete",exports.default=e,module.exports=exports.default;
},{}],"Jjwb":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./EventBus"),o=e(n),t=require("./events/Events"),r=e(t),i=require("./FactoryMaker"),a=e(i),l=0,s=1,c=2,u=3,d=4,f=5;function g(){var e,n=this.context,t=(0,o.default)(n).getInstance(),i=[],a=void 0,g=void 0,L=void 0,v=void 0;function w(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function _(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];b.apply(void 0,[s,this].concat(n))}function p(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];b.apply(void 0,[c,this].concat(n))}function y(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];b.apply(void 0,[u,this].concat(n))}function E(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];b.apply(void 0,[d,this].concat(n))}function h(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];b.apply(void 0,[f,this].concat(n))}function b(e,n){var o="",l=null;a&&(l=(new Date).getTime(),o+="["+(l-L)+"]"),g&&n&&n.getClassName&&(o+="["+n.getClassName()+"]",n.getType&&(o+="["+n.getType()+"]")),o.length>0&&(o+=" ");for(var s=arguments.length,c=Array(s>2?s-2:0),u=2;u<s;u++)c[u-2]=arguments[u];Array.apply(null,c).forEach(function(e){o+=e+" "}),i[e]&&v>=e&&i[e](o),t.trigger(r.default.LOG,{message:o,level:e})}return e={getLogger:function(e){return{fatal:_.bind(e),error:p.bind(e),warn:y.bind(e),info:E.bind(e),debug:h.bind(e)}},setLogTimestampVisible:function(e){a=e},setCalleeNameVisible:function(e){g=e},setLogToBrowserConsole:function(e){v=e?f:l},getLogToBrowserConsole:function(){return v!==l},setLogLevel:function(e){v=e},getLogLevel:function(){return v}},a=!0,g=!0,v=u,L=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(i[s]=w(window.console.error),i[c]=w(window.console.error),i[u]=w(window.console.warn),i[d]=w(window.console.info),i[f]=w(window.console.debug)),e}g.__dashjs_factory_name="Debug";var L=a.default.getSingletonFactory(g);L.LOG_LEVEL_NONE=l,L.LOG_LEVEL_FATAL=s,L.LOG_LEVEL_ERROR=c,L.LOG_LEVEL_WARNING=u,L.LOG_LEVEL_INFO=d,L.LOG_LEVEL_DEBUG=f,a.default.updateSingletonFactory(g.__dashjs_factory_name,L),exports.default=L,module.exports=exports.default;
},{"./EventBus":"ASRh","./events/Events":"VXzW","./FactoryMaker":"KAF6"}],"Y27R":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/EventBus"),r=e(t),n=require("../../core/events/Events"),a=e(n),i=require("../../core/FactoryMaker"),u=e(i),s=require("../vo/FragmentRequest"),o=e(s),d=require("../../core/Debug"),f=e(d),c="loading",l="executed",N="canceled",E="failed";function T(e){e=e||{};var t=this.context,n=(0,r.default)(t).getInstance(),i=e.metricsModel,u=e.fragmentLoader,s=void 0,d=void 0,N=void 0,T=void 0,_=void 0;function m(e){var t;return!!e&&(t=!1,T.some(function(r){if(n=e,a=r,!isNaN(n.index)&&n.startTime===a.startTime&&n.adaptationIndex===a.adaptationIndex&&n.type===a.type||function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality}(e,r)||function(e,t){return e.action===o.default.ACTION_COMPLETE&&e.action===t.action}(e,r))return t=!0;var n,a}),t)}function A(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function g(e){T=T.filter(function(t){var r=A(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-r})}function O(e,t){t<=e+.5||(T=T.filter(function(r){var n=A(r);return isNaN(r.startTime)||r.startTime>=t-n||isNaN(r.duration)||r.startTime+r.duration<=e+n}))}function D(e,t,r){for(var n=e.length-1;n>=0;n--){var a=e[n],i=a.startTime,u=i+a.duration;if(r=isNaN(r)?A(a):r,!isNaN(i)&&!isNaN(u)&&t+r>=i&&t-r<u||isNaN(i)&&isNaN(t))return a}return null}function v(e,t){i.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),i.addRequestsQueue(e.mediaType,_,T)}function q(e){e.sender===u&&(_.splice(_.indexOf(e.request),1),e.response&&!e.error&&T.push(e.request),v(e.request,e.error?E:l),n.trigger(a.default.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function L(e){e.sender===u&&n.trigger(a.default.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this})}function h(e){e.sender===u&&n.trigger(a.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:e.request,mediaType:e.mediaType})}function M(){T=[],_=[]}return s={setStreamProcessor:function(e){N=e},getStreamProcessor:function(){return N},getRequests:function(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],r=[];return t.forEach(function(t){var n=function(e){var t=void 0;switch(e){case c:t=_;break;case l:t=T;break;default:t=[]}return t}(t);r=r.concat(function(e,t){return t.hasOwnProperty("time")?[D(e,t.time,t.threshold)]:e.filter(function(e){for(var r in t)if("state"!==r&&t.hasOwnProperty(r)&&e[r]!=t[r])return!1;return!0})}(n,e))}),r},isFragmentLoaded:m,isFragmentLoadedOrPending:function(e){var t=!1,r=0,n=void 0;if(!(t=m(e)))for(r=0;r<_.length;r++)n=_[r],e.url===n.url&&e.startTime===n.startTime&&(t=!0);return t},removeExecutedRequestsBeforeTime:g,removeExecutedRequestsAfterTime:function(e){T=T.filter(function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime+t.duration<e})},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var r=0,n=0,a=e.length;n<a;n++)O(r,e.start(n)),r=e.end(n);t>0&&O(r,t)}else g()},abortRequests:function(){u.abort(),_=[]},executeRequest:function(e){switch(e.action){case o.default.ACTION_COMPLETE:T.push(e),v(e,l),d.debug("executeRequest trigger STREAM_COMPLETED"),n.trigger(a.default.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case o.default.ACTION_DOWNLOAD:v(e,c),_.push(e),function(e){n.trigger(a.default.FRAGMENT_LOADING_STARTED,{sender:s,request:e}),u.load(e)}(e);break;default:d.warn("Unknown request action.")}},reset:function(){n.off(a.default.LOADING_COMPLETED,q,this),n.off(a.default.LOADING_DATA_PROGRESS,L,this),n.off(a.default.LOADING_ABANDONED,h,this),u&&u.reset(),M()},addExecutedRequest:function(e){T.push(e)}},d=(0,f.default)(t).getInstance().getLogger(s),M(),n.on(a.default.LOADING_COMPLETED,q,s),n.on(a.default.LOADING_DATA_PROGRESS,L,s),n.on(a.default.LOADING_ABANDONED,h,s),s}T.__dashjs_factory_name="FragmentModel";var _=u.default.getClassFactory(T);_.FRAGMENT_MODEL_LOADING=c,_.FRAGMENT_MODEL_EXECUTED=l,_.FRAGMENT_MODEL_CANCELED=N,_.FRAGMENT_MODEL_FAILED=E,u.default.updateClassFactory(T.__dashjs_factory_name,_),exports.default=_,module.exports=exports.default;
},{"../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6","../vo/FragmentRequest":"TOyU","../../core/Debug":"Jjwb"}],"BHVF":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function t(s,n,o){e(this,t),this.code=s||null,this.message=n||null,this.data=o||null};exports.default=t,module.exports=exports.default;
},{}],"RDXP":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null},n=function e(){t(this,e),this.s=null,this.d=null,this.b=[]};e.GET="GET",e.HEAD="HEAD",e.MPD_TYPE="MPD",e.XLINK_EXPANSION_TYPE="XLinkExpansion",e.INIT_SEGMENT_TYPE="InitializationSegment",e.INDEX_SEGMENT_TYPE="IndexSegment",e.MEDIA_SEGMENT_TYPE="MediaSegment",e.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",e.OTHER_TYPE="other",exports.HTTPRequest=e,exports.HTTPRequestTrace=n;
},{}],"QUf7":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};exports.default=e,module.exports=exports.default;
},{}],"JLQv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,s){for(var t=0;t<s.length;t++){var i=s[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(s,t,i){return t&&e(s.prototype,t),i&&e(s,i),s}}();function s(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var t=function(){function t(e){if(s(this,t),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var i=0;i<e.boxes.length;i++)this.boxes.push(new t(e.boxes[i]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(i=0;i<e.references.length;i++){var a={reference_type:e.references[i].reference_type,referenced_size:e.references[i].referenced_size,subsegment_duration:e.references[i].subsegment_duration};this.references.push(a)}}break;case"emsg":this.id=e.id,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];i=0;for(var r=e.samples.length;i<r;i++){var n={sample_size:e.samples[i].sample_size,sample_duration:e.samples[i].sample_duration,sample_composition_time_offset:e.samples[i].sample_composition_time_offset};this.samples.push(n)}}}}return e(t,[{key:"getChildBox",value:function(e){for(var s=0;s<this.boxes.length;s++)if(this.boxes[s].type===e)return this.boxes[s]}},{key:"getChildBoxes",value:function(e){for(var s=[],t=0;t<this.boxes.length;t++)this.boxes[t].type===e&&s.push(this.boxes[t]);return s}}]),t}();exports.default=t,module.exports=exports.default;
},{}],"Aobt":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../vo/IsoBox"),n=e(t),o=require("../../core/FactoryMaker"),r=e(o);function u(){var e=void 0;function t(t){var n=[];if(!t||!e||"function"!=typeof e.fetchAll)return n;for(var r=e.fetchAll(t),u=void 0,l=0,f=r.length;l<f;l++)(u=o(r[l]))&&n.push(u);return n}function o(e){if(!e)return null;var t=new n.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return{getBox:function(t){return t&&e&&e.boxes&&0!==e.boxes.length&&"function"==typeof e.fetch?o(e.fetch(t)):null},getBoxes:t,setData:function(t){e=t},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;var n=t(e.boxes[e.boxes.length-1].type);return n.length>0?n[n.length-1]:null}}}u.__dashjs_factory_name="IsoFile",exports.default=r.default.getClassFactory(u),module.exports=exports.default;
},{"../vo/IsoBox":"JLQv","../../core/FactoryMaker":"KAF6"}],"upQ5":[function(require,module,exports) {
var t={parseBuffer:function(t){return new e(t).parse()},addBoxProcessor:function(t,e){"string"==typeof t&&"function"==typeof e&&(i.prototype._boxProcessors[t]=e)},createFile:function(){return new e},createBox:function(t,e,s){var r=i.create(t);return e&&e.append(r,s),r},createFullBox:function(e,i,s){var r=t.createBox(e,i,s);return r.version=0,r.flags=0,r},Utils:{}};t.Utils.dataViewToString=function(t,e){var i=e||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(i).decode(t);var s=[],r=0;if("utf-8"===i)for(;r<t.byteLength;){var o=t.getUint8(r++);o<128||(o<224?(o=(31&o)<<6,o|=63&t.getUint8(r++)):o<240?(o=(15&o)<<12,o|=(63&t.getUint8(r++))<<6,o|=63&t.getUint8(r++)):(o=(7&o)<<18,o|=(63&t.getUint8(r++))<<12,o|=(63&t.getUint8(r++))<<6,o|=63&t.getUint8(r++))),s.push(String.fromCharCode(o))}else for(;r<t.byteLength;)s.push(String.fromCharCode(t.getUint8(r++)));return s.join("")},t.Utils.utf8ToByteArray=function(t){var e,i;if("undefined"!=typeof TextEncoder)e=(new TextEncoder).encode(t);else for(e=[],i=0;i<t.length;++i){var s=t.charCodeAt(i);s<128?e.push(s):s<2048?(e.push(192|s>>6),e.push(128|63&s)):s<65536?(e.push(224|s>>12),e.push(128|63&s>>6),e.push(128|63&s)):(e.push(240|s>>18),e.push(128|63&s>>12),e.push(128|63&s>>6),e.push(128|63&s))}return e},t.Utils.appendBox=function(t,e,i){if(e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,-1!==i)if(null!=i){var s,r=-1;if("number"==typeof i)r=i;else{if("string"==typeof i)s=i;else{if("object"!=typeof i||!i.type)return void t.boxes.push(e);s=i.type}for(var o=0;o<t.boxes.length;o++)if(s===t.boxes[o].type){r=o+1;break}}t.boxes.splice(r,0,e)}else t.boxes.push(e)},"undefined"!=typeof exports&&(exports.parseBuffer=t.parseBuffer,exports.addBoxProcessor=t.addBoxProcessor,exports.createFile=t.createFile,exports.createBox=t.createBox,exports.createFullBox=t.createFullBox,exports.Utils=t.Utils),t.Cursor=function(t){this.offset=void 0===t?0:t};var e=function(e){this._cursor=new t.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};e.prototype.fetch=function(t){var e=this.fetchAll(t,!0);return e.length?e[0]:null},e.prototype.fetchAll=function(t,i){var s=[];return e._sweep.call(this,t,s,i),s},e.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var t=i.parse(this);if(void 0===t.type)break;this.boxes.push(t)}return this},e._sweep=function(t,i,s){for(var r in this.type&&this.type==t&&i.push(this),this.boxes){if(i.length&&s)return;e._sweep.call(this.boxes[r],t,i,s)}},e.prototype.write=function(){var t,e=0;for(t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var i=new Uint8Array(e);for(this._rawo=new DataView(i.buffer),this.bytes=i,this._cursor.offset=0,t=0;t<this.boxes.length;t++)this.boxes[t].write();return i.buffer},e.prototype.append=function(e,i){t.Utils.appendBox(this,e,i)};var i=function(){this._cursor=new t.Cursor};i.parse=function(t){var e=new i;return e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,e._parseBox(),t._cursor.offset=e._raw.byteOffset+e._raw.byteLength,e},i.create=function(t){var e=new i;return e.type=t,e.boxes=[],e},i.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],i.prototype._boxProcessors={},i.prototype._procField=function(t,e,i){this._parsing?this[t]=this._readField(e,i):this._writeField(e,i,this[t])},i.prototype._procFieldArray=function(t,e,i,s){var r;if(this._parsing)for(this[t]=[],r=0;r<e;r++)this[t][r]=this._readField(i,s);else for(r=0;r<this[t].length;r++)this._writeField(i,s,this[t][r])},i.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},i.prototype._procEntries=function(t,e,i){var s;if(this._parsing)for(this[t]=[],s=0;s<e;s++)this[t].push({}),i.call(this,this[t][s]);else for(s=0;s<e;s++)i.call(this,this[t][s])},i.prototype._procSubEntries=function(t,e,i,s){var r;if(this._parsing)for(t[e]=[],r=0;r<i;r++)t[e].push({}),s.call(this,t[e][r]);else for(r=0;r<i;r++)s.call(this,t[e][r])},i.prototype._procEntryField=function(t,e,i,s){this._parsing?t[e]=this._readField(i,s):this._writeField(i,s,t[e])},i.prototype._procSubBoxes=function(t,e){var s;if(this._parsing)for(this[t]=[],s=0;s<e;s++)this[t].push(i.parse(this));else for(s=0;s<e;s++)this._rawo?this[t][s].write():this.size+=this[t][s].getLength()},i.prototype._readField=function(t,e){switch(t){case"uint":return this._readUint(e);case"int":return this._readInt(e);case"template":return this._readTemplate(e);case"string":return-1===e?this._readTerminatedString():this._readString(e);case"data":return this._readData(e);case"utf8":return this._readUTF8String();default:return-1}},i.prototype._readInt=function(t){var e=null,i=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:e=this._raw.getInt8(i);break;case 16:e=this._raw.getInt16(i);break;case 32:e=this._raw.getInt32(i);break;case 64:var s=this._raw.getInt32(i),r=this._raw.getInt32(i+4);e=s*Math.pow(2,32)+r}return this._cursor.offset+=t>>3,e},i.prototype._readUint=function(t){var e,i,s=null,r=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:s=this._raw.getUint8(r);break;case 16:s=this._raw.getUint16(r);break;case 24:s=((e=this._raw.getUint16(r))<<8)+(i=this._raw.getUint8(r+2));break;case 32:s=this._raw.getUint32(r);break;case 64:e=this._raw.getUint32(r),i=this._raw.getUint32(r+4),s=e*Math.pow(2,32)+i}return this._cursor.offset+=t>>3,s},i.prototype._readString=function(t){for(var e="",i=0;i<t;i++){var s=this._readUint(8);e+=String.fromCharCode(s)}return e},i.prototype._readTemplate=function(t){return this._readUint(t/2)+this._readUint(t/2)/Math.pow(2,t/2)},i.prototype._readTerminatedString=function(){for(var t="";this._cursor.offset-this._offset<this._raw.byteLength;){var e=this._readUint(8);if(0===e)break;t+=String.fromCharCode(e)}return t},i.prototype._readData=function(t){var e=t>0?t:this._raw.byteLength-(this._cursor.offset-this._offset);if(e>0){var i=new Uint8Array(this._raw.buffer,this._cursor.offset,e);return this._cursor.offset+=e,i}return null},i.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),i=null;return e>0&&(i=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),i?t.Utils.dataViewToString(i):i},i.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},i.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},i.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(i.parse(this))},i.prototype.append=function(e,i){t.Utils.appendBox(this,e,i)},i.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var t=0;t<this.boxes.length;t++)this.size+=this.boxes[t].getLength();return this._data&&this._writeData(this._data),this.size},i.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var t=0;t<this.boxes.length;t++)this.boxes[t].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},i.prototype._writeInt=function(t,e){if(this._rawo){var i=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setInt8(i,e);break;case 16:this._rawo.setInt16(i,e);break;case 32:this._rawo.setInt32(i,e);break;case 64:var s=Math.floor(e/Math.pow(2,32)),r=e-s*Math.pow(2,32);this._rawo.setUint32(i,s),this._rawo.setUint32(i+4,r)}this._cursor.offset+=t>>3}else this.size+=t>>3},i.prototype._writeUint=function(t,e){if(this._rawo){var i,s,r=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setUint8(r,e);break;case 16:this._rawo.setUint16(r,e);break;case 24:i=(16776960&e)>>8,s=255&e,this._rawo.setUint16(r,i),this._rawo.setUint8(r+2,s);break;case 32:this._rawo.setUint32(r,e);break;case 64:s=e-(i=Math.floor(e/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(r,i),this._rawo.setUint32(r+4,s)}this._cursor.offset+=t>>3}else this.size+=t>>3},i.prototype._writeString=function(t,e){for(var i=0;i<t;i++)this._writeUint(8,e.charCodeAt(i))},i.prototype._writeTerminatedString=function(t){if(0!==t.length){for(var e=0;e<t.length;e++)this._writeUint(8,t.charCodeAt(e));this._writeUint(8,0)}},i.prototype._writeTemplate=function(t,e){var i=Math.floor(e),s=(e-i)*Math.pow(2,t/2);this._writeUint(t/2,i),this._writeUint(t/2,s)},i.prototype._writeData=function(t){if(t)if(this._rawo){if(t instanceof Array){for(var e=this._cursor.offset-this._rawo.byteOffset,i=0;i<t.length;i++)this._rawo.setInt8(e+i,t[i]);this._cursor.offset+=t.length}t instanceof Uint8Array&&(this._root.bytes.set(t,this._cursor.offset),this._cursor.offset+=t.length)}else this.size+=t.length},i.prototype._writeUTF8String=function(e){var i=t.Utils.utf8ToByteArray(e);if(this._rawo)for(var s=new DataView(this._rawo.buffer,this._cursor.offset,i.length),r=0;r<i.length;r++)s.setUint8(r,i[r]);else this.size+=i.length},i.prototype._writeField=function(t,e,i){switch(t){case"uint":this._writeUint(e,i);break;case"int":this._writeInt(e,i);break;case"template":this._writeTemplate(e,i);break;case"string":-1==e?this._writeTerminatedString(i):this._writeString(e,i);break;case"data":this._writeData(i);break;case"utf8":this._writeUTF8String(i)}},i.prototype._boxProcessors.avc1=i.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},i.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"segment_duration","uint",1===this.version?64:32),this._procEntryField(t,"media_time","int",1===this.version?64:32),this._procEntryField(t,"media_rate_integer","int",16),this._procEntryField(t,"media_rate_fraction","int",16)})},i.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},i.prototype._boxProcessors.free=i.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},i.prototype._boxProcessors.ftyp=i.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var t=-1;this._parsing&&(t=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",t,"string",4)},i.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},i.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},i.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},i.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},i.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},i.prototype._boxProcessors.mp4a=i.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},i.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},i.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},i.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},i.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},i.prototype._boxProcessors.sdtp=function(){this._procFullBox();var t=-1;this._parsing&&(t=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",t,"uint",8)},i.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(t){this._parsing||(t.reference=(1&t.reference_type)<<31,t.reference|=2147483647&t.referenced_size,t.sap=(1&t.starts_with_SAP)<<31,t.sap|=(3&t.SAP_type)<<28,t.sap|=268435455&t.SAP_delta_time),this._procEntryField(t,"reference","uint",32),this._procEntryField(t,"subsegment_duration","uint",32),this._procEntryField(t,"sap","uint",32),this._parsing&&(t.reference_type=t.reference>>31&1,t.referenced_size=2147483647&t.reference,t.starts_with_SAP=t.sap>>31&1,t.SAP_type=t.sap>>28&7,t.SAP_delta_time=268435455&t.sap)})},i.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},i.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(t){this._procEntryField(t,"ranges_count","uint",32),this._procSubEntries(t,"ranges",t.ranges_count,function(t){this._procEntryField(t,"level","uint",8),this._procEntryField(t,"range_size","uint",24)})})},i.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"sample_delta","uint",32),this._procEntryField(t,"subsample_count","uint",16),this._procSubEntries(t,"subsamples",t.subsample_count,function(t){this._procEntryField(t,"subsample_size","uint",1===this.version?32:16),this._procEntryField(t,"subsample_priority","uint",8),this._procEntryField(t,"discardable","uint",8),this._procEntryField(t,"codec_specific_parameters","uint",32)})})},i.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},i.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},i.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(t){this._procEntryField(t,"time","uint",1===this.version?64:32),this._procEntryField(t,"moof_offset","uint",1===this.version?64:32),this._procEntryField(t,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(t,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(t,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},i.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},i.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(t){256&this.flags&&this._procEntryField(t,"sample_duration","uint",32),512&this.flags&&this._procEntryField(t,"sample_size","uint",32),1024&this.flags&&this._procEntryField(t,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(t,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},i.prototype._boxProcessors["url "]=i.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},i.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},i.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},i.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},i.prototype._boxProcessors.vtte=function(){};
},{}],"Wgpe":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(s,o,n){t(this,e),this.lastCompletedOffset=s,this.found=o,this.size=n};exports.default=e,module.exports=exports.default;
},{}],"dfT6":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/Debug"),o=e(t),r=require("./IsoFile"),i=e(r),a=require("../../core/FactoryMaker"),n=e(a),s=require("codem-isoboxer"),u=e(s),f=require("../vo/IsoBoxSearchInfo"),d=e(f);function l(){var e=void 0,t=void 0,r=this.context;function a(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=u.default.parseBuffer(e),o=(0,i.default)(r).create();return o.setData(t),o}function n(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function s(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return t={parse:a,findLastTopIsoBoxCompleted:function(e,t,o){if(void 0===o&&(o=0),!t||o+8>=t.byteLength)return new d.default(0,!1);for(var r=t instanceof ArrayBuffer?new Uint8Array(t):t,i=void 0,a=0;o<r.byteLength;){var u=n(r,o),f=s(r,o+4);if(0===u)break;o+u<=r.byteLength&&(e.indexOf(f)>=0?i=new d.default(o,!0,u):a=o+u),o+=u}return i||new d.default(a,!1)},getMediaTimescaleFromMoov:function(e){var t=a(e),o=t?t.getBox("mdhd"):void 0;return o?o.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t,o,r=a(e),i=r.getBoxes("moof"),n=r.getBoxes("mfhd"),s=void 0,u=void 0,f=void 0,d=void 0,l=void 0,m=void 0,v=void 0,g=void 0,c=void 0,p=void 0,_=void 0,h=void 0,b=void 0,x=void 0;o=r.getBoxes("moof").length,t=n[n.length-1].sequence_number,u=0,l=[];var S=-1,B=-1;for(p=0;p<i.length;p++){var C=i[p],y=C.getChildBoxes("traf");for(g=0;g<y.length;g++){var z=y[g],q=z.getChildBox("tfhd"),N=z.getChildBox("tfdt");d=N.baseMediaDecodeTime;var L=z.getChildBoxes("trun"),I=z.getChildBoxes("subs");for(c=0;c<L.length;c++){var M=L[c];for(u=M.sample_count,b=(q.base_data_offset||0)+(M.data_offset||0),v=0;v<u;v++){s=void 0!==(m=M.samples[v]).sample_duration?m.sample_duration:q.default_sample_duration,f=void 0!==m.sample_size?m.sample_size:q.default_sample_size;var D={dts:d,cts:d+(void 0!==m.sample_composition_time_offset?m.sample_composition_time_offset:0),duration:s,offset:C.offset+b,size:f,subSizes:[f]};if(I)for(_=0;_<I.length;_++){var F=I[_];if(S<F.entry_count-1&&v>B&&(S++,B+=F.entries[S].sample_delta),v==B){D.subSizes=[];var w=F.entries[S];for(h=0;h<w.subsample_count;h++)D.subSizes.push(w.subsamples[h].subsample_size)}}l.push(D),b+=f,d+=s}}x=d-N.baseMediaDecodeTime}}return{sampleList:l,lastSequenceNumber:t,totalDuration:x,numSequences:o}},findInitRange:function(t){var o=null,r=a(t);if(!r)return o;var i=r.getBox("ftyp"),n=r.getBox("moov");return e.debug("Searching for initialization."),n&&n.isComplete&&(o=(i?i.offset:n.offset)+"-"+(n.offset+n.size-1),e.debug("Found the initialization.  Range: "+o)),o}},e=(0,o.default)(r).getInstance().getLogger(t),t}l.__dashjs_factory_name="BoxParser",exports.default=n.default.getSingletonFactory(l),module.exports=exports.default;
},{"../../core/Debug":"Jjwb","./IsoFile":"Aobt","../../core/FactoryMaker":"KAF6","codem-isoboxer":"upQ5","../vo/IsoBoxSearchInfo":"Wgpe"}],"LTZo":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkParameterType=o,exports.checkInteger=r,exports.checkRange=u,exports.checkIsVideoOrAudioType=f;var t=require("../constants/Constants"),n=e(t);function o(e,t){if(typeof e!==t)throw n.default.BAD_ARGUMENT_ERROR}function r(e){if(!(null!==e&&!isNaN(e)&&e%1==0))throw n.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function u(e,t,o){if(e<t||e>o)throw n.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function f(e){if("string"!=typeof e||e!==n.default.AUDIO&&e!==n.default.VIDEO)throw n.default.BAD_ARGUMENT_ERROR}
},{"../constants/Constants":"NqGT"}],"JUYk":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),r=e(t),s=require("../utils/SupervisorTools");function a(){return{customTimeRangeArray:[],length:0,add:function(e,t){var r=0;for(r=0;r<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[r].start;r++);for(this.customTimeRangeArray.splice(r,0,{start:e,end:t}),r=0;r<this.customTimeRangeArray.length-1;r++)this.mergeRanges(r,r+1)&&r--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var r=0;r<this.customTimeRangeArray.length;r++)if(e<=this.customTimeRangeArray[r].start&&t>=this.customTimeRangeArray[r].end)this.customTimeRangeArray.splice(r,1),r--;else{if(e>this.customTimeRangeArray[r].start&&t<this.customTimeRangeArray[r].end){this.customTimeRangeArray.splice(r+1,0,{start:t,end:this.customTimeRangeArray[r].end}),this.customTimeRangeArray[r].end=e;break}e>this.customTimeRangeArray[r].start&&e<this.customTimeRangeArray[r].end?this.customTimeRangeArray[r].end=e:t>this.customTimeRangeArray[r].start&&t<this.customTimeRangeArray[r].end&&(this.customTimeRangeArray[r].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var r=this.customTimeRangeArray[e],s=this.customTimeRangeArray[t];return r.start<=s.start&&s.start<=r.end&&r.end<=s.end?(r.end=s.end,this.customTimeRangeArray.splice(t,1),!0):s.start<=r.start&&r.start<=s.end&&s.end<=r.end?(r.start=s.start,this.customTimeRangeArray.splice(t,1),!0):s.start<=r.start&&r.start<=s.end&&r.end<=s.end?(this.customTimeRangeArray.splice(e,1),!0):r.start<=s.start&&s.start<=r.end&&s.end<=r.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,s.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,s.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}a.__dashjs_factory_name="CustomTimeRanges",exports.default=r.default.getClassFactory(a),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","../utils/SupervisorTools":"LTZo"}],"Ot2d":[function(require,module,exports) {
!function(t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"}("undefined"==typeof exports?this.imscNames={}:exports);
},{}],"YnF9":[function(require,module,exports) {
!function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,l={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var u,s=null,o=l[e.toLowerCase()];return void 0!==o?s=o:null!==(u=t.exec(e))?s=[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16),void 0!==u[4]?parseInt(u[4],16):255]:null!==(u=n.exec(e))?s=[parseInt(u[1]),parseInt(u[2]),parseInt(u[3]),255]:null!==(u=r.exec(e))&&(s=[parseInt(u[1]),parseInt(u[2]),parseInt(u[3]),parseInt(u[4])]),s};var u=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;e.parseLength=function(e){var t,n=null;return null!==(t=u.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n},e.parseTextShadow=function(t){var n=t.split(","),r=[];for(var l in n){var u=n[l].split(" ");if(1===u.length&&"none"===u[0])return"none";if(u.length>1&&u.length<5){var s=[null,null,null,null],o=e.parseLength(u.shift());if(null===o)return null;if(s[0]=o,null===(o=e.parseLength(u.shift())))return null;if(s[1]=o,0===u.length){r.push(s);continue}if(null!==(o=e.parseLength(u[0]))&&(s[2]=o,u.shift()),0===u.length){r.push(s);continue}var a=e.parseColor(u[0]);if(null===a)return null;s[3]=a,r.push(s)}}return r},e.parsePosition=function(t){var n=t.split(" "),r=function(e){return"center"===e||"left"===e||"top"===e||"bottom"===e||"right"===e};if(n.length>4)return null;for(var l in n)if(!r(n[l])){var u=e.parseLength(n[l]);if(null===u)return null;n[l]=u}for(var s={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},o=0;o<n.length;){var a=n[o++];if(r(a)){var h={value:0,unit:"%"};2!==n.length&&o<n.length&&!r(n[o])&&(h=n[o++]),"right"===a?(s.h.edge=a,s.h.offset=h):"bottom"===a?(s.v.edge=a,s.v.offset=h):"left"===a?s.h.offset=h:"top"===a&&(s.v.offset=h)}else{if(1!==n.length&&2!==n.length)return null;1===o?s.h.offset=a:s.v.offset=a}}return s},e.ComputedLength=function(e,t){this.rw=e,this.rh=t},e.ComputedLength.prototype.toUsedLength=function(e,t){return e*this.rw+t*this.rh},e.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},e.toComputedLength=function(t,n,r,l,u,s){return"%"===n&&l?new e.ComputedLength(l.rw*t/100,l.rh*t/100):"em"===n&&r?new e.ComputedLength(r.rw*t,r.rh*t):"c"===n&&u?new e.ComputedLength(t*u.rw,t*u.rh):"px"===n&&s?new e.ComputedLength(t*s.rw,t*s.rh):"rh"===n?new e.ComputedLength(0,t/100):"rw"===n?new e.ComputedLength(t/100,0):null}}("undefined"==typeof exports?this.imscUtils={}:exports);
},{}],"dfLr":[function(require,module,exports) {
!function(n,t,e){function l(n,t,e,l,r,u,s,i){this.name=t,this.ns=n,this.qname=n+" "+t,this.inherit=r,this.animatable=u,this.initial=e,this.applies=l,this.parse=s,this.compute=i}for(var r in n.all=[new l(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,e.parseColor,null),new l(t.ns_tts,"color","white",["span"],!0,!0,e.parseColor,null),new l(t.ns_tts,"direction","ltr",["p","span"],!0,!0,function(n){return n},null),new l(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(n){return n},null),new l(t.ns_tts,"displayAlign","before",["region"],!1,!0,function(n){return n},null),new l(t.ns_tts,"extent","auto",["tt","region"],!1,!0,function(n){if("auto"===n)return n;var t=n.split(" ");if(2!==t.length)return null;var l=e.parseLength(t[0]),r=e.parseLength(t[1]);return r&&l?{h:r,w:l}:null},function(n,t,l,r,u){var s,i;if("auto"===r)s=new e.ComputedLength(0,1);else if(null===(s=e.toComputedLength(r.h.value,r.h.unit,null,n.dimensions.h,null,n.pxLength.h)))return null;if("auto"===r)i=new e.ComputedLength(1,0);else if(null===(i=e.toComputedLength(r.w.value,r.w.unit,null,n.dimensions.w,null,n.pxLength.w)))return null;return{h:s,w:i}}),new l(t.ns_tts,"fontFamily","default",["span"],!0,!0,function(n){var t=n.split(","),e=[];for(var l in t)"'"!==t[l].charAt(0)&&'"'!==t[l].charAt(0)&&"default"===t[l]?e.push("monospaceSerif"):e.push(t[l]);return e},null),new l(t.ns_tts,"shear","0%",["p"],!0,!0,e.parseLength,function(n,t,e,l){return"%"!==l.unit?null:Math.abs(l.value)>100?100*Math.sign(l.value):l.value}),new l(t.ns_tts,"fontSize","1c",["span"],!0,!0,e.parseLength,function(t,l,r,u,s){return e.toComputedLength(u.value,u.unit,null!==l?l.styleAttrs[n.byName.fontSize.qname]:t.cellLength.h,null!==l?l.styleAttrs[n.byName.fontSize.qname]:t.cellLength.h,t.cellLength.h,t.pxLength.h)}),new l(t.ns_tts,"fontStyle","normal",["span"],!0,!0,function(n){return n},null),new l(t.ns_tts,"fontWeight","normal",["span"],!0,!0,function(n){return n},null),new l(t.ns_tts,"lineHeight","normal",["p"],!0,!0,function(n){return"normal"===n?n:e.parseLength(n)},function(t,l,r,u,s){var i;if("normal"===u)i=u;else if(null===(i=e.toComputedLength(u.value,u.unit,r.styleAttrs[n.byName.fontSize.qname],r.styleAttrs[n.byName.fontSize.qname],t.cellLength.h,t.pxLength.h)))return null;return i}),new l(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new l(t.ns_tts,"origin","auto",["region"],!1,!0,function(n){if("auto"===n)return n;var t=n.split(" ");if(2!==t.length)return null;var l=e.parseLength(t[0]),r=e.parseLength(t[1]);return r&&l?{h:r,w:l}:null},function(n,t,l,r,u){var s,i;if("auto"===r)s=new e.ComputedLength(0,0);else if(null===(s=e.toComputedLength(r.h.value,r.h.unit,null,n.dimensions.h,null,n.pxLength.h)))return null;if("auto"===r)i=new e.ComputedLength(0,0);else if(null===(i=e.toComputedLength(r.w.value,r.w.unit,null,n.dimensions.w,null,n.pxLength.w)))return null;return{h:s,w:i}}),new l(t.ns_tts,"overflow","hidden",["region"],!1,!0,function(n){return n},null),new l(t.ns_tts,"padding","0px",["region"],!1,!0,function(n){var t=n.split(" ");if(t.length>4)return null;var l=[];for(var r in t){var u=e.parseLength(t[r]);if(!u)return null;l.push(u)}return l},function(t,l,r,u,s){var i;if(1===u.length)i=[u[0],u[0],u[0],u[0]];else if(2===u.length)i=[u[0],u[1],u[0],u[1]];else if(3===u.length)i=[u[0],u[1],u[2],u[1]];else{if(4!==u.length)return null;i=[u[0],u[1],u[2],u[3]]}var o=r.styleAttrs[n.byName.writingMode.qname];if("lrtb"===o||"lr"===o)i=[i[0],i[3],i[2],i[1]];else if("rltb"===o||"rl"===o)i=[i[0],i[1],i[2],i[3]];else if("tblr"===o)i=[i[3],i[0],i[1],i[2]];else{if("tbrl"!==o&&"tb"!==o)return null;i=[i[3],i[2],i[1],i[0]]}var a=[];for(var h in i)if(0===i[h].value)a[h]=new e.ComputedLength(0,0);else if(a[h]=e.toComputedLength(i[h].value,i[h].unit,r.styleAttrs[n.byName.fontSize.qname],"0"===h||"2"===h?r.styleAttrs[n.byName.extent.qname].h:r.styleAttrs[n.byName.extent.qname].w,"0"===h||"2"===h?t.cellLength.h:t.cellLength.w,"0"===h||"2"===h?t.pxLength.h:t.pxLength.w),null===a[h])return null;return a}),new l(t.ns_tts,"position","top left",["region"],!1,!0,function(n){return e.parsePosition(n)},function(t,l,r,u){var s,i;return null===(s=e.toComputedLength(u.v.offset.value,u.v.offset.unit,null,new e.ComputedLength(-r.styleAttrs[n.byName.extent.qname].h.rw,t.dimensions.h.rh-r.styleAttrs[n.byName.extent.qname].h.rh),null,t.pxLength.h))?null:("bottom"===u.v.edge&&(s=new e.ComputedLength(-s.rw-r.styleAttrs[n.byName.extent.qname].h.rw,t.dimensions.h.rh-s.rh-r.styleAttrs[n.byName.extent.qname].h.rh)),i=e.toComputedLength(u.h.offset.value,u.h.offset.unit,null,new e.ComputedLength(t.dimensions.w.rw-r.styleAttrs[n.byName.extent.qname].w.rw,-r.styleAttrs[n.byName.extent.qname].w.rh),null,t.pxLength.w),null===s?null:("right"===u.h.edge&&(i=new e.ComputedLength(t.dimensions.w.rw-i.rw-r.styleAttrs[n.byName.extent.qname].w.rw,-i.rh-r.styleAttrs[n.byName.extent.qname].w.rh)),{h:s,w:i}))}),new l(t.ns_tts,"ruby","none",["span"],!1,!0,function(n){return n},null),new l(t.ns_tts,"rubyAlign","center",["span"],!0,!0,function(n){return"center"!==n&&"spaceAround"!==n?null:n},null),new l(t.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(n){return n},null),new l(t.ns_tts,"rubyReserve","none",["p"],!0,!0,function(n){var t=n.split(" "),l=[null,null];if(0===t.length||t.length>2)return null;if("none"!==t[0]&&"both"!==t[0]&&"after"!==t[0]&&"before"!==t[0]&&"outside"!==t[0])return null;if(l[0]=t[0],2===t.length&&"none"!==t[0]){var r=e.parseLength(t[1]);if(!r)return null;l[1]=r}return l},function(t,l,r,u,s){if("none"===u[0])return u;var i=null;return null===(i=null===u[1]?new e.ComputedLength(.5*r.styleAttrs[n.byName.fontSize.qname].rw,.5*r.styleAttrs[n.byName.fontSize.qname].rh):e.toComputedLength(u[1].value,u[1].unit,r.styleAttrs[n.byName.fontSize.qname],r.styleAttrs[n.byName.fontSize.qname],t.cellLength.h,t.pxLength.h))?null:[u[0],i]}),new l(t.ns_tts,"showBackground","always",["region"],!1,!0,function(n){return n},null),new l(t.ns_tts,"textAlign","start",["p"],!0,!0,function(n){return n},function(n,t,e,l,r){return"left"===l?"start":"right"===l?"end":l}),new l(t.ns_tts,"textCombine","none",["span"],!0,!0,function(n){var t=n.split(" ");return 1!==t.length||"none"!==t[0]&&"all"!==t[0]?null:[t[0]]},null),new l(t.ns_tts,"textDecoration","none",["span"],!0,!0,function(n){return n.split(" ")},null),new l(t.ns_tts,"textEmphasis","none",["span"],!0,!0,function(n){var t=n.split(" "),l={style:null,symbol:null,color:null,position:null};for(var r in t)if("none"===t[r]||"auto"===t[r])l.style=t[r];else if("filled"===t[r]||"open"===t[r])l.style=t[r];else if("circle"===t[r]||"dot"===t[r]||"sesame"===t[r])l.symbol=t[r];else if("current"===t[r])l.color=t[r];else if("outside"===t[r]||"before"===t[r]||"after"===t[r])l.position=t[r];else if(l.color=e.parseColor(t[r]),null===l.color)return null;return null==l.style&&null==l.symbol?l.style="auto":(l.symbol=l.symbol||"circle",l.style=l.style||"filled"),l.position=l.position||"outside",l.color=l.color||"current",l},null),new l(t.ns_tts,"textOutline","none",["span"],!0,!0,function(n){if("none"===n)return n;var t={},l=n.split(" ");if(0===l.length||l.length>2)return null;var r=e.parseColor(l[0]);if(t.color=r,null!==r&&l.shift(),1!==l.length)return null;var u=e.parseLength(l[0]);return u?(t.thickness=u,t):null},function(t,l,r,u,s){if("none"===u)return u;var i={};return null===u.color?i.color=r.styleAttrs[n.byName.color.qname]:i.color=u.color,i.thickness=e.toComputedLength(u.thickness.value,u.thickness.unit,r.styleAttrs[n.byName.fontSize.qname],r.styleAttrs[n.byName.fontSize.qname],t.cellLength.h,t.pxLength.h),null===i.thickness?null:i}),new l(t.ns_tts,"textShadow","none",["span"],!0,!0,e.parseTextShadow,function(t,l,r,u){if("none"===u)return u;var s=[];for(var i in u){var o={};if(o.x_off=e.toComputedLength(u[i][0].value,u[i][0].unit,null,r.styleAttrs[n.byName.fontSize.qname],null,t.pxLength.w),null===o.x_off)return null;if(o.y_off=e.toComputedLength(u[i][1].value,u[i][1].unit,null,r.styleAttrs[n.byName.fontSize.qname],null,t.pxLength.h),null===o.y_off)return null;if(null===u[i][2])o.b_radius=0;else if(o.b_radius=e.toComputedLength(u[i][2].value,u[i][2].unit,null,r.styleAttrs[n.byName.fontSize.qname],null,t.pxLength.h),null===o.b_radius)return null;null===u[i][3]?o.color=r.styleAttrs[n.byName.color.qname]:o.color=u[i][3],s.push(o)}return s}),new l(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(n){return n},null),new l(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(n){return n},null),new l(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(n){return n},null),new l(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(n){return n},null),new l(t.ns_tts,"zIndex","auto",["region"],!1,!0,function(n){var t;return"auto"===n?t=n:(t=parseInt(n),isNaN(t)&&(t=null)),t},null),new l(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,e.parseLength,function(n,t,l,r,u){return e.toComputedLength(r.value,r.unit,null,null,n.cellLength.w,null)}),new l(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(n){return n},null),new l(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(n){return n},null),new l(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(n){return"true"===n},null),new l(t.ns_itts,"fillLineGap","false",["p"],!0,!0,function(n){return"true"===n},null)],n.byQName={},n.all)n.byQName[n.all[r].qname]=n.all[r];for(var u in n.byName={},n.all)n.byName[n.all[u].name]=n.all[u]}("undefined"==typeof exports?this.imscStyles={}:exports,"undefined"==typeof imscNames?require("./names"):imscNames,"undefined"==typeof imscUtils?require("./utils"):imscUtils);
},{"./names":"Ot2d","./utils":"YnF9"}],"wdXT":[function(require,module,exports) {
!function(e,t,n,i){e.generateISD=function(e,t,n){var i=new a(e),r={};for(var l in e.head.layout.regions){var o=s(e,t,e.head.layout.regions[l],e.body,null,"",e.head.layout.regions[l],n,r);null!==o&&i.contents.push(o.element)}return i};var r=[n.byName.color.qname,n.byName.textCombine.qname,n.byName.textDecoration.qname,n.byName.textEmphasis.qname,n.byName.textOutline.qname,n.byName.textShadow.qname];function s(e,t,a,m,y,f,d,u,c){if(t<d.begin||t>=d.end)return null;var b="regionID"in d&&""!==d.regionID?d.regionID:f;if(null!==y&&b!==a.id&&(!("contents"in d)||"contents"in d&&0===d.contents.length||""!==b))return null;var q=new l(d);for(var h in d.sets)t<d.sets[h].begin||t>=d.sets[h].end||(q.styleAttrs[d.sets[h].qname]=d.sets[h].value);var p,g={};for(var v in q.styleAttrs)if(g[v]=!0,v===n.byName.writingMode.qname&&!(n.byName.direction.qname in q.styleAttrs)){var x=q.styleAttrs[v];"lrtb"===x||"lr"===x?q.styleAttrs[n.byName.direction.qname]="ltr":"rltb"!==x&&"rl"!==x||(q.styleAttrs[n.byName.direction.qname]="rtl")}if(null!==y)for(var A in n.all){var N=n.all[A];if(N.qname===n.byName.textDecoration.qname){var k=y.styleAttrs[N.qname],O=q.styleAttrs[N.qname],w=[];void 0===O?w=k:-1===O.indexOf("none")?((-1===O.indexOf("noUnderline")&&-1!==k.indexOf("underline")||-1!==O.indexOf("underline"))&&w.push("underline"),(-1===O.indexOf("noLineThrough")&&-1!==k.indexOf("lineThrough")||-1!==O.indexOf("lineThrough"))&&w.push("lineThrough"),(-1===O.indexOf("noOverline")&&-1!==k.indexOf("overline")||-1!==O.indexOf("overline"))&&w.push("overline")):w.push("none"),q.styleAttrs[N.qname]=w}else if(N.qname!==n.byName.fontSize.qname||N.qname in q.styleAttrs||"span"!==q.kind||"textContainer"!==q.styleAttrs[n.byName.ruby.qname])if(N.qname!==n.byName.fontSize.qname||N.qname in q.styleAttrs||"span"!==q.kind||"text"!==q.styleAttrs[n.byName.ruby.qname])N.inherit&&N.qname in y.styleAttrs&&!(N.qname in q.styleAttrs)&&(q.styleAttrs[N.qname]=y.styleAttrs[N.qname]);else{var S=y.styleAttrs[n.byName.fontSize.qname];"textContainer"===y.styleAttrs[n.byName.ruby.qname]?q.styleAttrs[N.qname]=S:q.styleAttrs[N.qname]=new i.ComputedLength(.5*S.rw,.5*S.rh)}else{var _=y.styleAttrs[n.byName.fontSize.qname];q.styleAttrs[N.qname]=new i.ComputedLength(.5*_.rw,.5*_.rh)}}for(var C in n.all){var D=n.all[C];if(!(D.qname in q.styleAttrs)&&!(D.qname===n.byName.position.qname&&n.byName.origin.qname in q.styleAttrs||D.qname===n.byName.origin.qname&&n.byName.position.qname in q.styleAttrs)){var I=e.head.styling.initials[D.qname]||D.initial;("region"===q.kind||!1===D.inherit&&null!==I)&&(q.styleAttrs[D.qname]=D.parse(I),g[D.qname]=!0)}}for(var z in n.all){var T=n.all[z];if(T.qname in g&&null!==T.compute){var L=T.compute(e,y,q,q.styleAttrs[T.qname],c);null!==L?q.styleAttrs[T.qname]=L:(q.styleAttrs[T.qname]=T.compute(e,y,q,T.parse(T.initial),c),o(u,"Style '"+T.qname+"' on element '"+q.kind+"' cannot be computed"))}}if("none"===q.styleAttrs[n.byName.display.qname])return null;for(var U in null===y?p=null===m?[]:[m]:"contents"in d&&(p=d.contents),p){var R=s(e,t,a,m,q,b,p[U],u,c);null!==R&&q.contents.push(R.element)}for(var B in q.styleAttrs){var E=!1;if("span"===q.kind){var M=q.styleAttrs[n.byName.ruby.qname];(E=("container"===M||"textContainer"===M||"baseContainer"===M)&&-1!==r.indexOf(B))||(E="container"!==M&&B===n.byName.rubyAlign.qname),E||(E=!("textContainer"===M||"text"===M)&&B===n.byName.rubyPosition.qname)}if(!E)E=-1===n.byQName[B].applies.indexOf(q.kind);E&&delete q.styleAttrs[B]}if("span"===q.kind&&q.text&&"default"===q.space){var P=q.text.replace(/[\t\r\n ]+/g," ");q.text=P}if("p"===q.kind){var Q=[];!function e(t,n){if("contents"in t)for(var i in t.contents)e(t.contents[i],n);else"span"!==t.kind&&"br"!==t.kind||n.push(t)}(q,Q);for(var $=0,j="after_br",F=0;;)if("after_br"===j)$>=Q.length||"br"===Q[$].kind?(j="before_br",F=$,$--):("preserve"!==Q[$].space&&(Q[$].text=Q[$].text.replace(/^[\t\r\n ]+/g,"")),Q[$].text.length>0?(j="looking_br",$++):Q.splice($,1));else if("before_br"===j)if($<0||"br"===Q[$].kind){if(j="after_br",($=F+1)>=Q.length)break}else if("preserve"!==Q[$].space&&(Q[$].text=Q[$].text.replace(/[\t\r\n ]+$/g,"")),Q[$].text.length>0){if(j="after_br",($=F+1)>=Q.length)break}else Q.splice($,1),$--;else $>=Q.length||"br"===Q[$].kind?(j="before_br",F=$,$--):$++;!function e(t){if("br"===t.kind)return!1;if("text"in t)return 0===t.text.length;if("contents"in t){for(var n=t.contents.length;n--;)e(t.contents[n])&&t.contents.splice(n,1);return 0===t.contents.length}}(q)}return"div"===q.kind&&n.byName.backgroundImage.qname in q.styleAttrs||"br"===q.kind||"image"===q.kind||"contents"in q&&q.contents.length>0||"span"===q.kind&&null!==q.text||"region"===q.kind&&"always"===q.styleAttrs[n.byName.showBackground.qname]?{region_id:b,element:q}:null}function a(e){this.contents=[],this.aspectRatio=e.aspectRatio}function l(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"src"in e&&(this.src=e.src),"type"in e&&(this.type=e.type),"text"in e?this.text=e.text:("region"===this.kind||"contents"in e)&&(this.contents=[]),"space"in e&&(this.space=e.space)}function o(e,t){if(e&&e.error&&e.error(t))throw t}}("undefined"==typeof exports?this.imscISD={}:exports,"undefined"==typeof imscNames?require("./names"):imscNames,"undefined"==typeof imscStyles?require("./styles"):imscStyles,"undefined"==typeof imscUtils?require("./utils"):imscUtils);
},{"./names":"Ot2d","./styles":"dfLr","./utils":"YnF9"}],"HbFW":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,module.exports.once=m,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function v(e,t,n,i){var o,s,v;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),v=s[t]),void 0===v)v=s[t]=n,++e._eventsCount;else if("function"==typeof v?v=s[t]=i?[n,v]:[v,n]:i?v.unshift(n):v.push(n),(o=f(e))>0&&v.length>o&&!v.warned){v.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=v.length,r(l)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function a(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function m(e,t){return new Promise(function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)})}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var v=f.length,l=p(f,v);for(r=0;r<v;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return v(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return v(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,c(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,c(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return a(this,e,!0)},o.prototype.rawListeners=function(e){return a(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"eUdw":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(t,e){if(e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}};
},{}],"fArb":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"mR7C":[function(require,module,exports) {
var process = require("process");
var n=require("process");function e(e,r,t,c){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,l,u=arguments.length;switch(u){case 0:case 1:return n.nextTick(e);case 2:return n.nextTick(function(){e.call(null,r)});case 3:return n.nextTick(function(){e.call(null,r,t)});case 4:return n.nextTick(function(){e.call(null,r,t,c)});default:for(i=new Array(u-1),l=0;l<i.length;)i[l++]=arguments[l];return n.nextTick(function(){e.apply(null,i)})}}void 0===n||!n.version||0===n.version.indexOf("v0.")||0===n.version.indexOf("v1.")&&0!==n.version.indexOf("v1.8.")?module.exports={nextTick:e}:module.exports=n;
},{"process":"fArb"}],"J4KR":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"T0pd":[function(require,module,exports) {
module.exports=require("events").EventEmitter;
},{"events":"HbFW"}],"fjgf":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"jpSV":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"XxBq":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"fjgf","ieee754":"jpSV","isarray":"J4KR","buffer":"XxBq"}],"YVbn":[function(require,module,exports) {

var r=require("buffer"),e=r.Buffer;function n(r,e){for(var n in r)e[n]=r[n]}function o(r,n,o){return e(r,n,o)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(n(r,exports),exports.Buffer=o),n(e,o),o.from=function(r,n,o){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,n,o)},o.alloc=function(r,n,o){if("number"!=typeof r)throw new TypeError("Argument must be a number");var f=e(r);return void 0!==n?"string"==typeof o?f.fill(n,o):f.fill(n):f.fill(0),f},o.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{"buffer":"XxBq"}],"Z7VQ":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer;function t(r){return Array.isArray?Array.isArray(r):"[object Array]"===a(r)}function e(r){return"boolean"==typeof r}function n(r){return null===r}function o(r){return null==r}function i(r){return"number"==typeof r}function u(r){return"string"==typeof r}function s(r){return"symbol"==typeof r}function f(r){return void 0===r}function p(r){return"[object RegExp]"===a(r)}function c(r){return"object"==typeof r&&null!==r}function l(r){return"[object Date]"===a(r)}function y(r){return"[object Error]"===a(r)||r instanceof Error}function x(r){return"function"==typeof r}function b(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r}function a(r){return Object.prototype.toString.call(r)}exports.isArray=t,exports.isBoolean=e,exports.isNull=n,exports.isNullOrUndefined=o,exports.isNumber=i,exports.isString=u,exports.isSymbol=s,exports.isUndefined=f,exports.isRegExp=p,exports.isObject=c,exports.isDate=l,exports.isError=y,exports.isFunction=x,exports.isPrimitive=b,exports.isBuffer=r.isBuffer;
},{"buffer":"XxBq"}],"CCsT":[function(require,module,exports) {

"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var n=require("safe-buffer").Buffer,e=require("util");function i(t,n,e){t.copy(n,e)}module.exports=function(){function e(){t(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(t){var n={data:t,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(t){if(0===this.length)return"";for(var n=this.head,e=""+n.data;n=n.next;)e+=t+n.data;return e},e.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e=n.allocUnsafe(t>>>0),h=this.head,a=0;h;)i(h.data,e,a),a+=h.data.length,h=h.next;return e},e}(),e&&e.inspect&&e.inspect.custom&&(module.exports.prototype[e.inspect.custom]=function(){var t=e.inspect({length:this.length});return this.constructor.name+" "+t});
},{"safe-buffer":"YVbn","util":"qzqc"}],"vwfH":[function(require,module,exports) {
"use strict";var t=require("process-nextick-args");function e(e,a){var r=this,s=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return s||d?(a?a(e):!e||this._writableState&&this._writableState.errorEmitted||t.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!a&&e?(t.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):a&&a(e)}),this)}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(t,e){t.emit("error",e)}module.exports={destroy:e,undestroy:a};
},{"process-nextick-args":"mR7C"}],"zij1":[function(require,module,exports) {
var global = arguments[3];
var r=arguments[3];function t(r,t){if(e("noDeprecation"))return r;var n=!1;return function(){if(!n){if(e("throwDeprecation"))throw new Error(t);e("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return r.apply(this,arguments)}}function e(t){try{if(!r.localStorage)return!1}catch(n){return!1}var e=r.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}module.exports=t;
},{}],"qZzZ":[function(require,module,exports) {
var process = require("process");

var global = arguments[3];
var e=require("process"),t=arguments[3],n=require("process-nextick-args");function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){W(t,e)}}module.exports=g;var o,s=n.nextTick;g.WritableState=y;var f=Object.create(require("core-util-is"));f.inherits=require("inherits");var u={deprecate:require("util-deprecate")},a=require("./internal/streams/stream"),c=require("safe-buffer").Buffer,l=t.Uint8Array||function(){};function d(e){return c.from(e)}function h(e){return c.isBuffer(e)||e instanceof l}var b,p=require("./internal/streams/destroy");function w(){}function y(e,t){o=o||require("./_stream_duplex"),e=e||{};var n=t instanceof o;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,s=e.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(s||0===s)?s:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){S(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function g(e){if(o=o||require("./_stream_duplex"),!(b.call(g,this)||this instanceof o))return new g(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function k(e,t){var r=new Error("write after end");e.emit("error",r),n.nextTick(t,r)}function v(e,t,r,i){var o=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),n.nextTick(i,s),o=!1),o}function q(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n)),t}function _(e,t,n,r,i,o){if(!n){var s=q(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var f=t.objectMode?1:r.length;t.length+=f;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,f,r,i,o);return u}function m(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function R(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),T(e,t))}function x(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function S(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(x(n),t)R(e,n,r,t,i);else{var o=E(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||B(e,n),r?s(M,e,n,o,i):M(e,n,o,i)}}function M(e,t,n,r){n||j(e,t),t.pendingcb--,r(),T(e,t)}function j(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function B(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var f=0,u=!0;n;)o[f]=n,n.isBuf||(u=!1),n=n.next,f+=1;o.allBuffers=u,m(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var a=n.chunk,c=n.encoding,l=n.callback;if(m(e,t,!1,t.objectMode?1:a.length,a,c,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)})}function P(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(C,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function T(e,t){var n=E(t);return n&&(P(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function F(e,t,r){t.ending=!0,T(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function W(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}f.inherits(g,a),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!b.call(this,e)||this===g&&(e&&e._writableState instanceof y)}})):b=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&h(e);return o&&!c.isBuffer(e)&&(e=d(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=w),r.ended?k(this,n):(o||v(this,r,e,n))&&(r.pendingcb++,i=_(this,r,o,e,t,n)),i},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||B(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||F(this,r,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=p.destroy,g.prototype._undestroy=p.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)};
},{"process-nextick-args":"mR7C","core-util-is":"Z7VQ","inherits":"eUdw","util-deprecate":"zij1","./internal/streams/stream":"T0pd","safe-buffer":"YVbn","./internal/streams/destroy":"vwfH","./_stream_duplex":"DrZt","process":"fArb"}],"DrZt":[function(require,module,exports) {
"use strict";var e=require("process-nextick-args"),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=l;var r=Object.create(require("core-util-is"));r.inherits=require("inherits");var i=require("./_stream_readable"),a=require("./_stream_writable");r.inherits(l,i);for(var o=t(a.prototype),s=0;s<o.length;s++){var n=o[s];l.prototype[n]||(l.prototype[n]=a.prototype[n])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||e.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(t,r){this.push(null),this.end(),e.nextTick(r,t)};
},{"process-nextick-args":"mR7C","core-util-is":"Z7VQ","inherits":"eUdw","./_stream_readable":"Ytdx","./_stream_writable":"qZzZ"}],"UFbV":[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(i){var a=s(i);if("string"!=typeof a&&(t.isEncoding===e||!e(i)))throw new Error("Unknown encoding: "+i);return a||i}function a(e){var s;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=f,s=4;break;case"utf8":this.fillLast=l,s=4;break;case"base64":this.text=d,this.end=g,s=3;break;default:return this.write=N,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(s)}function r(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function n(t,e,s){var i=e.length-1;if(i<s)return 0;var a=r(e[i]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(t.lastNeed=a-2),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function h(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function l(t){var e=this.lastTotal-this.lastNeed,s=h(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var s=n(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function o(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function c(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function d(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function N(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}exports.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},a.prototype.end=o,a.prototype.text=u,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};
},{"safe-buffer":"YVbn"}],"Ytdx":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),n=require("process-nextick-args");module.exports=_;var r,i=require("isarray");_.ReadableState=w;var a=require("events").EventEmitter,d=function(e,t){return e.listeners(t).length},o=require("./internal/streams/stream"),s=require("safe-buffer").Buffer,u=e.Uint8Array||function(){};function l(e){return s.from(e)}function h(e){return s.isBuffer(e)||e instanceof u}var p=Object.create(require("core-util-is"));p.inherits=require("inherits");var f=require("util"),c=void 0;c=f&&f.debuglog?f.debuglog("stream"):function(){};var g,b=require("./internal/streams/BufferList"),m=require("./internal/streams/destroy");p.inherits(_,o);var v=["error","close","destroy","pause","resume"];function y(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function w(e,t){e=e||{};var n=t instanceof(r=r||require("./_stream_duplex"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:d,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=require("string_decoder/").StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function _(e){if(r=r||require("./_stream_duplex"),!(this instanceof _))return new _(e);this._readableState=new w(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function M(e,t,n,r,i){var a,d=e._readableState;null===t?(d.reading=!1,x(e,d)):(i||(a=k(d,t)),a?e.emit("error",a):d.objectMode||t&&t.length>0?("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=l(t)),r?d.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):S(e,d,t,!0):d.ended?e.emit("error",new Error("stream.push() after EOF")):(d.reading=!1,d.decoder&&!n?(t=d.decoder.write(t),d.objectMode||0!==t.length?S(e,d,t,!1):C(e,d)):S(e,d,t,!1))):r||(d.reading=!1));return j(d)}function S(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&q(e)),C(e,t)}function k(e,t){var n;return h(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function j(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),M(this,e,t,!1,n)},_.prototype.unshift=function(e){return M(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return g||(g=require("string_decoder/").StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this};var R=8388608;function E(e){return e>=R?e=R:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function L(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=E(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,q(e)}}function q(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(W,e):W(e))}function W(e){c("emit readable"),e.emit("readable"),B(e)}function C(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(D,e,t))}function D(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(c("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function O(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&d(e,"data")&&(t.flowing=!0,B(e))}}function T(e){c("readable nexttick read 0"),e.read(0)}function U(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(P,e,t))}function P(e,t){t.reading||(c("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function H(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=I(e,t.buffer,t.decoder),n);var n}function I(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?A(e,t):F(e,t),r}function A(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var a=n.data,d=e>a.length?a.length:e;if(d===a.length?i+=a:i+=a.slice(0,e),0===(e-=d)){d===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(d));break}++r}return t.length-=r,i}function F(e,t){var n=s.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,d=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,d),0===(e-=d)){d===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(d));break}++i}return t.length-=i,n}function z(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(G,t,e))}function G(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function J(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):q(this),null;if(0===(e=L(e,t))&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=L(n,t))),null===(r=e>0?H(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,r){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,c("pipe count=%d opts=%j",a.pipesCount,r);var o=(!r||!1!==r.end)&&e!==t.stdout&&e!==t.stderr?u:v;function s(t,n){c("onunpipe"),t===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",b),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",g),e.removeListener("unpipe",s),i.removeListener("end",u),i.removeListener("end",v),i.removeListener("data",f),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}a.endEmitted?n.nextTick(o):i.once("end",o),e.on("unpipe",s);var l=O(i);e.on("drain",l);var h=!1;var p=!1;function f(t){c("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==J(a.pipes,e))&&!h&&(c("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,p=!0),i.pause())}function g(t){c("onerror",t),v(),e.removeListener("error",g),0===d(e,"error")&&e.emit("error",t)}function b(){e.removeListener("finish",m),v()}function m(){c("onfinish"),e.removeListener("close",b),v()}function v(){c("unpipe"),i.unpipe(e)}return i.on("data",f),y(e,"error",g),e.once("close",b),e.once("finish",m),e.emit("pipe",i),a.flowing||(c("pipe resume"),i.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var d=J(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},_.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&q(this):n.nextTick(T,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!0,U(this,e)),this},_.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<v.length;a++)e.on(v[a],this.emit.bind(this,v[a]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=H;
},{"process-nextick-args":"mR7C","isarray":"J4KR","events":"HbFW","./internal/streams/stream":"T0pd","safe-buffer":"YVbn","core-util-is":"Z7VQ","inherits":"eUdw","util":"qzqc","./internal/streams/BufferList":"CCsT","./internal/streams/destroy":"vwfH","./_stream_duplex":"DrZt","string_decoder/":"UFbV","process":"fArb"}],"j8Vu":[function(require,module,exports) {
"use strict";module.exports=n;var t=require("./_stream_duplex"),r=Object.create(require("core-util-is"));function e(t,r){var e=this._transformState;e.transforming=!1;var n=e.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));e.writechunk=null,e.writecb=null,null!=r&&this.push(r),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function n(r){if(!(this instanceof n))return new n(r);t.call(this,r),this._transformState={afterTransform:e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",i)}function i(){var t=this;"function"==typeof this._flush?this._flush(function(r,e){a(t,r,e)}):a(this,null,null)}function a(t,r,e){if(r)return t.emit("error",r);if(null!=e&&t.push(e),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=require("inherits"),r.inherits(n,t),n.prototype.push=function(r,e){return this._transformState.needTransform=!1,t.prototype.push.call(this,r,e)},n.prototype._transform=function(t,r,e){throw new Error("_transform() is not implemented")},n.prototype._write=function(t,r,e){var n=this._transformState;if(n.writecb=e,n.writechunk=t,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},n.prototype._read=function(t){var r=this._transformState;null!==r.writechunk&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0},n.prototype._destroy=function(r,e){var n=this;t.prototype._destroy.call(this,r,function(t){e(t),n.emit("close")})};
},{"./_stream_duplex":"DrZt","core-util-is":"Z7VQ","inherits":"eUdw"}],"M3u3":[function(require,module,exports) {
"use strict";module.exports=t;var r=require("./_stream_transform"),e=Object.create(require("core-util-is"));function t(e){if(!(this instanceof t))return new t(e);r.call(this,e)}e.inherits=require("inherits"),e.inherits(t,r),t.prototype._transform=function(r,e,t){t(null,r)};
},{"./_stream_transform":"j8Vu","core-util-is":"Z7VQ","inherits":"eUdw"}],"Q762":[function(require,module,exports) {
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js");
},{"./lib/_stream_readable.js":"Ytdx","./lib/_stream_writable.js":"qZzZ","./lib/_stream_duplex.js":"DrZt","./lib/_stream_transform.js":"j8Vu","./lib/_stream_passthrough.js":"M3u3"}],"wuaY":[function(require,module,exports) {
module.exports=require("./lib/_stream_writable.js");
},{"./lib/_stream_writable.js":"qZzZ"}],"f10J":[function(require,module,exports) {
module.exports=require("./lib/_stream_duplex.js");
},{"./lib/_stream_duplex.js":"DrZt"}],"FOIU":[function(require,module,exports) {
module.exports=require("./readable").Transform;
},{"./readable":"Q762"}],"MJLp":[function(require,module,exports) {
module.exports=require("./readable").PassThrough;
},{"./readable":"Q762"}],"ugVY":[function(require,module,exports) {
module.exports=n;var e=require("events").EventEmitter,r=require("inherits");function n(){e.call(this)}r(n,e),n.Readable=require("readable-stream/readable.js"),n.Writable=require("readable-stream/writable.js"),n.Duplex=require("readable-stream/duplex.js"),n.Transform=require("readable-stream/transform.js"),n.PassThrough=require("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(r,n){var o=this;function t(e){r.writable&&!1===r.write(e)&&o.pause&&o.pause()}function s(){o.readable&&o.resume&&o.resume()}o.on("data",t),r.on("drain",s),r._isStdio||n&&!1===n.end||(o.on("end",a),o.on("close",u));var i=!1;function a(){i||(i=!0,r.end())}function u(){i||(i=!0,"function"==typeof r.destroy&&r.destroy())}function d(r){if(l(),0===e.listenerCount(this,"error"))throw r}function l(){o.removeListener("data",t),r.removeListener("drain",s),o.removeListener("end",a),o.removeListener("close",u),o.removeListener("error",d),r.removeListener("error",d),o.removeListener("end",l),o.removeListener("close",l),r.removeListener("close",l)}return o.on("error",d),r.on("error",d),o.on("end",l),o.on("close",l),r.on("close",l),r.emit("pipe",o),r};
},{"events":"HbFW","inherits":"eUdw","readable-stream/readable.js":"Q762","readable-stream/writable.js":"wuaY","readable-stream/duplex.js":"f10J","readable-stream/transform.js":"FOIU","readable-stream/passthrough.js":"MJLp"}],"dtEt":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;!function(e){e.parser=function(t,e){return new a(t,e)},e.SAXParser=a,e.SAXStream=n,e.createStream=function(t,e){return new n(t,e)},e.MAX_BUFFER_LENGTH=65536;var i,s=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(t,i){if(!(this instanceof a))return new a(t,i);!function(t){for(var e=0,i=s.length;e<i;e++)t[s[e]]=""}(this),this.q=this.c="",this.bufferCheckPosition=e.MAX_BUFFER_LENGTH,this.opt=i||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!t,this.noscript=!(!t&&!this.opt.noscript),this.state=S.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(N)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),v(this,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),a.prototype={end:function(){U(this)},write:function(t){if(this.error)throw this.error;if(this.closed)return L(this,"Cannot write after close. Assign an onready handler.");if(null===t)return U(this);"object"==typeof t&&(t=t.toString());var i=0,a="";for(;a=X(t,i++),this.c=a,a;)switch(this.trackPosition&&(this.position++,"\n"===a?(this.line++,this.column=0):this.column++),this.state){case S.BEGIN:if(this.state=S.BEGIN_WHITESPACE,"\ufeff"===a)continue;q(this,a);continue;case S.BEGIN_WHITESPACE:q(this,a);continue;case S.TEXT:if(this.sawRoot&&!this.closedRoot){for(var r=i-1;a&&"<"!==a&&"&"!==a;)(a=X(t,i++))&&this.trackPosition&&(this.position++,"\n"===a?(this.line++,this.column=0):this.column++);this.textNode+=t.substring(r,i-1)}"<"!==a||this.sawRoot&&this.closedRoot&&!this.strict?(!D(o,a)||this.sawRoot&&!this.closedRoot||B(this,"Text data outside of root node."),"&"===a?this.state=S.TEXT_ENTITY:this.textNode+=a):(this.state=S.OPEN_WAKA,this.startTagPosition=this.position);continue;case S.SCRIPT:"<"===a?this.state=S.SCRIPT_ENDING:this.script+=a;continue;case S.SCRIPT_ENDING:"/"===a?this.state=S.CLOSE_TAG:(this.script+="<"+a,this.state=S.SCRIPT);continue;case S.OPEN_WAKA:if("!"===a)this.state=S.SGML_DECL,this.sgmlDecl="";else if(I(o,a));else if(I(f,a))this.state=S.OPEN_TAG,this.tagName=a;else if("/"===a)this.state=S.CLOSE_TAG,this.tagName="";else if("?"===a)this.state=S.PROC_INST,this.procInstName=this.procInstBody="";else{if(B(this,"Unencoded <"),this.startTagPosition+1<this.position){var n=this.position-this.startTagPosition;a=new Array(n).join(" ")+a}this.textNode+="<"+a,this.state=S.TEXT}continue;case S.SGML_DECL:(this.sgmlDecl+a).toUpperCase()===T?(R(this,"onopencdata"),this.state=S.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+a==="--"?(this.state=S.COMMENT,this.comment="",this.sgmlDecl=""):(this.sgmlDecl+a).toUpperCase()===E?(this.state=S.DOCTYPE,(this.doctype||this.sawRoot)&&B(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===a?(R(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=S.TEXT):I(h,a)?(this.state=S.SGML_DECL_QUOTED,this.sgmlDecl+=a):this.sgmlDecl+=a;continue;case S.SGML_DECL_QUOTED:a===this.q&&(this.state=S.SGML_DECL,this.q=""),this.sgmlDecl+=a;continue;case S.DOCTYPE:">"===a?(this.state=S.TEXT,R(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=a,"["===a?this.state=S.DOCTYPE_DTD:I(h,a)&&(this.state=S.DOCTYPE_QUOTED,this.q=a));continue;case S.DOCTYPE_QUOTED:this.doctype+=a,a===this.q&&(this.q="",this.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:this.doctype+=a,"]"===a?this.state=S.DOCTYPE:I(h,a)&&(this.state=S.DOCTYPE_DTD_QUOTED,this.q=a);continue;case S.DOCTYPE_DTD_QUOTED:this.doctype+=a,a===this.q&&(this.state=S.DOCTYPE_DTD,this.q="");continue;case S.COMMENT:"-"===a?this.state=S.COMMENT_ENDING:this.comment+=a;continue;case S.COMMENT_ENDING:"-"===a?(this.state=S.COMMENT_ENDED,this.comment=P(this.opt,this.comment),this.comment&&R(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+a,this.state=S.COMMENT);continue;case S.COMMENT_ENDED:">"!==a?(B(this,"Malformed comment"),this.comment+="--"+a,this.state=S.COMMENT):this.state=S.TEXT;continue;case S.CDATA:"]"===a?this.state=S.CDATA_ENDING:this.cdata+=a;continue;case S.CDATA_ENDING:"]"===a?this.state=S.CDATA_ENDING_2:(this.cdata+="]"+a,this.state=S.CDATA);continue;case S.CDATA_ENDING_2:">"===a?(this.cdata&&R(this,"oncdata",this.cdata),R(this,"onclosecdata"),this.cdata="",this.state=S.TEXT):"]"===a?this.cdata+="]":(this.cdata+="]]"+a,this.state=S.CDATA);continue;case S.PROC_INST:"?"===a?this.state=S.PROC_INST_ENDING:I(o,a)?this.state=S.PROC_INST_BODY:this.procInstName+=a;continue;case S.PROC_INST_BODY:if(!this.procInstBody&&I(o,a))continue;"?"===a?this.state=S.PROC_INST_ENDING:this.procInstBody+=a;continue;case S.PROC_INST_ENDING:">"===a?(R(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=S.TEXT):(this.procInstBody+="?"+a,this.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:I(_,a)?this.tagName+=a:(x(this),">"===a?M(this):"/"===a?this.state=S.OPEN_TAG_SLASH:(D(o,a)&&B(this,"Invalid character in tag name"),this.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===a?(M(this,!0),V(this)):(B(this,"Forward-slash in opening tag not followed by >"),this.state=S.ATTRIB);continue;case S.ATTRIB:if(I(o,a))continue;">"===a?M(this):"/"===a?this.state=S.OPEN_TAG_SLASH:I(f,a)?(this.attribName=a,this.attribValue="",this.state=S.ATTRIB_NAME):B(this,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===a?this.state=S.ATTRIB_VALUE:">"===a?(B(this,"Attribute without value"),this.attribValue=this.attribName,G(this),M(this)):I(o,a)?this.state=S.ATTRIB_NAME_SAW_WHITE:I(_,a)?this.attribName+=a:B(this,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===a)this.state=S.ATTRIB_VALUE;else{if(I(o,a))continue;B(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",R(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===a?M(this):I(f,a)?(this.attribName=a,this.state=S.ATTRIB_NAME):(B(this,"Invalid attribute name"),this.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(I(o,a))continue;I(h,a)?(this.q=a,this.state=S.ATTRIB_VALUE_QUOTED):(B(this,"Unquoted attribute value"),this.state=S.ATTRIB_VALUE_UNQUOTED,this.attribValue=a);continue;case S.ATTRIB_VALUE_QUOTED:if(a!==this.q){"&"===a?this.state=S.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=a;continue}G(this),this.q="",this.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:I(o,a)?this.state=S.ATTRIB:">"===a?M(this):"/"===a?this.state=S.OPEN_TAG_SLASH:I(f,a)?(B(this,"No whitespace between attributes"),this.attribName=a,this.attribValue="",this.state=S.ATTRIB_NAME):B(this,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(D(l,a)){"&"===a?this.state=S.ATTRIB_VALUE_ENTITY_U:this.attribValue+=a;continue}G(this),">"===a?M(this):this.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(this.tagName)">"===a?V(this):I(_,a)?this.tagName+=a:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=S.SCRIPT):(D(o,a)&&B(this,"Invalid tagname in closing tag"),this.state=S.CLOSE_TAG_SAW_WHITE);else{if(I(o,a))continue;D(f,a)?this.script?(this.script+="</"+a,this.state=S.SCRIPT):B(this,"Invalid tagname in closing tag."):this.tagName=a}continue;case S.CLOSE_TAG_SAW_WHITE:if(I(o,a))continue;">"===a?V(this):B(this,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var c,u;switch(this.state){case S.TEXT_ENTITY:c=S.TEXT,u="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:c=S.ATTRIB_VALUE_QUOTED,u="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:c=S.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===a?(this[u]+=Y(this),this.entity="",this.state=c):I(this.entity.length?g:d,a)?this.entity+=a:(B(this,"Invalid character in entity name"),this[u]+="&"+this.entity+a,this.entity="",this.state=c);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(t){for(var i=Math.max(e.MAX_BUFFER_LENGTH,10),a=0,r=0,n=s.length;r<n;r++){var o=t[s[r]].length;if(o>i)switch(s[r]){case"textNode":y(t);break;case"cdata":R(t,"oncdata",t.cdata),t.cdata="";break;case"script":R(t,"onscript",t.script),t.script="";break;default:L(t,"Max buffer length exceeded: "+s[r])}a=Math.max(a,o)}var c=e.MAX_BUFFER_LENGTH-a;t.bufferCheckPosition=c+t.position}(this);return this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;y(t=this),""!==t.cdata&&(R(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(R(t,"onscript",t.script),t.script="")}};try{i=require("stream").Stream}catch(j){i=function(){}}var r=e.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});function n(t,e){if(!(this instanceof n))return new n(t,e);i.apply(this),this._parser=new a(t,e),this.writable=!0,this.readable=!0;var s=this;this._parser.onend=function(){s.emit("end")},this._parser.onerror=function(t){s.emit("error",t),s._parser.error=null},this._decoder=null,r.forEach(function(t){Object.defineProperty(s,"on"+t,{get:function(){return s._parser["on"+t]},set:function(e){if(!e)return s.removeAllListeners(t),s._parser["on"+t]=e,e;s.on(t,e)},enumerable:!0,configurable:!1})})}n.prototype=Object.create(i.prototype,{constructor:{value:n}}),n.prototype.write=function(e){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(e)){if(!this._decoder){var i=require("string_decoder").StringDecoder;this._decoder=new i("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},n.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},n.prototype.on=function(t,e){var s=this;return s._parser["on"+t]||-1===r.indexOf(t)||(s._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),s.emit.apply(s,e)}),i.prototype.on.call(s,t,e)};var o="\r\n\t ",c="0124356789",u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",h="'\"",l=o+">",T="[CDATA[",E="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",N={xml:p,xmlns:m};o=A(o),c=A(c),u=A(u);var f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function A(t){return t.split("").reduce(function(t,e){return t[e]=!0,t},{})}function I(t,e){return function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}(t)?!!e.match(t):t[e]}function D(t,e){return!I(t,e)}h=A(h),l=A(l);var b,C,O,S=0;for(var F in e.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var i=e.ENTITIES[t],s="number"==typeof i?String.fromCharCode(i):i;e.ENTITIES[t]=s}),e.STATE)e.STATE[e.STATE[F]]=F;function v(t,e,i){t[e]&&t[e](i)}function R(t,e,i){t.textNode&&y(t),v(t,e,i)}function y(t){t.textNode=P(t.opt,t.textNode),t.textNode&&v(t,"ontext",t.textNode),t.textNode=""}function P(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function L(t,e){return y(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,v(t,"onerror",e),t}function U(t){return t.sawRoot&&!t.closedRoot&&B(t,"Unclosed root tag"),t.state!==S.BEGIN&&t.state!==S.BEGIN_WHITESPACE&&t.state!==S.TEXT&&L(t,"Unexpected end"),y(t),t.c="",t.closed=!0,v(t,"onend"),a.call(t,t.strict,t.opt),t}function B(t,e){if("object"!=typeof t||!(t instanceof a))throw new Error("bad call to strictFail");t.strict&&L(t,e)}function x(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,i=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(i.ns=e.ns),t.attribList.length=0,R(t,"onopentagstart",i)}function w(t,e){var i=t.indexOf(":")<0?["",t]:t.split(":"),s=i[0],a=i[1];return e&&"xmlns"===t&&(s="xmlns",a=""),{prefix:s,local:a}}function G(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=w(t.attribName,!0),i=e.prefix,s=e.local;if("xmlns"===i)if("xml"===s&&t.attribValue!==p)B(t,"xml: prefix must be bound to "+p+"\nActual: "+t.attribValue);else if("xmlns"===s&&t.attribValue!==m)B(t,"xmlns: prefix must be bound to "+m+"\nActual: "+t.attribValue);else{var a=t.tag,r=t.tags[t.tags.length-1]||t;a.ns===r.ns&&(a.ns=Object.create(r.ns)),a.ns[s]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,R(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function M(t,e){if(t.opt.xmlns){var i=t.tag,s=w(t.tagName);i.prefix=s.prefix,i.local=s.local,i.uri=i.ns[s.prefix]||"",i.prefix&&!i.uri&&(B(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),i.uri=s.prefix);var a=t.tags[t.tags.length-1]||t;i.ns&&a.ns!==i.ns&&Object.keys(i.ns).forEach(function(e){R(t,"onopennamespace",{prefix:e,uri:i.ns[e]})});for(var r=0,n=t.attribList.length;r<n;r++){var o=t.attribList[r],c=o[0],u=o[1],h=w(c,!0),l=h.prefix,T=h.local,E=""===l?"":i.ns[l]||"",p={name:c,value:u,prefix:l,local:T,uri:E};l&&"xmlns"!==l&&!E&&(B(t,"Unbound namespace prefix: "+JSON.stringify(l)),p.uri=l),t.tag.attributes[c]=p,R(t,"onattribute",p)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),R(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=S.TEXT:t.state=S.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function V(t){if(!t.tagName)return B(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=S.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=S.SCRIPT);R(t,"onscript",t.script),t.script=""}var e=t.tags.length,i=t.tagName;t.strict||(i=i[t.looseCase]());for(var s=i;e--;){if(t.tags[e].name===s)break;B(t,"Unexpected close tag")}if(e<0)return B(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=S.TEXT);t.tagName=i;for(var a=t.tags.length;a-- >e;){var r=t.tag=t.tags.pop();t.tagName=t.tag.name,R(t,"onclosetag",t.tagName);var n={};for(var o in r.ns)n[o]=r.ns[o];var c=t.tags[t.tags.length-1]||t;t.opt.xmlns&&r.ns!==c.ns&&Object.keys(r.ns).forEach(function(e){var i=r.ns[e];R(t,"onclosenamespace",{prefix:e,uri:i})})}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=S.TEXT}function Y(t){var e,i=t.entity,s=i.toLowerCase(),a="";return t.ENTITIES[i]?t.ENTITIES[i]:t.ENTITIES[s]?t.ENTITIES[s]:("#"===(i=s).charAt(0)&&("x"===i.charAt(1)?(i=i.slice(2),a=(e=parseInt(i,16)).toString(16)):(i=i.slice(1),a=(e=parseInt(i,10)).toString(10))),i=i.replace(/^0+/,""),a.toLowerCase()!==i?(B(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function q(t,e){"<"===e?(t.state=S.OPEN_WAKA,t.startTagPosition=t.position):D(o,e)&&(B(t,"Non-whitespace before first tag."),t.textNode=e,t.state=S.TEXT)}function X(t,e){var i="";return e<t.length&&(i=t.charAt(e)),i}S=e.STATE,String.fromCodePoint||(b=String.fromCharCode,C=Math.floor,O=function(){var t,e,i=[],s=-1,a=arguments.length;if(!a)return"";for(var r="";++s<a;){var n=Number(arguments[s]);if(!isFinite(n)||n<0||n>1114111||C(n)!==n)throw RangeError("Invalid code point: "+n);n<=65535?i.push(n):(t=55296+((n-=65536)>>10),e=n%1024+56320,i.push(t,e)),(s+1===a||i.length>16384)&&(r+=b.apply(null,i),i.length=0)}return r},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:O,configurable:!0,writable:!0}):String.fromCodePoint=O)}("undefined"==typeof exports?this.sax={}:exports);
},{"stream":"ugVY","string_decoder":"UFbV","buffer":"XxBq"}],"WFlw":[function(require,module,exports) {
!function(t,e,n,i,o){function s(t,e,n,i){var o=i&&"seq"===i.timeContainer,l=0;i&&(l=o&&n?n.end:i.begin),e.begin=e.explicit_begin?e.explicit_begin+l:l;var r=e.begin,a=null;for(var u in e.sets)s(t,e.sets[u],a,e),r="seq"===e.timeContainer?e.sets[u].end:Math.max(r,e.sets[u].end),a=e.sets[u];if("contents"in e)for(var c in e.contents)s(t,e.contents[c],a,e),r="seq"===e.timeContainer?e.contents[c].end:Math.max(r,e.contents[c].end),a=e.contents[c];else r=o?e.begin:Number.POSITIVE_INFINITY;null!==e.explicit_end&&null!==e.explicit_dur?e.end=Math.min(e.begin+e.explicit_dur,l+e.explicit_end):null===e.explicit_end&&null!==e.explicit_dur?e.end=e.begin+e.explicit_dur:null!==e.explicit_end&&null===e.explicit_dur?e.end=l+e.explicit_end:e.end=r,delete e.explicit_begin,delete e.explicit_dur,delete e.explicit_end,t._registerEvent(e)}function l(t){this.node=t}function r(){this.events=[],this.head=new a,this.body=null}function a(){this.styling=new u,this.layout=new d}function u(){this.styles={},this.initials={}}function c(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function f(){this.styleAttrs=null}function d(){this.regions={}}function p(t,e){h.call(this,"image"),this.src=t,this.type=e}function h(t){this.kind=t}function m(t){this.id=t}function y(t){this.regionID=t}function v(t){this.styleAttrs=t}function g(t){this.sets=t}function b(t){this.contents=t}function x(t,e,n){this.explicit_begin=t,this.explicit_end=e,this.explicit_dur=n}function N(){h.call(this,"body")}function F(){h.call(this,"div")}function _(){h.call(this,"p")}function w(){h.call(this,"span")}function I(){h.call(this,"span")}function R(){h.call(this,"br")}function A(){}function C(){}function M(t){return t&&"xml:id"in t.attributes&&t.attributes["xml:id"].value||null}function T(t){return t&&"style"in t.attributes?t.attributes.style.value.split(" "):[]}function q(t,e){var n={};if(null!==t)for(var o in t.attributes){var s=t.attributes[o].uri+" "+t.attributes[o].local,l=i.byQName[s];if(void 0!==l){var r=l.parse(t.attributes[o].value);null!==r?(n[s]=r,l===i.byName.zIndex&&S(e,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):D(e,"Cannot parse styling attribute "+s+" --\x3e "+t.attributes[o].value)}}return n}function P(t,e,n){for(var i in t.attributes)if(t.attributes[i].uri===e&&t.attributes[i].local===n)return t.attributes[i].value;return null}function k(t,e,n){var i,o=null;return null!==(i=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==e&&(o=parseFloat(i[1])/e):null!==(i=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==t&&(o=parseFloat(i[1])/t):null!==(i=/^(\d+(?:\.\d+)?)ms$/.exec(n))?o=parseFloat(i[1])/1e3:null!==(i=/^(\d+(?:\.\d+)?)s$/.exec(n))?o=parseFloat(i[1]):null!==(i=/^(\d+(?:\.\d+)?)h$/.exec(n))?o=3600*parseFloat(i[1]):null!==(i=/^(\d+(?:\.\d+)?)m$/.exec(n))?o=60*parseFloat(i[1]):null!==(i=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?o=3600*parseInt(i[1])+60*parseInt(i[2])+parseFloat(i[3]):null!==(i=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==e&&(o=3600*parseInt(i[1])+60*parseInt(i[2])+parseInt(i[3])+(null===i[4]?0:parseInt(i[4])/e)),o}function L(t,e,n){for(;e.styleRefs.length>0;){var i=e.styleRefs.pop();i in t.styles?(L(t,t.styles[i],n),E(t.styles[i].styleAttrs,e.styleAttrs)):D(n,"Non-existant style id referenced")}}function $(t,e,n,i){for(var o=e.length-1;o>=0;o--){var s=e[o];s in t.styles?E(t.styles[s].styleAttrs,n):D(i,"Non-existant style id referenced")}}function E(t,e){for(var n in t)n in e||(e[n]=t[n])}function S(t,e){if(t&&t.warn&&t.warn(e))throw e}function D(t,e){if(t&&t.error&&t.error(e))throw e}function O(t,e){throw t&&t.fatal&&t.fatal(e),e}function U(t,e){for(var n,i=0,o=t.length-1;i<=o;){var s=t[n=Math.floor((i+o)/2)];if(s<e)i=n+1;else{if(!(s>e))return{found:!0,index:n};o=n-1}}return{found:!1,index:i}}t.fromXML=function(t,o,h){var m=e.parser(!0,{xmlns:!0}),y=[],v=[],g=[],b=0,x=null;m.onclosetag=function(t){if(y[0]instanceof u)for(var e in y[0].styles)L(y[0],y[0].styles[e],o);else if(y[0]instanceof _||y[0]instanceof w){if(y[0].contents.length>1){var i,s=[y[0].contents[0]];for(i=1;i<y[0].contents.length;i++)y[0].contents[i]instanceof I&&s[s.length-1]instanceof I?s[s.length-1].text+=y[0].contents[i].text:s.push(y[0].contents[i]);y[0].contents=s}y[0]instanceof w&&1===y[0].contents.length&&y[0].contents[0]instanceof I&&(y[0].text=y[0].contents[0].text,delete y[0].contents)}else y[0]instanceof l&&(y[0].node.uri===n.ns_tt&&"metadata"===y[0].node.local?b--:b>0&&h&&"onCloseTag"in h&&h.onCloseTag());g.shift(),v.shift(),y.shift()},m.ontext=function(t){if(void 0===y[0]);else if(y[0]instanceof w||y[0]instanceof _){if(y[0]instanceof w){var e=y[0].styleAttrs[i.byName.ruby.qname];if("container"===e||"textContainer"===e||"baseContainer"===e)return}var n=new I;n.initFromText(x,y[0],t,g[0],o),y[0].contents.push(n)}else y[0]instanceof l&&b>0&&h&&"onText"in h&&h.onText(t)},m.onopentag=function(t){var e=t.attributes["xml:space"];e?g.unshift(e.value):0===g.length?g.unshift("default"):g.unshift(g[0]);var s=t.attributes["xml:lang"];if(s?v.unshift(s.value):0===v.length?v.unshift(""):v.unshift(v[0]),t.uri===n.ns_tt)if("tt"===t.local)null!==x&&O(o,"Two <tt> elements at ("+this.line+","+this.column+")"),(x=new r).initFromNode(t,o),y.unshift(x);else if("head"===t.local)y[0]instanceof r||O(o,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),y.unshift(x.head);else if("styling"===t.local)y[0]instanceof a||O(o,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),y.unshift(x.head.styling);else if("style"===t.local){var m;y[0]instanceof u?((m=new c).initFromNode(t,o),m.id?x.head.styling.styles[m.id]=m:D(o,"<style> element missing @id attribute"),y.unshift(m)):y[0]instanceof A?((m=new c).initFromNode(t,o),E(m.styleAttrs,y[0].styleAttrs),y.unshift(m)):O(o,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("initial"===t.local){var I;if(y[0]instanceof u){for(var M in(I=new f).initFromNode(t,o),I.styleAttrs)x.head.styling.initials[M]=I.styleAttrs[M];y.unshift(I)}else O(o,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if("layout"===t.local)y[0]instanceof a||O(o,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),y.unshift(x.head.layout);else if("region"===t.local){y[0]instanceof d||O(o,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var T=new A;T.initFromNode(x,t,o),!T.id||T.id in x.head.layout.regions?D(o,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):x.head.layout.regions[T.id]=T,y.unshift(T)}else if("body"===t.local){y[0]instanceof r||O(o,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==x.body&&O(o,"Second <body> element at "+this.line+","+this.column+")");var q=new N;q.initFromNode(x,t,o),x.body=q,y.unshift(q)}else if("div"===t.local){y[0]instanceof F||y[0]instanceof N||O(o,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var P=new F;P.initFromNode(x,y[0],t,o);var k=P.styleAttrs[i.byName.backgroundImage.qname];k&&(P.contents.push(new p(k)),delete P.styleAttrs[i.byName.backgroundImage.qname]),y[0].contents.push(P),y.unshift(P)}else if("image"===t.local){y[0]instanceof F||O(o,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var L=new p;L.initFromNode(x,y[0],t,o),y[0].contents.push(L),y.unshift(L)}else if("p"===t.local){y[0]instanceof F||O(o,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var $=new _;$.initFromNode(x,y[0],t,o),y[0].contents.push($),y.unshift($)}else if("span"===t.local){y[0]instanceof w||y[0]instanceof _||O(o,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var S=new w;S.initFromNode(x,y[0],t,g[0],o),y[0].contents.push(S),y.unshift(S)}else if("br"===t.local){y[0]instanceof w||y[0]instanceof _||O(o,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var U=new R;U.initFromNode(x,y[0],t,o),y[0].contents.push(U),y.unshift(U)}else if("set"===t.local){y[0]instanceof w||y[0]instanceof _||y[0]instanceof F||y[0]instanceof N||y[0]instanceof A||y[0]instanceof R||O(o,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var V=new C;V.initFromNode(x,y[0],t,o),y[0].sets.push(V),y.unshift(V)}else y.unshift(new l(t));else y.unshift(new l(t));if(y[0]instanceof l)if(t.uri===n.ns_tt&&"metadata"===t.local)b++;else if(b>0&&h&&"onOpenTag"in h){var Y=[];for(var z in t.attributes)Y[t.attributes[z].uri+" "+t.attributes[z].local]={uri:t.attributes[z].uri,local:t.attributes[z].local,value:t.attributes[z].value};h.onOpenTag(t.uri,t.local,Y)}},m.write(t).close(),delete x.head.styling.styles;var M=!1;for(var T in x.head.layout.regions){M=!0;break}if(!M){var q=A.prototype.createDefaultRegion();x.head.layout.regions[q.id]=q}for(var P in x.head.layout.regions)s(x,x.head.layout.regions[P],null,null);return x.body&&s(x,x.body,null,null),x.body&&function t(e){if(!("contents"in e))return;var n="styleAttrs"in e?e.styleAttrs[i.byName.ruby.qname]:null;var o="span"===e.kind&&("container"===n||"textContainer"===n||"baseContainer"===n);for(var s=e.contents.length-1;s>=0;s--)!o||"styleAttrs"in e.contents[s]&&i.byName.ruby.qname in e.contents[s].styleAttrs?t(e.contents[s]):delete e.contents[s]}(x.body),x},r.prototype.initFromNode=function(t,e){var i=function(t,e){var i=P(t,n.ns_ttp,"cellResolution"),o=15,s=32;if(null!==i){var l=/(\d+) (\d+)/.exec(i);null!==l?(s=parseInt(l[1]),o=parseInt(l[2])):S(e,"Malformed cellResolution value (using initial value instead)")}return{w:s,h:o}}(t,e);this.cellLength={h:new o.ComputedLength(0,1/i.h),w:new o.ComputedLength(1/i.w,0)};var s=function(t,e){var i,o=P(t,n.ns_ttp,"frameRate"),s=30;if(null!==o){null!==(i=/(\d+)/.exec(o))?s=parseInt(i[1]):S(e,"Malformed frame rate attribute (using initial value instead)")}var l=P(t,n.ns_ttp,"frameRateMultiplier"),r=1;if(null!==l){null!==(i=/(\d+) (\d+)/.exec(l))?r=parseInt(i[1])/parseInt(i[2]):S(e,"Malformed frame rate multiplier attribute (using initial value instead)")}var a=r*s,u=1,c=P(t,n.ns_ttp,"tickRate");if(null===c)null!==o&&(u=a);else{null!==(i=/(\d+)/.exec(c))?u=parseInt(i[1]):S(e,"Malformed tick rate attribute (using initial value instead)")}return{effectiveFrameRate:a,tickRate:u}}(t,e);this.effectiveFrameRate=s.effectiveFrameRate,this.tickRate=s.tickRate,this.aspectRatio=function(t,e){var i=P(t,n.ns_ittp,"aspectRatio");null===i&&(i=P(t,n.ns_ttp,"displayAspectRatio"));var o=null;if(null!==i){var s=/(\d+)\s+(\d+)/.exec(i);if(null!==s){var l=parseInt(s[1]),r=parseInt(s[2]);0!==l&&0!==r?o=l/r:D(e,"Illegal aspectRatio values (ignoring)")}else D(e,"Malformed aspectRatio attribute (ignoring)")}return o}(t,e);var l=P(t,n.ns_ttp,"timeBase");null!==l&&"media"!==l&&O(e,"Unsupported time base");var r=function(t,e){var i=P(t,n.ns_tts,"extent");if(null===i)return null;var s=i.split(" ");if(2!==s.length)return S(e,"Malformed extent (ignoring)"),null;var l=o.parseLength(s[0]),r=o.parseLength(s[1]);if(!r||!l)return S(e,"Malformed extent values (ignoring)"),null;return{h:r,w:l}}(t,e);null===r?this.pxLength={h:null,w:null}:("px"===r.h.unit&&"px"===r.w.unit||O(e,"Extent on TT must be in px or absent"),this.pxLength={h:new o.ComputedLength(0,1/r.h.value),w:new o.ComputedLength(1/r.w.value,0)}),this.dimensions={h:new o.ComputedLength(0,1),w:new o.ComputedLength(1,0)}},r.prototype._registerEvent=function(t){if(!(t.end<=t.begin)){var e=U(this.events,t.begin);if(e.found||this.events.splice(e.index,0,t.begin),t.end!==Number.POSITIVE_INFINITY){var n=U(this.events,t.end);n.found||this.events.splice(n.index,0,t.end)}}},r.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},r.prototype.getMediaTimeEvents=function(){return this.events},c.prototype.initFromNode=function(t,e){this.id=M(t),this.styleAttrs=q(t,e),this.styleRefs=T(t)},f.prototype.initFromNode=function(t,e){for(var i in this.styleAttrs={},t.attributes)if(t.attributes[i].uri===n.ns_itts||t.attributes[i].uri===n.ns_ebutts||t.attributes[i].uri===n.ns_tts){var o=t.attributes[i].uri+" "+t.attributes[i].local;this.styleAttrs[o]=t.attributes[i].value}},p.prototype.initFromNode=function(t,e,n,i){this.src="src"in n.attributes?n.attributes.src.value:null,this.src||D(i,"Invalid image@src attribute"),this.type="type"in n.attributes?n.attributes.type.value:null,this.type||D(i,"Invalid image@type attribute"),v.prototype.initFromNode.call(this,t,e,n,i),x.prototype.initFromNode.call(this,t,e,n,i),g.prototype.initFromNode.call(this,t,e,n,i),y.prototype.initFromNode.call(this,t,e,n,i)},m.prototype.initFromNode=function(t,e,n,i){this.id=M(n)},y.prototype.initFromNode=function(t,e,n,i){this.regionID=function(t){return t&&"region"in t.attributes?t.attributes.region.value:""}(n)},v.prototype.initFromNode=function(t,e,n,i){this.styleAttrs=q(n,i),null!==t.head&&null!==t.head.styling&&$(t.head.styling,T(n),this.styleAttrs,i)},g.prototype.initFromNode=function(t,e,n,i){this.sets=[]},b.prototype.initFromNode=function(t,e,n,i){this.contents=[]},x.prototype.initFromNode=function(t,e,n,i){var o=function(t,e,n,i){var o=null;n&&"begin"in n.attributes&&null===(o=k(t.tickRate,t.effectiveFrameRate,n.attributes.begin.value))&&S(i,"Malformed begin value "+n.attributes.begin.value+" (using 0)");var s=null;n&&"dur"in n.attributes&&null===(s=k(t.tickRate,t.effectiveFrameRate,n.attributes.dur.value))&&S(i,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var l=null;n&&"end"in n.attributes&&null===(l=k(t.tickRate,t.effectiveFrameRate,n.attributes.end.value))&&S(i,"Malformed end value (ignoring)");return{explicit_begin:o,explicit_end:l,explicit_dur:s}}(t,0,n,i);this.explicit_begin=o.explicit_begin,this.explicit_end=o.explicit_end,this.explicit_dur=o.explicit_dur,this.timeContainer=function(t,e){var n=t&&"timeContainer"in t.attributes?t.attributes.timeContainer.value:null;return n&&"par"!==n?"seq"===n?"seq":(D(e,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,i)},N.prototype.initFromNode=function(t,e,n){v.prototype.initFromNode.call(this,t,null,e,n),x.prototype.initFromNode.call(this,t,null,e,n),g.prototype.initFromNode.call(this,t,null,e,n),y.prototype.initFromNode.call(this,t,null,e,n),b.prototype.initFromNode.call(this,t,null,e,n)},F.prototype.initFromNode=function(t,e,n,i){v.prototype.initFromNode.call(this,t,e,n,i),x.prototype.initFromNode.call(this,t,e,n,i),g.prototype.initFromNode.call(this,t,e,n,i),y.prototype.initFromNode.call(this,t,e,n,i),b.prototype.initFromNode.call(this,t,e,n,i)},_.prototype.initFromNode=function(t,e,n,i){v.prototype.initFromNode.call(this,t,e,n,i),x.prototype.initFromNode.call(this,t,e,n,i),g.prototype.initFromNode.call(this,t,e,n,i),y.prototype.initFromNode.call(this,t,e,n,i),b.prototype.initFromNode.call(this,t,e,n,i)},w.prototype.initFromNode=function(t,e,n,i,o){v.prototype.initFromNode.call(this,t,e,n,o),x.prototype.initFromNode.call(this,t,e,n,o),g.prototype.initFromNode.call(this,t,e,n,o),y.prototype.initFromNode.call(this,t,e,n,o),b.prototype.initFromNode.call(this,t,e,n,o),this.space=i},I.prototype.initFromText=function(t,e,n,i,o){x.prototype.initFromNode.call(this,t,e,null,o),this.text=n,this.space=i},R.prototype.initFromNode=function(t,e,n,i){y.prototype.initFromNode.call(this,t,e,n,i),x.prototype.initFromNode.call(this,t,e,n,i)},A.prototype.createDefaultRegion=function(){var t=new A;return m.call(t,""),v.call(t,{}),g.call(t,[]),x.call(t,0,Number.POSITIVE_INFINITY,null),t},A.prototype.initFromNode=function(t,e,n){m.prototype.initFromNode.call(this,t,null,e,n),v.prototype.initFromNode.call(this,t,null,e,n),x.prototype.initFromNode.call(this,t,null,e,n),g.prototype.initFromNode.call(this,t,null,e,n),null!==t.head&&null!==t.head.styling&&$(t.head.styling,T(e),this.styleAttrs,n)},C.prototype.initFromNode=function(t,e,n,i){x.prototype.initFromNode.call(this,t,e,n,i);var o=q(n,i);for(var s in this.qname=null,this.value=null,o){if(this.qname){D(i,"More than one style specified on set");break}this.qname=s,this.value=o[s]}}}("undefined"==typeof exports?this.imscDoc={}:exports,"undefined"==typeof sax?require("sax"):sax,"undefined"==typeof imscNames?require("./names"):imscNames,"undefined"==typeof imscStyles?require("./styles"):imscStyles,"undefined"==typeof imscUtils?require("./utils"):imscUtils);
},{"sax":"dtEt","./names":"Ot2d","./styles":"dfLr","./utils":"YnF9"}],"kxoH":[function(require,module,exports) {
!function(t,e,n){function r(t,e,s){var d;if("region"===s.kind)(d=document.createElement("div")).style.position="absolute";else if("body"===s.kind)d=document.createElement("div");else if("div"===s.kind)d=document.createElement("div");else if("image"===s.kind){if(d=document.createElement("img"),null!==t.imgResolver&&null!==s.src){var p=t.imgResolver(s.src,d);p&&(d.src=p),d.height=t.regionH,d.width=t.regionW}}else if("p"===s.kind)d=document.createElement("p");else if("span"===s.kind){if("container"===s.styleAttrs[n.byName.ruby.qname])d=document.createElement("ruby"),t.ruby=!0;else if("base"===s.styleAttrs[n.byName.ruby.qname])d=document.createElement("rb");else if("text"===s.styleAttrs[n.byName.ruby.qname])d=document.createElement("rt");else if("baseContainer"===s.styleAttrs[n.byName.ruby.qname])d=document.createElement("rbc");else if("textContainer"===s.styleAttrs[n.byName.ruby.qname])d=document.createElement("rtc");else{if("delimiter"===s.styleAttrs[n.byName.ruby.qname])return;d=document.createElement("span")}var g=s.styleAttrs[n.byName.textEmphasis.qname];g&&"none"!==g.style&&(t.textEmphasis=!0)}else"br"===s.kind&&(d=document.createElement("br"));if(d){for(var y in e.appendChild(d),d.style.margin="0",a){var h=a[y],f=s.styleAttrs[h.qname];void 0!==f&&null!==h.map&&h.map(t,d,s,f)}var m=d;if("region"===s.kind){var b=s.styleAttrs[n.byName.writingMode.qname];"lrtb"===b||"lr"===b?(t.ipd="lr",t.bpd="tb"):"rltb"===b||"rl"===b?(t.ipd="rl",t.bpd="tb"):"tblr"===b?(t.ipd="tb",t.bpd="lr"):"tbrl"!==b&&"tb"!==b||(t.ipd="tb",t.bpd="rl")}var w=s.styleAttrs[n.byName.linePadding.qname];if(w&&!w.isZero()){var u=w.toUsedLength(t.w,t.h);if(u>0){var c=Math.ceil(u)+"px";"tb"===t.bpd?(m.style.paddingLeft=c,m.style.paddingRight=c):(m.style.paddingTop=c,m.style.paddingBottom=c),t.lp=w}}var v=s.styleAttrs[n.byName.multiRowAlign.qname];if(v&&"auto"!==v){var x=document.createElement("span");x.style.display="inline-block",x.style.textAlign=v,d.appendChild(x),m=x,t.mra=v}var S=s.styleAttrs[n.byName.rubyReserve.qname];if(S&&"none"!==S[0]&&(t.rubyReserve=S),s.styleAttrs[n.byName.fillLineGap.qname]&&(t.flg=!0),"span"===s.kind&&s.text)if(n.byName.textCombine.qname in s.styleAttrs&&"all"===s.styleAttrs[n.byName.textCombine.qname][0])d.textContent=s.text;else for(var E="",C=0;C<s.text.length;C++){E+=s.text.charAt(C);var L=s.text.charCodeAt(C);if(L<55296||L>56319||C===s.text.length){var R=document.createElement("span");R.textContent=E,d.appendChild(R),E=""}}for(var N in s.contents)r(t,m,s.contents[N]);var A=[];if((t.lp||t.mra||t.flg||t.ruby||t.textEmphasis||t.rubyReserve)&&"p"===s.kind&&(i(t,m,A,null),t.rubyReserve&&(!function(t,e){for(var n=0;n<t.length;n++){var r,l,o=document.createElement("ruby"),i=document.createElement("rb");i.textContent="​",o.appendChild(i);var s=e.rubyReserve[1].toUsedLength(e.w,e.h)+"px";"both"===e.rubyReserve[0]?((r=document.createElement("rtc")).style.rubyPosition="under",r.textContent="​",r.style.fontSize=s,(l=document.createElement("rtc")).style.rubyPosition="over",l.textContent="​",l.style.fontSize=s,o.appendChild(r),o.appendChild(l)):((r=document.createElement("rtc")).textContent="​",r.style.fontSize=s,"after"===e.rubyReserve[0]||"outside"===e.rubyReserve[0]&&n>0?r.style.rubyPosition="tb"===e.bpd||"rl"===e.bpd?"under":"over":r.style.rubyPosition="tb"===e.bpd||"rl"===e.bpd?"over":"under",o.appendChild(r));t[n].elements[0].node.parentElement.insertBefore(o,t[n].elements[0].node)}}(A,t),t.rubyReserve=null),(t.ruby||t.rubyReserve)&&(!function(t,e){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].rbc.length;r++){var l;if(!t[n].rbc[r].style.rubyPosition)l="tb"===e.bpd?0===n?"over":"under":"rl"===e.bpd?0===n?"over":"under":0===n?"under":"over",t[n].rbc[r].style.rubyPosition=l}}(A,t),t.ruby=null),t.textEmphasis&&(!function(t,e){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].te.length;r++){var l;if(!t[n].te[r].style.textEmphasisPosition||"none"===t[n].te[r].style.textEmphasisPosition)l="tb"===e.bpd?0===n?"left over":"left under":"rl"===e.bpd?0===n?"right under":"left under":0===n?"left under":"right under",t[n].te[r].style.textEmphasisPosition=l}}(A,t),t.textEmphasis=null),t.mra&&(!function(t){for(var e=0;e<t.length-1;e++){var n=t[e].elements.length;if(0!==n&&!1===t[e].br){var r=document.createElement("br"),l=t[e].elements[n-1].node;l.parentElement.insertBefore(r,l.nextSibling)}}}(A),t.mra=null),t.lp&&(!function(t,e,n){for(var r in t){var l=t[r].elements.length,o=t[r].elements[t[r].start_elem],i=t[r].elements[t[r].end_elem],s=Math.ceil(e)+"px",a="-"+Math.ceil(e)+"px";0!==l&&("lr"===n.ipd?(o.node.style.borderLeftColor=o.bgcolor||"#00000000",o.node.style.borderLeftStyle="solid",o.node.style.borderLeftWidth=s,o.node.style.marginLeft=a):"rl"===n.ipd?(o.node.style.borderRightColor=o.bgcolor||"#00000000",o.node.style.borderRightStyle="solid",o.node.style.borderRightWidth=s,o.node.style.marginRight=a):"tb"===n.ipd&&(o.node.style.borderTopColor=o.bgcolor||"#00000000",o.node.style.borderTopStyle="solid",o.node.style.borderTopWidth=s,o.node.style.marginTop=a),"lr"===n.ipd?(i.node.style.borderRightColor=i.bgcolor||"#00000000",i.node.style.borderRightStyle="solid",i.node.style.borderRightWidth=s,i.node.style.marginRight=a):"rl"===n.ipd?(i.node.style.borderLeftColor=i.bgcolor||"#00000000",i.node.style.borderLeftStyle="solid",i.node.style.borderLeftWidth=s,i.node.style.marginLeft=a):"tb"===n.ipd&&(i.node.style.borderBottomColor=i.bgcolor||"#00000000",i.node.style.borderBottomStyle="solid",i.node.style.borderBottomWidth=s,i.node.style.marginBottom=a))}}(A,t.lp.toUsedLength(t.w,t.h),t),t.lp=null),t.flg)){var U=o(m.getBoundingClientRect(),t);!function(t,e,n,r){for(var l=Math.sign(n-e),o=0;o<=t.length;o++){var i,s,a;if(i=0===o?e:o===t.length?n:(t[o].before+t[o-1].after)/2,o>0)for(var d=0;d<t[o-1].elements.length;d++)null!==t[o-1].elements[d].bgcolor&&(a=t[o-1].elements[d],l*(a.after-i)<0&&(s=Math.ceil(Math.abs(i-a.after))+"px",a.node.style.backgroundColor=a.bgcolor,"lr"===r.bpd?a.node.style.paddingRight=s:"rl"===r.bpd?a.node.style.paddingLeft=s:"tb"===r.bpd&&(a.node.style.paddingBottom=s)));if(o<t.length)for(var p=0;p<t[o].elements.length;p++)null!==(a=t[o].elements[p]).bgcolor&&l*(a.before-i)>0&&(s=Math.ceil(Math.abs(a.before-i))+"px",a.node.style.backgroundColor=a.bgcolor,"lr"===r.bpd?a.node.style.paddingLeft=s:"rl"===r.bpd?a.node.style.paddingRight=s:"tb"===r.bpd&&(a.node.style.paddingTop=s))}}(A,U.before,U.after,t),t.flg=null}if("region"===s.kind&&(i(t,m,A),"tb"===t.bpd&&t.enableRollUp&&s.contents.length>0&&"after"===s.styleAttrs[n.byName.displayAlign.qname])){var M=new l(""===s.id?"_":s.id,A);if(t.currentISDState[M.id]=M,t.previousISDState&&M.id in t.previousISDState&&t.previousISDState[M.id].plist.length>0&&M.plist.length>1&&M.plist[M.plist.length-2].text===t.previousISDState[M.id].plist[t.previousISDState[M.id].plist.length-1].text){var k=d.firstElementChild,q=M.plist[M.plist.length-1].after-M.plist[M.plist.length-1].before;k.style.bottom="-"+q+"px",k.style.transition="transform 0.4s",k.style.position="relative",k.style.transform="translateY(-"+q+"px)"}}}else!function(t,e){if(t&&t.error&&t.error(e))throw e}(t.errorHandler,"Error processing ISD element kind: "+s.kind)}function l(t,e){this.id=t,this.plist=e}function o(t,e){var n={before:null,after:null,start:null,end:null};return"tb"===e.bpd?(n.before=t.top,n.after=t.bottom,"lr"===e.ipd?(n.start=t.left,n.end=t.right):(n.start=t.right,n.end=t.left)):"lr"===e.bpd?(n.before=t.left,n.after=t.right,n.start=t.top,n.end=t.bottom):"rl"===e.bpd&&(n.before=t.right,n.after=t.left,n.start=t.top,n.end=t.bottom),n}function i(t,e,n,r){if("rt"!==e.localName&&"rtc"!==e.localName){var l,s,a,d,p=e.style.backgroundColor||r;if(0===e.childElementCount)if("span"===e.localName||"rb"===e.localName){var g=e.getBoundingClientRect();if(0===g.height||0===g.width)return;var y=o(g,t);if(0!==n.length&&(l=y.before,s=y.after,a=n[n.length-1].before,d=n[n.length-1].after,s<d&&l>a||d<=s&&a>=l)){var h=Math.sign(y.after-y.before),f=Math.sign(y.end-y.start);h*(y.before-n[n.length-1].before)<0&&(n[n.length-1].before=y.before),h*(y.after-n[n.length-1].after)>0&&(n[n.length-1].after=y.after),f*(y.start-n[n.length-1].start)<0&&(n[n.length-1].start=y.start,n[n.length-1].start_elem=n[n.length-1].elements.length),f*(y.end-n[n.length-1].end)>0&&(n[n.length-1].end=y.end,n[n.length-1].end_elem=n[n.length-1].elements.length)}else n.push({before:y.before,after:y.after,start:y.start,end:y.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});n[n.length-1].text+=e.textContent,n[n.length-1].elements.push({node:e,bgcolor:p,before:y.before,after:y.after})}else"br"===e.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var m=e.firstChild;m;)m.nodeType===Node.ELEMENT_NODE&&(i(t,m,n,p),"ruby"===m.localName||"rtc"===m.localName?n.length>0&&n[n.length-1].rbc.push(m):"span"===m.localName&&m.style.textEmphasisStyle&&"none"!==m.style.textEmphasisStyle&&n.length>0&&n[n.length-1].te.push(m)),m=m.nextSibling}}function s(t,e){this.qname=t,this.map=e}t.render=function(t,e,n,l,o,i,s,a,d){var p=l||e.clientHeight,g=o||e.clientWidth;if(null!==t.aspectRatio){var y=p*t.aspectRatio;y>g?p=Math.round(g/t.aspectRatio):g=y}var h=document.createElement("div");h.style.position="relative",h.style.width=g+"px",h.style.height=p+"px",h.style.margin="auto",h.style.top=0,h.style.bottom=0,h.style.left=0,h.style.right=0,h.style.zIndex=0;var f={h:p,w:g,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:i||!1,isd:t,errorHandler:s,previousISDState:a,enableRollUp:d||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};for(var m in e.appendChild(h),t.contents)r(f,h,t.contents[m]);return f.currentISDState};var a=[new s("http://www.w3.org/ns/ttml#styling backgroundColor",function(t,e,n,r){0!==r[3]&&(e.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")}),new s("http://www.w3.org/ns/ttml#styling color",function(t,e,n,r){e.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"}),new s("http://www.w3.org/ns/ttml#styling direction",function(t,e,n,r){e.style.direction=r}),new s("http://www.w3.org/ns/ttml#styling display",function(t,e,n,r){}),new s("http://www.w3.org/ns/ttml#styling displayAlign",function(t,e,n,r){e.style.display="flex",e.style.flexDirection="column","before"===r?e.style.justifyContent="flex-start":"center"===r?e.style.justifyContent="center":"after"===r&&(e.style.justifyContent="flex-end")}),new s("http://www.w3.org/ns/ttml#styling extent",function(t,e,n,r){t.regionH=r.h.toUsedLength(t.w,t.h),t.regionW=r.w.toUsedLength(t.w,t.h);var l=0,o=0,i=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];i&&(l=i[0].toUsedLength(t.w,t.h)+i[2].toUsedLength(t.w,t.h),o=i[1].toUsedLength(t.w,t.h)+i[3].toUsedLength(t.w,t.h)),e.style.height=t.regionH-l+"px",e.style.width=t.regionW-o+"px"}),new s("http://www.w3.org/ns/ttml#styling fontFamily",function(t,e,n,r){var l=[];for(var o in r)"monospaceSerif"===r[o]?(l.push("Courier New"),l.push('"Liberation Mono"'),l.push("Courier"),l.push("monospace")):"proportionalSansSerif"===r[o]?(l.push("Arial"),l.push("Helvetica"),l.push('"Liberation Sans"'),l.push("sans-serif")):"monospace"===r[o]?l.push("monospace"):"sansSerif"===r[o]?l.push("sans-serif"):"serif"===r[o]?l.push("serif"):"monospaceSansSerif"===r[o]?(l.push("Consolas"),l.push("monospace")):"proportionalSerif"===r[o]?l.push("serif"):l.push(r[o]);e.style.fontFamily=l.join(",")}),new s("http://www.w3.org/ns/ttml#styling shear",function(t,e,n,r){if(0!==r){var l=-.9*r;"tb"===t.bpd?e.style.transform="skewX("+l+"deg)":e.style.transform="skewY("+l+"deg)"}}),new s("http://www.w3.org/ns/ttml#styling fontSize",function(t,e,n,r){e.style.fontSize=r.toUsedLength(t.w,t.h)+"px"}),new s("http://www.w3.org/ns/ttml#styling fontStyle",function(t,e,n,r){e.style.fontStyle=r}),new s("http://www.w3.org/ns/ttml#styling fontWeight",function(t,e,n,r){e.style.fontWeight=r}),new s("http://www.w3.org/ns/ttml#styling lineHeight",function(t,e,n,r){e.style.lineHeight="normal"===r?"normal":r.toUsedLength(t.w,t.h)+"px"}),new s("http://www.w3.org/ns/ttml#styling opacity",function(t,e,n,r){e.style.opacity=r}),new s("http://www.w3.org/ns/ttml#styling origin",function(t,e,n,r){e.style.top=r.h.toUsedLength(t.w,t.h)+"px",e.style.left=r.w.toUsedLength(t.w,t.h)+"px"}),new s("http://www.w3.org/ns/ttml#styling overflow",function(t,e,n,r){e.style.overflow=r}),new s("http://www.w3.org/ns/ttml#styling padding",function(t,e,n,r){var l=[];l[0]=r[0].toUsedLength(t.w,t.h)+"px",l[1]=r[3].toUsedLength(t.w,t.h)+"px",l[2]=r[2].toUsedLength(t.w,t.h)+"px",l[3]=r[1].toUsedLength(t.w,t.h)+"px",e.style.padding=l.join(" ")}),new s("http://www.w3.org/ns/ttml#styling position",function(t,e,n,r){e.style.top=r.h.toUsedLength(t.w,t.h)+"px",e.style.left=r.w.toUsedLength(t.w,t.h)+"px"}),new s("http://www.w3.org/ns/ttml#styling rubyAlign",function(t,e,n,r){e.style.rubyAlign=r}),new s("http://www.w3.org/ns/ttml#styling rubyPosition",function(t,e,n,r){var l;"before"!==r&&"after"!==r||(l="tb"===t.bpd?"before"===r?"over":"under":"rl"===t.bpd?"before"===r?"over":"under":"before"===r?"under":"over",e.parentElement.style.rubyPosition=l)}),new s("http://www.w3.org/ns/ttml#styling showBackground",null),new s("http://www.w3.org/ns/ttml#styling textAlign",function(t,e,r,l){var o,i=r.styleAttrs[n.byName.direction.qname];o="start"===l?"rtl"===i?"right":"left":"end"===l?"rtl"===i?"left":"right":l,e.style.textAlign=o}),new s("http://www.w3.org/ns/ttml#styling textDecoration",function(t,e,n,r){e.style.textDecoration=r.join(" ").replace("lineThrough","line-through")}),new s("http://www.w3.org/ns/ttml#styling textOutline",function(t,e,n,r){}),new s("http://www.w3.org/ns/ttml#styling textShadow",function(t,e,r,l){var o=r.styleAttrs[n.byName.textOutline.qname];if("none"===l&&"none"===o)e.style.textShadow="";else{var i=[];if("none"!==o&&i.push("rgba("+o.color[0].toString()+","+o.color[1].toString()+","+o.color[2].toString()+","+(o.color[3]/255).toString()+") 0px 0px "+o.thickness.toUsedLength(t.w,t.h)+"px"),"none"!==l)for(var s in l)i.push(l[s].x_off.toUsedLength(t.w,t.h)+"px "+l[s].y_off.toUsedLength(t.w,t.h)+"px "+l[s].b_radius.toUsedLength(t.w,t.h)+"px rgba("+l[s].color[0].toString()+","+l[s].color[1].toString()+","+l[s].color[2].toString()+","+(l[s].color[3]/255).toString()+")");e.style.textShadow=i.join(",")}}),new s("http://www.w3.org/ns/ttml#styling textCombine",function(t,e,n,r){e.style.textCombineUpright=r.join(" ")}),new s("http://www.w3.org/ns/ttml#styling textEmphasis",function(t,e,n,r){var l;"none"!==r.style?("auto"===r.style?e.style.textEmphasisStyle="filled":e.style.textEmphasisStyle=r.style+" "+r.symbol,("before"===r.position||"after"===r.position)&&(l="tb"===t.bpd?"before"===r.position?"left over":"left under":"rl"===t.bpd?"before"===r.position?"right under":"left under":"before"===r.position?"left under":"right under",e.style.textEmphasisPosition=l)):e.style.textEmphasisStyle="none"}),new s("http://www.w3.org/ns/ttml#styling unicodeBidi",function(t,e,n,r){var l;l="bidiOverride"===r?"bidi-override":r,e.style.unicodeBidi=l}),new s("http://www.w3.org/ns/ttml#styling visibility",function(t,e,n,r){e.style.visibility=r}),new s("http://www.w3.org/ns/ttml#styling wrapOption",function(t,e,n,r){"wrap"===r?"preserve"===n.space?e.style.whiteSpace="pre-wrap":e.style.whiteSpace="normal":"preserve"===n.space?e.style.whiteSpace="pre":e.style.whiteSpace="noWrap"}),new s("http://www.w3.org/ns/ttml#styling writingMode",function(t,e,n,r){"lrtb"===r||"lr"===r?t.writingMode="horizontal-tb":"rltb"===r||"rl"===r?t.writingMode="horizontal-tb":"tblr"===r?t.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.writingMode="vertical-rl"),e.style.writingMode=t.writingMode}),new s("http://www.w3.org/ns/ttml#styling zIndex",function(t,e,n,r){e.style.zIndex=r}),new s("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(t,e,n,r){t.displayForcedOnlyMode&&!1===r&&(e.style.visibility="hidden")})],d={};for(var p in a)d[a[p].qname]=a[p]}("undefined"==typeof exports?this.imscHTML={}:exports,"undefined"==typeof imscNames?require("./names"):imscNames,"undefined"==typeof imscStyles?require("./styles"):imscStyles,"undefined"==typeof imscUtils?require("./utils"):imscUtils);
},{"./names":"Ot2d","./styles":"dfLr","./utils":"YnF9"}],"tpVj":[function(require,module,exports) {
exports.generateISD=require("./isd").generateISD,exports.fromXML=require("./doc").fromXML,exports.renderHTML=require("./html").render;
},{"./isd":"wdXT","./doc":"WFlw","./html":"kxoH"}],"fKFN":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/Constants"),i=e(t),n=require("../../core/EventBus"),l=e(n),r=require("../../core/events/Events"),d=e(r),o=require("../../core/FactoryMaker"),s=e(o),a=require("../../core/Debug"),u=e(a),c=require("imsc");function f(){var e=this.context,t=(0,l.default)(e).getInstance(),n=void 0,r=void 0,o=void 0,s=void 0,a=void 0,f=void 0,g=void 0,v=void 0,h=void 0,m=void 0,T=void 0,p=void 0,y=void 0,x=void 0,E=void 0,C=void 0,I=void 0;function k(e){var t=a[e].kind,i=void 0!==a[e].id?a[e].id:a[e].lang,n=a[e].lang,l=a[e].isTTML,r=a[e].isEmbedded,d=s.addTextTrack(t,i,n);return d.isEmbedded=r,d.isTTML=l,d}function b(e,i){var n=s.getClientWidth(),l=s.getClientHeight(),r=s.getVideoWidth(),o=s.getVideoHeight(),a=s.getVideoRelativeOffsetTop(),u=s.getVideoRelativeOffsetLeft(),c=r/o,f=!1;e.isFromCEA608&&(c=3.5/3,f=!0);var g=function(e,t,i,n,l,r){var d=0,o=0;e/t>i/n?d=(o=t)/n*i:o=(d=e)/i*n;var s,a,u=0,c=0;return d/o>l?(c=o,u=o*l):(u=d,c=d/l),s=(e-u)/2,a=(t-c)/2,r?{x:s+.1*u,y:a+.1*c,w:.8*u,h:.8*c}:{x:s,y:a,w:u,h:c}}.call(this,n,l,r,o,c,f),y=g.w,C=g.h,k=g.x,b=g.y;if(y!=m||C!=T||k!=v||b!=h||i){if(v=k+u,h=b+a,m=y,T=C,p){var S=p.style;S.left=v+"px",S.top=h+"px",S.width=m+"px",S.height=T+"px",S.zIndex=x&&document[x]||E?I:null,t.trigger(d.default.CAPTION_CONTAINER_RESIZE,{})}var z=e.activeCues;if(z)for(var D=z.length,R=0;R<D;++R){var _=z[R];_.scaleCue(_)}}}function S(e){var t=m,i=T,n=void 0,l=void 0,r=void 0,d=void 0,o=void 0;if(e.cellResolution){var s=[t/e.cellResolution[0],i/e.cellResolution[1]];if(e.linePadding)for(n in e.linePadding)if(e.linePadding.hasOwnProperty(n)){l=(e.linePadding[n]*s[0]).toString();for(var a=document.getElementsByClassName("spanPadding"),u=0;u<a.length;u++)a[u].style.cssText=a[u].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+l),a[u].style.cssText=a[u].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+l)}if(e.fontSize){for(n in e.fontSize)if(e.fontSize.hasOwnProperty(n)){"%"===e.fontSize[n][0]?r=e.fontSize[n][1]/100:"c"===e.fontSize[n][0]&&(r=e.fontSize[n][1]),l=(r*s[1]).toString(),o="defaultFontSize"!==n?document.getElementsByClassName(n):document.getElementsByClassName("paragraph");for(var c=0;c<o.length;c++)o[c].style.cssText=o[c].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+l)}if(e.lineHeight)for(n in e.lineHeight)if(e.lineHeight.hasOwnProperty(n)){"%"===e.lineHeight[n][0]?d=e.lineHeight[n][1]/100:"c"===e.fontSize[n][0]&&(d=e.lineHeight[n][1]),l=(d*s[1]).toString(),o=document.getElementsByClassName(n);for(var f=0;f<o.length;f++)o[f].style.cssText=o[f].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+l)}}}if(e.isd){var g=document.getElementById(e.cueID);g&&p.removeChild(g),z(e)}}function z(e){if(p){var i=document.createElement("div");p.appendChild(i),C=(0,c.renderHTML)(e.isd,i,function(t){var i=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,n=/^#(.*)$/;if(i.test(t)){var l=i.exec(t),r=parseInt(l[4],10)-1;return"data:image/png;base64,"+btoa(e.images[r])}if(n.test(t)){r=(l=n.exec(t))[1];return"data:image/png;base64,"+e.embeddedImages[r]}return null},p.clientHeight,p.clientWidth,!1,function(e){r.info("renderCaption :",e)},C,!0),i.id=e.cueID,t.trigger(d.default.CAPTION_RENDERED,{captionDiv:i,currentTrackIdx:g})}}function D(e){return e>=0&&a[e]?s.getTextTrack(a[e].kind,a[e].id,a[e].lang,a[e].isTTML,a[e].isEmbedded):null}function R(e){if(e!==g){var t=D(g=e);(function(e){N.call(this),e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(e)return;(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,i=s.getElement();try{i&&(i.id?t.insertRule("#"+i.id+"::cue {background: transparent}",0):0!==i.classList.length?t.insertRule("."+i.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(n){r.info(""+n.message)}}.call(this):H.call(this)}).call(this,t),y&&(clearInterval(y),y=null),t&&"html"===t.renderingType&&(b.call(this,t,!0),y=setInterval(b.bind(this,t),500))}}function _(e){if(e.cues)for(var t=e.cues,i=t.length-1;i>=0;i--)e.removeCue(t[i])}function H(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function N(){if(p)for(;p.firstChild;)p.removeChild(p.firstChild)}return n={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(o=window.VTTCue||window.TextTrackCue,a=[],f=[],g=-1,v=0,h=0,m=0,T=0,p=null,y=null,E=!1,I=2147483647,C=null,void 0!==document.fullscreenElement?x="fullscreenElement":void 0!==document.webkitIsFullScreen?x="webkitIsFullScreen":document.msFullscreenElement?x="msFullscreenElement":document.mozFullScreen&&(x="mozFullScreen"))},displayCConTop:function(e){E=e,p&&!document[x]&&(p.style.zIndex=e?I:null)},addTextTrack:function(e,n){if(a.length!==n){if(a.push(e),a.length===n){a.sort(function(e,t){return e.index-t.index}),p=s.getTTMLRenderingDiv();for(var l=-1,o=0;o<a.length;o++){var u=k.call(this,o);f.push(u),a[o].defaultTrack&&(u.default=!0,l=o);var c=D(o);c&&(c.mode=i.default.TEXT_SHOWING,p&&(a[o].isTTML||a[o].isEmbedded)?c.renderingType="html":c.renderingType="default"),this.addCaptions(o,0,a[o].captionData),t.trigger(d.default.TEXT_TRACK_ADDED)}if(R.call(this,l),l>=0)for(var v=0;v<a.length;v++){var h=D(v);h&&(h.mode=v===l?i.default.TEXT_SHOWING:i.default.TEXT_HIDDEN)}t.trigger(d.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:g,tracks:a})}}else r.error("Trying to add too many tracks.")},addCaptions:function(e,n,l){var s=D(e),a=this;if(s&&l&&0!==l.length)for(var u=0;u<l.length;u++){var c=void 0,f=l[u];s.cellResolution=f.cellResolution,s.isFromCEA608=f.isFromCEA608,"html"===f.type&&p?((c=new o(f.start-n,f.end-n,"")).cueHTMLElement=f.cueHTMLElement,c.isd=f.isd,c.images=f.images,c.embeddedImages=f.embeddedImages,c.cueID=f.cueID,c.scaleCue=S.bind(a),c.cellResolution=f.cellResolution,c.lineHeight=f.lineHeight,c.linePadding=f.linePadding,c.fontSize=f.fontSize,p.style.left=v+"px",p.style.top=h+"px",p.style.width=m+"px",p.style.height=T+"px",c.onenter=function(){s.mode===i.default.TEXT_SHOWING&&(this.isd?(z(this),r.debug("Cue enter id:"+this.cueID)):(p.appendChild(this.cueHTMLElement),S.call(a,this),t.trigger(d.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:g})))},c.onexit=function(){if(p)for(var e=p.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(r.debug("Cue exit id:"+e[t].id),p.removeChild(e[t]))}):f.data&&(c=new o(f.start-n,f.end-n,f.data),f.styles&&(void 0!==f.styles.align&&"align"in c&&(c.align=f.styles.align),void 0!==f.styles.line&&"line"in c&&(c.line=f.styles.line),void 0!==f.styles.position&&"position"in c&&(c.position=f.styles.position),void 0!==f.styles.size&&"size"in c&&(c.size=f.styles.size)),c.onenter=function(){s.mode===i.default.TEXT_SHOWING&&t.trigger(d.default.CAPTION_RENDERED,{currentTrackIdx:g})});try{c?s.addCue(c):r.error("impossible to display subtitles.")}catch(y){throw _(s),s.addCue(c),y}}},getCurrentTrackIdx:function(){return g},setCurrentTrackIdx:R,getTrackIdxForId:function(e){for(var t=-1,i=0;i<a.length;i++)if(a[i].id===e){t=i;break}return t},getCurrentTrackInfo:function(){return a[g]},setModeForTrackIdx:function(e,t){var i=D(e);i&&i.mode!==t&&(i.mode=t)},deleteCuesFromTrackIdx:function(e){var t=D(e);t&&_(t)},deleteAllTextTracks:function(){for(var e=f?f.length:0,t=0;t<e;t++){var i=D(t);i&&(_.call(this,i),i.mode="disabled")}f=[],a=[],y&&(clearInterval(y),y=null),g=-1,N.call(this)},deleteTextTrack:function(e){s.removeChild(f[e]),f.splice(e,1)},setConfig:function(e){e&&e.videoModel&&(s=e.videoModel)}},r=(0,u.default)(e).getInstance().getLogger(n),n}f.__dashjs_factory_name="TextTracks",exports.default=s.default.getSingletonFactory(f),module.exports=exports.default;
},{"../constants/Constants":"NqGT","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb","imsc":"tpVj"}],"OCHd":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("../../core/FactoryMaker"),t=e(n);function r(){var e=0;function n(e){for(var n="",t=0;t<e.length;++t){n+=e[t].uchar}return n.length-n.replace(/^\s+/,"").length}function t(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function r(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function a(e,n){var t=e.videoHeight/15;return n?"font-size: "+t+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(n.foreground?r(n.foreground):"rgb(255, 255, 255)")+"; font-style: "+(n.italics?"italic":"normal")+"; text-decoration: "+(n.underline?"underline":"none")+"; white-space: pre; background-color: "+(n.background?r(n.background):"transparent")+";":"font-size: "+t+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function o(e){return e.replace(/^\s+/g,"")}function l(e){return e.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(r,s,i,p){var c=null,u=!1,d=-1,m={start:s,end:i,spans:[]},h="style_cea608_white_black",g={},f={},y=[],v=void 0,x=void 0;for(v=0;v<15;++v){var b=p.rows[v],_="",w=null;if(!1===b.isEmpty()){var C=n(b.chars);null===c&&(c={x:C,y1:v,y2:v+1,p:[]}),C!==d&&u&&(c.p.push(m),m={start:s,end:i,spans:[]},c.y2=v,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===g.hasOwnProperty(c.name)?(y.push(c),g[c.name]=c):g[c.name].p.contat(c.p),c={x:C,y1:v,y2:v+1,p:[]});for(var M=0;M<b.chars.length;++M){var k=b.chars[M],E=k.penState;if(null===w||!E.equals(w)){_.trim().length>0&&(m.spans.push({name:h,line:_,row:v}),_="");var S="style_cea608_"+E.foreground+"_"+E.background;E.underline&&(S+="_underline"),E.italics&&(S+="_italics"),f.hasOwnProperty(S)||(f[S]=JSON.parse(JSON.stringify(E))),w=E,h=S}_+=k.uchar}_.trim().length>0&&m.spans.push({name:h,line:_,row:v}),u=!0,d=C}else u=!1,d=-1,c&&(c.p.push(m),m={start:s,end:i,spans:[]},c.y2=v,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===g.hasOwnProperty(c.name)?(y.push(c),g[c.name]=c):g[c.name].p.contat(c.p),c=null)}c&&(c.p.push(m),c.y2=v+1,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===g.hasOwnProperty(c.name)?(y.push(c),g[c.name]=c):g[c.name].p.contat(c.p),c=null);var O=[];for(v=0;v<y.length;++v){var P=y[v],T="sub_cea608_"+e++,N=document.createElement("div");N.id=T;var z=t(P);N.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+z;var H=document.createElement("div");H.className="paragraph bodyStyle",H.style.cssText=a(r);var F=document.createElement("div");F.className="cueUniWrapper",F.style.cssText="unicode-bidi: normal; direction: ltr;";for(var j=0;j<P.p.length;++j){var q=P.p[j],J=0;for(x=0;x<q.spans.length;++x){var L=q.spans[x];if(L.line.length>0){if(0!==x&&J!=L.row){var R=document.createElement("br");R.className="lineBreak",F.appendChild(R)}var A=!1;J===L.row&&(A=!0),J=L.row;var B=f[L.name],D=document.createElement("span");D.className="spanPadding "+L.name+" customSpanColor",D.style.cssText=a(r,B),0!==x&&A?x===q.spans.length-1?D.textContent=l(L.line):D.textContent=L.line:q.spans.length>1&&x<q.spans.length-1&&L.row===q.spans[x+1].row?D.textContent=o(L.line):D.textContent=L.line.trim(),F.appendChild(D)}}}H.appendChild(F),N.appendChild(H);var I={bodyStyle:["%",90]};for(var U in f)f.hasOwnProperty(U)&&(I[U]=["%",90]);O.push({type:"html",start:s,end:i,cueHTMLElement:N,cueID:T,cellResolution:[32,15],isFromCEA608:!0,fontSize:I,lineHeight:{},linePadding:{}})}return O}}}r.__dashjs_factory_name="EmbeddedTextHtmlRender",exports.default=t.default.getSingletonFactory(r),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6"}],"vfor":[function(require,module,exports) {
"use strict";!function(t){var e={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(t){var i=t;return e.hasOwnProperty(t)&&(i=e[t]),String.fromCharCode(i)},s={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},r={17:2,18:4,21:6,22:8,23:10,19:13,20:15},n={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},o={25:2,26:4,29:6,30:8,31:10,27:13,28:15},a=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],h={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var i=this.verboseFilter[t];this.verboseLevel>=i&&console.log(this.time+" ["+t+"] "+e)}},l=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].toString(16));return e},c=function(t,e,i,s,r){this.foreground=t||"white",this.underline=e||!1,this.italics=i||!1,this.background=s||"black",this.flash=r||!1};c.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(t){for(var e=["foreground","underline","italics","background","flash"],i=0;i<e.length;i++){var s=e[i];t.hasOwnProperty(s)&&(this[s]=t[s])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},copy:function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var u=function(t,e,i,s,r,n){this.uchar=t||" ",this.penState=new c(e,i,s,r,n)};u.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(t,e){this.uchar=t,this.penState.copy(e)},setPenState:function(t){this.penState.copy(t)},equals:function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},copy:function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var d=function(){this.chars=[];for(var t=0;t<32;t++)this.chars.push(new u);this.pos=0,this.currPenState=new c};d.prototype={equals:function(t){for(var e=!0,i=0;i<32;i++)if(!this.chars[i].equals(t.chars[i])){e=!1;break}return e},copy:function(t){for(var e=0;e<32;e++)this.chars[e].copy(t.chars[e])},isEmpty:function(){for(var t=!0,e=0;e<32;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},setCursor:function(t){this.pos!==t&&(this.pos=t),this.pos<0?(h.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>32&&(h.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(t){var e=this.pos+t;if(t>1)for(var i=this.pos+1;i<e+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(e)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(t){t>=144&&this.backSpace();var e=i(t);this.pos>=32?h.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},clearFromPos:function(t){var e;for(e=t;e<32;e++)this.chars[e].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var t=[],e=!0,i=0;i<32;i++){var s=this.chars[i].uchar;" "!==s&&(e=!1),t.push(s)}return e?"":t.join("")},setPenStyles:function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)}};var p=function(){this.rows=[];for(var t=0;t<15;t++)this.rows.push(new d);this.currRow=14,this.nrRollUpRows=null,this.reset()};p.prototype={reset:function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},equals:function(t){for(var e=!0,i=0;i<15;i++)if(!this.rows[i].equals(t.rows[i])){e=!1;break}return e},copy:function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},isEmpty:function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(t){this.rows[this.currRow].insertChar(t)},setPen:function(t){this.rows[this.currRow].setPenStyles(t)},moveCursor:function(t){this.rows[this.currRow].moveCursor(t)},setCursor:function(t){h.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},setPAC:function(t){h.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.currRow=e;var i=this.rows[this.currRow];if(null!==t.indent){var s=t.indent,r=Math.max(s-1,0);i.setCursor(t.indent),t.color=i.chars[r].penState.foreground}var n={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(n)},setBkgData:function(t){h.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},setRollUpRows:function(t){this.nrRollUpRows=t},rollUp:function(){if(null!==this.nrRollUpRows){h.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),h.log("INFO","Rolling up")}else h.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(t){t=t||!1;for(var e=[],i="",s=-1,r=0;r<15;r++){var n=this.rows[r].getTextString();n&&(s=r+1,t?e.push("Row "+s+': "'+n+'"'):e.push(n.trim()))}return e.length>0&&(i=t?"["+e.join(" | ")+"]":e.join("\n")),i},getTextAndFormat:function(){return this.rows}};var f=function(t,e){this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new p,this.nonDisplayedMemory=new p,this.lastOutputScreen=new p,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};f.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(t){this.outputFilter=t},setPAC:function(t){this.writeScreen.setPAC(t)},setBkgData:function(t){this.writeScreen.setBkgData(t)},setMode:function(t){t!==this.mode&&(this.mode=t,h.log("INFO","MODE="+t),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},insertChars:function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";h.log("INFO",i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(h.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){h.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){h.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){h.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(t){h.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},cc_FON:function(){h.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){h.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){h.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){h.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){h.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){h.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){h.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(h.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,h.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(t){h.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},cc_MIDROW:function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var i=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][i]}h.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},outputDataUpdate:function(){var t=h.time;null!==t&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(t,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}};var g=function(t,e,i){this.field=t||1,this.outputs=[e,i],this.channels=[new f(1,e),new f(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};g.prototype={getHandler:function(t){return this.channels[t].getHandler()},setHandler:function(t,e){this.channels[t].setHandler(e)},addData:function(t,e){var i,s,r,n=!1;this.lastTime=t,h.setTime(t);for(var o=0;o<e.length;o+=2)if(s=127&e[o],r=127&e[o+1],s>=16&&s<=31&&s===this.lastCmdA&&r===this.lastCmdB)this.lastCmdA=null,this.lastCmdB=null,h.log("DEBUG","Repeated command ("+l([s,r])+") is dropped");else if(0!==s||0!==r){if(h.log("DATA","["+l([e[o],e[o+1]])+"] -> ("+l([s,r])+")"),(i=this.parseCmd(s,r))||(i=this.parseMidrow(s,r)),i||(i=this.parsePAC(s,r)),i||(i=this.parseBackgroundAttributes(s,r)),!i)if(n=this.parseChars(s,r))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(n);else h.log("WARNING","No channel found yet. TEXT-MODE?");i?this.dataCounters.cmd+=2:n?this.dataCounters.char+=2:(this.dataCounters.other+=2,h.log("WARNING","Couldn't parse cleaned data "+l([s,r])+" orig: "+l([e[o],e[o+1]])))}else this.dataCounters.padding+=2},parseCmd:function(t,e){var i=null;if(!((20===t||21===t||28===t||29===t)&&32<=e&&e<=47)&&!((23===t||31===t)&&33<=e&&e<=35))return!1;i=20===t||21===t||23===t?1:2;var s=this.channels[i-1];return 20===t||21===t||28===t||29===t?32===e?s.cc_RCL():33===e?s.cc_BS():34===e?s.cc_AOF():35===e?s.cc_AON():36===e?s.cc_DER():37===e?s.cc_RU(2):38===e?s.cc_RU(3):39===e?s.cc_RU(4):40===e?s.cc_FON():41===e?s.cc_RDC():42===e?s.cc_TR():43===e?s.cc_RTD():44===e?s.cc_EDM():45===e?s.cc_CR():46===e?s.cc_ENM():47===e&&s.cc_EOC():s.cc_TO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=i,!0},parseMidrow:function(t,e){var i=null;if((17===t||25===t)&&32<=e&&e<=47){if((i=17===t?1:2)!==this.currChNr)return h.log("ERROR","Mismatch channel in midrow parsing"),!1;var s=this.channels[i-1];return s.insertChars([32]),s.cc_MIDROW(e),h.log("DEBUG","MIDROW ("+l([t,e])+")"),this.lastCmdA=t,this.lastCmdB=e,!0}return!1},parsePAC:function(t,e){var i,a=null;if(!((17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127)&&!((16===t||24===t)&&64<=e&&e<=95))return!1;i=t<=23?1:2,a=64<=e&&e<=95?1===i?s[t]:n[t]:1===i?r[t]:o[t];var h=this.interpretPAC(a,e);return this.channels[i-1].setPAC(h),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=i,!0},interpretPAC:function(t,e){var i=e,s={color:null,italics:!1,indent:null,underline:!1,row:t};return i=e>95?e-96:e-64,s.underline=1==(1&i),i<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(s.italics=!0,s.color="white"):s.indent=4*Math.floor((i-16)/2),s},parseChars:function(t,e){var s=null,r=null,n=null;if(t>=25?(s=2,n=t-8):(s=1,n=t),17<=n&&n<=19){var o=e;o=17===n?e+80:18===n?e+112:e+144,h.log("INFO","Special char '"+i(o)+"' in channel "+s),r=[o],this.lastCmdA=t,this.lastCmdB=e}else 32<=t&&t<=127&&(r=0===e?[t]:[t,e],this.lastCmdA=null,this.lastCmdB=null);if(r){var a=l(r);h.log("DEBUG","Char codes =  "+a.join(","))}return r},parseBackgroundAttributes:function(t,e){var i,s,r;return((16===t||24===t)&&32<=e&&e<=47||(23===t||31===t)&&45<=e&&e<=47)&&(i={},16===t||24===t?(s=Math.floor((e-32)/2),i.background=a[s],e%2==1&&(i.background=i.background+"_semi")):45===e?i.background="transparent":(i.foreground="black",47===e&&(i.underline=!0)),r=t<24?1:2,this.channels[r-1].setBkgData(i),this.lastCmdA=t,this.lastCmdB=e,!0)},reset:function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)}};t.logger=h,t.PenState=c,t.CaptionScreen=p,t.Cea608Parser=g,t.findCea608Nalus=function(t,e,i){for(var s=0,r=e,n=[],o=function(t,e,i,s){if(4!==t||e<8)return null;var r=i.getUint8(s),n=i.getUint16(s+1),o=i.getUint32(s+3),a=i.getUint8(s+7);return 181==r&&49==n&&1195456820==o&&3==a};r<e+i;){if(s=t.getUint32(r),6==(31&t.getUint8(r+4)))for(var a=r+5,h=-1;a<r+4+s-1;){h=0;for(var l=255;255===l;)h+=l=t.getUint8(a),a++;var c=0;for(l=255;255===l;)c+=l=t.getUint8(a),a++;o(h,c,t,a)&&n.push([a,c]),a+=c}r+=s+4}return n},t.extractCea608DataFromRange=function(t,e){var i=e[0],s=[[],[]];i+=8;var r=31&t.getUint8(i);i+=2;for(var n=0;n<r;n++){var o=t.getUint8(i),a=4&o,h=3&o;i++;var l=t.getUint8(i);i++;var c=t.getUint8(i);i++,a&&(127&l)+(127&c)!=0&&(0===h?(s[0].push(l),s[0].push(c)):1===h&&(s[1].push(l),s[1].push(c)))}return s}}("undefined"==typeof exports?(void 0).cea608parser={}:exports);
},{}],"dCLp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var E=function(E,_,R){for(var t=!0;t;){var O=E,e=_,i=R;t=!1,null===O&&(O=Function.prototype);var A=Object.getOwnPropertyDescriptor(O,e);if(void 0!==A){if("value"in A)return A.value;var D=A.get;if(void 0===D)return;return D.call(i)}var s=Object.getPrototypeOf(O);if(null===s)return;E=s,_=e,R=i,t=!0,A=s=void 0}};function _(E){return E&&E.__esModule?E:{default:E}}function R(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function t(E,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}var O=require("./ErrorsBase"),e=_(O),i=function(_){function O(){R(this,O),E(Object.getPrototypeOf(O.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_MANIFEST="manifest",this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_CONTENT="content",this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.DOWNLOAD_ERROR_ID_XLINK="xlink",this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : "}return t(O,e["default"]),O}(),A=new i;exports.default=A,module.exports=exports.default;
},{"./ErrorsBase":"Y3I9"}],"kVOZ":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/Constants"),r=e(t),a=require("../vo/metrics/HTTPRequest"),i=require("../vo/TextTrackInfo"),d=e(i),n=require("../utils/BoxParser"),o=e(n),s=require("../utils/CustomTimeRanges"),l=e(s),u=require("../../core/FactoryMaker"),f=e(u),c=require("../../core/Debug"),v=e(c),T=require("./TextTracks"),g=e(T),m=require("./EmbeddedTextHtmlRender"),h=e(m),p=require("codem-isoboxer"),b=e(p),E=require("../../../externals/cea608-parser"),C=e(E),x=require("../../core/EventBus"),M=e(x),I=require("../../core/events/Events"),y=e(I),S=require("../vo/DashJSError"),_=e(S),k=require("../../core/errors/Errors"),D=e(k);function R(){var e=this.context,t=(0,M.default)(e).getInstance(),i=!1,n=void 0,s=void 0,u=void 0,f=void 0,c=void 0,T=void 0,m=void 0,p=void 0,E=void 0,x=void 0,I=void 0,S=void 0,k=void 0,R=void 0,q=void 0,P=void 0,F=void 0,V=void 0,w=void 0,A=void 0,N=void 0,z=void 0,L=void 0,O=void 0,H=void 0,U=void 0,X=void 0;function B(){k=null,q=NaN,P=[],w=null,R=!1,I=[],p=null}function G(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&Y(t.bytes,t)}function j(){N=[],(S=(0,g.default)(e).getInstance()).setConfig({videoModel:F}),S.initialize(),u=(0,o.default)(e).getInstance(),A=null,!1,z=0,H=[],O=[],L=null,i=!0,U=(0,h.default)(e).getInstance();var r=V.getActiveStreamProcessors();for(var a in r)if("video"===r[a].getType()){X=r[a].getRepresentationInfo().MSETimeOffset;break}t.on(y.default.VIDEO_CHUNK_RECEIVED,G,this)}function K(e){A=e}function J(e,t){var a,i,n=new d.default,o={subtitle:"subtitles",caption:"captions"};n.captionData=e,n.lang=t.lang,n.labels=t.labels,n.id=t.id?t.id:t.index,n.index=t.index,n.isTTML=(a=!1,t.codec&&t.codec.search(r.default.STPP)>=0&&(a=!0),t.mimeType&&t.mimeType.search(r.default.TTML)>=0&&(a=!0),a),n.defaultTrack=function(e){var t=!1;N.length>1&&e.isEmbedded?t=e.id&&e.id===r.default.CC1:1===N.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===N.length&&(t=e.index===I[0].index);return t}(t),n.isFragmented=!c.getIsTextTrack(t.mimeType),n.isEmbedded=!!t.isEmbedded,n.kind=i=(i=t.roles.length>0?o[t.roles[0]]:o.caption)===o.caption||i===o.subtitle?i:o.caption,n.roles=t.roles,n.accessibility=t.accessibility;var s=(I?I.length:0)+N.length;S.addTextTrack(n,s)}function Y(e,t){var i=void 0,d=void 0,n=void 0,o=void 0,l=void 0,c=void 0,v=void 0,g=t.mediaInfo,m=g.type,h=g.mimeType,E=g.codec||h;if(E){if(m===r.default.FRAGMENTED_TEXT)if(R)if(d=(c=u.getSamplesInfo(e)).sampleList,null===w&&d.length>0&&(w=d[0].cts-t.start*q),E.search(r.default.STPP)>=0)for(p=null!==p?p:Q(E),n=0;n<d.length;n++){var x=(K=d[n]).cts,M=x-w;this.buffered.add(M/q,(M+K.duration)/q);var I=new DataView(e,K.offset,K.subSizes[0]);v=b.default.Utils.dataViewToString(I,r.default.UTF8);var y=[],P=K.offset+K.subSizes[0];for(o=1;o<K.subSizes.length;o++){var V=new Uint8Array(e,P,K.subSizes[o]),B=String.fromCharCode.apply(null,V);y.push(B),P+=K.subSizes[o]}try{var G=T.getValue().ttmlTimeIsRelative?x/q:0;i=p.parse(v,G,x/q,(x+K.duration)/q,y),S.addCaptions(A,w/q,i)}catch(fe){k.removeExecutedRequestsBeforeTime(),this.remove(),s.error("TTML parser error: "+fe.message)}}else{var j=[];for(n=0;n<d.length;n++){var K;(K=d[n]).cts-=w,this.buffered.add(K.cts/q,(K.cts+K.duration)/q);var Y=e.slice(K.offset,K.offset+K.size),W=b.default.parseBuffer(Y);for(o=0;o<W.boxes.length;o++){var Z=W.boxes[o];if(s.debug("VTT box1: "+Z.type),"vtte"!==Z.type&&"vttc"===Z.type)for(s.debug("VTT vttc boxes.length = "+Z.boxes.length),l=0;l<Z.boxes.length;l++){var $=Z.boxes[l];if(s.debug("VTT box2: "+$.type),"payl"===$.type){var ee=$.cue_text;s.debug("VTT cue_text = "+ee);var te=K.cts/q,re=(K.cts+K.duration)/q;j.push({start:te,end:re,data:ee,styles:{}}),s.debug("VTT "+te+"-"+re+" : "+ee)}}}}j.length>0&&S.addCaptions(A,0,j)}else R=!0,q=u.getMediaTimescaleFromMoov(e);else if(m===r.default.TEXT){I=new DataView(e,0,e.byteLength);v=b.default.Utils.dataViewToString(I,r.default.UTF8);try{i=Q(E).parse(v,0),S.addCaptions(S.getCurrentTrackIdx(),0,i)}catch(fe){f.timedTextError(fe,"parse",v),f.error(new _.default(D.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,D.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+fe.message,v))}}else if(m===r.default.VIDEO)if(t.segmentType===a.HTTPRequest.INIT_SEGMENT_TYPE){if(0===z)for(z=u.getMediaTimescaleFromMoov(e),n=0;n<N.length;n++)J(null,N[n])}else{if(0===z)return void s.warn("CEA-608: No timescale for embeddedTextTrack yet");var ae=function(e,t){return function(e,r,a){var i=null;i=F.getTTMLRenderingDiv()?U.createHTMLCaptionsFromScreen(F.getElement(),e,r,a):[{start:e,end:r,data:a.getDisplayText(),styles:{}}],i&&S.addCaptions(t,0,i)}},ie=(c=u.getSamplesInfo(e)).lastSequenceNumber;if(!H[0]&&!H[1]){var de=void 0,ne=void 0;for(n=0;n<N.length;n++){if(N[n].id===r.default.CC1?(0,ne=S.getTrackIdxForId(r.default.CC1)):N[n].id===r.default.CC3&&(1,ne=S.getTrackIdxForId(r.default.CC3)),-1===ne)return void s.warn("CEA-608: data before track is ready.");de=ae(0,ne),H[n]=new C.default.Cea608Parser(n+1,{newCue:de},null)}}if(z&&-1==O.indexOf(ie)){if(null!==L&&ie!==L+c.numSequences)for(n=0;n<H.length;n++)H[n]&&H[n].reset();for(var oe=function(e,t){if(0===t.length)return null;for(var r={splits:[],fields:[[],[]]},a=new DataView(e),i=0;i<t.length;i++)for(var d=t[i],n=C.default.findCea608Nalus(a,d.offset,d.size),o=null,s=0,l=0;l<n.length;l++)for(var u=C.default.extractCea608DataFromRange(a,n[l]),f=0;f<2;f++)u[f].length>0&&(d.cts!==o?s=0:s+=1,r.fields[f].push([d.cts+X*z,u[f],s]),o=d.cts);return r.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),r}(e,c.sampleList),se=0;se<H.length;se++){var le=oe.fields[se],ue=H[se];if(ue)for(n=0;n<le.length;n++)ue.addData(le[n][0]/z,le[n][1])}L=ie,O.push(ie)}}}else s.error("No text type defined")}function Q(e){var t=void 0;return e.search(r.default.VTT)>=0?t=E:(e.search(r.default.TTML)>=0||e.search(r.default.STPP)>=0)&&(t=x),t}return n={initialize:function(t,a){i||j(),S.setConfig({videoModel:F}),S.initialize(),u||(u=(0,o.default)(e).getInstance()),function(t,a){var i=!c.getIsTextTrack(t);if(a){if(I=I.concat(a.getMediaInfoArr()),i){k=a.getFragmentModel(),n.buffered=(0,l.default)(e).create(),P=m.getTracksFor(r.default.FRAGMENTED_TEXT,V.getActiveStreamInfo());for(var d=m.getCurrentTrackFor(r.default.FRAGMENTED_TEXT,V.getActiveStreamInfo()),o=0;o<P.length;o++)if(P[o]===d){K(o);break}}for(var o=0;o<I.length;o++)J(null,I[o])}}(t,a)},append:Y,abort:function(){S.deleteAllTextTracks(),u=null,I=[],k=null,R=!1,P=[]},addEmbeddedTrack:function(e){if(i||j(),e)if(e.id===r.default.CC1||e.id===r.default.CC3){for(var t=0;t<N.length;t++)if(N[t].id===e.id)return;N.push(e)}else s.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){t.off(y.default.VIDEO_CHUNK_RECEIVED,G,this),S&&S.deleteAllTextTracks(),i=!1,N=[],H=[null,null],O=[],L=null},setConfig:function(e){e&&(e.errHandler&&(f=e.errHandler),e.dashManifestModel&&(c=e.dashManifestModel),e.manifestModel&&(T=e.manifestModel),e.mediaController&&(m=e.mediaController),e.videoModel&&(F=e.videoModel),e.streamController&&(V=e.streamController),e.textTracks&&(S=e.textTracks),e.vttParser&&(E=e.vttParser),e.ttmlParser&&(x=e.ttmlParser))},getConfig:function(){return{fragmentModel:k,fragmentedTracks:P,videoModel:F}},setCurrentFragmentedTrackIdx:K,remove:function(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)},reset:function(){B(),V=null,F=null,S=null}},s=(0,v.default)(e).getInstance().getLogger(n),B(),n}R.__dashjs_factory_name="TextSourceBuffer",exports.default=f.default.getSingletonFactory(R),module.exports=exports.default;
},{"../constants/Constants":"NqGT","../vo/metrics/HTTPRequest":"RDXP","../vo/TextTrackInfo":"QUf7","../utils/BoxParser":"dfT6","../utils/CustomTimeRanges":"JUYk","../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb","./TextTracks":"fKFN","./EmbeddedTextHtmlRender":"OCHd","codem-isoboxer":"upQ5","../../../externals/cea608-parser":"vfor","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../vo/DashJSError":"BHVF","../../core/errors/Errors":"dCLp"}],"JY3N":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),r=e(t),a=require("../../core/Debug"),i=e(a),n="WEBVTT";function o(){var e=this.context,t=void 0,r=void 0,a=void 0,o=void 0,s=void 0,c=void 0;function u(e){var t=e.split(":"),r=t.length-1;return e=60*parseInt(t[r-1],10)+parseFloat(t[r]),2===r&&(e+=3600*parseInt(t[0],10)),e}function l(e){var t=e.split(o),r=t[1].split(c);return r.shift(),t[1]=r[0],r.shift(),{cuePoints:t,styles:f(r)}}function f(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var r=e.split(/:/)[1];r&&-1!=r.search(/%/)&&(r=parseInt(r.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=r),(e.match(/line/)||e.match(/L/))&&(t.line=r),(e.match(/position/)||e.match(/P/))&&(t.position=r),(e.match(/size/)||e.match(/S/))&&(t.size=r)}}),t}function p(e,t){for(var r,a=t,i="",n="";""!==e[a]&&a<e.length;)a++;if((r=a-t)>1)for(var s=0;s<r;s++){if((n=e[t+s]).match(o)){i="";break}i+=n,s!==r-1&&(i+="\n")}else(n=e[t]).match(o)||(i=n);return i}return t={parse:function(e){var t,i=[],c=void 0;if(!e)return i;t=(e=e.split(a)).length,c=-1;for(var f=0;f<t;f++){var h=e[f];if(h.length>0&&h!==n&&h.match(o)){var d=l(h),g=d.cuePoints,v=d.styles,m=p(e,f+1),y=u(g[0].replace(s,"")),_=u(g[1].replace(s,""));!isNaN(y)&&!isNaN(_)&&y>=c&&_>y?""!==m?(c=y,i.push({start:y,end:_,data:m,styles:v})):r.error("Skipping cue due to empty/malformed cue text"):r.error("Skipping cue due to incorrect cue timing")}}return i}},r=(0,i.default)(e).getInstance().getLogger(t),a=/(?:\r\n|\r|\n)/gm,o=/-->/,s=/(^[\s]+|[\s]+$)/g,c=/\s\b/g,t}o.__dashjs_factory_name="VTTParser",exports.default=r.default.getSingletonFactory(o),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb"}],"HzwB":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),r=e(t),n=require("../../core/Debug"),a=e(n),o=require("../../core/EventBus"),i=e(o),u=require("../../core/events/Events"),s=e(u),d=require("imsc");function c(){var e=this.context,t=(0,i.default)(e).getInstance(),r=void 0,n=void 0,o=0;return r={parse:function(e,r,a,i,u){var c="",g=[],f=void 0,m=void 0,l=void 0,v={},p={},T="",_="",w={onOpenTag:function(e,t,r){if("image"===t&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e){if(!r[" imagetype"]||"PNG"!==r[" imagetype"].value)return void n.warn("smpte-tt imagetype != PNG. Discarded");T=r["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){T&&(p[T]=_.trim()),_="",T=""},onText:function(e){T&&(_+=e)}};if(!e)throw c="no ttml data to parse",new Error(c);v.data=e,t.trigger(s.default.TTML_TO_PARSE,v);var h=(0,d.fromXML)(v.data,function(e){c=e},w);t.trigger(s.default.TTML_PARSED,{ttmlString:v.data,ttmlDoc:h});var M,y=h.getMediaTimeEvents();for(l=0;l<y.length;l++){var E=(0,d.generateISD)(h,y[l],function(e){c=e});E.contents.some(function(e){return e.contents.length})&&(f=y[l]+r<a?a:y[l]+r)<(m=y[l+1]+r>i?i:y[l+1]+r)&&g.push({start:f,end:m,type:"html",cueID:(M=void 0,M="cue_TTML_"+o,o++,M),isd:E,images:u,embeddedImages:p})}if(""!==c)throw n.error(c),new Error(c);return g}},n=(0,a.default)(e).getInstance().getLogger(r),r}c.__dashjs_factory_name="TTMLParser",exports.default=r.default.getSingletonFactory(c),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","imsc":"tpVj"}],"BJUk":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/Constants"),r=e(t),a=require("../../core/FactoryMaker"),n=e(a),o=require("./TextSourceBuffer"),d=e(o),i=require("./TextTracks"),s=e(i),l=require("../utils/VTTParser"),u=e(l),c=require("../utils/TTMLParser"),f=e(c),T=require("../../core/EventBus"),g=e(T),v=require("../../core/events/Events"),x=e(v),m=require("../utils/SupervisorTools");function k(){var e=this.context,t=void 0,a=void 0,n=void 0,o=void 0,i=void 0,l=void 0,c=void 0,T=void 0,v=void 0,k=void 0,E=void 0,I=void 0,C=void 0,M=void 0,h=void 0,b=void 0,_=void 0;function P(e){var t=this,r=e.tracks,a=e.index;r.some(function(e,r){if(e.lang===C)return t.setTextTrack(r),a=r,!0}),h||this.setTextTrack(-1),M=a,I.trigger(x.default.TEXT_TRACKS_ADDED,{enabled:D(),index:a,tracks:r})}function D(){var e=!0;return b&&!_&&(e=!1),e}function p(){b=!1}return t={setConfig:function(e){e&&(e.errHandler&&(n=e.errHandler),e.dashManifestModel&&(o=e.dashManifestModel),e.manifestModel&&(i=e.manifestModel),e.mediaController&&(l=e.mediaController),e.videoModel&&(c=e.videoModel),e.streamController&&(T=e.streamController),e.textTracks&&(v=e.textTracks),e.vttParser&&(k=e.vttParser),e.ttmlParser&&(E=e.ttmlParser),a.setConfig({errHandler:n,dashManifestModel:o,manifestModel:i,mediaController:l,videoModel:c,streamController:T,textTracks:v,vttParser:k,ttmlParser:E}))},getTextSourceBuffer:function(){return a},getAllTracksAreDisabled:function(){return b},addEmbeddedTrack:function(e){a.addEmbeddedTrack(e)},getTextDefaultLanguage:function(){return C},setTextDefaultLanguage:function(e){(0,m.checkParameterType)(e,"string"),C=e},setTextDefaultEnabled:function(e){(0,m.checkParameterType)(e,"boolean"),(h=e)||this.setTextTrack(-1)},getTextDefaultEnabled:function(){return h},enableText:function(e){(0,m.checkParameterType)(e,"boolean"),D()!==e&&(e&&this.setTextTrack(M),e||(M=this.getCurrentTrackIdx(),this.setTextTrack(-1)))},isTextEnabled:D,setTextTrack:function(e){var t=a.getConfig(),n=t.fragmentModel,o=t.fragmentedTracks,d=t.videoModel,i=void 0,s=void 0;b=-1===e;var u=v.getCurrentTrackIdx();if(u!==e){v.setModeForTrackIdx(u,r.default.TEXT_HIDDEN),v.setCurrentTrackIdx(e),v.setModeForTrackIdx(e,r.default.TEXT_SHOWING);var c=v.getCurrentTrackInfo();if(c&&c.isFragmented&&!c.isEmbedded)for(var f=0;f<o.length;f++){var g=o[f];if(c.lang===g.lang&&c.index===g.index&&(g.id?c.id===g.id:c.id===g.index))if(g!==l.getCurrentTrackFor(r.default.FRAGMENTED_TEXT,T.getActiveStreamInfo()))n.abortRequests(),n.removeExecutedRequestsBeforeTime(),a.remove(),v.deleteCuesFromTrackIdx(u),l.setTrack(g),a.setCurrentFragmentedTrackIdx(f);else if(-1===u){for(var x=T.getActiveStreamProcessors(),m=0;m<x.length;m++)if(x[m].getType()===r.default.FRAGMENTED_TEXT){s=x[m];break}s.getIndexHandler().setCurrentTime(d.getTime()),s.getScheduleController().start()}}else if(c&&!c.isFragmented){for(x=T.getActiveStreamProcessors(),f=0;f<x.length;f++)if(x[f].getType()===r.default.TEXT){i=(s=x[f]).getMediaInfoArr();break}if(s&&i)for(f=0;f<i.length;f++)if(i[f].index===c.index&&i[f].lang===c.lang){s.selectMediaInfo(i[f]);break}}}},getCurrentTrackIdx:function(){return v.getCurrentTrackIdx()},enableForcedTextStreaming:function(e){(0,m.checkParameterType)(e,"boolean"),_=e},reset:function(){p(),a.resetEmbedded(),a.reset()}},C="",M=-1,h=!0,_=!1,v=(0,s.default)(e).getInstance(),k=(0,u.default)(e).getInstance(),E=(0,f.default)(e).getInstance(),a=(0,d.default)(e).getInstance(),I=(0,g.default)(e).getInstance(),v.initialize(),I.on(x.default.TEXT_TRACKS_QUEUE_INITIALIZED,P,t),p(),t}k.__dashjs_factory_name="TextController",exports.default=n.default.getSingletonFactory(k),module.exports=exports.default;
},{"../constants/Constants":"NqGT","../../core/FactoryMaker":"KAF6","./TextSourceBuffer":"kVOZ","./TextTracks":"fKFN","../utils/VTTParser":"JY3N","../utils/TTMLParser":"HzwB","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../utils/SupervisorTools":"LTZo"}],"qKqE":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../core/Debug"),r=e(t),n=require("./vo/DashJSError"),a=e(n),o=require("../core/EventBus"),u=e(o),f=require("../core/events/Events"),i=e(f),c=require("../core/FactoryMaker"),s=e(c),d=require("./text/TextController"),l=e(d),p=require("../core/errors/Errors"),g=e(p),h=.1;function v(e,t,n,o){var f=this.context,c=(0,u.default)(f).getInstance(),s=void 0,d=void 0,p=void 0,v=void 0,E=void 0,m=[],y=[],b=n;function S(){try{return p.buffered}catch(e){return d.error("getAllBufferRanges exception: "+e.message),null}}function O(){if(m.length>0){var e=m.shift();p.updating?x(p,e):(e(),O())}}function _(){p.updating||O()}function B(){p.updating||O()}function R(){d.error("SourceBufferSink error",t.type)}function x(e,t){m.push(t),e.updating||O()}return s={getAllBufferRanges:S,getBuffer:function(){return p},append:function(e){e?(y.push(e),v||x(p,function e(){var t=this,r=this;y.length>0&&function(){v=!0;var n=y[0];y.splice(0,1);var o=[],u=function(){var t=S();!function(e,t,r,n){t&&t.length>0&&t.length<r.length&&function(e,t){for(var r=0;r<e.length;r++){var n=Math.round(e.start(r)),a=Math.round(e.end(r));if(a===t.start||n===t.end||t.start>=n&&t.end<=a)return!0}return!1}(t,n)&&c.trigger(i.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:r.end(r.length-2),to:r.start(r.length-1),unintended:!0})}(r,o,t,n),y.length>0?e.call(this):(v=!1,b&&b({chunk:n}))};try{0===n.bytes.length?u.call(t):(o=S(),p.appendBuffer?p.appendBuffer(n.bytes):p.append(n.bytes,n),x(p,u.bind(t)))}catch(f){d.fatal('SourceBuffer append failed "'+f+'"'),y.length>0?e():v=!1,b&&b({chunk:n,error:new a.default(f.code,f.message)})}}()}.bind(this))):b({chunk:e,error:new a.default(g.default.APPEND_ERROR_CODE,g.default.APPEND_ERROR_MESSAGE)})},remove:function(t,r,n){var o=this;x(p,function(){try{t>=0&&r>t&&(n||"ended"!==e.readyState)&&p.remove(t,r),x(p,function(){c.trigger(i.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:o,from:t,to:r,unintended:!1})})}catch(u){c.trigger(i.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:o,from:t,to:r,unintended:!1,error:new a.default(u.code,u.message)})}})},abort:function(){try{"open"===e.readyState?p.abort():p.setTextTrack&&"ended"===e.readyState&&p.abort()}catch(t){d.error('SourceBuffer append abort failed: "'+t+'"')}y=[]},reset:function(t){if(p){if("function"==typeof p.removeEventListener&&(p.removeEventListener("updateend",B,!1),p.removeEventListener("error",R,!1),p.removeEventListener("abort",R,!1)),clearInterval(E),!t){try{p.getClassName&&"TextSourceBuffer"===p.getClassName()||e.removeSourceBuffer(p)}catch(r){d.error("Failed to remove source buffer from media source.")}p=null}v=!1}y=[],b=null},updateTimestampOffset:function(e){p.timestampOffset===e||isNaN(e)||x(p,function(){p.timestampOffset=e})},hasDiscontinuitiesAfter:function(e){try{var t=S();if(t&&t.length>1)for(var r=0,n=t.length;r<n;r++)if(r>0&&e<t.start(r)&&t.start(r)>t.end(r-1)+h)return!0}catch(a){d.error("hasDiscontinuities exception: "+a.message)}return!1}},function(){d=(0,r.default)(f).getInstance().getLogger(s),v=!1;var n=t.codec;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");if((p=o||e.addSourceBuffer(n)).changeType&&o&&(d.debug("Doing period transition with changeType"),p.changeType(n)),"function"==typeof p.addEventListener)try{p.addEventListener("updateend",B,!1),p.addEventListener("error",R,!1),p.addEventListener("abort",R,!1)}catch(u){E=setInterval(_,50)}else E=setInterval(_,50)}catch(i){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw i;var a=(0,l.default)(f).getInstance();p=a.getTextSourceBuffer()}}(),s}v.__dashjs_factory_name="SourceBufferSink";var E=s.default.getClassFactory(v);exports.default=E,module.exports=exports.default;
},{"../core/Debug":"Jjwb","./vo/DashJSError":"BHVF","../core/EventBus":"ASRh","../core/events/Events":"VXzW","../core/FactoryMaker":"KAF6","./text/TextController":"BJUk","../core/errors/Errors":"dCLp"}],"LQeO":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../core/Debug"),n=e(t),r=require("../core/FactoryMaker"),u=e(r);function a(e){var t=this.context,r=void 0,u=void 0,a=void 0,i=[],o=e;function s(e,t){i=i.filter(function(n){return!((isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e))})}return r={getAllBufferRanges:function(){for(var e=[],t=0;t<i.length;t++){var n=i[t];0===e.length||n.start>e[e.length-1].end?e.push({start:n.start,end:n.end}):e[e.length-1].end=n.end}var r={start:function(t){return e[t].start},end:function(t){return e[t].end}};return Object.defineProperty(r,"length",{get:function(){return e.length}}),r},append:function(e){"InitializationSegment"!==e.segmentType?(i.push(e),i.sort(function(e,t){return e.start-t.start}),a=null):a=e,u.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),o&&o({chunk:e})},remove:s,abort:function(){},discharge:function(e,t){var n=function(e,t){return i.filter(function(n){return(isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e)})}(e,t);return a&&(n.push(a),a=null),s(e,t),n},reset:function(){i=[],a=null,o=null},updateTimestampOffset:function(){},hasDiscontinuitiesAfter:function(){return!1}},u=(0,n.default)(t).getInstance().getLogger(r),r}a.__dashjs_factory_name="PreBufferSink";var i=u.default.getClassFactory(a);exports.default=i,module.exports=exports.default;
},{"../core/Debug":"Jjwb","../core/FactoryMaker":"KAF6"}],"U5Gs":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),r=e(t),a=-1,o={DEFAULT:.5,STRONG:1,WEAK:0};function u(e,t,r){return{quality:void 0===e?a:e,reason:void 0===t?null:t,priority:function(e){var t=o.DEFAULT;return e!==o.DEFAULT&&e!==o.STRONG&&e!==o.WEAK||(t=e),t}(r)}}u.__dashjs_factory_name="SwitchRequest";var s=r.default.getClassFactory(u);s.NO_CHANGE=a,s.PRIORITY=o,r.default.updateClassFactory(u.__dashjs_factory_name,s),exports.default=s,module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6"}],"oGLv":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../controllers/BufferController"),r=e(t),o=require("../../controllers/AbrController"),a=e(o),n=require("../../../core/FactoryMaker"),u=e(n),l=require("../../../core/Debug"),s=e(l),i=require("../SwitchRequest"),f=e(i),g=require("../../constants/Constants"),c=e(g);function d(e){e=e||{};var t=this.context,o=e.metricsModel,n=void 0,u=void 0;return n={getMaxIndex:function(e){var n=(0,f.default)(t).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return n;!function(){if(!o||!o.hasOwnProperty("getReadOnlyMetricsFor"))throw new Error(c.default.MISSING_CONFIG_ERROR)}();var l=e.getMediaInfo(),s=e.getMediaType(),i=o.getReadOnlyMetricsFor(s),g=e.getScheduleController(),d=e.getAbrController(),h=e.getStreamInfo(),y=h&&h.manifestInfo?h.manifestInfo.isDynamic:null,p=d.getThroughputHistory(),O=p.getSafeAverageThroughput(s,y),A=p.getAverageLatency(s),M=i.BufferState.length>0?i.BufferState[i.BufferState.length-1]:null,_=e.useBufferOccupancyABR();return!i||isNaN(O)||!M||_?n:(d.getAbandonmentStateFor(s)!==a.default.ABANDON_LOAD&&(M.state===r.default.BUFFER_LOADED||y)&&(n.quality=d.getQualityForBitrate(l,O,A),g.setTimeToLoadDelay(0),u.debug("requesting switch to index: ",n.quality,"type: ",s,"Average throughput",Math.round(O),"kbps"),n.reason={throughput:O,latency:A}),n)},reset:function(){}},u=(0,s.default)(t).getInstance().getLogger(n),n}d.__dashjs_factory_name="ThroughputRule",exports.default=u.default.getClassFactory(d),module.exports=exports.default;
},{"../../controllers/BufferController":"P0rN","../../controllers/AbrController":"MLDH","../../../core/FactoryMaker":"KAF6","../../../core/Debug":"Jjwb","../SwitchRequest":"U5Gs","../../constants/Constants":"NqGT"}],"LIXL":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../controllers/BufferController"),r=e(t),n=require("../../../core/EventBus"),u=e(n),f=require("../../../core/events/Events"),a=e(f),o=require("../../../core/FactoryMaker"),i=e(o),s=require("../../../core/Debug"),l=e(s),d=require("../SwitchRequest"),c=e(d),g=require("../../constants/Constants"),v=e(g);function y(e){e=e||{};var t=.5,n=this.context,f=(0,u.default)(n).getInstance(),o=e.metricsModel,i=e.dashMetrics,s=void 0,d=void 0,g=void 0;function y(){g={}}function B(){y()}return s={getMaxIndex:function(e){var u=(0,c.default)(n).create();if(!e||!e.hasOwnProperty("getMediaType"))return u;!function(){if(!(o&&o.hasOwnProperty("getReadOnlyMetricsFor")&&i&&i.hasOwnProperty("getCurrentBufferLevel")))throw new Error(v.default.MISSING_CONFIG_ERROR)}();var f=e.getMediaType(),a=o.getReadOnlyMetricsFor(f),s=a.BufferState.length>0?a.BufferState[a.BufferState.length-1]:null,l=e.getRepresentationInfo().fragmentDuration;if(!s||!function(e,t){g[e]=g[e]||{};var n=!1;return g[e].firstBufferLoadedEvent?n=!0:t&&t.state===r.default.BUFFER_LOADED&&(g[e].firstBufferLoadedEvent=!0,n=!0),n}(f,s)||!l)return u;if(s.state===r.default.BUFFER_EMPTY)d.debug("Switch to index 0; buffer is empty."),u.quality=0,u.reason="InsufficientBufferRule: Buffer is empty";else{var y=e.getMediaInfo(),B=e.getAbrController(),h=B.getThroughputHistory(),p=i.getCurrentBufferLevel(a),E=h.getAverageThroughput(f),_=h.getAverageLatency(f),I=E*(p/l)*t;u.quality=B.getQualityForBitrate(y,I,_),u.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return u},reset:function(){y(),f.off(a.default.PLAYBACK_SEEKING,B,s)}},d=(0,l.default)(n).getInstance().getLogger(s),y(),f.on(a.default.PLAYBACK_SEEKING,B,s),s}y.__dashjs_factory_name="InsufficientBufferRule",exports.default=i.default.getClassFactory(y),module.exports=exports.default;
},{"../../controllers/BufferController":"P0rN","../../../core/EventBus":"ASRh","../../../core/events/Events":"VXzW","../../../core/FactoryMaker":"KAF6","../../../core/Debug":"Jjwb","../SwitchRequest":"U5Gs","../../constants/Constants":"NqGT"}],"af9h":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../SwitchRequest"),a=e(t),r=require("../../../core/FactoryMaker"),d=e(r),i=require("../../../core/Debug"),n=e(i);function o(e){e=e||{};var t=1.8,r=500,d=5,i=this.context,s=e.mediaPlayerModel,u=e.metricsModel,l=e.dashMetrics,f=void 0,y=void 0,g=void 0,b=void 0,m=void 0;function h(){g={},b={},m=[]}return f={shouldAbandon:function(e){var n=(0,a.default)(i).create(a.default.NO_CHANGE,{name:o.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return n;var f,h,p=e.getMediaInfo(),c=e.getMediaType(),T=e.getCurrentRequest();if(!isNaN(T.index)){f=c,h=T.index,g[f]=g[f]||{},g[f][h]=g[f][h]||{};var w=s.getStableBufferTime();if(l.getCurrentBufferLevel(u.getReadOnlyMetricsFor(c))>w)return n;var v=g[c][T.index];if(null===v||null===T.firstByteDate||b.hasOwnProperty(v.id))return n;if(void 0===v.firstByteTime&&(m[c]=[],v.firstByteTime=T.firstByteDate.getTime(),v.segmentDuration=T.duration,v.bytesTotal=T.bytesTotal,v.id=T.index),v.bytesLoaded=T.bytesLoaded,v.elapsedTime=(new Date).getTime()-v.firstByteTime,v.bytesLoaded>0&&v.elapsedTime>0&&function(e,t){m[e]=m[e]||[],m[e].push(t)}(c,Math.round(8*v.bytesLoaded/v.elapsedTime)),m[c].length>=d&&v.elapsedTime>r&&v.bytesLoaded<v.bytesTotal){var B=m[c].reduce(function(e,t){return e+t},0);if(v.measuredBandwidthInKbps=Math.round(B/m[c].length),v.estimatedTimeOfDownload=+(8*v.bytesTotal/v.measuredBandwidthInKbps/1e3).toFixed(2),v.estimatedTimeOfDownload<v.segmentDuration*t||0===e.getRepresentationInfo().quality)return n;if(!b.hasOwnProperty(v.id)){var M=e.getAbrController(),_=v.bytesTotal-v.bytesLoaded,I=M.getBitrateList(p),O=M.getQualityForBitrate(p,v.measuredBandwidthInKbps*s.getBandwidthSafetyFactor());_>v.bytesTotal*I[O].bitrate/I[M.getQualityFor(c,p.streamInfo)].bitrate&&(n.quality=O,n.reason.throughput=v.measuredBandwidthInKbps,n.reason.fragmentID=v.id,b[v.id]=v,y.debug("( ",c,"frag id",v.id,") is asking to abandon and switch to quality to ",O," measured bandwidth was",v.measuredBandwidthInKbps),delete g[c][v.id])}}else v.bytesLoaded===v.bytesTotal&&delete g[c][v.id]}return n},reset:h},y=(0,n.default)(i).getInstance().getLogger(f),h(),f}o.__dashjs_factory_name="AbandonRequestsRule",exports.default=d.default.getClassFactory(o),module.exports=exports.default;
},{"../SwitchRequest":"U5Gs","../../../core/FactoryMaker":"KAF6","../../../core/Debug":"Jjwb"}],"XZ9t":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../../core/FactoryMaker"),t=e(r),a=require("../SwitchRequest"),o=e(a),d=require("../../../core/Debug"),u=e(d);function s(){var e=this.context,r=void 0,t=void 0,a=.15,d=375;return r={getMaxIndex:function(r){var u=r.getDroppedFramesHistory();if(u){for(var s=u.getFrameHistory(),i=0,n=0,l=o.default.NO_CHANGE,f=1;f<s.length;f++)if(s[f]&&(i=s[f].droppedVideoFrames,(n=s[f].totalVideoFrames)>d&&i/n>a)){l=f-1,t.debug("index: "+l+" Dropped Frames: "+i+" Total Frames: "+n);break}return(0,o.default)(e).create(l,{droppedFrames:i})}return(0,o.default)(e).create()}},t=(0,u.default)(e).getInstance().getLogger(r),r}s.__dashjs_factory_name="DroppedFramesRule",exports.default=t.default.getClassFactory(s),module.exports=exports.default;
},{"../../../core/FactoryMaker":"KAF6","../SwitchRequest":"U5Gs","../../../core/Debug":"Jjwb"}],"jHpb":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../../core/FactoryMaker"),r=e(t),o=require("../../../core/Debug"),u=e(o),s=require("../SwitchRequest"),i=e(s);function a(){var e=this.context,t=void 0,r=void 0,o=.075,s=6;return t={getMaxIndex:function(t){for(var u=t?t.getSwitchHistory():null,a=u?u.getSwitchRequests():[],d=0,n=0,l=0,c=(0,i.default)(e).create(),p=0;p<a.length;p++)if(void 0!==a[p]&&(d+=a[p].drops,n+=a[p].noDrops,l+=a[p].dropSize,d+n>=s&&d/n>o)){c.quality=p>0&&a[p].drops>0?p-1:p,c.reason={index:c.quality,drops:d,noDrops:n,dropSize:l},r.debug("Switch history rule index: "+c.quality+" samples: "+(d+n)+" drops: "+d);break}return c}},r=(0,u.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="SwitchHistoryRule",exports.default=r.default.getClassFactory(a),module.exports=exports.default;
},{"../../../core/FactoryMaker":"KAF6","../../../core/Debug":"Jjwb","../SwitchRequest":"U5Gs"}],"Ievz":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../constants/MetricsConstants"),a=e(t),r=require("../SwitchRequest"),n=e(r),i=require("../../../core/FactoryMaker"),u=e(i),l=require("../../vo/metrics/HTTPRequest"),s=require("../../../core/EventBus"),f=e(s),o=require("../../../core/events/Events"),c=e(o),m=require("../../../core/Debug"),d=e(m),g=0,p=1,h=2,T=10,S=2,v=.99;function N(e){e=e||{};var t=this.context,r=e.dashMetrics,i=e.metricsModel,u=e.mediaPlayerModel,s=(0,f.default)(t).getInstance(),o=void 0,m=void 0,N=void 0;function M(e,t,a){var r=a.reduce(function(e,t,r){return t>a[e]?r:e},0);if(0===r)return null;var n=Math.max(e,T+S*t.length),i=(a[r]-1)/(n/T-1);return{gp:i,Vp:T/i}}function y(e){var t={},a=e.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),r=function(e){return e.map(function(e){return Math.log(e)})}(a);r=r.map(function(e){return e-r[0]+1});var n=u.getStableBufferTime(),i=M(n,a,r);return i?(t.state=p,t.bitrates=a,t.utilities=r,t.stableBufferTime=n,t.Vp=i.Vp,t.gp=i.gp,t.lastQuality=0,B(t)):t.state=g,t}function B(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function E(e,t){var a=u.getStableBufferTime();if(e.stableBufferTime!==a){var n=M(a,e.bitrates,e.utilities);if(n.Vp!==e.Vp||n.gp!==e.gp){var l=r.getCurrentBufferLevel(i.getReadOnlyMetricsFor(t)),s=l+e.placeholderBuffer;s-=T,s*=n.Vp/e.Vp,s+=T,e.stableBufferTime=a,e.Vp=n.Vp,e.gp=n.gp,e.placeholderBuffer=Math.max(0,s-l)}}}function A(e,t){return e.Vp*(e.utilities[t]+e.gp)}function D(e,t){for(var a=e.bitrates[t],r=e.utilities[t],n=0,i=t-1;i>=0;--i)if(e.utilities[i]<e.utilities[t]){var u=e.bitrates[i],l=e.utilities[i],s=e.Vp*(e.gp+(a*l-u*r)/(a-u));n=Math.max(n,s)}return n}function R(){for(var e in N)N.hasOwnProperty(e)&&N[e].state===h&&(N[e].placeholderBuffer=0)}function _(){for(var e in N)if(N.hasOwnProperty(e)){var t=N[e];t.state!==g&&(t.state=p,B(t))}}function I(){}function F(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=N[e.chunk.mediaInfo.type];if(t&&t.state!==g){var a=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||a>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=a,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=a,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,q(t,e.chunk.mediaInfo.type)}}}function b(e){if(e&&e.metric===a.default.HTTP_REQUEST&&e.value&&e.value.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=N[e.mediaType];t&&t.state!==g&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),q(t,e.mediaType))}}function q(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=v,!isNaN(e.lastSegmentFinishTimeMs)){var a=r.getCurrentBufferLevel(i.getReadOnlyMetricsFor(t))+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),n=A(e,e.lastQuality),u=Math.max(0,n-a);e.placeholderBuffer=Math.min(u,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function Q(e){if(e){var t=N[e.mediaType];t&&t.state!==g&&(t.abrQuality=e.newQuality)}}function C(e){if(e){var t=N[e.mediaType];if(t&&t.state!==g){var a=r.getCurrentBufferLevel(i.getReadOnlyMetricsFor(e.mediaType)),n=void 0;n=t.abrQuality>0?D(t,t.abrQuality):T;var u=Math.max(0,n-a);t.placeholderBuffer=Math.min(t.placeholderBuffer,u)}}}function L(){N={}}return o={getMaxIndex:function(e){var a=e.getMediaInfo(),u=e.getMediaType(),l=i.getReadOnlyMetricsFor(u),s=e.getScheduleController(),f=e.getStreamInfo(),o=e.getAbrController(),c=o.getThroughputHistory(),d=f?f.id:null,T=f&&f.manifestInfo&&f.manifestInfo.isDynamic,S=e.useBufferOccupancyABR(),v=(0,n.default)(t).create();if(v.reason=v.reason||{},!S)return v;s.setTimeToLoadDelay(0);var M=function(e){var t=e.getMediaType(),a=N[t];return a?a.state!==g&&E(a,t):(a=y(e),N[t]=a),a}(e);if(M.state===g)return v;var R=r.getCurrentBufferLevel(l),_=c.getAverageThroughput(u,T),I=c.getSafeAverageThroughput(u,T),F=c.getAverageLatency(u),b=void 0;if(v.reason.state=M.state,v.reason.throughput=_,v.reason.latency=F,isNaN(_))return v;switch(M.state){case p:b=o.getQualityForBitrate(a,I,F),v.quality=b,v.reason.throughput=I,M.placeholderBuffer=Math.max(0,D(M,b)-R),M.lastQuality=b,!isNaN(M.lastSegmentDurationS)&&R>=M.lastSegmentDurationS&&(M.state=h);break;case h:!function(e,t){var a=Date.now();if(isNaN(e.lastSegmentFinishTimeMs))isNaN(e.lastCallTimeMs)||(r=.001*(a-e.lastCallTimeMs),e.placeholderBuffer+=Math.max(0,r));else{var r=.001*(a-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,r)}e.lastCallTimeMs=a,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,E(e,t)}(M,u),b=function(e,t){for(var a=e.bitrates.length,r=NaN,n=NaN,i=0;i<a;++i){var u=(e.Vp*(e.utilities[i]+e.gp)-t)/e.bitrates[i];(isNaN(n)||u>=n)&&(n=u,r=i)}return r}(M,R+M.placeholderBuffer);var q=o.getQualityForBitrate(a,I,F);b>M.lastQuality&&b>q&&(b=Math.max(q,M.lastQuality));var Q=Math.max(0,R+M.placeholderBuffer-A(M,b));Q<=M.placeholderBuffer?(M.placeholderBuffer-=Q,Q=0):(Q-=M.placeholderBuffer,M.placeholderBuffer=0,b<o.getTopQualityIndexFor(u,d)?s.setTimeToLoadDelay(1e3*Q):Q=0),v.quality=b,v.reason.throughput=_,v.reason.latency=F,v.reason.bufferLevel=R,v.reason.placeholderBuffer=M.placeholderBuffer,v.reason.delay=Q,M.lastQuality=b;break;default:m.debug("BOLA ABR rule invoked in bad state."),v.quality=o.getQualityForBitrate(a,I,F),v.reason.state=M.state,v.reason.throughput=I,v.reason.latency=F,M.state=p,B(M)}return v},reset:function(){L(),s.off(c.default.BUFFER_EMPTY,R,o),s.off(c.default.PLAYBACK_SEEKING,_,o),s.off(c.default.PERIOD_SWITCH_STARTED,I,o),s.off(c.default.MEDIA_FRAGMENT_LOADED,F,o),s.off(c.default.METRIC_ADDED,b,o),s.off(c.default.QUALITY_CHANGE_REQUESTED,Q,o),s.off(c.default.FRAGMENT_LOADING_ABANDONED,C,o)}},m=(0,d.default)(t).getInstance().getLogger(o),L(),s.on(c.default.BUFFER_EMPTY,R,o),s.on(c.default.PLAYBACK_SEEKING,_,o),s.on(c.default.PERIOD_SWITCH_STARTED,I,o),s.on(c.default.MEDIA_FRAGMENT_LOADED,F,o),s.on(c.default.METRIC_ADDED,b,o),s.on(c.default.QUALITY_CHANGE_REQUESTED,Q,o),s.on(c.default.FRAGMENT_LOADING_ABANDONED,C,o),o}N.__dashjs_factory_name="BolaRule",exports.default=u.default.getClassFactory(N),module.exports=exports.default;
},{"../../constants/MetricsConstants":"Nprb","../SwitchRequest":"U5Gs","../../../core/FactoryMaker":"KAF6","../../vo/metrics/HTTPRequest":"RDXP","../../../core/EventBus":"ASRh","../../../core/events/Events":"VXzW","../../../core/Debug":"Jjwb"}],"yUDT":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./ThroughputRule"),u=e(t),r=require("./InsufficientBufferRule"),a=e(r),l=require("./AbandonRequestsRule"),i=e(l),d=require("./DroppedFramesRule"),o=e(d),n=require("./SwitchHistoryRule"),f=e(n),s=require("./BolaRule"),c=e(s),R=require("../../../core/FactoryMaker"),h=e(R),A=require("../SwitchRequest"),N=e(A),_="qualitySwitchRules",p="abandonFragmentRules";function O(e){e=e||{};var t=this.context,r=e.mediaPlayerModel,l=e.metricsModel,d=e.dashMetrics,n=void 0,s=void 0;function R(e){return e.filter(function(e){return e.quality>N.default.NO_CHANGE})}function h(e){var u,r={},a=void 0,l=void 0,i=void 0,d=void 0;if(0!==e.length){for(r[N.default.PRIORITY.STRONG]=N.default.NO_CHANGE,r[N.default.PRIORITY.WEAK]=N.default.NO_CHANGE,r[N.default.PRIORITY.DEFAULT]=N.default.NO_CHANGE,a=0,u=e.length;a<u;a+=1)(l=e[a]).quality!==N.default.NO_CHANGE&&(r[l.priority]=r[l.priority]>N.default.NO_CHANGE?Math.min(r[l.priority],l.quality):l.quality);return r[N.default.PRIORITY.WEAK]!==N.default.NO_CHANGE&&(i=r[N.default.PRIORITY.WEAK]),r[N.default.PRIORITY.DEFAULT]!==N.default.NO_CHANGE&&(i=r[N.default.PRIORITY.DEFAULT]),r[N.default.PRIORITY.STRONG]!==N.default.NO_CHANGE&&(i=r[N.default.PRIORITY.STRONG]),i!==N.default.NO_CHANGE&&(d=i),(0,N.default)(t).create(d)}}return{initialize:function(){n=[],s=[],r.getUseDefaultABRRules()&&(n.push((0,c.default)(t).create({metricsModel:l,dashMetrics:d,mediaPlayerModel:r})),n.push((0,u.default)(t).create({metricsModel:l,dashMetrics:d})),n.push((0,a.default)(t).create({metricsModel:l,dashMetrics:d})),n.push((0,f.default)(t).create()),n.push((0,o.default)(t).create()),s.push((0,i.default)(t).create({metricsModel:l,dashMetrics:d,mediaPlayerModel:r}))),r.getABRCustomRules().forEach(function(e){e.type===_&&n.push(e.rule(t).create()),e.type===p&&s.push(e.rule(t).create())})},reset:function(){[n,s].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),n=[],s=[]},getMaxQuality:function(e){return h(R(n.map(function(t){return t.getMaxIndex(e)})))||(0,N.default)(t).create()},shouldAbandonFragment:function(e){return h(R(s.map(function(t){return t.shouldAbandon(e)})))||(0,N.default)(t).create()}}}O.__dashjs_factory_name="ABRRulesCollection";var E=h.default.getClassFactory(O);E.QUALITY_SWITCH_RULES=_,E.ABANDON_FRAGMENT_RULES=p,h.default.updateSingletonFactory(O.__dashjs_factory_name,E),exports.default=E,module.exports=exports.default;
},{"./ThroughputRule":"oGLv","./InsufficientBufferRule":"LIXL","./AbandonRequestsRule":"af9h","./DroppedFramesRule":"XZ9t","./SwitchHistoryRule":"jHpb","./BolaRule":"Ievz","../../../core/FactoryMaker":"KAF6","../SwitchRequest":"U5Gs"}],"nhr8":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};exports.default=e,module.exports=exports.default;
},{}],"lTbQ":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../core/FactoryMaker"),t=e(r);function n(e){var r=(e=e||{}).abrController,t=e.switchHistory,n=e.droppedFramesHistory,o=e.currentRequest,u=e.useBufferOccupancyABR,s=e.streamProcessor?e.streamProcessor.getScheduleController():null,c=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null;function a(){return c?c.mediaInfo:null}return{getMediaType:function(){var e=a();return e?e.type:null},getMediaInfo:a,getDroppedFramesHistory:function(){return n},getCurrentRequest:function(){return o},getSwitchHistory:function(){return t},getStreamInfo:function(){var e=a();return e?e.streamInfo:null},getScheduleController:function(){return s},getAbrController:function(){return r},getRepresentationInfo:function(){return c},useBufferOccupancyABR:function(){return u}}}n.__dashjs_factory_name="RulesContext",exports.default=t.default.getClassFactory(n),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6"}],"ftcj":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var o=require("../../core/FactoryMaker"),r=e(o),t=require("./SwitchRequest"),u=e(t),d=8;function l(){var e=[],o=[];return{push:function(r){r.newValue===u.default.NO_CHANGE&&(r.newValue=r.oldValue),e[r.oldValue]||(e[r.oldValue]={noDrops:0,drops:0,dropSize:0});var t=r.newValue-r.oldValue,l=t<0?1:0,a=l?-t:0,s=l?0:1;if(e[r.oldValue].drops+=l,e[r.oldValue].dropSize+=a,e[r.oldValue].noDrops+=s,o.push({idx:r.oldValue,noDrop:s,drop:l,dropSize:a}),o.length>d){var i=o.shift();e[i.idx].drops-=i.drop,e[i.idx].dropSize-=i.dropSize,e[i.idx].noDrops-=i.noDrop}},getSwitchRequests:function(){return e},reset:function(){e=[],o=[]}}}l.__dashjs_factory_name="SwitchRequestHistory";var a=r.default.getClassFactory(l);exports.default=a,module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","./SwitchRequest":"U5Gs"}],"Vufq":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../core/FactoryMaker"),o=e(r);function t(){var e=[],r=0,o=0;return{push:function(t,a){var d=a&&a.droppedVideoFrames?a.droppedVideoFrames:0,s=a&&a.totalVideoFrames?a.totalVideoFrames:0,i=d-r;r=d;var u=s-o;o=s,isNaN(t)||(e[t]?(e[t].droppedVideoFrames+=i,e[t].totalVideoFrames+=u):e[t]={droppedVideoFrames:i,totalVideoFrames:u})},getFrameHistory:function(){return e},reset:function(t){e=[],r=t.droppedVideoFrames,o=t.totalVideoFrames}}}t.__dashjs_factory_name="DroppedFramesHistory";var a=o.default.getClassFactory(t);exports.default=a,module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6"}],"v7Hc":[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/Constants"),a=t(e),r=require("../../core/FactoryMaker"),n=t(r);function o(t){var e=20,r=3,n=4,o=4,i=1.3,s=1.3,u=8,f=3,l=2,h=1,d=(t=t||{}).mediaPlayerModel,c=void 0,g=void 0,v=void 0,p=void 0,m=void 0;function E(t,e,a,r){var n=Math.pow(.5,a/r.fast);t.fastEstimate=(1-n)*e+n*t.fastEstimate;var o=Math.pow(.5,a/r.slow);t.slowEstimate=(1-o)*e+o*t.slowEstimate,t.totalWeight+=a}function w(t,e,u){return d.getMovingAverageMethod()!==a.default.MOVING_AVERAGE_SLIDING_WINDOW?function(t,e){var a=t?m.throughputHalfLife:m.latencyHalfLife,r=t?v[e]:p[e];if(!r||r.totalWeight<=0)return NaN;var n=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/a.fast)),o=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/a.slow));return t?Math.min(n,o):Math.max(n,o)}(t,e):function(t,e,a){var u=function(t,e,a){var u=void 0,f=void 0;if(t?(u=c[e],f=a?r:n):(u=g[e],f=o),u){if(f>=u.length)f=u.length;else if(t)for(var l=1;l<f;++l){var h=u[l]/u[l-1];if((h>=s||h<=1/i)&&(f+=1)===u.length)break}}else f=0;return f}(t,e,a),f=(t?c:g)[e];if(0===u||!f||0===f.length)return NaN;return(f=f.slice(-u)).reduce(function(t,e){return t+e})/f.length}(t,e,u)}function y(t,e){return w(!0,t,e)}function M(t){c[t]=c[t]||[],g[t]=g[t]||[],v[t]=v[t]||{fastEstimate:0,slowEstimate:0,totalWeight:0},p[t]=p[t]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function L(){c={},g={},v={},p={}}var _={push:function(t,r,n){if(r.trace&&r.trace.length){var o=r.tresponse.getTime()-r.trequest.getTime()||1,i=r._tfinish.getTime()-r.tresponse.getTime()||1,s=r.trace.reduce(function(t,e){return t+e.b[0]},0),u=void 0;u=d.getLowLatencyEnabled()?r.trace.reduce(function(t,e){return t+e.d},0):n?i:o+i;var f=Math.round(8*s/u);if(M(t),function(t,e,r){return t===a.default.VIDEO?r<d.getCacheLoadThresholdForType(a.default.VIDEO):t===a.default.AUDIO?r<d.getCacheLoadThresholdForType(a.default.AUDIO):void 0}(t,0,i)){if(c[t].length>0&&!c[t].hasCachedEntries)return;c[t].hasCachedEntries=!0}else c[t]&&c[t].hasCachedEntries&&function(t){delete c[t],delete g[t],delete v[t],delete p[t],M(t)}(t);c[t].push(f),c[t].length>e&&c[t].shift(),g[t].push(o),g[t].length>e&&g[t].shift(),E(v[t],f,.001*i,m.throughputHalfLife),E(p[t],o,1,m.latencyHalfLife)}},getAverageThroughput:y,getSafeAverageThroughput:function(t,e){var a=y(t,e);return isNaN(a)||(a*=d.getBandwidthSafetyFactor()),a},getAverageLatency:function(t){return w(!1,t)},reset:L};return m={throughputHalfLife:{fast:f,slow:u},latencyHalfLife:{fast:h,slow:l}},L(),_}o.__dashjs_factory_name="ThroughputHistory",exports.default=n.default.getClassFactory(o),module.exports=exports.default;
},{"../constants/Constants":"NqGT","../../core/FactoryMaker":"KAF6"}],"MLDH":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../rules/abr/ABRRulesCollection"),r=e(t),i=require("../constants/Constants"),a=e(i),o=require("../constants/MetricsConstants"),n=e(o),u=require("../vo/BitrateInfo"),l=e(u),d=require("../models/FragmentModel"),f=e(d),s=require("../../core/EventBus"),c=e(s),v=require("../../core/events/Events"),y=e(v),m=require("../../core/FactoryMaker"),g=e(m),h=require("../rules/RulesContext"),p=e(h),T=require("../rules/SwitchRequest"),A=e(T),I=require("../rules/SwitchRequestHistory"),R=e(I),E=require("../rules/DroppedFramesHistory"),O=e(E),w=require("../rules/ThroughputHistory"),P=e(w),M=require("../vo/metrics/HTTPRequest"),b=require("../../core/Debug"),_=e(b),B=require("../utils/SupervisorTools"),D="abandonload",x="allowload",S=1e3,F=100,C=0;function q(){var e=this.context,t=(0,_.default)(e).getInstance(),i=(0,c.default)(e).getInstance(),o=void 0,u=void 0,d=void 0,s=void 0,v=void 0,m=void 0,g=void 0,h=void 0,T=void 0,I=void 0,E=void 0,w=void 0,b=void 0,q=void 0,L=void 0,N=void 0,V=void 0,H=void 0,Q=void 0,k=void 0,U=void 0,G=void 0,Y=void 0,W=void 0,j=void 0,z=void 0,J=void 0,K=void 0,X=void 0,Z=void 0;function $(){(d=(0,r.default)(e).create({metricsModel:K,dashMetrics:X,mediaPlayerModel:U,adapter:Q})).initialize()}function ee(){v={video:!0,audio:!0},m={},g={},h={},T={},E={},I={},W={},J={},b=!1,Z=!0,q=!1,void 0===L&&(L=!1),Y=void 0,j=void 0,z=void 0,clearTimeout(w),w=null}function te(e){e.mediaType===a.default.VIDEO&&(Y=e.oldQuality,j.push(Y,k.getPlaybackQuality()))}function re(e){e.metric!==n.default.HTTP_REQUEST||!e.value||e.value.type!==M.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==a.default.AUDIO&&e.mediaType!==a.default.VIDEO||z.push(e.mediaType,e.value,Z),e.metric!==n.default.BUFFER_LEVEL||e.mediaType!==a.default.AUDIO&&e.mediaType!==a.default.VIDEO||function(e,t){var r=U.getABRStrategy();if(r===a.default.ABR_STRATEGY_BOLA)return void(J[e]=!0);if(r===a.default.ABR_STRATEGY_THROUGHPUT)return void(J[e]=!1);var i=U.getStableBufferTime(),o=i,n=.5*i,l=J[e],d=t>(l?n:o);J[e]=d,d!==l&&(d?u.info("AbrController ("+e+") switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):u.info("AbrController ("+e+") switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."))}(e.mediaType,.001*e.value.level)}function ie(e,t){return m[t]=m[t]||{},m[t].hasOwnProperty(e)||(m[t][e]=0),function(e,t){if(t!==a.default.VIDEO||!b||!I[t])return e;L||he();var r=H.getValue(),i=Q.getAdaptationForType(r,0,t).Representation,o=e;if(N>0&&V>0){for(;o>0&&i[o]&&N<i[o].width&&N-i[o-1].width<i[o].width-N;)o-=1;i.length-2>=o&&i[o].width===i[o+1].width&&(o=Math.min(e,o+1))}return o}(function(e,t,r){var i=le(t);if(isNaN(i)||i>=1||i<0)return e;return Math.min(e,Math.round(r*i))}(function(e,t){var r=e;if(!I[t])return r;var i=ue(t);void 0!==i&&(r=Math.max(e,i));var a=ne(t);void 0!==a&&(r=Math.min(r,a));return r}(m[t][e],e),e,m[t][e]),e)}function ae(e){return h.hasOwnProperty("max")&&h.max.hasOwnProperty(e)?h.max[e]:NaN}function oe(e){return h.hasOwnProperty("min")&&h.min.hasOwnProperty(e)?h.min[e]:NaN}function ne(e){var t=ae(e);return t?ve(I[e].getMediaInfo(),t):void 0}function ue(e){var t=oe(e);if(t){var r=I[e].getMediaInfo(),i=ye(r),a=ve(r,t);return i[a]&&a<i.length-1&&i[a].bitrate<1e3*t&&a++,a}}function le(e){return T.hasOwnProperty("max")&&T.max.hasOwnProperty(e)?T.max[e]:1}function de(e){return v[e]}function fe(e,t,r,i){var a=t.id,o=ge(e);(0,B.checkInteger)(r);var n=ie(e,a);r!==o&&r>=0&&r<=n&&se(e,o,r,n,i)}function se(e,r,a,o,n){if(e&&I[e]){var l=I[e].getStreamInfo(),d=l?l.id:null;if(t.getLogToBrowserConsole()){var f=X.getCurrentBufferLevel(K.getReadOnlyMetricsFor(e));u.info("AbrController ("+e+") switch from "+r+" to "+a+"/"+o+" (buffer: "+f+") "+(n?JSON.stringify(n):"."))}!function(e,t,r){g[t]=g[t]||{},g[t][e]=r}(e,d,a),i.trigger(y.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:l,oldQuality:r,newQuality:a,reason:n})}}function ce(e,t){E[e].state=t}function ve(e,t,r){var i=e&&e.type?I[e.type].getRepresentationInfo():null;if(Z&&r&&i&&i.fragmentDuration){r/=1e3;var a=i.fragmentDuration;if(r>a)return 0;t*=1-r/a}for(var o=ye(e),n=o.length-1;n>=0;n--){if(1e3*t>=o[n].bitrate)return n}return C}function ye(e){var t=[];if(!e||!e.bitrateList)return t;for(var r=e.bitrateList,i=e.type,a=void 0,o=0,n=r.length;o<n;o++)(a=new l.default).mediaType=i,a.qualityIndex=o,a.bitrate=r[o].bandwidth,a.width=r[o].width,a.height=r[o].height,a.scanType=r[o].scanType,t.push(a);return t}function me(e){return J[e]}function ge(e){if(e&&I[e]){var t=I[e].getStreamInfo(),r=t?t.id:null;if(r)return g[r]=g[r]||{},g[r].hasOwnProperty(e)||(g[r][e]=C),g[r][e]}return C}function he(){if(k){var e=q&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;N=k.getClientWidth()*e,V=k.getClientHeight()*e}}function pe(t){var r=t.request.mediaType;if(de(r)){var i=I[r];if(!i)return;var a=(0,p.default)(e).create({abrController:o,streamProcessor:i,currentRequest:t.request,useBufferOccupancyABR:me(r)}),n=d.shouldAbandonFragment(a);if(n.quality>A.default.NO_CHANGE){var u=i.getFragmentModel();u.getRequests({state:f.default.FRAGMENT_MODEL_LOADING,index:t.request.index})[0]&&(u.abortRequests(),ce(r,D),W[r].reset(),W[r].push({oldValue:ge(r,s.getActiveStreamInfo()),newValue:n.quality,confidence:1,reason:n.reason}),fe(r,s.getActiveStreamInfo(),n.quality,n.reason),clearTimeout(w),w=setTimeout(function(){ce(r,x),w=null},U.getAbandonLoadTimeout()))}}}return o={isPlayingAtTopQuality:function(e){var t=e?e.id:null,r=ge(a.default.AUDIO),i=ge(a.default.VIDEO);return r===ie(a.default.AUDIO,t)&&i===ie(a.default.VIDEO,t)},updateTopQualityIndex:function(e){var t=e.type,r=e.streamInfo.id,i=e.representationCount-1;return function(e,t,r){m[t]=m[t]||{},m[t][e]=r}(t,r,i),i},getThroughputHistory:function(){return z},getBitrateList:ye,getQualityForBitrate:ve,getMaxAllowedBitrateFor:ae,getTopBitrateInfoFor:function(e){if(e&&I&&I[e]){var t=I[e].getStreamInfo();if(t&&t.id){var r=ie(e,t.id),i=ye(I[e].getMediaInfo());return i[r]?i[r]:null}}return null},getMinAllowedBitrateFor:oe,setMaxAllowedBitrateFor:function(e,t){(0,B.checkParameterType)(t,"number"),(0,B.checkIsVideoOrAudioType)(e),h.max=h.max||{},h.max[e]=t},setMinAllowedBitrateFor:function(e,t){(0,B.checkParameterType)(t,"number"),(0,B.checkIsVideoOrAudioType)(e),h.min=h.min||{},h.min[e]=t},getMaxAllowedIndexFor:ne,getMinAllowedIndexFor:ue,getMaxAllowedRepresentationRatioFor:le,setMaxAllowedRepresentationRatioFor:function(e,t){T.max=T.max||{},T.max[e]=t},getInitialBitrateFor:function(e){!function(){if(!G||!G.hasOwnProperty("getSavedBitrateSettings"))throw new Error(a.default.MISSING_CONFIG_ERROR)}();var t=G.getSavedBitrateSettings(e);if(!h.hasOwnProperty(e))if(T.hasOwnProperty(e)){var r=H.getValue(),i=Q.getAdaptationForType(r,0,e).Representation;if(Array.isArray(i)){var o=Math.max(Math.round(i.length*T[e])-1,0);h[e]=i[o].bandwidth}else h[e]=0}else isNaN(t)?h[e]=e===a.default.VIDEO?S:F:h[e]=t;return h[e]},setInitialBitrateFor:function(e,t){(0,B.checkIsVideoOrAudioType)(e),(0,B.checkParameterType)(t,"number"),h[e]=t},getInitialRepresentationRatioFor:function(e){return T.hasOwnProperty(e)?T[e]:null},setInitialRepresentationRatioFor:function(e,t){T[e]=t},setAutoSwitchBitrateFor:function(e,t){(0,B.checkParameterType)(t,"boolean"),(0,B.checkIsVideoOrAudioType)(e),v[e]=t},getAutoSwitchBitrateFor:de,getUseDeadTimeLatency:function(){return Z},setUseDeadTimeLatency:function(e){(0,B.checkParameterType)(e,"boolean"),Z=e},setLimitBitrateByPortal:function(e){(0,B.checkParameterType)(e,"boolean"),b=e},getLimitBitrateByPortal:function(){return b},getUsePixelRatioInLimitBitrateByPortal:function(){return q},setUsePixelRatioInLimitBitrateByPortal:function(e){(0,B.checkParameterType)(e,"boolean"),q=e},getQualityFor:ge,getAbandonmentStateFor:function(e){return E[e]?E[e].state:null},setPlaybackQuality:fe,checkPlaybackQuality:function(r){if(r&&I&&I[r]){var i=I[r].getStreamInfo(),a=i?i.id:null,n=ge(r),l=(0,p.default)(e).create({abrController:o,streamProcessor:I[r],currentValue:n,switchHistory:W[r],droppedFramesHistory:j,useBufferOccupancyABR:me(r)});if(j){var f=k.getPlaybackQuality();f&&j.push(Y,f)}if(de(r)){var s=ue(r),c=ie(r,a),v=d.getMaxQuality(l),y=v.quality;if(void 0!==s&&y<s&&(y=s),y>c&&(y=c),W[r].push({oldValue:n,newValue:y}),y>A.default.NO_CHANGE&&y!=n)(E[r].state===x||y>n)&&se(r,n,y,c,v.reason);else if(t.getLogToBrowserConsole()){var m=X.getCurrentBufferLevel(K.getReadOnlyMetricsFor(r));u.debug("AbrController ("+r+") stay on "+n+"/"+c+" (buffer: "+m+")")}}}},getTopQualityIndexFor:ie,setElementSize:he,setWindowResizeEventCalled:function(e){L=e},createAbrRulesCollection:$,registerStreamType:function(t,r){W[t]=(0,R.default)(e).create(),I[t]=r,E[t]=E[t]||{},E[t].state=x,J[t]=!1,i.on(y.default.LOADING_PROGRESS,pe,this),t==a.default.VIDEO&&(i.on(y.default.QUALITY_CHANGE_RENDERED,te,this),j=(0,O.default)(e).create(),he()),i.on(y.default.METRIC_ADDED,re,this),i.on(y.default.PERIOD_SWITCH_COMPLETED,$,this),z=(0,P.default)(e).create({mediaPlayerModel:U})},unRegisterStreamType:function(e){delete I[e]},setConfig:function(e){e&&(e.streamController&&(s=e.streamController),e.domStorage&&(G=e.domStorage),e.mediaPlayerModel&&(U=e.mediaPlayerModel),e.metricsModel&&(K=e.metricsModel),e.dashMetrics&&(X=e.dashMetrics),e.adapter&&(Q=e.adapter),e.manifestModel&&(H=e.manifestModel),e.videoModel&&(k=e.videoModel))},reset:function(){ee(),i.off(y.default.LOADING_PROGRESS,pe,this),i.off(y.default.QUALITY_CHANGE_RENDERED,te,this),i.off(y.default.METRIC_ADDED,re,this),i.off(y.default.PERIOD_SWITCH_COMPLETED,$,this),d&&d.reset()}},u=t.getLogger(o),ee(),o}q.__dashjs_factory_name="AbrController";var L=g.default.getSingletonFactory(q);L.ABANDON_LOAD=D,L.QUALITY_DEFAULT=C,g.default.updateSingletonFactory(q.__dashjs_factory_name,L),exports.default=L,module.exports=exports.default;
},{"../rules/abr/ABRRulesCollection":"yUDT","../constants/Constants":"NqGT","../constants/MetricsConstants":"Nprb","../vo/BitrateInfo":"nhr8","../models/FragmentModel":"Y27R","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6","../rules/RulesContext":"lTbQ","../rules/SwitchRequest":"U5Gs","../rules/SwitchRequestHistory":"ftcj","../rules/DroppedFramesHistory":"Vufq","../rules/ThroughputHistory":"v7Hc","../vo/metrics/HTTPRequest":"RDXP","../../core/Debug":"Jjwb","../utils/SupervisorTools":"LTZo"}],"skwV":[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/Constants"),n=t(e),i=require("../../core/events/Events"),r=t(i),o=require("../../core/EventBus"),a=t(o),u=require("../../core/FactoryMaker"),l=t(u),s=require("../../core/Debug"),c=t(s),d="neverReplace",f="alwaysReplace",g="highestBitrate",v="widestRange",C=g;function h(){var t=this.context,e=(0,a.default)(t).getInstance(),i=void 0,o=void 0,u=void 0,l=void 0,s=void 0,h=void 0,T=void 0,E=[f,d],p=[g,v];function S(t,e){if(!t||!e)return[];var n=e.id;return u[n]&&u[n][t]?u[n][t].list:[]}function _(t,e){return!t||!e||e&&!u[e.id]?null:u[e.id][t].current}function I(t){if(t&&t.streamInfo){var n=t.type,i=t.streamInfo,o=i.id,a=_(n,i);if(u[o]&&u[o][n]&&!A(t,a)){u[o][n].current=t,u[o][n].current&&e.trigger(r.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:a,newMediaInfo:t,switchMode:h[n]});var l=function(t){var e={lang:t.lang,viewpoint:t.viewpoint,roles:t.roles,accessibility:t.accessibility,audioChannelConfiguration:t.audioChannelConfiguration};return e.lang||e.viewpoint||e.role&&e.role.length>0||e.accessibility&&e.accessibility.length>0||e.audioChannelConfiguration&&e.audioChannelConfiguration.length>0?e:null}(t);l&&u[o][n].storeLastSettings&&(l.roles&&(l.role=l.roles[0],delete l.roles),l.accessibility&&(l.accessibility=l.accessibility[0]),l.audioChannelConfiguration&&(l.audioChannelConfiguration=l.audioChannelConfiguration[0]),T.setSavedMediaSettings(n,l))}}}function y(t,e){t&&e&&(l[t]=e)}function M(t){return t?l[t]:null}function w(){return s||C}function b(t){return t===n.default.AUDIO||t===n.default.VIDEO||t===n.default.TEXT||t===n.default.FRAGMENTED_TEXT||t===n.default.IMAGE}function A(t,e){if(!t&&!e)return!0;if(!t||!e)return!1;var n=t.id===e.id,i=t.viewpoint===e.viewpoint,r=t.lang===e.lang,o=t.roles.toString()===e.roles.toString(),a=t.accessibility.toString()===e.accessibility.toString(),u=t.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return n&&i&&r&&o&&a&&u}function R(){u={},l={audio:null,video:null},h={audio:f,video:d}}function m(t,e){var n=!t.lang||t.lang===e.lang,i=!t.viewpoint||t.viewpoint===e.viewpoint,r=!t.role||!!e.roles.filter(function(e){return e===t.role})[0],o=!t.accessibility||!!e.accessibility.filter(function(e){return e===t.accessibility})[0],a=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0];return n&&i&&r&&o&&a}function k(t){var e=w(),n=[],i=function(t){var e=0,n=[],i=void 0;return t.forEach(function(t){(i=Math.max.apply(Math,t.bitrateList.map(function(t){return t.bandwidth})))>e?(e=i,n=[t]):i===e&&n.push(t)}),n},r=function(t){var e=0,n=[],i=void 0;return t.forEach(function(t){(i=t.representationCount)>e?(e=i,n=[t]):i===e&&n.push(t)}),n};switch(e){case g:(n=i(t)).length>1&&(n=r(n));break;case v:(n=r(t)).length>1&&(n=i(t));break;default:o.warn("Track selection mode is not supported: "+e)}return n[0]}return i={checkInitialMediaSettingsForType:function(t,e){var i=M(t),r=S(t,e),o=[];t!==n.default.FRAGMENTED_TEXT?(i||y(t,i=T.getSavedMediaSettings(t)),r&&0!==r.length&&(i&&r.forEach(function(t){m(i,t)&&o.push(t)}),0===o.length?I(k(r)):o.length>1?I(k(o)):I(o[0]))):I(r[0])},addTrack:function(t){if(t){var e=t.type;if(b(e)){var n=t.streamInfo.id;u[n]||(u[n]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var i=u[n][e].list,r=0,o=i.length;r<o;++r)if(A(i[r],t))return;i.push(t);var a=M(e);a&&m(a,t)&&!_(e,t.streamInfo)&&I(t)}}},getTracksFor:S,getCurrentTrackFor:_,isCurrentTrack:function(t){if(!t)return!1;var e=t.type,n=t.streamInfo.id;return u[n]&&u[n][e]&&A(u[n][e].current,t)},setTrack:I,setInitialSettings:y,getInitialSettings:M,setSwitchMode:function(t,e){-1!==E.indexOf(e)?h[t]=e:o.warn("Track switch mode is not supported: "+e)},getSwitchMode:function(t){return h[t]},setSelectionModeForInitialTrack:function(t){-1!==p.indexOf(t)?s=t:o.warn("Track selection mode is not supported: "+t)},getSelectionModeForInitialTrack:w,isMultiTrackSupportedByType:b,isTracksEqual:A,setConfig:function(t){t&&t.domStorage&&(T=t.domStorage)},reset:R},o=(0,c.default)(t).getInstance().getLogger(i),R(),i}h.__dashjs_factory_name="MediaController";var T=l.default.getSingletonFactory(h);T.TRACK_SWITCH_MODE_NEVER_REPLACE=d,T.TRACK_SWITCH_MODE_ALWAYS_REPLACE=f,T.TRACK_SELECTION_MODE_HIGHEST_BITRATE=g,T.TRACK_SELECTION_MODE_WIDEST_RANGE=v,T.DEFAULT_INIT_TRACK_SELECTION_MODE=C,l.default.updateSingletonFactory(h.__dashjs_factory_name,T),exports.default=T,module.exports=exports.default;
},{"../constants/Constants":"NqGT","../../core/events/Events":"VXzW","../../core/EventBus":"ASRh","../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb"}],"HvR8":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),r=e(t);function n(){var e={};return{save:function(t){var r=t.streamId,n=t.representationId;e[r]=e[r]||{},e[r][n]=t},extract:function(t,r){return e&&e[t]&&e[t][r]?e[t][r]:null},reset:function(){e={}}}}n.__dashjs_factory_name="InitCache",exports.default=r.default.getSingletonFactory(n),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6"}],"P0rN":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/Constants"),r=e(t),n=require("../models/FragmentModel"),a=e(n),f=require("../SourceBufferSink"),i=e(f),u=require("../PreBufferSink"),o=e(u),d=require("./AbrController"),s=e(d),l=require("./MediaController"),g=e(l),E=require("../../core/EventBus"),T=e(E),c=require("../../core/events/Events"),h=e(c),m=require("../utils/BoxParser"),A=e(m),_=require("../../core/FactoryMaker"),I=e(_),v=require("../../core/Debug"),D=e(v),R=require("../utils/InitCache"),M=e(R),p=require("../vo/DashJSError"),C=e(p),B=require("../../core/errors/Errors"),S=e(B),P=require("../vo/metrics/HTTPRequest"),L="bufferLoaded",F="bufferStalled",b=.5,N=.5,O=.01,y=22,U="BufferController";function G(e){e=e||{};var t=this.context,n=(0,T.default)(t).getInstance(),f=e.metricsModel,u=e.mediaPlayerModel,d=e.errHandler,l=e.streamController,E=e.mediaController,c=e.adapter,m=e.textController,_=e.abrController,I=e.playbackController,v=e.type,R=e.streamProcessor,p=void 0,B=void 0,G=void 0,q=void 0,x=void 0,Y=void 0,K=void 0,k=void 0,H=void 0,w=void 0,Q=void 0,V=void 0,X=void 0,W=void 0,z=void 0,j=void 0,J=void 0,Z=void 0,$=void 0,ee=void 0,te=void 0;function re(e,r){if(!j||!e||!R)return null;if(K)try{"function"==typeof(w=r&&r[v]?(0,i.default)(t).create(K,e,ue.bind(this),r[v]):(0,i.default)(t).create(K,e,ue.bind(this))).getBuffer().initialize&&w.getBuffer().initialize(v,R)}catch(n){B.fatal("Caught error on create SourceBuffer: "+n),d.mediaSourceError("Error creating "+v+" source buffer."),d.error(new C.default(S.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,S.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+v))}else w=(0,o.default)(t).create(ue.bind(this));return pe(R.getRepresentationInfo(G).MSETimeOffset),w}function ne(e){e.fragmentModel===R.getFragmentModel()&&(B.info("Init fragment finished loading saving to",v+"'s init cache"),j.save(e.chunk),B.debug("Append Init fragment",v," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),fe(e.chunk))}function ae(e){if(e.fragmentModel===R.getFragmentModel()){var r=e.chunk,n=r.bytes,f=r.quality,i=R.getRepresentationInfo(f),u=c.getEventsFor(i.mediaInfo,R),o=c.getEventsFor(i,R);if(u&&u.length>0||o&&o.length>0){var d=function(e,r,n,a){for(var f=Math.max(!r||isNaN(r.startTime)?0:r.startTime,0),i=[],u=[],o=n.concat(a),d=0,s=o.length;d<s;d++)i[o[d].schemeIdUri+"/"+o[d].value]=o[d];for(var l=(0,A.default)(t).getInstance().parse(e).getBoxes("emsg"),d=0,s=l.length;d<s;d++){var g=c.getEvent(l[d],i,f);g&&u.push(g)}return u}(n,R.getFragmentModel().getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,quality:f,index:r.index})[0],u,o);R.addInbandEvents(d)}if(ee){te=r;var s=w&&w.getAllBufferRanges();s&&s.length>0&&I.getTimeToStreamEnd()>b&&(B.debug("Clearing buffer because track changed - "+(s.end(s.length-1)+N)),De([{start:0,end:s.end(s.length-1)+N,force:!0}]))}else fe(r)}}function fe(e){w.append(e),e.mediaInfo.type===r.default.VIDEO&&n.trigger(h.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function ie(e){if(e&&e.length>0)for(var t=0,r=e.length;t<r;t++)B.debug("Buffered Range for type:",v,":",e.start(t)," - ",e.end(t)," currentTime = ",I.getTime())}function ue(e){if(e.error){if(e.error.code===y&&(Y=.8*be(),B.warn("Quota exceeded for type: "+v+", Critical Buffer: "+Y),Y>0)){var t=Math.max(.2*Y,1),r=Y-t;u.setBufferToKeep(parseFloat(t.toFixed(5))),u.setBufferAheadToKeep(parseFloat(r.toFixed(5)))}e.error.code!==y&&Ne()||(B.warn("Clearing playback buffer to overcome quota exceed situation for type: "+v),n.trigger(h.default.QUOTA_EXCEEDED,{sender:p,criticalBufferLevel:Y}),le())}else{(X=e.chunk)&&!isNaN(X.index)&&(k=Math.max(X.index,k),Ae());var a=w.getAllBufferRanges();if(X.segmentType===P.HTTPRequest.MEDIA_SEGMENT_TYPE)ie(a),ge();else if(ee){var f=I.getTime();B.debug("AppendToBuffer seek target should be "+f),R.getScheduleController().setSeekTarget(f),c.setIndexHandlerTime(R,f)}var i={sender:p,quality:X.quality,startTime:X.start,index:X.index,bufferedRanges:a};X&&!X.endFragment?n.trigger(h.default.BYTES_APPENDED,i):X&&n.trigger(h.default.BYTES_APPENDED_END_FRAGMENT,i)}}function oe(e){G!==e.newQuality&&v===e.mediaType&&R.getStreamInfo().id===e.streamInfo.id&&(pe(R.getRepresentationInfo(e.newQuality).MSETimeOffset),G=e.newQuality)}function de(){q&&(Z=!0,q=!1,H=Number.POSITIVE_INFINITY),v!==r.default.FRAGMENTED_TEXT?le():ge()}function se(){J=void 0}function le(){var e=function(){var e=[],t=w.getAllBufferRanges();if(!t||0===t.length)return e;var r=I.getTime(),n=t.end(t.length-1)+N,f=R.getFragmentModel().getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:r,threshold:O})[0];if(f){var i={start:0,end:f.startTime-b},u=R.getFragmentModel().getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:f.startTime-f.duration/2,threshold:O})[0];u&&u.startTime!=f.startTime&&(i.end=u.startTime),i.start<i.end&&i.end>t.start(0)&&e.push(i);var o={start:f.startTime+f.duration+b,end:n},d=R.getFragmentModel().getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:f.startTime+f.duration+b,threshold:O})[0];d&&d.startTime!==f.startTime&&(o.start=d.startTime+d.duration+b),o.start<o.end&&o.start<n&&e.push(o)}else B.debug("getAllRangesWithSafetyFactor for",v,"- No request found in current time position, removing full buffer 0 -",n),e.push({start:0,end:n});return e}();e&&0!==e.length||ge(),De(e)}function ge(){(!ee||v===r.default.FRAGMENTED_TEXT&&m.isTextEnabled())&&(he(),me())}function Ee(){_e()}function Te(){_e()}function ce(e,t){var r=w.getAllBufferRanges(),n=0,a=0,f=null,i=null,u=0,o=void 0,d=void 0,s=t||.15;if(null!=r){for(d=0,o=r.length;d<o;d++)if(n=r.start(d),a=r.end(d),null===f)u=Math.abs(n-e),e>=n&&e<a?(f=n,i=a):u<=s&&(f=n,i=a);else{if(!((u=n-i)<=s))break;i=a}if(null!==f)return{start:f,end:i}}return null}function he(){var e,t,r;I&&(e=function(){var e=I.getTime();if(J){var t=w.getAllBufferRanges();t&&t.length&&(e=Math.max(t.start(0),J))}return e}()||0,x=null===(r=ce(e,t))?0:r.end-e,n.trigger(h.default.BUFFER_LEVEL_UPDATED,{sender:p,bufferLevel:x}),_e())}function me(){R&&l&&R.getStreamInfo()&&(f.addBufferState(v,V,R.getScheduleController().getBufferTarget()),f.addBufferLevel(v,new Date,1e3*x))}function Ae(){k>=H-1&&!q&&void 0===w.discharge&&(q=!0,B.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),n.trigger(h.default.BUFFERING_COMPLETED,{sender:p,streamInfo:R.getStreamInfo()}))}function _e(){"audio"!==v&&"video"!==v||(Z&&!q&&I&&I.getTimeToStreamEnd()-x<b&&(Z=!1,q=!0,B.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),n.trigger(h.default.BUFFERING_COMPLETED,{sender:p,streamInfo:R.getStreamInfo()})),(!u.getLowLatencyEnabled()&&x<b||0===x)&&!q?Ie(F):(q||x>=u.getStableBufferTime())&&Ie(L))}function Ie(e){V===e||e===F&&0===I.getTime()||v===r.default.FRAGMENTED_TEXT&&!m.isTextEnabled()||(V=e,me(),n.trigger(h.default.BUFFER_LEVEL_STATE_CHANGED,{sender:p,state:e,mediaType:v,streamInfo:R.getStreamInfo()}),n.trigger(e===L?h.default.BUFFER_LOADED:h.default.BUFFER_EMPTY,{mediaType:v}),B.debug(e===L?"Got enough buffer to start for "+v:"Waiting for more buffer before starting playback for "+v))}function ve(){w&&v!==r.default.FRAGMENTED_TEXT&&(q||De(function(){var e=[],t=w.getAllBufferRanges();if(!t||0===t.length)return e;var r=I.getTime(),n={start:Math.max(0,r-u.getBufferToKeep()),end:r+u.getBufferAheadToKeep()},f=R.getFragmentModel().getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:r,threshold:O})[0];if(f)n.start=Math.min(f.startTime,n.start),n.end=Math.max(f.startTime+f.duration,n.end);else if(0===r&&I.getIsDynamic())return[];if(t.start(0)<=n.start){for(var i={start:0,end:n.start},o=0;o<t.length&&t.end(o)<=n.start;o++)i.end=t.end(o);i.start<i.end&&e.push(i)}if(t.end(t.length-1)>=n.end){var d={start:n.end,end:t.end(t.length-1)+O};d.start<d.end&&e.push(d)}return e}()))}function De(e){e&&w&&0!==e.length&&($.push.apply($,e),z||Re())}function Re(){if(0===$.length||!w)return B.debug("Nothing to prune, halt pruning"),$=[],void(z=!1);var e=w.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return B.debug("SourceBuffer is empty (or does not exist), halt pruning"),$=[],void(z=!1);var t=$.shift();B.debug("Removing",v,"buffer from:",t.start,"to",t.end),z=!0;var r=I.getTime();r<t.end&&(q=!1,k=0,ee||(R.getScheduleController().setSeekTarget(r),c.setIndexHandlerTime(R,r))),w.remove(t.start,t.end,t.force)}function Me(e){w===e.buffer&&(B.debug("onRemoved buffer from:",e.from,"to",e.to),ie(w.getAllBufferRanges()),0===$.length&&(z=!1),e.unintended&&(B.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),c.setIndexHandlerTime(R,e.from)),z?Re():(ee?(ee=!1,te&&fe(te)):(B.debug("onRemoved : call updateBufferLevel"),he()),n.trigger(h.default.BUFFER_CLEARED,{sender:p,from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:Ne()})))}function pe(e){w&&w.updateTimestampOffset&&w.updateTimestampOffset(e)}function Ce(e){e.sender.getStreamProcessor()!==R||e.error||pe(e.currentRepresentation.MSETimeOffset)}function Be(e){e.fragmentModel===R.getFragmentModel()&&(H=e.request.index,Ae())}function Se(e){var t=w&&w.getAllBufferRanges();t&&e.newMediaInfo.type===v&&e.newMediaInfo.streamInfo.id===R.getStreamInfo().id&&(B.info("Track change asked"),E.getSwitchMode(v)===g.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&t&&t.length>0&&I.getTimeToStreamEnd()>b&&(q=!1,H=Number.POSITIVE_INFINITY))}function Pe(){++W*(u.getWallclockTimeUpdateInterval()/1e3)>=u.getBufferPruningInterval()&&(W=0,ve())}function Le(){_e()}function Fe(e,t){K=e,w&&t&&"function"==typeof w.discharge&&(Q=w,re(t))}function be(){var e,t=w.getAllBufferRanges(),r=0,n=void 0;if(!t)return r;for(n=0,e=t.length;n<e;n++)r+=t.end(n)-t.start(n);return r}function Ne(){return be()<Y}function Oe(e,t){Y=Number.POSITIVE_INFINITY,V=void 0,G=s.default.QUALITY_DEFAULT,H=Number.POSITIVE_INFINITY,k=0,X=null,q=!1,z=!1,Z=!1,x=0,W=0,$=[],w&&(e||w.abort(),w.reset(t),w=null),ee=!1}return p={getBufferControllerType:function(){return U},initialize:function(e){Fe(e),G=_.getQualityFor(v,R.getStreamInfo()),n.on(h.default.DATA_UPDATE_COMPLETED,Ce,this),n.on(h.default.INIT_FRAGMENT_LOADED,ne,this),n.on(h.default.MEDIA_FRAGMENT_LOADED,ae,this),n.on(h.default.QUALITY_CHANGE_REQUESTED,oe,this),n.on(h.default.STREAM_COMPLETED,Be,this),n.on(h.default.PLAYBACK_PLAYING,Te,this),n.on(h.default.PLAYBACK_PROGRESS,ge,this),n.on(h.default.PLAYBACK_TIME_UPDATED,ge,this),n.on(h.default.PLAYBACK_RATE_CHANGED,Le,this),n.on(h.default.PLAYBACK_SEEKING,de,this),n.on(h.default.PLAYBACK_SEEKED,se,this),n.on(h.default.PLAYBACK_STALLED,Ee,this),n.on(h.default.WALLCLOCK_TIME_UPDATED,Pe,this),n.on(h.default.CURRENT_TRACK_CHANGED,Se,this,T.default.EVENT_PRIORITY_HIGH),n.on(h.default.SOURCEBUFFER_REMOVE_COMPLETED,Me,this)},createBuffer:re,dischargePreBuffer:function(){if(w&&Q&&"function"==typeof Q.discharge){var e=Q.getAllBufferRanges();if(e.length>0){for(var t="Beginning "+v+"PreBuffer discharge, adding buffer for:",r=0;r<e.length;r++)t+=" start: "+e.start(r)+", end: "+e.end(r)+";";B.debug(t)}else B.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var n=Q.discharge(),a=null,f=0;f<n.length;f++){var i=n[f],u=j.extract(i.streamId,i.representationId);u&&(a!==u&&(w.append(u),a=u),w.append(i))}Q.reset(),Q=null}},getType:function(){return v},getStreamProcessor:function(){return R},setSeekStartTime:function(e){J=e},getBuffer:function(){return w},setBuffer:function(e){w=e},getBufferLevel:function(){return x},getRangeAt:ce,setMediaSource:Fe,getMediaSource:function(){return K},getIsBufferingCompleted:function(){return q},switchInitData:function(e,t,r){var a=j.extract(e,t);ee=!0===r&&r,a?(B.info("Append Init fragment",v," with representationId:",a.representationId," and quality:",a.quality,", data size:",a.bytes.byteLength),fe(a)):n.trigger(h.default.INIT_REQUESTED,{sender:p})},getIsPruningInProgress:function(){return z},reset:function(e,t){n.off(h.default.DATA_UPDATE_COMPLETED,Ce,this),n.off(h.default.QUALITY_CHANGE_REQUESTED,oe,this),n.off(h.default.INIT_FRAGMENT_LOADED,ne,this),n.off(h.default.MEDIA_FRAGMENT_LOADED,ae,this),n.off(h.default.STREAM_COMPLETED,Be,this),n.off(h.default.CURRENT_TRACK_CHANGED,Se,this),n.off(h.default.PLAYBACK_PLAYING,Te,this),n.off(h.default.PLAYBACK_PROGRESS,ge,this),n.off(h.default.PLAYBACK_TIME_UPDATED,ge,this),n.off(h.default.PLAYBACK_RATE_CHANGED,Le,this),n.off(h.default.PLAYBACK_SEEKING,de,this),n.off(h.default.PLAYBACK_SEEKED,se,this),n.off(h.default.PLAYBACK_STALLED,Ee,this),n.off(h.default.WALLCLOCK_TIME_UPDATED,Pe,this),n.off(h.default.SOURCEBUFFER_REMOVE_COMPLETED,Me,this),Oe(e,t)}},B=(0,D.default)(t).getInstance().getLogger(p),j=(0,M.default)(t).getInstance(),Oe(),p}G.__dashjs_factory_name=U;var q=I.default.getClassFactory(G);q.BUFFER_LOADED=L,q.BUFFER_EMPTY=F,I.default.updateClassFactory(G.__dashjs_factory_name,q),exports.default=q,module.exports=exports.default;
},{"../constants/Constants":"NqGT","../models/FragmentModel":"Y27R","../SourceBufferSink":"qKqE","../PreBufferSink":"LQeO","./AbrController":"MLDH","./MediaController":"skwV","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../utils/BoxParser":"dfT6","../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb","../utils/InitCache":"HvR8","../vo/DashJSError":"BHVF","../../core/errors/Errors":"dCLp","../vo/metrics/HTTPRequest":"RDXP"}],"URKx":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/Constants"),i=e(t),n=require("./BufferController"),a=e(n),r=require("../../core/EventBus"),o=e(r),d=require("../../core/events/Events"),s=e(d),f=require("../../core/FactoryMaker"),l=e(f),u=require("../../core/Debug"),v=e(u),g=500;function m(){var e=this.context,t=(0,o.default)(e).getInstance(),n=void 0,r=void 0,d=void 0,f=void 0,l=void 0,u=void 0,m=void 0,c=void 0,E=void 0,L=void 0,A=void 0,D=void 0,T=void 0,P=void 0,y=void 0,N=void 0,_=void 0,S=void 0,h=void 0,R=void 0,p=void 0,C=void 0,M=void 0,I=void 0,B=void 0,k=void 0;function F(e){!_&&e.fromStreamInfo&&void 0!==T[e.fromStreamInfo.id]&&(delete y[e.fromStreamInfo.id],delete T[e.fromStreamInfo.id])}function O(){return parseFloat((Y()-G()).toFixed(5))}function Y(){var e=Q(!0),t=_&&N?e-N.start:0;return e+(N?N.duration-t:t)}function b(){N&&E&&E.getElement()?E.play():h=!0}function K(){return N&&E?E.isPaused():null}function w(){N&&E&&E.pause()}function U(){return N&&E?E.isSeeking():null}function x(e,i,n){N&&E&&(!0===n?e!==E.getTime()&&(E.removeEventListener("seeking",oe),r.info("Requesting seek to time: "+e),E.setCurrentTime(e,i)):(t.trigger(s.default.PLAYBACK_SEEK_ASKED),r.info("Requesting seek to time: "+e),E.setCurrentTime(e,i)))}function G(){return N&&E?E.getTime():null}function V(){var e=G();if(_&&!isNaN(p)){var t=p/1e3;e>t&&(e-=t)}return e}function q(){return N&&E?E.getPlaybackRate():null}function W(){return N&&E?E.getEnded():null}function z(){return _}function H(){if(!_||isNaN(p))return NaN;var e=V();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*L.getClientTimeOffset();return Math.max(((t-p-1e3*e)/1e3).toFixed(3),0)}function j(){A=NaN,h=!1,T={},P=0,p=0,y={},E&&(t.off(s.default.DATA_UPDATE_COMPLETED,ee,this),t.off(s.default.BUFFER_LEVEL_STATE_CHANGED,De,this),t.off(s.default.BYTES_APPENDED_END_FRAGMENT,Le,this),t.off(s.default.LOADING_PROGRESS,Ae,this),t.off(s.default.PERIOD_SWITCH_STARTED,F,this),t.off(s.default.PLAYBACK_PROGRESS,ce,this),t.off(s.default.PLAYBACK_TIME_UPDATED,ce,this),t.off(s.default.PLAYBACK_ENDED,ge,this),Z(),E.removeEventListener("canplay",te),E.removeEventListener("play",ie),E.removeEventListener("waiting",ne),E.removeEventListener("playing",ae),E.removeEventListener("pause",re),E.removeEventListener("error",me),E.removeEventListener("seeking",oe),E.removeEventListener("seeked",de),E.removeEventListener("timeupdate",se),E.removeEventListener("progress",fe),E.removeEventListener("ratechange",le),E.removeEventListener("loadedmetadata",ue),E.removeEventListener("stalled",Te),E.removeEventListener("ended",ve)),D=null,E=null,N=null,_=null}function J(){var e=k.getURIFragmentData(),t=void 0;if(e){t={};var i=parseInt(e.r,10);i>=0&&N&&i<N.manifestInfo.DVRWindowSize&&null===e.t&&(e.t=Math.max(Math.floor(Date.now()/1e3)-N.manifestInfo.DVRWindowSize,N.manifestInfo.availableFrom.getTime()/1e3+N.start)+i),t.fragS=parseFloat(e.s),t.fragT=parseFloat(e.t)}return t}function Q(e,t){var i=void 0,n=NaN;if(e)n=N?N.start:n;else{var a=J();n=a?isNaN(a.fragS)?a.fragT:a.fragS:0}if(_)!isNaN(n)&&N&&((i=n-N.manifestInfo.availableFrom.getTime()/1e3)>A||i<(isNaN(t)?NaN:t-N.manifestInfo.DVRWindowSize))&&(i=null),i=i||A;else if(N)if(!isNaN(n)&&n<Math.max(N.manifestInfo.duration,N.duration)&&n>=0)i=n;else{var r=T[N.id];i=void 0!==r?Math.max(void 0!==r.audio?r.audio:0,void 0!==r.video?r.video:0,N.start):N.start}return i}function X(){if(null===D){D=setInterval(function(){var e;t.trigger(s.default.WALLCLOCK_TIME_UPDATED,{isDynamic:_,time:new Date}),z()&&K()&&(e=Date.now(),(!R||e>R+g)&&(R=e,se()))},S.getWallclockTimeUpdateInterval())}}function Z(){clearInterval(D),D=null}function $(){if(!K()&&_&&0!==E.getReadyState()){var e=V(),t=function(e){var t=f.getReadOnlyMetricsFor(i.default.VIDEO)||f.getReadOnlyMetricsFor(i.default.AUDIO),n=l.getCurrentDVRInfo(t),a=n?n.range:null,r=void 0;if(!a)return NaN;if(e>a.end)r=Math.max(a.end-2*N.manifestInfo.minBufferTime,a.start);else{if(!(e+.25<a.start))return e;r=a.start}return r}(e);!isNaN(t)&&t!==e&&x(t)}}function ee(e){if(!e.error){var t=c.convertDataToRepresentationInfo(e.currentRepresentation).mediaInfo.streamInfo;N.id===t.id&&(N=t,$())}}function te(){t.trigger(s.default.CAN_PLAY)}function ie(){r.info("Native video element event: play"),$(),X(),t.trigger(s.default.PLAYBACK_STARTED,{startTime:G()})}function ne(){r.info("Native video element event: waiting"),t.trigger(s.default.PLAYBACK_WAITING,{playingTime:G()})}function ae(){r.info("Native video element event: playing"),t.trigger(s.default.PLAYBACK_PLAYING,{playingTime:G()})}function re(){r.info("Native video element event: pause"),t.trigger(s.default.PLAYBACK_PAUSED,{ended:W()})}function oe(){var e=G();r.info("Seeking to: "+e),X(),t.trigger(s.default.PLAYBACK_SEEKING,{seekTime:e})}function de(){r.info("Native video element event: seeked"),t.trigger(s.default.PLAYBACK_SEEKED),E.addEventListener("seeking",oe)}function se(){N&&t.trigger(s.default.PLAYBACK_TIME_UPDATED,{timeToEnd:O(),time:G()})}function fe(){t.trigger(s.default.PLAYBACK_PROGRESS)}function le(){var e=q();r.info("Native video element event: ratechange: ",e),t.trigger(s.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function ue(){r.info("Native video element event: loadedmetadata"),t.trigger(s.default.PLAYBACK_METADATA_LOADED),X()}function ve(){r.info("Native video element event: ended"),w(),Z(),t.trigger(s.default.PLAYBACK_ENDED,{isLast:d.getActiveStreamInfo().isLast})}function ge(e){D&&e.isLast&&(r.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),E.setCurrentTime(Y()),w(),Z())}function me(e){var i=e.target||e.srcElement;t.trigger(s.default.PLAYBACK_ERROR,{error:i.error})}function ce(){_&&S.getLowLatencyEnabled()&&S.getCatchUpPlaybackRate()>0&&!K()&&!U()&&(S.getCatchUpPlaybackRate()>0&&G()>0&&Math.abs(H()-S.getLiveDelay())>S.getLowLatencyMinDrift()?function(){if(E){var e=S.getCatchUpPlaybackRate(),t=S.getLiveDelay(),n=H()-t,a=5*n,o=2*e/(1+Math.pow(Math.E,-a)),s=1-e+o;if(I){var u=function(){var e=null;return d.getActiveStreamProcessors().forEach(function(t){var i=t.getBufferLevel();e=null===e?i:Math.min(e,i)}),e}();u>t/2?I=!1:n>0&&(s=1)}Math.abs(E.getPlaybackRate()-s)>B&&E.setPlaybackRate(s),S.getLowLatencyMaxDriftBeforeSeeking()>0&&!M&&n>S.getLowLatencyMaxDriftBeforeSeeking()?(r.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),M=!0,v=f.getReadOnlyMetricsFor(i.default.VIDEO)||f.getReadOnlyMetricsFor(i.default.AUDIO),x(((g=l.getCurrentDVRInfo(v))?g.range:null).end-S.getLiveDelay(),!0,!1)):M=!1}var v,g}():Ee())}function Ee(){E&&E.setPlaybackRate(1)}function Le(e){var t,n=void 0,a=e.bufferedRanges;if(a&&a.length&&(!T[N.id]||!0!==T[N.id].started)){var r=e.sender.getType();void 0===y[N.id]&&(y[N.id]=[]),y[N.id][r]=a,void 0===T[N.id]&&(T[N.id]=[],T[N.id].started=!1),void 0===T[N.id][r]&&(T[N.id][r]=Math.max(a.start(0),N.start));var o=d.isTrackTypePresent(i.default.VIDEO),s=d.isTrackTypePresent(i.default.AUDIO);t=Q(!1),s&&o?isNaN(T[N.id].audio)||isNaN(T[N.id].video)||(T[N.id].audio<T[N.id].video?(n=T[N.id].video>t?T[N.id].video:t,a=y[N.id].audio):(n=T[N.id].audio>t?T[N.id].audio:t,a=y[N.id].video),function(e,t){if(t&&t.length>0)for(var i=0,n=t.length;i<n;i++)if(e>=t.start(i)&&e<t.end(i))return!0;return!1}(n,a)&&(U()||C||0===n||x(n,!0,!0),T[N.id].started=!0)):T[N.id][r]&&(n=T[N.id][r]>t?T[N.id][r]:t,U()||C||x(n,!1,!0),T[N.id].started=!0)}}function Ae(e){if(!1===e.stream&&S.getLowLatencyEnabled()&&!isNaN(e.request.duration)){var t=1.2*e.request.duration;t>S.getLiveDelay()&&(r.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",t.toFixed(2)),S.setLiveDelay(t))}}function De(e){e.streamInfo.id===N.id&&(S.getLowLatencyEnabled()?e.state!==a.default.BUFFER_EMPTY||U()||I||(I=!0,Ee()):E.setStallState(e.mediaType,e.state===a.default.BUFFER_EMPTY))}function Te(e){t.trigger(s.default.PLAYBACK_STALLED,{e:e})}return n={initialize:function(e,i){N=e,E.addEventListener("canplay",te),E.addEventListener("play",ie),E.addEventListener("waiting",ne),E.addEventListener("playing",ae),E.addEventListener("pause",re),E.addEventListener("error",me),E.addEventListener("seeking",oe),E.addEventListener("seeked",de),E.addEventListener("timeupdate",se),E.addEventListener("progress",fe),E.addEventListener("ratechange",le),E.addEventListener("loadedmetadata",ue),E.addEventListener("stalled",Te),E.addEventListener("ended",ve),_=N.manifestInfo.isDynamic,M=!1,I=!1,A=N.start,C=i;var n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",a=/safari/.test(n)&&!/chrome/.test(n);B=a?.25:.02,t.on(s.default.DATA_UPDATE_COMPLETED,ee,this),t.on(s.default.BYTES_APPENDED_END_FRAGMENT,Le,this),t.on(s.default.LOADING_PROGRESS,Ae,this),t.on(s.default.BUFFER_LEVEL_STATE_CHANGED,De,this),t.on(s.default.PERIOD_SWITCH_STARTED,F,this),t.on(s.default.PLAYBACK_PROGRESS,ce,this),t.on(s.default.PLAYBACK_TIME_UPDATED,ce,this),t.on(s.default.PLAYBACK_ENDED,ge,this),h&&(h=!1,b())},setConfig:function(e){e&&(e.streamController&&(d=e.streamController),e.metricsModel&&(f=e.metricsModel),e.dashMetrics&&(l=e.dashMetrics),e.manifestModel&&(u=e.manifestModel),e.dashManifestModel&&(m=e.dashManifestModel),e.mediaPlayerModel&&(S=e.mediaPlayerModel),e.adapter&&(c=e.adapter),e.videoModel&&(E=e.videoModel),e.timelineConverter&&(L=e.timelineConverter),e.uriFragmentModel&&(k=e.uriFragmentModel))},getStartTimeFromUriParameters:J,getStreamStartTime:Q,getTimeToStreamEnd:O,getTime:G,getNormalizedTime:V,getPlaybackRate:q,getPlayedRanges:function(){return N&&E?E.getPlayedRanges():null},getEnded:W,getIsDynamic:z,getStreamController:function(){return d},setLiveStartTime:function(e){A=e},getLiveStartTime:function(){return A},computeLiveDelay:function(e,t){var n=m.getMpd(u.getValue()),a=void 0,r=void 0;if(a=S.getUseSuggestedPresentationDelay()&&n.hasOwnProperty(i.default.SUGGESTED_PRESENTATION_DELAY)?n.suggestedPresentationDelay:S.getLowLatencyEnabled()?0:S.getLiveDelay()?S.getLiveDelay():isNaN(e)?2*N.manifestInfo.minBufferTime:e*S.getLiveDelayFragmentCount(),n.availabilityStartTime&&(p=n.availabilityStartTime.getTime()),t>0){var o=Math.max(t-10,t/2);r=Math.min(a,o)}else r=a;return P=r,r},getLiveDelay:function(){return P},getCurrentLiveLatency:H,play:b,isPaused:K,pause:w,isSeeking:U,seek:x,reset:j},r=(0,v.default)(e).getInstance().getLogger(n),j(),n}m.__dashjs_factory_name="PlaybackController",exports.default=l.default.getSingletonFactory(m),module.exports=exports.default;
},{"../constants/Constants":"NqGT","./BufferController":"P0rN","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb"}],"pQIu":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),r=e(t),n=require("../constants/Constants"),o=e(n);function s(e){var t=(e=e||{}).timelineConverter,r=e.streamProcessor;return{getLiveEdge:function(){!function(){if(!(t&&t.hasOwnProperty("getExpectedLiveEdge")&&r&&r.hasOwnProperty("getRepresentationInfo")))throw new Error(o.default.MISSING_CONFIG_ERROR)}();var e=r.getRepresentationInfo(),n=e.DVRWindow?e.DVRWindow.end:0,s=n;return e.useCalculatedLiveEdgeTime&&(s=t.getExpectedLiveEdge(),t.setClientTimeOffset(s-n)),s},reset:function(){t=null,r=null}}}s.__dashjs_factory_name="LiveEdgeFinder",exports.default=r.default.getClassFactory(s),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","../constants/Constants":"NqGT"}],"dqT3":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/Constants"),r=e(t),n=require("../../core/EventBus"),u=e(n),o=require("../../core/events/Events"),f=e(o),a=require("../../core/FactoryMaker"),i=e(a),s=require("../utils/InitCache"),c=e(s),d=require("../SourceBufferSink"),E=e(d),l=require("../../streaming/text/TextController"),g=e(l),T=require("../../streaming/vo/DashJSError"),_=e(T),S=require("../../core/errors/Errors"),D=e(S),m="NotFragmentedTextBufferController";function P(e){e=e||{};var t=this.context,n=(0,u.default)(t).getInstance(),o=(0,g.default)(t).getInstance(),a=e.errHandler,i=e.type,s=e.mimeType,d=e.streamProcessor,l=void 0,T=void 0,S=void 0,P=void 0,I=void 0,M=void 0;function O(e){P=e}function p(e){e.sender.getStreamProcessor()===d&&(M.extract(d.getStreamInfo().id,e.sender.getCurrentRepresentation().id)||n.trigger(f.default.TIMED_TEXT_REQUESTED,{index:0,sender:e.sender}))}function A(e){e.fragmentModel===d.getFragmentModel()&&e.chunk.bytes&&(M.save(e.chunk),I.append(e.chunk),n.trigger(f.default.STREAM_COMPLETED,{request:e.request,fragmentModel:e.fragmentModel}))}return l={getBufferControllerType:function(){return m},initialize:function(e){O(e),M=(0,c.default)(t).getInstance()},createBuffer:function(e){try{if(I=(0,E.default)(t).create(P,e),!S){var n=I.getBuffer();n.hasOwnProperty(r.default.INITIALIZE)&&n.initialize(s,d),S=!0}return I}catch(u){if(e.isText||-1!==e.codec.indexOf('codecs="stpp')||-1!==e.codec.indexOf('codecs="wvtt'))try{I=o.getTextSourceBuffer()}catch(u){a.mediaSourceError("Error creating "+i+" source buffer."),a.error(new _.default(D.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,D.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+i+" : "+u.message))}else a.mediaSourceError("Error creating "+i+" source buffer."),a.error(new _.default(D.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,D.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+i))}},getType:function(){return i},getStreamProcessor:function(){return d},setSeekStartTime:function(){},getBuffer:function(){return I},getBufferLevel:function(){return 0},setMediaSource:O,getMediaSource:function(){return P},getIsBufferingCompleted:function(){return T},getIsPruningInProgress:function(){return!1},dischargePreBuffer:function(){},switchInitData:function(e,t){M.extract(e,t)||n.trigger(f.default.TIMED_TEXT_REQUESTED,{index:0,sender:l})},getRangeAt:function(){return null},reset:function(e){n.off(f.default.DATA_UPDATE_COMPLETED,p,l),n.off(f.default.INIT_FRAGMENT_LOADED,A,l),!e&&I&&(I.abort(),I.reset(),I=null)},updateTimestampOffset:function(e){I.timestampOffset===e||isNaN(e)||(I.timestampOffset=e)}},S=!1,P=null,T=!1,n.on(f.default.DATA_UPDATE_COMPLETED,p,l),n.on(f.default.INIT_FRAGMENT_LOADED,A,l),l}P.__dashjs_factory_name=m,exports.default=i.default.getClassFactory(P),module.exports=exports.default;
},{"../constants/Constants":"NqGT","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6","../utils/InitCache":"HvR8","../SourceBufferSink":"qKqE","../../streaming/text/TextController":"BJUk","../../streaming/vo/DashJSError":"BHVF","../../core/errors/Errors":"dCLp"}],"E5J7":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../constants/Constants"),t=e(r),n=require("../../core/FactoryMaker"),o=e(n),a=require("./../controllers/BufferController"),u=e(a),f=require("./NotFragmentedTextBufferController"),s=e(f);function i(e){e=e||{};var r,n=this.context,o=void 0;function a(){return o.getBuffer()}return r={getBufferControllerType:function(){return o.getBufferControllerType()},initialize:function(e,r){return o.initialize(e,r)},createBuffer:function(e){return o.createBuffer(e)},getType:function(){return o.getType()},getStreamProcessor:function(){o.getStreamProcessor()},setSeekStartTime:function(e){o.setSeekStartTime(e)},getBuffer:a,setBuffer:function(e){o.setBuffer(e)},getBufferLevel:function(){return o.getBufferLevel()},setMediaSource:function(e){o.setMediaSource(e)},getMediaSource:function(){return o.getMediaSource()},getIsBufferingCompleted:function(){return o.getIsBufferingCompleted()},getIsPruningInProgress:function(){return o.getIsPruningInProgress()},dischargePreBuffer:function(){return o.dischargePreBuffer()},switchInitData:function(e,r){o.switchInitData(e,r)},getRangeAt:function(e){return o.getRangeAt(e)},reset:function(e){o.reset(e)},updateTimestampOffset:function(e){var r=a();r.timestampOffset===e||isNaN(e)||(r.timestampOffset=e)}},o=e.type===t.default.FRAGMENTED_TEXT?(0,u.default)(n).create({type:e.type,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,errHandler:e.errHandler,streamController:e.streamController,mediaController:e.mediaController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,streamProcessor:e.streamProcessor}):(0,s.default)(n).create({type:e.type,mimeType:e.mimeType,errHandler:e.errHandler,streamProcessor:e.streamProcessor}),r}i.__dashjs_factory_name="TextBufferController",exports.default=o.default.getClassFactory(i),module.exports=exports.default;
},{"../constants/Constants":"NqGT","../../core/FactoryMaker":"KAF6","./../controllers/BufferController":"P0rN","./NotFragmentedTextBufferController":"dqT3"}],"pWQ1":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};e.INITIAL_PLAYOUT_START_REASON="initial_playout",e.SEEK_START_REASON="seek",e.RESUME_FROM_PAUSE_START_REASON="resume",e.METRICS_COLLECTION_START_REASON="metrics_collection_start";var _=function e(){t(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};_.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",_.REBUFFERING_REASON="rebuffering",_.USER_REQUEST_STOP_REASON="user_request",_.END_OF_PERIOD_STOP_REASON="end_of_period",_.END_OF_CONTENT_STOP_REASON="end_of_content",_.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",_.FAILURE_STOP_REASON="failure",exports.PlayList=e,exports.PlayListTrace=_;
},{}],"WY5R":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../constants/Constants"),r=e(t),a=require("../../../core/FactoryMaker"),n=e(a);function o(e){var t=(e=e||{}).dashMetrics,a=e.metricsModel,n=e.mediaPlayerModel,o=e.textController,u=e.abrController;function f(e,f){var i=NaN;if(!e)return i;var l=e.getType(),s=e.getRepresentationInfo();if(l===r.default.FRAGMENTED_TEXT)i=o.isTextEnabled()?s.fragmentDuration:0;else if(l===r.default.AUDIO&&f){var d=t.getCurrentBufferLevel(a.getReadOnlyMetricsFor(r.default.VIDEO));i=isNaN(s.fragmentDuration)?d:Math.max(d,s.fragmentDuration)}else{var g=s.mediaInfo.streamInfo;if(u.isPlayingAtTopQuality(g))i=g.manifestInfo.duration>=n.getLongFormContentDurationThreshold()?n.getBufferTimeAtTopQualityLongForm():n.getBufferTimeAtTopQuality();else i=n.getStableBufferTime()}return i}return{execute:function(e,r){return!e||t.getCurrentBufferLevel(a.getReadOnlyMetricsFor(e.getType()))<f(e,r)},getBufferTarget:f}}o.__dashjs_factory_name="BufferLevelRule",exports.default=n.default.getClassFactory(o),module.exports=exports.default;
},{"../../constants/Constants":"NqGT","../../../core/FactoryMaker":"KAF6"}],"TFlE":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../constants/Constants"),r=e(t),n=require("../../../core/Debug"),a=e(n),u=require("../../../core/FactoryMaker"),o=e(u),i=require("../../../streaming/vo/FragmentRequest"),s=e(i);function d(e){e=e||{};var t=this.context,n=e.adapter,u=e.textController,o=e.playbackController,i=void 0,d=void 0;return i={execute:function(e,t,a){if(!e)return null;var i=e.getRepresentationInfo(),l=e.getType(),g=!isNaN(t),f=e.getBufferController(),m=o.getNormalizedTime(),c=g?t:n.getIndexHandlerTime(e),T=!1,R=void 0;if(isNaN(c)||l===r.default.FRAGMENTED_TEXT&&!u.isTextEnabled())return null;if(f){var x=f.getRangeAt(c),F=f.getRangeAt(m),q=f.getBuffer().hasDiscontinuitiesAfter(m);null===x&&null===F||g||((!x||F&&F.start!=x.start&&F.end!=x.end)&&(q&&l!==r.default.FRAGMENTED_TEXT&&(e.getFragmentModel().removeExecutedRequestsAfterTime(F.end),T=!0),x=F),c!==x.end&&(d.debug("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end for",l,".",c,"was changed to",x.end),c=x.end))}if(a)c=a.startTime+a.duration/2,R=n.getFragmentRequest(e,i,c,{timeThreshold:0,ignoreIsFinished:!0});else for(R=n.getFragmentRequest(e,i,c,{keepIdx:!g&&!T});R&&R.action!==s.default.ACTION_COMPLETE&&e.getFragmentModel().isFragmentLoaded(R);)R=n.getFragmentRequest(e,i);return R}},d=(0,a.default)(t).getInstance().getLogger(i),i}d.__dashjs_factory_name="NextFragmentRequestRule",exports.default=o.default.getClassFactory(d),module.exports=exports.default;
},{"../../constants/Constants":"NqGT","../../../core/Debug":"Jjwb","../../../core/FactoryMaker":"KAF6","../../../streaming/vo/FragmentRequest":"TOyU"}],"CkPh":[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=function i(){t(this,i),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};exports.default=i,module.exports=exports.default;
},{}],"zhNk":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.unescapeDollarsInTemplate=n,exports.replaceIDForTemplate=o,exports.replaceTokenForTemplate=m,exports.getIndexBasedSegment=l,exports.getTimeBasedSegment=d,exports.getSegmentByIndex=s,exports.decideSegmentListRangeForTemplate=p;var t=require("./../vo/Segment"),a=e(t);function i(e,t){for(;e.length<t;)e="0"+e;return e}function r(e,t){return e.representation.startNumber+t}function n(e){return e?e.split("$$").join("$"):e}function o(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var a=t.toString();return e.split("$RepresentationID$").join(a)}function m(e,t,a){var r=void 0,n=void 0,o=void 0,m=void 0,l=void 0,d=void 0,s=t.length,p="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((n=e.indexOf("$",r+s))<0)return e;if((o=e.indexOf("%0",r+s))>r&&o<n)switch(m=e.charAt(n-1),l=parseInt(e.substring(o+p,n-1),10),m){case"d":case"i":case"u":d=i(a.toString(),l);break;case"x":d=i(a.toString(16),l);break;case"X":d=i(a.toString(16),l).toUpperCase();break;case"o":d=i(a.toString(8),l);break;default:return e}else d=a;e=e.substring(0,r)+d+e.substring(n+1)}}function l(e,t,i,n){var o,m,l=void 0,d=void 0;return d=i.segmentDuration,isNaN(d)&&(d=i.adaptation.period.duration),o=parseFloat((i.adaptation.period.start+n*d).toFixed(5)),m=parseFloat((o+d).toFixed(5)),(l=new a.default).representation=i,l.duration=d,l.presentationStartTime=o,l.mediaStartTime=e.calcMediaTimeFromPresentationTime(l.presentationStartTime,i),l.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(l.presentationStartTime,i.adaptation.period.mpd,t),l.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(m,i.adaptation.period.mpd,t),l.wallStartTime=e.calcWallTimeForSegment(l,t),l.replacementNumber=r(l,n),l.availabilityIdx=n,l}function d(e,t,i,n,o,l,d,s,p,u){var c,T,v=n/l,f=Math.min(o/l,i.adaptation.period.mpd.maxSegmentDuration),g=void 0;return T=(c=e.calcPresentationTimeFromMediaTime(v,i))+f,(g=new a.default).representation=i,g.duration=f,g.mediaStartTime=v,g.presentationStartTime=c,g.availabilityStartTime=i.adaptation.period.mpd.manifest.loadedTime,g.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(T,i.adaptation.period.mpd,t),g.wallStartTime=e.calcWallTimeForSegment(g,t),g.replacementTime=u||n,g.replacementNumber=r(g,p),d=m(d,"Number",g.replacementNumber),d=m(d,"Time",g.replacementTime),g.media=d,g.mediaRange=s,g.availabilityIdx=p,g}function s(e,t){if(!t||!t.segments)return null;var a=t.segments.length,i=void 0,r=void 0;if(e<a&&(i=t.segments[e])&&i.availabilityIdx===e)return i;for(r=0;r<a;r++)if((i=t.segments[r])&&i.availabilityIdx===e)return i;return null}function p(e,t,a,i,r,n){var o=a.segmentDuration,m=a.adaptation.period.mpd.manifest.minBufferTime,l=a.segmentAvailabilityRange,d={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(a,l?l.start:NaN),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(a,l?l.end:NaN)},p=a.segments,u=2*o,c=n||Math.max(2*m,10*o),T=NaN,v=null,f=void 0;return d.start=Math.max(d.start,0),t&&!e.isTimeSyncCompleted()?{start:f=Math.floor(d.start/o),end:Math.floor(d.end/o)}:(T=p&&p.length>0?(v=s(r,a))?e.calcPeriodRelativeTimeFromMpdRelativeTime(a,v.presentationStartTime):r>0?r*o:e.calcPeriodRelativeTimeFromMpdRelativeTime(a,i):r>0?r*o:t?d.end:d.start,{start:f=Math.floor(Math.max(T-u,d.start)/o),end:Math.floor(Math.min(f+c/o,d.end/o))})}
},{"./../vo/Segment":"CkPh"}],"zM3Z":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/Constants"),i=e(t),a=require("../vo/metrics/PlayList"),n=require("./AbrController"),r=e(n),o=require("./BufferController"),s=e(o),d=require("../rules/scheduling/BufferLevelRule"),u=e(d),f=require("../rules/scheduling/NextFragmentRequestRule"),l=e(f),E=require("../models/FragmentModel"),c=e(E),T=require("../../core/EventBus"),g=e(T),m=require("../../core/events/Events"),A=e(m),I=require("../../core/FactoryMaker"),D=e(I),_=require("../../core/Debug"),h=e(_),R=require("./MediaController"),S=e(R),p=require("../../dash/utils/SegmentsUtils");function N(e){e=e||{};var t=this.context,n=(0,g.default)(t).getInstance(),o=e.metricsModel,d=e.adapter,f=e.dashMetrics,E=e.dashManifestModel,T=e.timelineConverter,m=e.mediaPlayerModel,I=e.abrController,D=e.playbackController,_=e.streamController,R=e.textController,N=e.type,y=e.streamProcessor,C=e.mediaController,L=void 0,v=void 0,q=void 0,P=void 0,M=void 0,b=void 0,F=void 0,B=void 0,x=void 0,U=void 0,k=void 0,O=void 0,w=void 0,G=void 0,Q=void 0,Y=void 0,K=void 0,H=void 0,W=void 0,V=void 0,X=void 0,j=void 0,z=void 0;function Z(){P&&!y.isBufferingCompleted()?(v.debug("Schedule Controller starts"),ye(),b=!1,M&&(M=!1),ee(0)):v.warn("Start denied to Schedule Controller")}function J(){b||(v.debug("Schedule Controller stops"),b=!0,clearTimeout(O))}function $(){var e=y.getBufferController();if(b||U||!e||D.isPaused()&&!m.getScheduleWhilePaused()||!(N!==i.default.FRAGMENTED_TEXT&&N!==i.default.TEXT||R.isTextEnabled()))v.debug("Schedule stop!");else if(e.getIsBufferingCompleted())v.debug("Schedule stop because buffering is completed!");else{!function(){var e=D.getTime(),t=1.5*P.fragmentDuration,i=q.getRequests({state:c.default.FRAGMENT_MODEL_EXECUTED,time:e+t,threshold:0})[0];if(i&&-1===W.indexOf(i)&&!E.getIsTextTrack(N)){var a=m.getFastSwitchEnabled(),n=y.getBufferLevel(),o=I.getAbandonmentStateFor(N),s=!C.isCurrentTrack(i.mediaInfo)&&C.getSwitchMode(i.mediaInfo.type)===S.default.TRACK_SWITCH_MODE_NEVER_REPLACE,d=i.quality<P.quality;a&&(s||d)&&n>=t&&o!==r.default.ABANDON_LOAD?(ne(i),z=!0,v.debug("Reloading outdated fragment at index: ",i.index)):i.quality>P.quality&&!X&&Se(D.getTime()+y.getBufferLevel())}}();var t=W.length>0,a=y.getStreamInfo();if(X||isNaN(H)||V||t||function(e,t){K[t]=K[t]||{};var i=I.getTopQualityIndexFor(e,t);return K[t][e]!=i&&(v.info("Top quality "+e+" index has changed from "+K[t][e]+" to "+i),K[t][e]=i,!0)}(P.mediaInfo.type,a.id)||G.execute(y,_.isTrackTypePresent(i.default.VIDEO))){ie(!0),t||V||I.checkPlaybackQuality(N),function(){var e=y.getFragmentController();if(P.quality===H&&!V||X){var t=W.shift();if(e.isInitializationRequest(t))y.switchInitData(t.representationId);else{var i=void 0;y.getBufferController().getIsPruningInProgress()||(i=Q.execute(y,w,t),Se(NaN),i&&!t&&(isNaN(i.startTime+i.duration)||d.setIndexHandlerTime(y,i.startTime+i.duration),i.delayLoadingTime=(new Date).getTime()+k,pe(0)),!i&&a.manifestInfo&&a.manifestInfo.isDynamic&&v.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling.")),i?(v.debug("Next fragment request url is "+i.url),q.executeRequest(i)):(ie(!1),ee(m.getLowLatencyEnabled()?100:500))}}else v.debug("Quality has changed, get init request for representationid = "+P.id),V?(X=C.getSwitchMode(N)===S.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,v.debug("Switch track has been asked, get init request for "+N+" with representationid = "+P.id+"bufferResetInProgress = "+X),y.switchInitData(P.id,X),V=!1):y.switchInitData(P.id),H=P.quality}()}else ee(500)}}function ee(e){clearTimeout(O),O=setTimeout($,e)}function te(e){e.sender&&e.sender.getStreamProcessor()===y&&ae(P.quality)}function ie(e){U!==e?U=e:v.debug("isFragmentProcessingInProgress is already equal to",e)}function ae(e){var t=d.getInitRequest(y,e);t&&(ie(!0),t.url=(0,p.replaceTokenForTemplate)(t.url,"Bandwidth",P?P.bandwidth:null),q.executeRequest(t))}function ne(e){W.push(e)}function re(e){if(N===e.mediaType&&y.getStreamInfo().id===e.streamInfo.id){if(null==(P=y.getRepresentationInfo(e.newQuality)))throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");Ne(new Date,a.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),ye()}}function oe(e){if(D&&q){var t=q.getRequests({state:c.default.FRAGMENT_MODEL_EXECUTED,time:D.getTime(),threshold:0})[0];t&&D.getTime()>=t.startTime&&((!Y.mediaInfo||t.mediaInfo.type===Y.mediaInfo.type&&t.mediaInfo.id!==Y.mediaInfo.id)&&e&&n.trigger(A.default.TRACK_CHANGE_RENDERED,{mediaType:N,oldMediaInfo:Y.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===Y.quality&&t.adaptationIndex===Y.adaptationIndex||!e||n.trigger(A.default.QUALITY_CHANGE_RENDERED,{mediaType:N,oldQuality:Y.quality,newQuality:t.quality}),Y={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function se(e){e.error||e.sender.getStreamProcessor()!==y||(P=d.convertDataToRepresentationInfo(e.currentRepresentation))}function de(e){e.error||y.getStreamInfo().id!==e.streamInfo.id||(P=y.getRepresentationInfo(),M&&(D.getIsDynamic()?(T.setTimeSyncCompleted(!0),function(){var e=y.getLiveEdgeFinder();if(e){var t=e.getLiveEdge(),a=P.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,n=t-D.computeLiveDelay(P.fragmentDuration,a),r=d.getFragmentRequest(y,P,n,{ignoreIsFinished:!0});if(r)if(m.getLowLatencyEnabled()){var s=r.duration<m.getLiveDelay()?r.startTime:r.startTime+r.duration-m.getLiveDelay();D.setLiveStartTime(s)}else D.setLiveStartTime(r.startTime);else v.debug("setLiveEdgeSeekTarget : getFragmentRequest returned undefined request object");w=D.getStreamStartTime(!1,t),y.getBufferController().setSeekStartTime(w),w>P.mediaInfo.streamInfo.start+P.mediaInfo.streamInfo.duration&&D.seek(w);var u=f.getCurrentManifestUpdate(o.getMetricsFor(i.default.STREAM));o.updateManifestUpdateInfo(u,{currentTime:w,presentationStartTime:t,latency:t-w,clientTimeOffset:T.getClientTimeOffset()})}}()):(w=D.getStreamStartTime(!1),y.getBufferController().setSeekStartTime(w))),b&&Z())}function ue(e){e.fragmentModel===q&&(J(),ie(!1),v.info("Stream is complete"))}function fe(e){e.sender===q&&(v.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined",", Range:",e.request.range?e.request.range:"undefined"),E.getIsTextTrack(N)&&ie(!1),e.error&&e.request.serviceLocation&&!b&&(ne(e.request),ie(!1),ee(0)),X&&(j=e.request))}function le(){oe(!0)}function Ee(e){if(e.sender.getStreamProcessor()===y)if(X&&!isNaN(e.startTime)&&(X=!1,q.addExecutedRequest(j)),ie(!1),z&&!isNaN(e.startTime)){var t=D.getTime(),i=e.startTime+P.fragmentDuration,a=1.5*P.fragmentDuration;ee(t+a>=i?0:1e3*(i-(t+a))),z=!1}else ee(0)}function ce(e){e.streamProcessor===y&&(v.info("onFragmentLoadingAbandoned for "+N+", request: "+e.request.url+" has been aborted"),D.isSeeking()||V||(v.info("onFragmentLoadingAbandoned for "+N+", request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),ne(e.request)),ie(!1),ee(0))}function Te(e){e.sender.getStreamProcessor()===y&&J()}function ge(e){if(e.sender.getStreamProcessor()===y){var t=y.getStreamInfo();t&&(e.unintended?q.removeExecutedRequestsAfterTime(e.from,t.duration):q.syncExecutedRequestsWithBufferedRange(y.getBufferController().getBuffer().getAllBufferRanges(),t.duration)),e.hasEnoughSpaceToAppend&&b&&Z()}}function me(e){e.sender.getStreamProcessor()!==y||e.state!==s.default.BUFFER_EMPTY||D.isSeeking()||(v.info("Buffer is empty! Stalling!"),Ne(new Date,a.PlayListTrace.REBUFFERING_REASON))}function Ae(e){e.sender.getStreamProcessor()===y&&(J(),ie(!1))}function Ie(){q.abortRequests(),J()}function De(e){e.sender.getStreamProcessor()===y&&R.isTextEnabled()&&ae(e.index)}function _e(){!b&&m.getScheduleWhilePaused()||Z()}function he(e){w=e.seekTime,pe(0),b&&Z();var t=f.getCurrentManifestUpdate(o.getMetricsFor(i.default.STREAM)),a=P.DVRWindow&&D?P.DVRWindow.end-D.getTime():NaN;o.updateManifestUpdateInfo(t,{latency:a}),U?(v.debug("onPlaybackSeeking for "+N+", call fragmentModel.abortRequests in order to seek quicker"),q.abortRequests()):ee(0)}function Re(e){B&&(B.playbackspeed=e.playbackRate.toString())}function Se(e){w=e}function pe(e){k=e}function Ne(e,t){if(F&&!1===x){var i=B.start,a=e.getTime()-i.getTime();B.duration=a,B.stopreason=t,F.trace.push(B),x=!0}}function ye(){F&&!0===x&&P&&(x=!1,(B=new a.PlayListTrace).representationid=P.id,B.start=new Date,B.mstart=1e3*D.getTime(),B.playbackspeed=D.getPlaybackRate().toString())}function Ce(){U=!1,k=0,w=NaN,F=null,B=null,x=!0,M=!0,H=NaN,Y={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},K={},W=[],b=!0,V=!1,X=!1,j=null,z=!1}return L={initialize:function(){q=y.getFragmentModel(),G=(0,u.default)(t).create({abrController:I,dashMetrics:f,metricsModel:o,mediaPlayerModel:m,textController:R}),Q=(0,l.default)(t).create({adapter:d,textController:R,playbackController:D}),E.getIsTextTrack(e.mimeType)&&n.on(A.default.TIMED_TEXT_REQUESTED,De,this),n.on(A.default.QUALITY_CHANGE_REQUESTED,re,this),n.on(A.default.DATA_UPDATE_STARTED,Te,this),n.on(A.default.DATA_UPDATE_COMPLETED,se,this),n.on(A.default.FRAGMENT_LOADING_COMPLETED,fe,this),n.on(A.default.STREAM_COMPLETED,ue,this),n.on(A.default.STREAM_INITIALIZED,de,this),n.on(A.default.BUFFER_LEVEL_STATE_CHANGED,me,this),n.on(A.default.BUFFER_CLEARED,ge,this),n.on(A.default.BYTES_APPENDED_END_FRAGMENT,Ee,this),n.on(A.default.INIT_REQUESTED,te,this),n.on(A.default.QUOTA_EXCEEDED,Ae,this),n.on(A.default.PLAYBACK_SEEKING,he,this),n.on(A.default.PLAYBACK_STARTED,_e,this),n.on(A.default.PLAYBACK_RATE_CHANGED,Re,this),n.on(A.default.PLAYBACK_TIME_UPDATED,le,this),n.on(A.default.URL_RESOLUTION_FAILED,Ie,this),n.on(A.default.FRAGMENT_LOADING_ABANDONED,ce,this)},getType:function(){return N},setSeekTarget:Se,setTimeToLoadDelay:pe,replaceRequest:ne,switchTrackAsked:function(){V=!0},isStarted:function(){return!1===b},start:Z,stop:J,reset:function(){n.off(A.default.DATA_UPDATE_STARTED,Te,this),n.off(A.default.DATA_UPDATE_COMPLETED,se,this),n.off(A.default.BUFFER_LEVEL_STATE_CHANGED,me,this),n.off(A.default.QUALITY_CHANGE_REQUESTED,re,this),n.off(A.default.FRAGMENT_LOADING_COMPLETED,fe,this),n.off(A.default.STREAM_COMPLETED,ue,this),n.off(A.default.STREAM_INITIALIZED,de,this),n.off(A.default.QUOTA_EXCEEDED,Ae,this),n.off(A.default.BYTES_APPENDED_END_FRAGMENT,Ee,this),n.off(A.default.BUFFER_CLEARED,ge,this),n.off(A.default.INIT_REQUESTED,te,this),n.off(A.default.PLAYBACK_RATE_CHANGED,Re,this),n.off(A.default.PLAYBACK_SEEKING,he,this),n.off(A.default.PLAYBACK_STARTED,_e,this),n.off(A.default.PLAYBACK_TIME_UPDATED,le,this),n.off(A.default.URL_RESOLUTION_FAILED,Ie,this),n.off(A.default.FRAGMENT_LOADING_ABANDONED,ce,this),E.getIsTextTrack(N)&&n.off(A.default.TIMED_TEXT_REQUESTED,De,this),J(),oe(!1),Ce()},setPlayList:function(e){F=e},getBufferTarget:function(){return G.getBufferTarget(y,_.isTrackTypePresent(i.default.VIDEO))},finalisePlayList:function(e,t){Ne(e,t),F=null}},v=(0,h.default)(t).getInstance().getLogger(L),Ce(),L}N.__dashjs_factory_name="ScheduleController",exports.default=D.default.getClassFactory(N),module.exports=exports.default;
},{"../constants/Constants":"NqGT","../vo/metrics/PlayList":"pWQ1","./AbrController":"MLDH","./BufferController":"P0rN","../rules/scheduling/BufferLevelRule":"WY5R","../rules/scheduling/NextFragmentRequestRule":"TFlE","../models/FragmentModel":"Y27R","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb","./MediaController":"skwV","../../dash/utils/SegmentsUtils":"zhNk"}],"wyUT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,i){for(var e=0;e<i.length;e++){var E=i[e];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(t,E.key,E)}}return function(i,e,E){return e&&t(i.prototype,e),E&&t(i,E),i}}();function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var e=function(){function e(){i(this,e),this.init()}return t(e,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight"}}]),e}(),E=new e;exports.default=E,module.exports=exports.default;
},{}],"AvRg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function e(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=require("../constants/DashConstants"),a=e(i),l=function(){function e(){n(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return t(e,null,[{key:"hasInitialization",value:function(t){return null!==t.initialization||null!==t.range}},{key:"hasSegments",value:function(t){return t.segmentInfoType!==a.default.BASE_URL&&t.segmentInfoType!==a.default.SEGMENT_BASE&&!t.indexRange}}]),e}();exports.default=l,module.exports=exports.default;
},{"../constants/DashConstants":"wyUT"}],"Zp08":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../streaming/constants/Constants"),n=e(t),a=require("../../core/errors/Errors"),i=e(a),r=require("../constants/DashConstants"),o=e(r),d=require("../../streaming/vo/DashJSError"),u=e(d),l=require("../../core/EventBus"),s=e(l),f=require("../../core/events/Events"),g=e(f),E=require("../../core/FactoryMaker"),p=e(E),T=require("../vo/Representation"),c=e(T);function A(){var e=this.context,t=(0,s.default)(e).getInstance(),a=void 0,r=void 0,d=void 0,l=void 0,f=void 0,E=void 0,p=void 0,T=void 0,A=void 0,v=void 0,D=void 0,m=void 0,_=void 0,y=void 0,R=void 0,I=void 0;function S(){return l}function M(){return E}function h(){r=null,d=-1,l=!0,f=[],p=null,A=null,v=null,D=null,m=null,_=null,y=null}function U(){var e=new Date,t=M(),n=1e3*A.getTime();v.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function C(){var e=R.getStreamInfo(),t=e?e.manifestInfo:null,n=t?t.isDynamic:null,a=m.calcSegmentAvailabilityRange(E,n);v.addDVRInfo(R.getType(),A.getTime(),t,a)}function P(e){return null==e||e>=f.length?null:f[e]}function F(e){var n=e;l=!1,t.trigger(g.default.AST_IN_FUTURE,{delay:n}),setTimeout(function(){if(!S()){l=!0,t.trigger(g.default.DATA_UPDATE_STARTED,{sender:a}),f.forEach(function(e){e.segmentAvailabilityRange=null});for(var e=0;e<f.length;e++)T.updateRepresentation(f[e],!0)}},n)}function L(e){if(e.sender.getStreamProcessor()===R&&S()){var a,d=e.representation,s=v.getMetricsFor(n.default.STREAM),T=v.getMetricsFor(M().adaptation.type),D=y.getCurrentManifestUpdate(s),m=!1,_=0,I=void 0,h=void 0;if(d.adaptation.period.mpd.manifest.type===o.default.DYNAMIC&&!d.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var P=d.segmentAvailabilityRange.end-d.segmentAvailabilityRange.start;_=1e3*(A.computeLiveDelay(E.segmentDuration,R.getStreamInfo().manifestInfo.DVRWindowSize)-P)}if(_>0)return C(),F(_),h=new u.default(i.default.SEGMENTS_UPDATE_FAILED_ERROR_CODE,i.default.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE),void t.trigger(g.default.DATA_UPDATE_COMPLETED,{sender:this,data:r,currentRepresentation:E,error:h});if(D){for(var L=0;L<D.representationInfo.length;L++)if((I=D.representationInfo[L]).index===d.index&&I.mediaType===R.getType()){m=!0;break}m||v.addManifestUpdateRepresentationInfo(D,d.id,d.index,d.adaptation.period.index,R.getType(),d.presentationTimeOffset,d.startNumber,d.segmentInfoType)}(function(){for(var e=0,t=f.length;e<t;e++){var n=f[e].segmentInfoType;if(null===f[e].segmentAvailabilityRange||!c.default.hasInitialization(f[e])||(n===o.default.SEGMENT_BASE||n===o.default.BASE_URL)&&!f[e].segments)return!1}return!0})()&&(l=!1,p.setPlaybackQuality(R.getType(),R.getStreamInfo(),(a=E,f.indexOf(a))),v.updateManifestUpdateInfo(D,{latency:E.segmentAvailabilityRange.end-A.getTime()}),y.getCurrentRepresentationSwitch(T)||U(),t.trigger(g.default.DATA_UPDATE_COMPLETED,{sender:this,data:r,currentRepresentation:E}))}}function N(e){e.isDynamic&&function(e){for(var t=void 0,n=0,a=f.length;n<a;n++)(t=f[n]).segmentAvailabilityRange=m.calcSegmentAvailabilityRange(t,e)}(e.isDynamic)}function b(e){e.sender.getStreamProcessor()===R&&(I.getValue().doNotUpdateDVRWindowOnBufferUpdated||C())}function x(e){if(e.mediaType===R.getType()&&R.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality){E=P(e.newQuality);var t=p.getThroughputHistory().getAverageThroughput(e.mediaType);isNaN(t)||D.setSavedBitrateSettings(e.mediaType,t),U()}}function O(e){if(e.newDuration){var t=M();if(t&&t.adaptation.period)t.adaptation.period.duration=e.newDuration}}return a={initialize:function(){T=R.getIndexHandler()},setConfig:function(e){e.abrController&&(p=e.abrController),e.domStorage&&(D=e.domStorage),e.metricsModel&&(v=e.metricsModel),e.dashMetrics&&(y=e.dashMetrics),e.dashManifestModel&&(_=e.dashManifestModel),e.playbackController&&(A=e.playbackController),e.timelineConverter&&(m=e.timelineConverter),e.manifestModel&&(I=e.manifestModel),e.streamProcessor&&(R=e.streamProcessor)},getData:function(){return r},getDataIndex:function(){return d},isUpdating:S,updateData:function(e,a,i){var o=R.getStreamInfo(),u=p.getTopQualityIndexFor(i,o.id),s=p.getMinAllowedIndexFor(i),c=void 0,A=null;if(l=!0,t.trigger(g.default.DATA_UPDATE_STARTED,{sender:this}),f=function(e){return d=_.getIndexForAdaptation(r,e.period.mpd.manifest,e.period.index),_.getRepresentationsForAdaptation(e)}(a),null!==r&&r.id==e.id||i===n.default.FRAGMENTED_TEXT?c=p.getQualityFor(i,o):(A=p.getThroughputHistory().getAverageThroughput(i)||p.getInitialBitrateFor(i,o),c=p.getQualityForBitrate(R.getMediaInfo(),A)),void 0!==s&&c<s&&(c=s),c>u&&(c=u),E=P(c),r=e,i!==n.default.VIDEO&&i!==n.default.AUDIO&&i!==n.default.FRAGMENTED_TEXT)return l=!1,void t.trigger(g.default.DATA_UPDATE_COMPLETED,{sender:this,data:r,currentRepresentation:E});for(var v=0;v<f.length;v++)T.updateRepresentation(f[v],!0)},getStreamProcessor:function(){return R},getCurrentRepresentation:M,getRepresentationForQuality:P,reset:function(){t.off(g.default.QUALITY_CHANGE_REQUESTED,x,a),t.off(g.default.REPRESENTATION_UPDATED,L,a),t.off(g.default.WALLCLOCK_TIME_UPDATED,N,a),t.off(g.default.BUFFER_LEVEL_UPDATED,b,a),t.off(g.default.MANIFEST_VALIDITY_CHANGED,O,a),h()}},h(),t.on(g.default.QUALITY_CHANGE_REQUESTED,x,a),t.on(g.default.REPRESENTATION_UPDATED,L,a),t.on(g.default.WALLCLOCK_TIME_UPDATED,N,a),t.on(g.default.BUFFER_LEVEL_UPDATED,b,a),t.on(g.default.MANIFEST_VALIDITY_CHANGED,O,a),a}A.__dashjs_factory_name="RepresentationController",exports.default=p.default.getClassFactory(A),module.exports=exports.default;
},{"../../streaming/constants/Constants":"NqGT","../../core/errors/Errors":"dCLp","../constants/DashConstants":"wyUT","../../streaming/vo/DashJSError":"BHVF","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6","../vo/Representation":"AvRg"}],"rvxi":[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../core/FactoryMaker"),r=t(e);function n(){var t=void 0,e=/^[a-z][a-z0-9+\-.]*:/i,r=/^https?:\/\//i,n=/^https:\/\//i,i=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,u=function(t,e){try{return new window.URL(t,e).toString()}catch(r){return t}},a=function(t,e){var r=o;if(!e)return t;if(!f(t))return t;l(t)&&(r=s),d(t)&&(r=c);var n=r(e),i="/"!==n.charAt(n.length-1)&&"/"!==t.charAt(0)?"/":"";return[n,t].join(i)};function o(t){var e=t.indexOf("/"),r=t.lastIndexOf("/");return-1!==e?r===e+1?t:(-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),t.substring(0,r+1)):""}function s(t){var e=t.match(i);return e?e[1]:""}function c(t){var r=t.match(e);return r?r[0]:""}function f(t){return!e.test(t)}function l(t){return f(t)&&"/"===t.charAt(0)}function d(t){return 0===t.indexOf("//")}return function(){try{new window.URL("x","http://y"),t=u}catch(e){}finally{t=t||a}}(),{parseBaseUrl:o,parseOrigin:s,parseScheme:c,isRelative:f,isPathAbsolute:l,isSchemeRelative:d,isHTTPURL:function(t){return r.test(t)},isHTTPS:function(t){return n.test(t)},resolve:function(e,r){return t(e,r)}}}n.__dashjs_factory_name="URLUtils",exports.default=r.default.getSingletonFactory(n),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6"}],"sJSN":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=require("../../core/FactoryMaker"),t=e(a),i=require("../../streaming/constants/Constants"),r=e(i),n=require("./SegmentsUtils");function o(e,a){var t=(e=e||{}).timelineConverter;return{getSegments:function(e,i,o,d){if(function(){if(!t||!t.hasOwnProperty("calcMediaTimeFromPresentationTime")||!t.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(r.default.MISSING_CONFIG_ERROR)}(),!e)throw new Error("no representation");void 0===i&&(i=null);var s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,l=s.SegmentTimeline,m=s.SegmentURL_asArray,u=e.availableSegmentsNumber>0,p=void 0;p=d||(o>-1||null!==i?10:1/0);var g,f,v,c=0,y=0,_=-1,S=[],A=null,h=void 0,R=void 0,b=void 0,P=void 0,x=void 0,T=void 0,w=void 0,M=void 0,O=function(i,r){var o=s.media,d=i.mediaRange;return m&&(o=m[r].media||"",d=m[r].mediaRange),(0,n.getTimeBasedSegment)(t,a,e,c,i.d,M,o,d,_,i.tManifest)};for(M=e.timescale,g=l.S_asArray,v=o,null!==i&&(A=t.calcMediaTimeFromPresentationTime(i,e)),R=0,f=g.length;R<f;R++){if(P=0,(h=g[R]).hasOwnProperty("r")&&(P=h.r),h.hasOwnProperty("t")&&(y=(c=h.t)/M),P<0){if((T=g[R+1])&&T.hasOwnProperty("t"))x=T.t/M;else{var F=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:t.calcSegmentAvailabilityRange(e,a).end;x=t.calcMediaTimeFromPresentationTime(F,e),e.segmentDuration=h.d/M}P=Math.ceil((x-y)/(h.d/M))-1}if(w){if(u)break;_+=P+1}else for(b=0;b<=P;b++)if(_++,S.length>p){if(w=!0,u)break}else null!==A?y>=A-h.d/M*1.5&&S.push(O(h,_)):_>=v&&S.push(O(h,_)),y=(c+=h.d)/M}return u||(e.availableSegmentsNumber=_+1),S}}}o.__dashjs_factory_name="TimelineSegmentsGetter";var d=t.default.getClassFactory(o);exports.default=d,module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","../../streaming/constants/Constants":"NqGT","./SegmentsUtils":"zhNk"}],"e8T7":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),a=e(t),r=require("./SegmentsUtils");function n(e,t){var a=e.timelineConverter;return{getSegments:function(e,n,i,s){var l,m,o,d=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,u=e.segmentDuration,p=e.segmentAvailabilityRange,c=[],g=null,f=null,v=void 0,_=void 0;for(o=e.startNumber,l=(v=isNaN(u)&&!t?{start:o,end:o}:(0,r.decideSegmentListRangeForTemplate)(a,t,e,n,i,s)).start,m=v.end,_=l;_<=m;_++)(f=(0,r.getIndexBasedSegment)(a,t,e,_)).replacementTime=(o+_-1)*e.segmentDuration,g=d.media,g=(0,r.replaceTokenForTemplate)(g,"Number",f.replacementNumber),g=(0,r.replaceTokenForTemplate)(g,"Time",f.replacementTime),f.media=g,c.push(f),f=null;return isNaN(u)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((p.end-p.start)/u),c}}}n.__dashjs_factory_name="TemplateSegmentsGetter";var i=a.default.getClassFactory(n);exports.default=i,module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","./SegmentsUtils":"zhNk"}],"FleP":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),a=e(t),r=require("./SegmentsUtils");function n(e,t){var a=(e=e||{}).timelineConverter;return{getSegments:function(e,n,i,d){var s,o,m,u,g=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,l=g.SegmentURL_asArray.length,p=[],_=void 0,x=void 0,c=void 0;for(u=e.startNumber,s=(0,r.decideSegmentListRangeForTemplate)(a,t,e,n,i,d),o=Math.max(s.start,0),m=Math.min(s.end,g.SegmentURL_asArray.length-1),_=o;_<=m;_++)c=g.SegmentURL_asArray[_],(x=(0,r.getIndexBasedSegment)(a,t,e,_)).replacementTime=(u+_-1)*e.segmentDuration,x.media=c.media?c.media:"",x.mediaRange=c.mediaRange,x.index=c.index,x.indexRange=c.indexRange,p.push(x),x=null;return e.availableSegmentsNumber=l,p}}}n.__dashjs_factory_name="ListSegmentsGetter";var i=a.default.getClassFactory(n);exports.default=i,module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","./SegmentsUtils":"zhNk"}],"XoWf":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/DashConstants"),r=e(t),a=require("../../core/FactoryMaker"),n=e(a),s=require("./TimelineSegmentsGetter"),u=e(s),i=require("./TemplateSegmentsGetter"),o=e(i),d=require("./ListSegmentsGetter"),l=e(d);function f(e,t){var a,n=this.context,s=void 0,i=void 0,d=void 0;return a={getSegments:function(e,t,a,n,u){var o=void 0,l=e.segmentInfoType;l!==r.default.SEGMENT_BASE&&l!==r.default.BASE_URL&&function(e,t){var r=e.segments,a=!1,n=void 0,s=void 0;return r&&0!==r.length?(s=r[0].availabilityIdx,n=r[r.length-1].availabilityIdx,a=t<s||t>n):a=!0,a}(e,a)?(l===r.default.SEGMENT_TIMELINE?o=s.getSegments(e,t,a,u):l===r.default.SEGMENT_TEMPLATE?o=i.getSegments(e,t,a,u):l===r.default.SEGMENT_LIST&&(o=d.getSegments(e,t,a,u)),n&&n(e,o)):o=e.segments}},s=(0,u.default)(n).create(e,t),i=(0,o.default)(n).create(e,t),d=(0,l.default)(n).create(e,t),a}f.__dashjs_factory_name="SegmentsGetter";var g=n.default.getClassFactory(f);exports.default=g,module.exports=exports.default;
},{"../constants/DashConstants":"wyUT","../../core/FactoryMaker":"KAF6","./TimelineSegmentsGetter":"sJSN","./TemplateSegmentsGetter":"e8T7","./ListSegmentsGetter":"FleP"}],"iL20":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),r=e(t);function u(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}u.__dashjs_factory_name="RequestModifier",exports.default=r.default.getSingletonFactory(u),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6"}],"yJPC":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../core/FactoryMaker"),o=e(r);function t(e){var r=(e=e||{}).requestModifier;return{load:function(e){var o=new Date,t=e.request,n=new XMLHttpRequest;n.open(e.method,e.url,!0),t.responseType&&(n.responseType=t.responseType),t.range&&n.setRequestHeader("Range","bytes="+t.range),t.requestStartDate||(t.requestStartDate=o),r&&(n=r.modifyRequestHeader(n)),n.withCredentials=e.withCredentials,n.onload=e.onload,n.onloadend=e.onend,n.onerror=e.onerror,n.onprogress=e.progress,n.onabort=e.onabort,n.send(),e.response=n},abort:function(e){var r=e.response;r.onloadend=r.onerror=r.onprogress=void 0,r.abort()}}}t.__dashjs_factory_name="XHRLoader";var n=o.default.getClassFactory(t);exports.default=n,module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6"}],"M8m8":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../core/FactoryMaker"),t=e(r);function n(e){var r=(e=e||{}).requestModifier,t=e.boxParser;function n(e,r){e.reader.read().then(r).catch(function(r){e.onerror&&200===e.response.status&&e.onerror(r)})}function o(e,r){if((e=e.filter(function(t){return t.bytes>r/4/e.length})).length>1){var t=(n=0,o=(e[e.length-1].ts-e[0].ts)/e.length,e.forEach(function(r,t){var a=e[t+1];if(a){var s=a.ts-r.ts;n+=s<o?s:0}}),{v:n});if("object"==typeof t)return t.v}var n,o;return null}return{load:function(e){var a=new Date,s=e.request,l=new Headers;s.range&&l.append("Range","bytes="+s.range),s.requestStartDate||(s.requestStartDate=a),r&&r.modifyRequestHeader({setRequestHeader:function(e,r){l.append(e,r)}});var u=void 0;"function"==typeof window.AbortController&&(u=new AbortController,e.abortController=u);var d={method:e.method,headers:l,credentials:e.withCredentials?"include":void 0,signal:u?u.signal:void 0};fetch(e.url,d).then(function(r){e.response||(e.response={}),e.response.status=r.status,e.response.statusText=r.statusText,e.response.responseURL=r.url,r.ok||e.onerror();var a="",s=!0,l=!1,u=void 0;try{for(var d,i=r.headers.keys()[Symbol.iterator]();!(s=(d=i.next()).done);s=!0){var f=d.value;a+=f+": "+r.headers.get(f)+"\n"}}catch(b){l=!0,u=b}finally{try{!s&&i.return&&i.return()}finally{if(l)throw u}}if(e.response.responseHeaders=a,!r.body)return r.arrayBuffer().then(function(r){e.response.response=r;var t={loaded:r.byteLength,total:r.byteLength,stream:!1};e.progress(t),e.onload(),e.onend()});var c=parseInt(r.headers.get("Content-Length"),10),h=0,p=!1,v=new Uint8Array,g=0;e.reader=r.body.getReader();var y=[];n(e,function r(a){var s=a.value;if(a.done)return v&&(e.progress({loaded:h,total:isNaN(c)?h:c,lengthComputable:!0,time:o(y,h),stream:!0}),e.response.response=v.buffer),e.onload(),void e.onend();if(s&&s.length>0){v=function(e,r){if(0===e.length)return r;var t=new Uint8Array(e.length+r.length);return t.set(e),t.set(r,e.length),t}(v,s),h+=s.length,y.push({ts:Date.now(),bytes:s.length});var l=t.findLastTopIsoBoxCompleted(["moov","mdat"],v,g);if(l.found){var u=l.lastCompletedOffset+l.size,d=void 0;u===v.length?(d=v,v=new Uint8Array):(d=new Uint8Array(v.subarray(0,u)),v=v.subarray(u)),e.progress({data:d.buffer,lengthComputable:!1,noTrace:!0}),g=0}else g=l.lastCompletedOffset,p||(e.progress({lengthComputable:!1,noTrace:!0}),p=!0)}n(e,r)})}).catch(function(r){e.onerror&&e.onerror(r)})},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel()}catch(r){}},calculateDownloadedTime:o}}n.__dashjs_factory_name="FetchLoader";var o=t.default.getClassFactory(n);exports.default=o,module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6"}],"WJCH":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./XHRLoader"),s=e(r),o=require("./FetchLoader"),a=e(o),u=require("../vo/metrics/HTTPRequest"),n=require("../../core/FactoryMaker"),T=e(n),i=require("../../core/errors/Errors"),d=e(i),l=require("../vo/DashJSError"),E=e(l);function _(e){e=e||{};var r,o,n,T=this.context,i=e.errHandler,l=e.metricsModel,_=e.mediaPlayerModel,R=e.requestModifier,D=e.boxParser,O=e.useFetch||!1,p=void 0,f=void 0,c=void 0,N=void 0,I=void 0;return r={load:function(e){e.request&&function e(t,r){var o=t.request,n=[],d=!0,q=!0,P=new Date,y=P,m=0,H=void 0;if(!R||!l||!i)throw new Error("config object is not correct or missing");var A=function(e){q=!1,o.requestStartDate=P,o.requestEndDate=new Date,o.firstByteDate=o.firstByteDate||P,o.checkExistenceOnly||(l.addHttpRequest(o.mediaType,null,o.type,o.url,H.response?H.response.responseURL:null,o.serviceLocation||null,o.range||null,o.requestStartDate,o.firstByteDate,o.requestEndDate,H.response?H.response.status:null,o.duration,H.response&&H.response.getAllResponseHeaders?H.response.getAllResponseHeaders():H.response?H.response.responseHeaders:[],e?n:null),o.type===u.HTTPRequest.MPD_TYPE&&l.addManifestUpdate("stream",o.type,o.requestStartDate,o.requestEndDate))},L=function(){-1!==p.indexOf(H)&&(p.splice(p.indexOf(H),1),q&&(A(!1),r>0?function(){r--;var s={config:t};c.push(s),s.timeout=setTimeout(function(){-1!==c.indexOf(s)&&(c.splice(c.indexOf(s),1),e(t,r))},_.getRetryIntervalForType(o.type))}():(i.downloadError(N[o.type],o.url,o),i.error(new E.default(I[o.type],o.url+" is not available",{request:o,response:H.response})),t.error&&t.error(o,"error",H.response.statusText),t.complete&&t.complete(o,H.response.statusText))))},g=void 0;g=O&&window.fetch&&"arraybuffer"===o.responseType&&o.type===u.HTTPRequest.MEDIA_SEGMENT_TYPE?(0,a.default)(T).create({requestModifier:R,boxParser:D}):(0,s.default)(T).create({requestModifier:R,boxParser:D});var h=R.modifyRequestURL(o.url),M=o.checkExistenceOnly?u.HTTPRequest.HEAD:u.HTTPRequest.GET,b=_.getXHRWithCredentialsForType(o.type);H={url:h,method:M,withCredentials:b,request:o,onload:function(){H.response.status>=200&&H.response.status<=299&&(A(!0),t.success&&t.success(H.response.response,H.response.statusText,H.response.responseURL),t.complete&&t.complete(o,H.response.statusText))},onend:L,onerror:L,progress:function(e){var r=new Date;d&&(d=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(o.firstByteDate=r)),e.lengthComputable&&(o.bytesLoaded=e.loaded,o.bytesTotal=e.total),e.noTrace||(n.push({s:y,d:e.time?e.time:r.getTime()-y.getTime(),b:[e.loaded?e.loaded-m:0]}),y=r,m=e.loaded),t.progress&&e&&t.progress(e)},onabort:function(){t.abort&&t.abort(o)},loader:g};var v,C=(new Date).getTime();isNaN(o.delayLoadingTime)||C>=o.delayLoadingTime?(p.push(H),g.load(H)):(v={httpRequest:H},f.push(v),v.delayTimeout=setTimeout(function(){if(-1!==f.indexOf(v)){f.splice(f.indexOf(v),1);try{P=new Date,y=P,p.push(v.httpRequest),g.load(v.httpRequest)}catch(e){v.httpRequest.onerror()}}},o.delayLoadingTime-C))}(e,_.getRetryAttemptsForType(e.request.type))},abort:function(){c.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)}),c=[],f.forEach(function(e){return clearTimeout(e.delayTimeout)}),f=[],p.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e),e.onabort()}),p=[]}},p=[],f=[],c=[],t(o={},u.HTTPRequest.MPD_TYPE,d.default.DOWNLOAD_ERROR_ID_MANIFEST),t(o,u.HTTPRequest.XLINK_EXPANSION_TYPE,d.default.DOWNLOAD_ERROR_ID_XLINK),t(o,u.HTTPRequest.INIT_SEGMENT_TYPE,d.default.DOWNLOAD_ERROR_ID_INITIALIZATION),t(o,u.HTTPRequest.MEDIA_SEGMENT_TYPE,d.default.DOWNLOAD_ERROR_ID_CONTENT),t(o,u.HTTPRequest.INDEX_SEGMENT_TYPE,d.default.DOWNLOAD_ERROR_ID_CONTENT),t(o,u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,d.default.DOWNLOAD_ERROR_ID_CONTENT),t(o,u.HTTPRequest.OTHER_TYPE,d.default.DOWNLOAD_ERROR_ID_CONTENT),N=o,t(n={},u.HTTPRequest.MPD_TYPE,d.default.DOWNLOAD_ERROR_ID_MANIFEST_CODE),t(n,u.HTTPRequest.XLINK_EXPANSION_TYPE,d.default.DOWNLOAD_ERROR_ID_XLINK_CODE),t(n,u.HTTPRequest.INIT_SEGMENT_TYPE,d.default.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),t(n,u.HTTPRequest.MEDIA_SEGMENT_TYPE,d.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),t(n,u.HTTPRequest.INDEX_SEGMENT_TYPE,d.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),t(n,u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,d.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),t(n,u.HTTPRequest.OTHER_TYPE,d.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),I=n,r}_.__dashjs_factory_name="HTTPLoader";var R=T.default.getClassFactory(_);exports.default=R,module.exports=exports.default;
},{"./XHRLoader":"yJPC","./FetchLoader":"M8m8","../vo/metrics/HTTPRequest":"RDXP","../../core/FactoryMaker":"KAF6","../../core/errors/Errors":"dCLp","../vo/DashJSError":"BHVF"}],"oSXd":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../streaming/utils/RequestModifier"),t=e(r),n=require("./vo/Segment"),a=e(n),i=require("../streaming/vo/DashJSError"),o=e(i),s=require("../core/events/Events"),d=e(s),l=require("../core/EventBus"),u=e(l),g=require("../streaming/utils/BoxParser"),f=e(g),c=require("../core/FactoryMaker"),v=e(c),m=require("../core/Debug"),E=e(m),_=require("../streaming/vo/metrics/HTTPRequest"),T=require("../streaming/vo/FragmentRequest"),L=e(T),p=require("../streaming/net/HTTPLoader"),y=e(p),b=require("../core/errors/Errors"),I=e(b);function S(){var e=this.context,r=(0,u.default)(e).getInstance(),n=void 0,i=void 0,s=void 0,l=void 0,g=void 0,c=void 0,v=void 0,m=void 0,T=void 0;function p(){if(!T||!T.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function b(e){if(e.url){var r=new L.default;return r.type=e.init?_.HTTPRequest.INIT_SEGMENT_TYPE:_.HTTPRequest.MEDIA_SEGMENT_TYPE,r.url=e.url,r.range=e.range.start+"-"+e.range.end,r}}function S(e,t,n){e?r.trigger(d.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):r.trigger(d.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new o.default(I.default.SEGMENT_BASE_LOADER_ERROR_CODE,I.default.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}return n={setConfig:function(e){e.baseURLController&&(T=e.baseURLController),e.metricsModel&&(c=e.metricsModel),e.mediaPlayerModel&&(v=e.mediaPlayerModel),e.errHandler&&(s=e.errHandler)},initialize:function(){l=(0,f.default)(e).getInstance(),g=(0,t.default)(e).getInstance(),m=(0,y.default)(e).create({errHandler:s,metricsModel:c,mediaPlayerModel:v,requestModifier:g})},loadInitialization:function e(t,n){p();var a=null,o=T.resolve(t.path),s=n||{init:!0,url:o?o.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};i.debug("Start searching for initialization.");var u=b(s);m.load({request:u,success:function(n){s.bytesLoaded=s.range.end,(a=l.findInitRange(n))?(t.range=a,r.trigger(d.default.INITIALIZATION_LOADED,{representation:t})):(s.range.end=s.bytesLoaded+s.bytesToLoad,e(t,s))},error:function(){r.trigger(d.default.INITIALIZATION_LOADED,{representation:t})}}),i.debug("Perform init search: "+s.url)},loadSegments:function e(r,t,n,o,s){if(p(),n&&(void 0===n.start||void 0===n.end)){var d=n?n.toString().split("-"):null;n=d?{start:parseFloat(d[0]),end:parseFloat(d[1])}:null}s=s||S;var u=null,g=null,f=!!n,c=T.resolve(r.path),v={init:!1,url:c?c.url:void 0,range:f?n:{start:0,end:1500},searching:!f,bytesLoaded:o?o.bytesLoaded:0,bytesToLoad:1500},E=b(v);m.load({request:E,success:function(n){var o=v.bytesToLoad,d=n.byteLength;if(v.bytesLoaded=v.range.end-v.range.start,u=l.parse(n),(g=u.getBox("sidx"))&&g.isComplete){var f=g.references,c=void 0,m=void 0;null!=f&&f.length>0&&(c=1===f[0].reference_type),c?function(){i.debug("Initiate multiple SIDX load."),v.range.end=v.range.start+g.size;var n=void 0,a=void 0,o=void 0,d=void 0,l=[],u=0,c=(g.offset||v.range.start)+g.size,m=function(e){e?(l=l.concat(e),++u>=a&&s(l,r,t)):s(null,r,t)};for(n=0,a=f.length;n<a;n++)o=c,d=c+f[n].referenced_size-1,c+=f[n].referenced_size,e(r,null,{start:o,end:d},v,m)}():(i.debug("Parsing segments from SIDX."),m=function(e,r){for(var t=e.references,n=t.length,i=e.timescale,o=e.earliest_presentation_time,s=r.range.start+e.offset+e.first_offset+e.size,d=[],l=void 0,u=void 0,g=void 0,f=void 0,c=0;c<n;c++)g=t[c].subsegment_duration,f=t[c].referenced_size,(l=new a.default).duration=g,l.startTime=o,l.timescale=i,u=s+f-1,l.mediaRange=s+"-"+u,d.push(l),o+=g,s+=f;return d}(g,v),s(m,r,t))}else{if(g)v.range.start=g.offset||v.range.start,v.range.end=v.range.start+(g.size||o);else{if(d<v.bytesLoaded)return void s(null,r,t);var E=u.getLastBox();E&&E.size?(v.range.start=E.offset+E.size,v.range.end=v.range.start+o):v.range.end+=o}e(r,t,v.range,v,s)}},error:function(){s(null,r,t)}}),i.debug("Perform SIDX load: "+v.url)},reset:function(){m.abort(),m=null,s=null,l=null,g=null}},i=(0,E.default)(e).getInstance().getLogger(n),n}S.__dashjs_factory_name="SegmentBaseLoader",exports.default=v.default.getSingletonFactory(S),module.exports=exports.default;
},{"../streaming/utils/RequestModifier":"iL20","./vo/Segment":"CkPh","../streaming/vo/DashJSError":"BHVF","../core/events/Events":"VXzW","../core/EventBus":"ASRh","../streaming/utils/BoxParser":"dfT6","../core/FactoryMaker":"KAF6","../core/Debug":"Jjwb","../streaming/vo/metrics/HTTPRequest":"RDXP","../streaming/vo/FragmentRequest":"TOyU","../streaming/net/HTTPLoader":"WJCH","../core/errors/Errors":"dCLp"}],"zoUv":[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../core/FactoryMaker"),r=t(e);function n(t){t=t||{};var e=void 0,r=new DataView(t.data),n=0;function a(t,e){var a=!0,o=0;if(void 0===e&&(e=!1),t.tag>16777215?(r.getUint32(n)!==t.tag&&(a=!1),o=4):t.tag>65535?(256*r.getUint16(n)+r.getUint8(n+2)!==t.tag&&(a=!1),o=3):t.tag>255?(r.getUint16(n)!==t.tag&&(a=!1),o=2):(r.getUint8(n)!==t.tag&&(a=!1),o=1),!a&&t.required&&!e)throw new Error("required tag not found");return a&&(n+=o),a}function o(t){var e=1,a=128,o=-1,u=0,i=r.getUint8(n),g=0;for(g=0;g<8;g+=1){if((i&a)===a){u=void 0===t?i&~a:i,o=g;break}a>>=1}for(g=0;g<o;g+=1,e+=1)u=u<<8|255&r.getUint8(n+e);return n+=e,u}return e={getPos:function(){return n},setPos:function(t){n=t},consumeTag:a,consumeTagAndSize:function(t,e){var r=a(t,e);return r&&o(),r},parseTag:function(t){var r;return a(t),r=o(),e[t.parse](r)},skipOverElement:function(t,e){var r=a(t,e),u=void 0;return r&&(u=o(),n+=u),r},getMatroskaCodedNum:o,getMatroskaFloat:function(t){var e=void 0;switch(t){case 4:e=r.getFloat32(n),n+=4;break;case 8:e=r.getFloat64(n),n+=8}return e},getMatroskaUint:function(t){for(var e=0,a=0;a<t;a+=1)e<<=8,e|=255&r.getUint8(n+a);return n+=t,e},moreData:function(){return n<r.byteLength}}}n.__dashjs_factory_name="EBMLParser",exports.default=r.default.getClassFactory(n),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6"}],"hBm4":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../core/events/Events"),t=e(r),a=require("../core/EventBus"),o=e(a),n=require("../streaming/utils/EBMLParser"),i=e(n),u=require("../streaming/constants/Constants"),s=e(u),d=require("../core/FactoryMaker"),l=e(d),g=require("../core/Debug"),c=e(g),m=require("../streaming/utils/RequestModifier"),f=e(m),T=require("./vo/Segment"),v=e(T),C=require("../streaming/vo/metrics/HTTPRequest"),E=require("../streaming/vo/FragmentRequest"),p=e(E),S=require("../streaming/net/HTTPLoader"),q=e(S),P=require("../streaming/vo/DashJSError"),k=e(P),M=require("../core/errors/Errors"),_=e(M);function h(){var e=this.context,r=(0,o.default)(e).getInstance(),a=void 0,n=void 0,u=void 0,d=void 0,l=void 0,g=void 0,m=void 0,T=void 0,E=void 0;function S(r,t,a,o){var s,d,l=void 0,g=void 0,c=void 0,m=void 0,f=void 0,T=void 0;for(g=[],m=0,d=(s=function(r){var t=[],a=void 0,o=void 0,n=(0,i.default)(e).create({data:r});for(n.consumeTagAndSize(u.Segment.Cues);n.moreData()&&n.consumeTagAndSize(u.Segment.Cues.CuePoint,!0);){for((a={}).CueTime=n.parseTag(u.Segment.Cues.CuePoint.CueTime),a.CueTracks=[];n.moreData()&&n.consumeTag(u.Segment.Cues.CuePoint.CueTrackPositions,!0);){var s=n.getMatroskaCodedNum(),d=n.getPos();if((o={}).Track=n.parseTag(u.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===o.Track)throw new Error("Cue track cannot be 0");o.ClusterPosition=n.parseTag(u.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),a.CueTracks.push(o),n.setPos(d+s)}if(0===a.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(a)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}(r)).length;m<d;m+=1)c=new v.default,l=0,l=m<s.length-1?s[m+1].CueTime-s[m].CueTime:o-s[m].CueTime,c.duration=l,c.startTime=s[m].CueTime,c.timescale=1e3,f=s[m].CueTracks[0].ClusterPosition+t,T=m<s.length-1?s[m+1].CueTracks[0].ClusterPosition+t-1:a-1,c.mediaRange=f+"-"+T,g.push(c);return n.debug("Parsed cues: "+g.length+" cues."),g}function P(){if(!E||!E.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function M(e,a,o){e?r.trigger(t.default.SEGMENTS_LOADED,{segments:e,representation:a,mediaType:o}):r.trigger(t.default.SEGMENTS_LOADED,{segments:null,representation:a,mediaType:o,error:new k.default(_.default.SEGMENT_BASE_LOADER_ERROR_CODE,_.default.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function h(e){var r=new p.default;return r.type=e.init?C.HTTPRequest.INIT_SEGMENT_TYPE:C.HTTPRequest.MEDIA_SEGMENT_TYPE,r.url=e.url,r.range=e.range.start+"-"+e.range.end,r}return a={setConfig:function(e){if(!(e.baseURLController&&e.metricsModel&&e.mediaPlayerModel&&e.errHandler))throw new Error(s.default.MISSING_CONFIG_ERROR);E=e.baseURLController,g=e.metricsModel,m=e.mediaPlayerModel,d=e.errHandler},initialize:function(){l=(0,f.default)(e).getInstance(),T=(0,q.default)(e).create({errHandler:d,metricsModel:g,mediaPlayerModel:m,requestModifier:l})},loadInitialization:function(e,a){P();var o=null,i=E.resolve(e.path),u=i?i.url:void 0,s=e.range.split("-"),d=a||{range:{start:parseFloat(s[0]),end:parseFloat(s[1])},request:o,url:u,init:!0};n.info("Start loading initialization."),o=h(d),T.load({request:o,success:function(){r.trigger(t.default.INITIALIZATION_LOADED,{representation:e})},error:function(){r.trigger(t.default.INITIALIZATION_LOADED,{representation:e})}}),n.debug("Perform init load: "+d.url)},loadSegments:function(r,t,a,o){P();var s=null,d=E.resolve(r.path),l=d?d.url:void 0;o=o||M,s=h({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:s,url:l,init:!1}),n.debug("Parsing ebml header"),T.load({request:s,success:function(s){!function(r,t,a,o){var s,d=(0,i.default)(e).create({data:r}),l=void 0,g=void 0,c=a.split("-"),m=null,f={url:t,range:{start:parseFloat(c[0]),end:parseFloat(c[1])},request:m},v=void 0;for(n.debug("Parse EBML header: "+f.url),d.skipOverElement(u.EBML),d.consumeTag(u.Segment),v=d.getMatroskaCodedNum(),v+=d.getPos(),s=d.getPos();d.moreData()&&!d.consumeTagAndSize(u.Segment.Info,!0);)if(!(d.skipOverElement(u.Segment.SeekHead,!0)||d.skipOverElement(u.Segment.Tracks,!0)||d.skipOverElement(u.Segment.Cues,!0)||d.skipOverElement(u.Void,!0)))throw new Error("no valid top level element found");for(;void 0===l;){var C=d.getMatroskaCodedNum(!0),E=d.getMatroskaCodedNum();switch(C){case u.Segment.Info.Duration.tag:l=d[u.Segment.Info.Duration.parse](E);break;default:d.setPos(d.getPos()+E)}}m=h(f),T.load({request:m,success:function(e){g=S(e,s,v,l),o(g)},error:function(){n.error("Download Error: Cues "+f.url),o(null)}}),n.debug("Perform cues load: "+f.url+" bytes="+f.range.start+"-"+f.range.end)}(s,l,a,function(e){o(e,r,t)})},error:function(){o(null,r,t)}})},reset:function(){d=null,l=null}},n=(0,c.default)(e).getInstance().getLogger(a),u={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},a}h.__dashjs_factory_name="WebmSegmentBaseLoader",exports.default=l.default.getSingletonFactory(h),module.exports=exports.default;
},{"../core/events/Events":"VXzW","../core/EventBus":"ASRh","../streaming/utils/EBMLParser":"zoUv","../streaming/constants/Constants":"NqGT","../core/FactoryMaker":"KAF6","../core/Debug":"Jjwb","../streaming/utils/RequestModifier":"iL20","./vo/Segment":"CkPh","../streaming/vo/metrics/HTTPRequest":"RDXP","../streaming/vo/FragmentRequest":"TOyU","../streaming/net/HTTPLoader":"WJCH","../streaming/vo/DashJSError":"BHVF","../core/errors/Errors":"dCLp"}],"tuuF":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../streaming/constants/Constants"),n=e(t),i=require("./constants/DashConstants"),a=e(i),r=require("../streaming/vo/FragmentRequest"),o=e(r),l=require("../streaming/vo/DashJSError"),d=e(l),s=require("../streaming/vo/metrics/HTTPRequest"),u=require("../core/events/Events"),m=e(u),g=require("../core/EventBus"),f=e(g),T=require("../core/errors/Errors"),p=e(T),v=require("../core/FactoryMaker"),c=e(v),E=require("../core/Debug"),I=e(E),S=require("../streaming/utils/URLUtils"),y=e(S),R=require("./vo/Representation"),b=e(R),A=require("./utils/SegmentsUtils"),N=require("./utils/SegmentsGetter"),_=e(N),x=require("./SegmentBaseLoader"),h=e(x),q=require("./WebmSegmentBaseLoader"),D=e(q);function M(e){e=e||{};var t,i=this.context,r=(0,f.default)(i).getInstance(),l=(0,y.default)(i).getInstance(),u=void 0,g=e.timelineConverter,T=e.dashMetrics,v=e.metricsModel,c=e.mediaPlayerModel,E=e.errHandler,S=e.baseURLController,R=void 0,N=void 0,x=void 0,q=void 0,M=void 0,L=void 0,P=void 0;function O(){return L?L.getType():null}function C(){var e=L?L.getStreamInfo():null;return e?e.manifestInfo.isDynamic:null}function F(){return L?L.getMediaInfo():null}function w(){x=-1}function U(){w(),M=0,q=null,L=null,P=null}function G(e,t,n){var i=S.resolve(n.path),a=void 0,r=void 0;return i&&t!==i.url&&l.isRelative(t)?(a=i.url,r=i.serviceLocation,t&&(a=l.resolve(t,a))):a=t,!l.isRelative(a)&&(e.url=a,e.serviceLocation=r,!0)}function B(e){var t=!1,n=C();if(n||x!==e.availableSegmentsNumber){var i=(0,A.getSegmentByIndex)(x,e);if(i){var r=parseFloat((i.presentationStartTime-e.adaptation.period.start).toFixed(5)),o=e.adaptation.period.duration;N.debug(e.segmentInfoType+": "+r+" / "+o),t=(e.segmentInfoType!==a.default.SEGMENT_TIMELINE||!n)&&r>=o}else N.debug("isMediaFinished - no segment found")}else t=!0;return t}function k(e){P.getSegments(e,q,x,z)}function z(e,t){if(e.segments=t,t&&t.length>0&&C()){var i=t[t.length-1].presentationStartTime,a=v.getMetricsFor(n.default.STREAM);g.setExpectedLiveEdge(i),v.updateManifestUpdateInfo(T.getCurrentManifestUpdate(a),{presentationStartTime:i})}}function H(e){if(!e)throw new Error("no representation");e.segments=null,k(e)}function j(e,t,n){var i=t.segments,a=i?i.length:null,r=-1,o=void 0,l=void 0,d=void 0,s=void 0,u=void 0;if(i&&a>0)for(n=null==n?c.getSegmentOverlapToleranceTime():n,u=0;u<a;u++)if(d=(l=i[u]).presentationStartTime,s=l.duration,e+(o=null==n?s/2:n)>=d&&e-o<d+s){r=l.availabilityIdx;break}return r}function V(e){if(null==e)return null;var t=new o.default,n=e.representation,i=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,a=e.media;return a=(0,A.replaceTokenForTemplate)(a,"Number",e.replacementNumber),a=(0,A.replaceTokenForTemplate)(a,"Time",e.replacementTime),a=(0,A.replaceTokenForTemplate)(a,"Bandwidth",i),a=(0,A.replaceIDForTemplate)(a,n.id),a=(0,A.unescapeDollarsInTemplate)(a),t.mediaType=O(),t.type=s.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=F(),t.adaptationIndex=n.adaptation.index,t.representationId=n.id,G(t,a,n)?t:void 0}function W(e){var t=e.representation;t.segments&&r.trigger(m.default.REPRESENTATION_UPDATED,{sender:this,representation:t})}function Y(e){if(!e.error&&O()===e.mediaType){var t,n=e.segments,i=e.representation,a=[],o=0,l=void 0,d=void 0,s=void 0;for(l=0,t=n.length;l<t;l++)d=n[l],s=(0,A.getTimeBasedSegment)(g,C(),i,d.startTime,d.duration,d.timescale,d.media,d.mediaRange,o),a.push(s),s=null,o++;i.segmentAvailabilityRange={start:a[0].presentationStartTime,end:a[t-1].presentationStartTime},i.availableSegmentsNumber=t,z(i,a),b.default.hasInitialization(i)&&r.trigger(m.default.REPRESENTATION_UPDATED,{sender:this,representation:i})}}return R={initialize:function(t){L=t,u.initialize(),P=(0,_.default)(i).create(e,C())},getStreamProcessor:function(){return L},getInitRequest:function(e){return e?function(e,t){var n=new o.default,i=e.adaptation.period,a=i.start,r=C();if(n.mediaType=t,n.type=s.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=g.calcAvailabilityStartTimeFromPresentationTime(a,i.mpd,r),n.availabilityEndTime=g.calcAvailabilityEndTimeFromPresentationTime(a+i.duration,i.mpd,r),n.quality=e.index,n.mediaInfo=F(),n.representationId=e.id,G(n,e.initialization,e))return n}(e,O()):null},getSegmentRequestForTime:function(e,t,n){var i=void 0;if(!e)return null;var r=O(),l=x,d=!!n&&n.keepIdx,s=n?n.timeThreshold:null,u=!(!n||!n.ignoreIsFinished);return q!==t&&(q=t,N.debug("Getting the request for "+r+" time : "+t)),k(e),(x=j(t,e,s))<0&&(k(e),x=j(t,e,s)),x>=0&&N.debug("Index for "+r+" time "+t+" is "+x),!u&&B(e)?((i=new o.default).action=o.default.ACTION_COMPLETE,i.index=x,i.mediaType=r,i.mediaInfo=F(),N.debug("Signal complete in getSegmentRequestForTime -",r)):i=V((0,A.getSegmentByIndex)(x,e)),d&&l>=0&&(x=e.segmentInfoType===a.default.SEGMENT_TIMELINE&&C()?x:l),i},getNextSegmentRequest:function(e){var t=void 0,n=void 0;if(!e||-1===x)return null;var i=O(),a=C();return q=null,x++,N.debug("Getting the next request at index: "+x+", type: "+i),!(0,A.getSegmentByIndex)(x,e)&&a?(N.debug("No segment found at index: "+x+". Wait for next loop"),k(e),x--,null):(B(e)?((t=new o.default).action=o.default.ACTION_COMPLETE,t.index=x,t.mediaType=i,t.mediaInfo=F(),N.debug("Signal complete -",i)):(k(e),t=V(n=(0,A.getSegmentByIndex)(x,e)),!n&&a&&x--),t)},updateRepresentation:function(e,t){var n=b.default.hasInitialization(e),i=b.default.hasSegments(e),a=void 0;if(e.segmentDuration||e.segments||H(e),e.segmentAvailabilityRange=g.calcSegmentAvailabilityRange(e,C()),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)return a=new d.default(p.default.SEGMENTS_UNAVAILABLE_ERROR_CODE,p.default.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void r.trigger(m.default.REPRESENTATION_UPDATED,{sender:this,representation:e,error:a});t||w(),e.segmentDuration&&H(e),n||u.loadInitialization(e),i||u.loadSegments(e,O(),e.indexRange),n&&i&&r.trigger(m.default.REPRESENTATION_UPDATED,{sender:this,representation:e})},updateSegmentList:H,setCurrentTime:function(e){M=e},getCurrentTime:function(){return M},reset:function(){U(),r.off(m.default.INITIALIZATION_LOADED,W,R),r.off(m.default.SEGMENTS_LOADED,Y,R)},resetIndex:w},N=(0,I.default)(i).getInstance().getLogger(R),U(),t=e.mimeType,(u="webm"===t.split("/")[1].toLowerCase()?(0,D.default)(i).getInstance():(0,h.default)(i).getInstance()).setConfig({baseURLController:S,metricsModel:v,mediaPlayerModel:c,errHandler:E}),r.on(m.default.INITIALIZATION_LOADED,W,R),r.on(m.default.SEGMENTS_LOADED,Y,R),R}M.__dashjs_factory_name="DashHandler",exports.default=c.default.getClassFactory(M),module.exports=exports.default;
},{"../streaming/constants/Constants":"NqGT","./constants/DashConstants":"wyUT","../streaming/vo/FragmentRequest":"TOyU","../streaming/vo/DashJSError":"BHVF","../streaming/vo/metrics/HTTPRequest":"RDXP","../core/events/Events":"VXzW","../core/EventBus":"ASRh","../core/errors/Errors":"dCLp","../core/FactoryMaker":"KAF6","../core/Debug":"Jjwb","../streaming/utils/URLUtils":"rvxi","./vo/Representation":"AvRg","./utils/SegmentsUtils":"zhNk","./utils/SegmentsGetter":"XoWf","./SegmentBaseLoader":"oSXd","./WebmSegmentBaseLoader":"hBm4"}],"OKDG":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./constants/Constants"),t=e(r),n=require("./utils/LiveEdgeFinder"),o=e(n),l=require("./controllers/BufferController"),i=e(l),a=require("./text/TextBufferController"),u=e(a),s=require("./controllers/ScheduleController"),d=e(s),f=require("../dash/controllers/RepresentationController"),c=e(f),m=require("../core/FactoryMaker"),g=e(m),C=require("../dash/DashHandler"),p=e(C);function M(e){e=e||{};var r=this.context,n=e.type,l=e.errHandler,a=e.mimeType,s=e.timelineConverter,f=e.adapter,m=e.manifestModel,g=e.mediaPlayerModel,C=e.stream,M=e.abrController,y=e.playbackController,h=e.streamController,v=e.mediaController,I=e.textController,x=e.domStorage,B=e.metricsModel,b=e.dashMetrics,P=e.dashManifestModel,S=void 0,k=void 0,E=void 0,T=void 0,q=void 0,F=void 0,R=void 0,_=void 0,D=void 0,A=void 0;function H(){D=[]}function L(){E=[],k=null,H()}function z(){return C?C.getStreamInfo():null}function O(){return k}return S={initialize:function(o){(A=(0,p.default)(r).create({mimeType:a,timelineConverter:s,dashMetrics:b,metricsModel:B,mediaPlayerModel:g,baseURLController:e.baseURLController,errHandler:l})).initialize(S),M.registerStreamType(n,S),(_=C.getFragmentController().getModel(n)).setStreamProcessor(S),T=function(e){return e===t.default.VIDEO||e===t.default.AUDIO?(0,i.default)(r).create({type:e,metricsModel:B,mediaPlayerModel:g,manifestModel:m,errHandler:l,streamController:h,mediaController:v,adapter:f,textController:I,abrController:M,playbackController:y,streamProcessor:S}):(0,u.default)(r).create({type:e,mimeType:a,metricsModel:B,mediaPlayerModel:g,manifestModel:m,errHandler:l,streamController:h,mediaController:v,adapter:f,textController:I,abrController:M,playbackController:y,streamProcessor:S})}(n),q=(0,d.default)(r).create({type:n,mimeType:a,metricsModel:B,adapter:f,dashMetrics:b,dashManifestModel:P,timelineConverter:s,mediaPlayerModel:g,abrController:M,playbackController:y,streamController:h,textController:I,streamProcessor:S,mediaController:v}),(R=(0,c.default)(r).create()).setConfig({abrController:M,domStorage:x,metricsModel:B,dashMetrics:b,dashManifestModel:P,manifestModel:m,playbackController:y,timelineConverter:s,streamProcessor:S}),T.initialize(o),q.initialize(),R.initialize()},isUpdating:function(){return!!R&&R.isUpdating()},getType:function(){return n},getBufferController:function(){return T},getFragmentModel:function(){return _},getScheduleController:function(){return q},getLiveEdgeFinder:function(){return F},getFragmentController:function(){return C?C.getFragmentController():null},getRepresentationController:function(){return R},getIndexHandler:function(){return A},getRepresentationInfo:function(e){return f.getRepresentationInfo(R,e)},getBufferLevel:function(){return T.getBufferLevel()},switchInitData:function(e,r){T&&T.switchInitData(z().id,e,r)},isBufferingCompleted:function(){return!!T&&T.getIsBufferingCompleted()},timeIsBuffered:function(e){return!!T&&null!==T.getRangeAt(e,0)},createBuffer:function(e){return T.getBuffer()||T.createBuffer(k,e)},getStreamInfo:z,selectMediaInfo:function(e){e===k||e&&k&&e.type!==k.type||(k=e),f.updateData(this)},addMediaInfo:function(e,r){-1===E.indexOf(e)&&E.push(e),r&&this.selectMediaInfo(e)},switchTrackAsked:function(){q.switchTrackAsked()},getMediaInfoArr:function(){return E},getMediaInfo:O,getMediaSource:function(){return T.getMediaSource()},setMediaSource:function(e){T.setMediaSource(e,O())},dischargePreBuffer:function(){T.dischargePreBuffer()},getBuffer:function(){return T.getBuffer()},setBuffer:function(e){T.setBuffer(e)},registerExternalController:function(e){D.push(e)},unregisterExternalController:function(e){var r=D.indexOf(e);-1!==r&&D.splice(r,1)},getExternalControllers:function(){return D},unregisterAllExternalController:H,addInbandEvents:function(e){C&&C.addInbandEvents(e)},reset:function(e,r){A.reset(),T&&(T.reset(e,r),T=null),q&&(q.reset(),q=null),R&&(R.reset(),R=null),M&&M.unRegisterStreamType(n),D.forEach(function(e){e.reset()}),L(),n=null,C=null,F&&(F.reset(),F=null)}},y&&y.getIsDynamic()&&(F=(0,o.default)(r).create({timelineConverter:s,streamProcessor:S})),L(),S}M.__dashjs_factory_name="StreamProcessor",exports.default=g.default.getClassFactory(M),module.exports=exports.default;
},{"./constants/Constants":"NqGT","./utils/LiveEdgeFinder":"pQIu","./controllers/BufferController":"P0rN","./text/TextBufferController":"E5J7","./controllers/ScheduleController":"zM3Z","../dash/controllers/RepresentationController":"Zp08","../core/FactoryMaker":"KAF6","../dash/DashHandler":"tuuF"}],"IZeF":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),n=e(t),i=require("../../core/Debug"),r=e(i),a=require("../../core/EventBus"),d=e(a),o=require("../../core/events/Events"),l=e(o),u=require("../net/XHRLoader"),v=e(u);function s(){var e="urn:mpeg:dash:event:2012",t=1,n="urn:mpeg:dash:event:callback:2015",i=1,a=this.context,o=(0,d.default)(a).getInstance(),u=void 0,s=void 0,f=void 0,c=void 0,m=void 0,g=void 0,p=void 0,h=void 0,b=void 0,I=void 0,S=void 0;function y(){S=!1,f={},c={},m={},g=null,p=100,h=Date.now()/1e3}function E(){if(!b||!I)throw new Error("setConfig function has to be called previously")}function T(){null!==g&&S&&(clearInterval(g),g=null,S=!1)}function _(e){if(e.eventStream.value==t){var n=e.eventStream.timescale||1,i=e.presentationTime/n,r=void 0;r=4294967295==e.presentationTime?NaN:(e.presentationTime+e.duration)/n,s.info("Manifest validity changed: Valid until: "+i+"; remaining duration: "+r),o.trigger(l.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:i,newDuration:r,newManifestValidAfter:NaN})}}function w(){var e=I.getTime(),t=e-h;h=e,C(c,t,e),C(f,t,e),function(){if(m)for(var e=I.getTime(),t=Object.keys(m),n=0;n<t.length;n++){var i=t[n],r=m[i];null!==r&&(r.duration+r.presentationTime)/r.eventStream.timescale<e&&(s.debug("Remove Event "+i+" at time "+e),r=null,delete m[i])}}()}function C(r,d,l){var u,f;if(r)for(var c=Object.keys(r),g=0;g<c.length;g++){var p=c[g],h=r[p];void 0!==h&&(0===(u=h.presentationTime/h.eventStream.timescale)||u<=l&&u+d>l)&&(s.debug("Start Event "+p+" at "+l),h.duration>0&&(m[p]=h),h.eventStream.schemeIdUri==e&&h.eventStream.value==t?0===h.duration&&0===h.presentationTimeDelta||(E(),b.refreshManifest()):h.eventStream.schemeIdUri==n&&h.eventStream.value==i?(f=h.messageData,(0,v.default)(a).create({}).load({method:"get",url:f,request:{responseType:"arraybuffer"}})):o.trigger(h.eventStream.schemeIdUri,{event:h}),delete r[p])}}return u={addInlineEvents:function(e){if(E(),f={},e)for(var t=0;t<e.length;t++){var n=e[t];f[n.id]=n,s.debug("Add inline event with id "+n.id)}s.debug("Added "+e.length+" inline events")},addInbandEvents:function(t){E();for(var n=0;n<t.length;n++){var i=t[n];i.id in c?s.debug("Repeated event with id "+i.id):(i.eventStream.schemeIdUri===e&&void 0===c[i.id]&&_(i),c[i.id]=i,s.debug("Add inband event with id "+i.id))}},stop:T,start:function(){E(),s.debug("Start Event Controller"),S||isNaN(p)||(S=!0,g=setInterval(w,p))},setConfig:function(e){e&&(e.manifestUpdater&&(b=e.manifestUpdater),e.playbackController&&(I=e.playbackController))},reset:function(){T(),y()}},s=(0,r.default)(a).getInstance().getLogger(u),y(),u}s.__dashjs_factory_name="EventController",exports.default=n.default.getClassFactory(s),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../net/XHRLoader":"yJPC"}],"YYvD":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null};exports.default=e,module.exports=exports.default;
},{}],"wZZJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,e,r){for(var o=!0;o;){var n=t,u=e,i=r;o=!1,null===n&&(n=Function.prototype);var c=Object.getOwnPropertyDescriptor(n,u);if(void 0!==c){if("value"in c)return c.value;var l=c.get;if(void 0===l)return;return l.call(i)}var a=Object.getPrototypeOf(n);if(null===a)return;t=a,e=u,r=i,o=!0,c=a=void 0}};function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=require("./FragmentRequest"),u=e(n),i=function(e){function n(e){r(this,n),t(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}return o(n,u["default"]),n}();exports.default=i,module.exports=exports.default;
},{"./FragmentRequest":"TOyU"}],"HEAw":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./net/HTTPLoader"),t=e(r),u=require("./vo/HeadRequest"),a=e(u),o=require("./vo/DashJSError"),n=e(o),s=require("./../core/EventBus"),d=e(s),i=require("../streaming/utils/BoxParser"),l=e(i),c=require("./../core/events/Events"),f=e(c),E=require("./../core/errors/Errors"),_=e(E),R=require("../core/FactoryMaker"),O=e(R);function L(e){e=e||{};var r,u=this.context,o=(0,d.default)(u).getInstance(),s=void 0,i=void 0;return s={checkForExistence:function(e){var r=function(r){o.trigger(f.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:r})};if(e){var t=new a.default(e.url);i.load({request:t,success:function(){r(!0)},error:function(){r(!1)}})}else r(!1)},load:function(e){var r=function(r,t){o.trigger(f.default.LOADING_COMPLETED,{request:e,response:r||null,error:t||null,sender:s})};e?i.load({request:e,progress:function(r){o.trigger(f.default.LOADING_PROGRESS,{request:e,stream:r.stream}),r.data&&o.trigger(f.default.LOADING_DATA_PROGRESS,{request:e,response:r.data||null,error:null,sender:s})},success:function(e){r(e)},error:function(e,t,u){r(void 0,new n.default(_.default.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,u,t))},abort:function(e){e&&o.trigger(f.default.LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:s})}}):r(void 0,new n.default(_.default.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,_.default.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){i&&i.abort()},reset:function(){i&&(i.abort(),i=null)}},r=(0,l.default)(u).getInstance(),i=(0,t.default)(u).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,boxParser:r,useFetch:e.mediaPlayerModel.getLowLatencyEnabled()}),s}L.__dashjs_factory_name="FragmentLoader",exports.default=O.default.getClassFactory(L),module.exports=exports.default;
},{"./net/HTTPLoader":"WJCH","./vo/HeadRequest":"wZZJ","./vo/DashJSError":"BHVF","./../core/EventBus":"ASRh","../streaming/utils/BoxParser":"dfT6","./../core/events/Events":"VXzW","./../core/errors/Errors":"dCLp","../core/FactoryMaker":"KAF6"}],"xRUw":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/Constants"),r=e(t),a=require("../vo/metrics/HTTPRequest"),n=require("../vo/DataChunk"),i=e(n),u=require("../models/FragmentModel"),o=e(u),d=require("../FragmentLoader"),s=e(d),f=require("../utils/RequestModifier"),l=e(f),c=require("../../core/EventBus"),T=e(c),m=require("../../core/events/Events"),E=e(m),_=require("../../core/FactoryMaker"),I=e(_),M=require("../../core/Debug"),q=e(M);function y(e){e=e||{};var t=this.context,n=(0,T.default)(t).getInstance(),u=e.errHandler,d=e.mediaPlayerModel,f=e.metricsModel,c=void 0,m=void 0,_=void 0;function I(e){return e&&e.type&&e.type===a.HTTPRequest.INIT_SEGMENT_TYPE}function M(){for(var e in _)_[e].reset();_={}}function y(e){if(_[e.request.mediaType]===e.sender){var t=e.request,a=e.response,u=I(t),o=t.mediaInfo.streamInfo;if(e.error&&(e.request.mediaType!==r.default.AUDIO&&e.request.mediaType!==r.default.VIDEO&&e.request.mediaType!==r.default.FRAGMENTED_TEXT||n.trigger(E.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),a&&o){var d=function(e,t,r,a){var n=new i.default;return n.streamId=r,n.mediaInfo=t.mediaInfo,n.segmentType=t.type,n.start=t.startTime,n.duration=t.duration,n.end=n.start+n.duration,n.bytes=e,n.index=t.index,n.quality=t.quality,n.representationId=t.representationId,n.endFragment=a,n}(a,t,o.id,e.type!==E.default.FRAGMENT_LOADING_PROGRESS);n.trigger(u?E.default.INIT_FRAGMENT_LOADED:E.default.MEDIA_FRAGMENT_LOADED,{chunk:d,fragmentModel:e.sender})}else m.warn("No "+t.mediaType+" bytes to push or stream is inactive.")}}return c={getModel:function(e){var r=_[e];return r||(r=(0,o.default)(t).create({metricsModel:f,fragmentLoader:(0,s.default)(t).create({metricsModel:f,mediaPlayerModel:d,errHandler:u,requestModifier:(0,l.default)(t).getInstance()})}),_[e]=r),r},isInitializationRequest:I,reset:function(){n.off(E.default.FRAGMENT_LOADING_COMPLETED,y,this),n.off(E.default.FRAGMENT_LOADING_PROGRESS,y,this),M()}},m=(0,q.default)(t).getInstance().getLogger(c),M(),n.on(E.default.FRAGMENT_LOADING_COMPLETED,y,c),n.on(E.default.FRAGMENT_LOADING_PROGRESS,y,c),c}y.__dashjs_factory_name="FragmentController",exports.default=I.default.getClassFactory(y),module.exports=exports.default;
},{"../constants/Constants":"NqGT","../vo/metrics/HTTPRequest":"RDXP","../vo/DataChunk":"YYvD","../models/FragmentModel":"Y27R","../FragmentLoader":"HEAw","../utils/RequestModifier":"iL20","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb"}],"qquY":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null};exports.default=e,module.exports=exports.default;
},{}],"J7Zv":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""};exports.default=e,module.exports=exports.default;
},{}],"CSz1":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/Constants"),r=e(t),a=require("../../dash/constants/DashConstants"),i=e(a),n=require("../../core/FactoryMaker"),s=e(n),o=require("../vo/ThumbnailTrackInfo"),l=e(o),u=require("../../streaming/utils/URLUtils"),d=e(u),f=require("../../dash/utils/SegmentsUtils"),m=require("../../dash/SegmentBaseLoader"),c=e(m),g=require("../../streaming/utils/BoxParser"),h=e(g),p=require("../../streaming/net/XHRLoader"),v=e(p),T=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function I(e){var t,a=this.context,n=e.dashManifestModel,s=e.adapter,o=e.baseURLController,u=e.stream,m=e.timelineConverter,g=e.metricsModel,p=e.mediaPlayerModel,I=e.errHandler,M=(0,d.default)(a).getInstance(),b=void 0,S=void 0,_=void 0,y=void 0,E=void 0;function L(){U(),_=(0,v.default)(a).create({}),E=(0,h.default)(a).getInstance(),(y=(0,c.default)(a).getInstance()).setConfig({baseURLController:o,metricsModel:g,mediaPlayerModel:p,errHandler:I}),function(){if(!u||!n||!s)return;var e=u.getStreamInfo();if(!e)return;var t=s.getMediaInfoForType(e,r.default.IMAGE);if(!t)return;var a=s.getDataForMedia(t);if(!a)return;var o=n.getRepresentationsForAdaptation(a);o&&o.length>0&&o.forEach(function(e){e.segmentInfoType===i.default.SEGMENT_TEMPLATE&&e.segmentDuration>0&&e.media&&R(e),e.segmentInfoType===i.default.SEGMENT_BASE&&R(e,!0)});b.length>0&&(b.sort(function(e,t){return e.bitrate-t.bitrate}),S=b.length-1)}()}function R(e,t){var a=new l.default;a.id=e.id,a.bitrate=e.bandwidth,a.width=e.width,a.height=e.height,a.tilesHor=1,a.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach(function(e){if(T.indexOf(e.schemeIdUri)>=0&&e.value){var t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(a.tilesHor=parseInt(t[0],10),a.tilesVert=parseInt(t[1],10))}}),t?y.loadSegments(e,r.default.IMAGE,e.indexRange,{},function(e,t){var r=[];e=function(e,t){var r,a=[],i=0,s=void 0,o=void 0,l=void 0;for(s=0,r=e.length;s<r;s++)o=e[s],l=(0,f.getTimeBasedSegment)(m,n.getIsDynamic(),t,o.startTime,o.duration,o.timescale,o.media,o.mediaRange,i),a.push(l),l=null,i++;return a}(e,t),a.segmentDuration=e[0].duration,a.readThumbnail=function(a,i){var n=null;r.some(function(e){if(e.start<=a&&e.end>a)return n=e.url,!0}),n?i(n):e.some(function(e){if(e.mediaStartTime<=a&&e.mediaStartTime+e.duration>a){var n=o.resolve(t.path);return _.load({method:"get",url:n.url,request:{range:e.mediaRange,responseType:"arraybuffer"},onload:function(t){var a=E.getSamplesInfo(t.target.response),n=new Blob([t.target.response.slice(a.sampleList[0].offset,a.sampleList[0].offset+a.sampleList[0].size)],{type:"image/jpeg"}),s=window.URL.createObjectURL(n);r.push({start:e.mediaStartTime,end:e.mediaStartTime+e.duration,url:s}),i&&i(s)}}),!0}})}}):(a.startNumber=e.startNumber,a.segmentDuration=e.segmentDuration,a.timescale=e.timescale,a.templateUrl=function(e){var t=M.isRelative(e.media)?M.resolve(e.media,o.resolve(e.path).url):e.media;if(!t)return"";return(0,f.replaceIDForTemplate)(t,e.id)}(e)),a.tilesHor>0&&a.tilesVert>0&&(a.widthPerTile=a.width/a.tilesHor,a.heightPerTile=a.height/a.tilesVert,b.push(a))}function U(){b=[],S=-1}return t={initialize:L,getTracks:function(){return b},reset:U,setTrackByIndex:function(e){b&&0!==b.length&&(e>=b.length&&(e=b.length-1),S=e)},getCurrentTrack:function(){return S<0?null:b[S]},getCurrentTrackIndex:function(){return S}},L(),t}exports.THUMBNAILS_SCHEME_ID_URIS=T,I.__dashjs_factory_name="ThumbnailTracks",exports.default=s.default.getClassFactory(I);
},{"../constants/Constants":"NqGT","../../dash/constants/DashConstants":"wyUT","../../core/FactoryMaker":"KAF6","../vo/ThumbnailTrackInfo":"J7Zv","../../streaming/utils/URLUtils":"rvxi","../../dash/utils/SegmentsUtils":"zhNk","../../dash/SegmentBaseLoader":"oSXd","../../streaming/utils/BoxParser":"dfT6","../../streaming/net/XHRLoader":"yJPC"}],"OWqI":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),r=e(t),a=require("../constants/Constants"),n=e(a),i=require("../vo/Thumbnail"),o=e(i),l=require("./ThumbnailTracks"),u=e(l),s=require("../vo/BitrateInfo"),d=e(s),h=require("../../dash/utils/SegmentsUtils");function c(e){var t,r=this.context,a=void 0;function i(){a&&a.reset()}return t={get:function(e,t){var r=a.getCurrentTrack();if(!r||r.segmentDuration<=0||null==e)return null;var n=Math.floor(e/r.segmentDuration),i=e%r.segmentDuration,l=Math.floor(i*r.tilesHor*r.tilesVert/r.segmentDuration),u=new o.default;return u.width=Math.floor(r.widthPerTile),u.height=Math.floor(r.heightPerTile),u.x=Math.floor(l%r.tilesHor)*r.widthPerTile,u.y=Math.floor(l/r.tilesHor)*r.heightPerTile,"readThumbnail"in r?r.readThumbnail(e,function(e){u.url=e,t&&t(u)}):(u.url=function(e,t){var r=t+e.startNumber,a=(0,h.replaceTokenForTemplate)(e.templateUrl,"Number",r);return a=(0,h.replaceTokenForTemplate)(a,"Time",(r-1)*e.segmentDuration),a=(0,h.replaceTokenForTemplate)(a,"Bandwidth",e.bandwidth),(0,h.unescapeDollarsInTemplate)(a)}(r,n),t&&t(u),u)},setTrackByIndex:function(e){a.setTrackByIndex(e)},getCurrentTrackIndex:function(){return a.getCurrentTrackIndex()},getBitrateList:function(){var e=a.getTracks(),t=0;return e.map(function(e){var r=new d.default;return r.mediaType=n.default.IMAGE,r.qualityIndex=t++,r.bitrate=e.bitrate,r.width=e.width,r.height=e.height,r})},reset:i},i(),a=(0,u.default)(r).create({dashManifestModel:e.dashManifestModel,adapter:e.adapter,baseURLController:e.baseURLController,stream:e.stream,timelineConverter:e.timelineConverter}),t}c.__dashjs_factory_name="ThumbnailController",exports.default=r.default.getClassFactory(c),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","../constants/Constants":"NqGT","../vo/Thumbnail":"qquY","./ThumbnailTracks":"CSz1","../vo/BitrateInfo":"nhr8","../../dash/utils/SegmentsUtils":"zhNk"}],"jqp3":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./constants/Constants"),r=e(t),n=require("./StreamProcessor"),a=e(n),o=require("./controllers/EventController"),i=e(o),d=require("./controllers/FragmentController"),f=e(d),l=require("./thumbnail/ThumbnailController"),u=e(l),E=require("../core/EventBus"),s=e(E),c=require("../core/events/Events"),T=e(c),g=require("../core/Debug"),p=e(g),m=require("../core/errors/Errors"),I=e(m),M=require("../core/FactoryMaker"),D=e(M),_=require("./vo/DashJSError"),A=e(_);function v(e){e=e||{};var t=this.context,n=(0,s.default)(t).getInstance(),o=e.manifestModel,d=e.dashManifestModel,l=e.mediaPlayerModel,E=e.manifestUpdater,c=e.adapter,g=e.capabilities,m=e.errHandler,M=e.timelineConverter,D=e.metricsModel,_=e.abrController,v=e.playbackController,C=e.mediaController,R=e.textController,y=e.videoModel,S=void 0,O=void 0,h=void 0,F=void 0,N=void 0,U=void 0,b=void 0,P=void 0,x=void 0,G=void 0,L=void 0,V=void 0,B=void 0,X=void 0,w=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function k(e){for(var t=h?h.length:0,r=0;r<t;r++){h[r].getFragmentModel().removeExecutedRequestsBeforeTime(H()+q()),h[r].reset(!1,e)}h=[],F=!1,N=!1,ue(!1),n.off(T.default.CURRENT_TRACK_CHANGED,Z,S)}function K(){k(),U=null,b={},P=!1}function Y(){v&&v.pause(),G&&(G.reset(),G=null),K(),n.off(T.default.DATA_UPDATE_COMPLETED,oe,S),n.off(T.default.BUFFERING_COMPLETED,ae,S),x&&(n.off(T.default.KEY_ERROR,j,S),n.off(T.default.SERVER_CERTIFICATE_UPDATED,j,S),n.off(T.default.LICENSE_REQUEST_COMPLETE,j,S),n.off(T.default.KEY_SYSTEM_SELECTED,j,S),n.off(T.default.KEY_SESSION_CREATED,j,S),n.off(T.default.KEY_STATUSES_CHANGED,j,S)),ue(!1)}function q(){return U?U.duration:NaN}function H(){return U?U.start:NaN}function Q(){return U}function z(){if(!(_&&_.hasOwnProperty("getBitrateList")&&c&&c.hasOwnProperty("getAllMediaInfoForType")&&c.hasOwnProperty("getEventsFor")))throw new Error(r.default.MISSING_CONFIG_ERROR)}function j(e){e.error&&(m.mediaKeySessionError(e.error.message),m.error(e.error),O.fatal(e.error.message),Y())}function J(e){var t,n=e.type,a=void 0;if(n===r.default.MUXED&&e)return a="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",O.fatal(a),m.manifestError(a,"multiplexedrep",o.getValue()),m.error(new A.default(I.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,a,o.getValue())),!1;if(n===r.default.TEXT||n===r.default.FRAGMENTED_TEXT||n===r.default.EMBEDDED_TEXT||n===r.default.IMAGE)return!0;if(t=e.codec,O.debug(n+" codec: "+t),e.contentProtection&&!g.supportsEncryptedMedia())m.capabilityError("encryptedmedia"),m.error(new A.default(I.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,I.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!g.supportsCodec(t))return a=n+"Codec ("+t+") is not supported.",O.error(a),!1;return!0}function Z(e){if(e.newMediaInfo.streamInfo.id===U.id){var t=ie(e.newMediaInfo);if(t){var n=v.getTime();O.info("Stream -  Process track changed at current time "+n);var a=e.newMediaInfo,i=o.getValue();c.setCurrentMediaInfo(U.id,a.type,a),O.debug("Stream -  Update stream controller"),i.refreshManifestOnSwitchTrack?(O.debug("Stream -  Refreshing manifest for switch track"),X=e,E.refreshManifest()):(t.selectMediaInfo(a),a.type!==r.default.FRAGMENTED_TEXT?(_.updateTopQualityIndex(a),t.switchTrackAsked(),t.getFragmentModel().abortRequests()):(t.getScheduleController().setSeekTarget(NaN),c.setIndexHandlerTime(t,n),c.resetIndexHandler(t)))}}}function $(n,i){var f=c.getAllMediaInfoForType(U,n),E=null,s=void 0;if(f&&0!==f.length){for(var T=0,g=f.length;T<g;T++)if(E=f[T],n===r.default.EMBEDDED_TEXT)R.addEmbeddedTrack(E);else{if(!J(E))continue;C.addTrack(E)}n!==r.default.EMBEDDED_TEXT&&0!==C.getTracksFor(n,U).length&&(n!==r.default.IMAGE?((n!==r.default.FRAGMENTED_TEXT||n===r.default.FRAGMENTED_TEXT&&R.getTextDefaultEnabled())&&(C.checkInitialMediaSettingsForType(n,U),s=C.getCurrentTrackFor(n,U)),n!==r.default.FRAGMENTED_TEXT||R.getTextDefaultEnabled()||(s=C.getTracksFor(n,U)[0]),function(n,i,f,u){var E=(0,a.default)(t).create({type:n.type,mimeType:n.mimeType,timelineConverter:M,adapter:c,manifestModel:o,dashManifestModel:d,mediaPlayerModel:l,metricsModel:D,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,stream:S,abrController:_,domStorage:e.domStorage,playbackController:v,mediaController:C,streamController:e.streamController,textController:R,errHandler:m});if(E.initialize(f),_.updateTopQualityIndex(n),u?(E.setBuffer(u.buffer),E.getIndexHandler().setCurrentTime(u.currentTime),h[u.replaceIdx]=E):h.push(E),!u||!u.ignoreMediaInfo)if(n.type===r.default.TEXT||n.type===r.default.FRAGMENTED_TEXT){for(var s=void 0,T=0;T<i.length;T++)i[T].index===n.index&&(s=T),E.addMediaInfo(i[T]);E.selectMediaInfo(i[s])}else E.addMediaInfo(n,!0)}(s,f,i)):L=(0,u.default)(t).create({dashManifestModel:d,adapter:c,baseURLController:e.baseURLController,stream:S,timelineConverter:e.timelineConverter}))}else O.info("No "+n+" data.")}function W(){V||((V=(0,i.default)(t).create()).setConfig({manifestUpdater:E,playbackController:v}),ee())}function ee(){var e=c.getEventsFor(U);V.addInlineEvents(e)}function te(e){var t=c.getAdaptationForType(o.getValue(),U.index,e,U);t&&Array.isArray(t.Representation_asArray)&&(t.Representation_asArray=t.Representation_asArray.filter(function(e,r){if(0===r)return!0;var n=d.getCodec(t,r,!0);return!!g.supportsCodec(n)||(O.error("[Stream] codec not supported: "+n),!1)}))}function re(){for(var e=h.length,t=!!b.audio||!!b.video?new A.default(I.default.DATA_UPDATE_FAILED_ERROR_CODE,I.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,a=0;a<e;a++)if(h[a].isUpdating()||P)return;if(N){if(x)for(a=0;a<e&&h[a];a++)h[a].getType()!==r.default.AUDIO&&h[a].getType()!==r.default.VIDEO&&h[a].getType()!==r.default.FRAGMENTED_TEXT||x.initializeForMedia(h[a].getMediaInfo());n.trigger(T.default.STREAM_INITIALIZED,{streamInfo:U,error:t})}}function ne(e){for(var t={},r=0,n=h.length;r<n;r++)t[h[r].getType()]=h[r].createBuffer(e).getBuffer();return t}function ae(e){if(e.streamInfo===U){var t=de(),a=t.length;if(0!==a){for(var o=0;o<a;o++)if(!t[o].isBufferingCompleted()&&(t[o].getType()===r.default.AUDIO||t[o].getType()===r.default.VIDEO))return void O.warn("onBufferingCompleted - One streamProcessor has finished but",t[o].getType(),"one is not buffering completed");O.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),n.trigger(T.default.STREAM_BUFFERING_COMPLETED,{streamInfo:U})}else O.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}}function oe(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===U&&(b[t.getType()]=e.error,re())}function ie(e){return e?de().filter(function(t){return t.getType()===e.type})[0]:null}function de(){for(var e=h.length,t=[],n=void 0,a=void 0,o=0;o<e;o++)(n=(a=h[o]).getType())!==r.default.AUDIO&&n!==r.default.VIDEO&&n!==r.default.FRAGMENTED_TEXT&&n!==r.default.TEXT||t.push(a);return t}function fe(e,t){if(!e)return!1;var r=e.getStreamInfo(),n=Q();if(!r||!n)return!1;var a=c.getAdaptationForType(o.getValue(),r.index,t,r),i=c.getAdaptationForType(o.getValue(),n.index,t,n);return a&&i?!a.ContentProtection&&!i.ContentProtection:!a&&!i}function le(e,t){if(!e)return!1;var r=e.getStreamInfo(),n=Q();if(!r||!n)return!1;var a=c.getAdaptationForType(o.getValue(),r.index,t,r),i=c.getAdaptationForType(o.getValue(),n.index,t,n);if(!a||!i)return!a&&!i;var d=a&&i&&a.mimeType===i.mimeType,f=i.Representation_asArray.map(function(e){return e.codecs}),l=a.Representation_asArray.map(function(e){return e.codecs}),u=l.some(function(e){return f.indexOf(e)>-1}),E=l.some(function(e){return f.some(function(t){return function(e,t){for(var r=e.split(".")[0],n=0===t.indexOf(r),a=void 0,o=0;o<w.length;o++)if(w[o].codec===r){a=w[o];break}if(a)return n||a.compatibleCodecs.some(function(e){return 0===t.indexOf(e)});return n}(t,e)})});return u||E&&d}function ue(e){B=e}function Ee(){return B}return S={initialize:function(e,t){U=e,(x=t)&&(n.on(T.default.KEY_ERROR,j,S),n.on(T.default.SERVER_CERTIFICATE_UPDATED,j,S),n.on(T.default.LICENSE_REQUEST_COMPLETE,j,S),n.on(T.default.KEY_SYSTEM_SELECTED,j,S),n.on(T.default.KEY_SESSION_CREATED,j,S),n.on(T.default.KEY_STATUSES_CHANGED,j,S))},activate:function(e,t){if(!F){var a=void 0;return n.on(T.default.CURRENT_TRACK_CHANGED,Z,S),Ee()?(function(){if(P=!0,z(),te(r.default.VIDEO),te(r.default.AUDIO),N=!0,P=!1,0===h.length){var e="No streams to play.";m.manifestError(e,"nostreams",o.getValue()),O.debug(e)}else re()}(),a=t):a=function(e,t){z();var n=y.getElement();W(),P=!0,te(r.default.VIDEO),te(r.default.AUDIO),(null===n||n&&/^VIDEO$/i.test(n.nodeName))&&$(r.default.VIDEO,e),$(r.default.AUDIO,e),$(r.default.TEXT,e),$(r.default.FRAGMENTED_TEXT,e),$(r.default.EMBEDDED_TEXT,e),$(r.default.MUXED,e),$(r.default.IMAGE,e);var a=ne(t);if(N=!0,P=!1,0===h.length){var i="No streams to play.";m.manifestError(i,"nostreams",o.getValue()),m.error(new A.default(I.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,i,o.getValue())),O.fatal(i)}else re();return a}(e,t),F=!0,a}return t},deactivate:k,isActive:function(){return F},getDuration:q,getStartTime:H,getId:function(){return U?U.id:null},getStreamInfo:Q,preload:function(e,t){W(),$(r.default.VIDEO,e),$(r.default.AUDIO,e),$(r.default.TEXT,e),$(r.default.FRAGMENTED_TEXT,e),$(r.default.EMBEDDED_TEXT,e),$(r.default.MUXED,e),$(r.default.IMAGE,e),ne(t),n.on(T.default.CURRENT_TRACK_CHANGED,Z,S);for(var a=0;a<h.length&&h[a];a++)h[a].getScheduleController().start();ue(!0)},getFragmentController:function(){return G},getThumbnailController:function(){return L},getBitrateListFor:function(e){if(z(),e===r.default.IMAGE)return L?L.getBitrateList():[];var t=function(e){for(var t=h.length,r=null,n=0;n<t;n++)if((r=h[n]).getType()===e)return r.getMediaInfo();return null}(e);return _.getBitrateList(t)},startEventController:function(){V&&V.start()},stopEventController:function(){V&&V.stop()},updateData:function(e){O.info("Manifest updated... updating data system wide."),F=!1,P=!0,U=e,V&&ee(),te(r.default.VIDEO),te(r.default.AUDIO);for(var t=0,n=h.length;t<n;t++){var a=h[t],o=c.getMediaInfoForType(U,a.getType());_.updateTopQualityIndex(o),a.addMediaInfo(o,!0)}if(X&&"fragmentedText"!==(o=X.newMediaInfo).type){var i=ie(X.oldMediaInfo);if(!i)return;i.switchTrackAsked(),X=void 0}P=!1,re()},reset:Y,getProcessors:de,setMediaSource:function(e){for(var t=0;t<h.length;)J(h[t].getMediaInfo())?(h[t].setMediaSource(e),t++):(h[t].reset(),h.splice(t,1));for(t=0;t<h.length;t++)h[t].dischargePreBuffer();if(0===h.length){var r="No streams to play.";m.manifestError(r,"nostreams",o.getValue()),m.error(new A.default(I.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,r+"nostreams",o.getValue())),O.fatal(r)}},isMediaCodecCompatible:function(e){return le(e,r.default.VIDEO)&&le(e,r.default.AUDIO)},isProtectionCompatible:function(e){return fe(e,r.default.VIDEO)&&fe(e,r.default.AUDIO)},getPreloaded:Ee,addInbandEvents:function(e){V&&V.addInbandEvents(e)}},O=(0,p.default)(t).getInstance().getLogger(S),K(),G=(0,f.default)(t).create({mediaPlayerModel:l,metricsModel:D,errHandler:m}),n.on(T.default.BUFFERING_COMPLETED,ae,S),n.on(T.default.DATA_UPDATE_COMPLETED,oe,S),S}v.__dashjs_factory_name="Stream",exports.default=D.default.getClassFactory(v),module.exports=exports.default;
},{"./constants/Constants":"NqGT","./StreamProcessor":"OKDG","./controllers/EventController":"IZeF","./controllers/FragmentController":"xRUw","./thumbnail/ThumbnailController":"OWqI","../core/EventBus":"ASRh","../core/events/Events":"VXzW","../core/Debug":"Jjwb","../core/errors/Errors":"dCLp","../core/FactoryMaker":"KAF6","./vo/DashJSError":"BHVF"}],"bhdF":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../core/EventBus"),i=e(t),r=require("../core/events/Events"),n=e(r),o=require("../core/FactoryMaker"),a=e(o),f=require("../core/Debug"),s=e(f),d=require("../core/errors/Errors"),u=e(d);function l(){var e=this.context,t=(0,i.default)(e).getInstance(),r=void 0,o=void 0,a=void 0,f=void 0,d=void 0,l=void 0,c=void 0,A=void 0,M=void 0,E=void 0,_=void 0;function v(){a=NaN,l=!1,d=!0,g()}function g(){null!==f&&(clearInterval(f),f=null)}function h(e){g(),isNaN(e)&&!isNaN(a)&&(e=1e3*a),isNaN(e)||(o.debug("Refresh manifest in "+e+" milliseconds."),f=setTimeout(N,e))}function T(){l=!0;var e=A.getValue(),t=e.url,i=M.getLocation(e);i&&(t=i),c.load(t)}function m(e){A.setValue(e);var i=new Date,r=(i.getTime()-e.loadedTime.getTime())/1e3;1e3*(a=M.getManifestUpdatePeriod(e,r))>2147483647&&(a=2147483.647),t.trigger(n.default.MANIFEST_UPDATED,{manifest:e}),o.info("Manifest has been refreshed at "+i+"["+i.getTime()/1e3+"] "),d||h()}function N(){d&&!_.getScheduleWhilePaused()||(l?h(_.getManifestUpdateRetryInterval()):T())}function D(e){e.error?e.error.code===u.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&E.error(e.error):m(e.manifest)}function S(){d=!1,h()}function P(){d=!0,g()}function L(){l=!1}return r={initialize:function(){v(),t.on(n.default.STREAMS_COMPOSED,L,this),t.on(n.default.PLAYBACK_STARTED,S,this),t.on(n.default.PLAYBACK_PAUSED,P,this),t.on(n.default.INTERNAL_MANIFEST_LOADED,D,this)},setManifest:function(e){m(e)},refreshManifest:T,setConfig:function(e){e&&(e.manifestModel&&(A=e.manifestModel),e.dashManifestModel&&(M=e.dashManifestModel),e.mediaPlayerModel&&(_=e.mediaPlayerModel),e.manifestLoader&&(c=e.manifestLoader),e.errHandler&&(E=e.errHandler))},reset:function(){t.off(n.default.PLAYBACK_STARTED,S,this),t.off(n.default.PLAYBACK_PAUSED,P,this),t.off(n.default.STREAMS_COMPOSED,L,this),t.off(n.default.INTERNAL_MANIFEST_LOADED,D,this),v()}},o=(0,s.default)(e).getInstance().getLogger(r),r}l.__dashjs_factory_name="ManifestUpdater",exports.default=a.default.getClassFactory(l),module.exports=exports.default;
},{"../core/EventBus":"ASRh","../core/events/Events":"VXzW","../core/FactoryMaker":"KAF6","../core/Debug":"Jjwb","../core/errors/Errors":"dCLp"}],"t2DM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,e,a){for(var i=!0;i;){var r=t,A=e,E=a;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,A);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(E)}var n=Object.getPrototypeOf(r);if(null===n)return;t=n,e=A,a=E,i=!0,s=n=void 0}};function e(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=require("../core/events/EventsBase"),A=e(r),E=function(e){function r(){a(this,r),t(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged"}return i(r,A["default"]),r}(),s=new E;exports.default=s,module.exports=exports.default;
},{"../core/events/EventsBase":"Y3I9"}],"Bvnl":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/Constants"),n=e(t),r=require("./../vo/DashJSError"),a=e(r),u=require("./../vo/metrics/HTTPRequest"),i=require("./../../core/EventBus"),o=e(i),s=require("./../../core/events/Events"),c=e(s),d=require("./../../core/errors/Errors"),l=e(d),f=require("../../core/FactoryMaker"),p=e(f),v=require("../../core/Debug"),g=e(v),m=require("../utils/URLUtils"),h=e(m),T=5e3;function _(){var e=this.context,t=(0,o.default)(e).getInstance(),r=(0,h.default)(e).getInstance(),i=void 0,s=void 0,d=void 0,f=void 0,p=void 0,v=void 0,m=void 0,_=void 0,D=void 0;function I(e){f=e}function E(e){d=e}function M(e){var t=Date.parse(e);return isNaN(t)&&(t=function(e){var t=void 0,n=void 0,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e);return t=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&(parseInt(r[6],10)||0),r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]&&(n=60*parseInt(r[9],10)+parseInt(r[10],10),t+=("+"===r[8]?-1:1)*n*60*1e3),new Date(t).getTime()}(e)),t}function R(e){return Date.parse(e)}function N(e){return Date.parse(e)}function q(e,t,n){n()}function S(e,t,n){var r=M(e);isNaN(r)?n():t(r)}function C(e,t,n,a,i){var o,s,c=!1,d=new XMLHttpRequest,l=i?u.HTTPRequest.HEAD:u.HTTPRequest.GET,f=t.match(/\S+/g);if(t=f.shift(),o=function(){c||(c=!0,f.length?C(e,f.join(" "),n,a,i):a())},s=function(){var t=void 0,r=void 0;200===d.status&&(t=i?d.getResponseHeader("Date"):d.response,r=e(t),isNaN(r)||(n(r),c=!0))},r.isRelative(t)){var p=D.resolve();p&&(t=r.resolve(t,p.url))}d.open(l,t),d.timeout=T||0,d.onload=s,d.onloadend=o,d.send()}function L(e,t,n){C(N,e,t,n,!0)}function O(e,n,r){I(!1),t.trigger(c.default.TIME_SYNCHRONIZATION_COMPLETED,{time:n,offset:r,error:e?new a.default(l.default.TIME_SYNC_FAILED_ERROR_CODE,l.default.TIME_SYNC_FAILED_ERROR_MESSAGE):null})}return i={initialize:function(e,t){p=t,d=0,f=!1,v={"urn:mpeg:dash:utc:http-head:2014":L,"urn:mpeg:dash:utc:http-xsdate:2014":C.bind(null,M),"urn:mpeg:dash:utc:http-iso:2014":C.bind(null,R),"urn:mpeg:dash:utc:direct:2014":S,"urn:mpeg:dash:utc:http-head:2012":L,"urn:mpeg:dash:utc:http-xsdate:2012":C.bind(null,M),"urn:mpeg:dash:utc:http-iso:2012":C.bind(null,R),"urn:mpeg:dash:utc:direct:2012":S,"urn:mpeg:dash:utc:http-ntp:2014":q,"urn:mpeg:dash:utc:ntp:2014":q,"urn:mpeg:dash:utc:sntp:2014":q},f||function e(t,r){var a=r||0,u=t[a],i=function(e,t){var r,a,u,i=!e||!t;i&&p?(r=m.getReadOnlyMetricsFor(n.default.STREAM),a=_.getLatestMPDRequestHeaderValueByID(r,"Date"),u=null!==a?new Date(a).getTime():Number.NaN,isNaN(u)?O(!0):(E(u-(new Date).getTime()),O(!1,u/1e3,d))):O(i,e,t)};I(!0),u?v.hasOwnProperty(u.schemeIdUri)?v[u.schemeIdUri](u.value,function(e){var t=(new Date).getTime(),n=function(e,t){return e-t}(e,t);E(n),s.info("Local time: "+new Date(t)),s.info("Server time: "+new Date(e)),s.info("Server Time - Local Time (ms): "+n),i(e,n)},function(){e(t,a+1)}):e(t,a+1):(E(0),i())}(e)},getOffsetToDeviceTimeMs:function(){return d},setConfig:function(e){e&&(e.metricsModel&&(m=e.metricsModel),e.dashMetrics&&(_=e.dashMetrics),e.baseURLController&&(D=e.baseURLController))},reset:function(){I(!1)}},s=(0,g.default)(e).getInstance().getLogger(i),i}_.__dashjs_factory_name="TimeSyncController";var D=p.default.getSingletonFactory(_);D.HTTP_TIMEOUT_MS=T,p.default.updateSingletonFactory(_.__dashjs_factory_name,D),exports.default=D,module.exports=exports.default;
},{"../constants/Constants":"NqGT","./../vo/DashJSError":"BHVF","./../vo/metrics/HTTPRequest":"RDXP","./../../core/EventBus":"ASRh","./../../core/events/Events":"VXzW","./../../core/errors/Errors":"dCLp","../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb","../utils/URLUtils":"rvxi"}],"iktH":[function(require,module,exports) {
"use strict";var r=Array.isArray,t=Object.keys,e=Object.prototype.hasOwnProperty;module.exports=function n(i,f){if(i===f)return!0;if(i&&f&&"object"==typeof i&&"object"==typeof f){var o,u,a,c=r(i),g=r(f);if(c&&g){if((u=i.length)!=f.length)return!1;for(o=u;0!=o--;)if(!n(i[o],f[o]))return!1;return!0}if(c!=g)return!1;var s=i instanceof Date,p=f instanceof Date;if(s!=p)return!1;if(s&&p)return i.getTime()==f.getTime();var l=i instanceof RegExp,y=f instanceof RegExp;if(l!=y)return!1;if(l&&y)return i.toString()==f.toString();var h=t(i);if((u=h.length)!==t(f).length)return!1;for(o=u;0!=o--;)if(!e.call(f,h[o]))return!1;for(o=u;0!=o--;)if(!n(i[a=h[o]],f[a]))return!1;return!0}return i!=i&&f!=f};
},{}],"tQrF":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),r=e(t),u=require("fast-deep-equal"),a=e(u);function o(){return{areEqual:function(e,t){return(0,a.default)(e,t)}}}o.__dashjs_factory_name="ObjectUtils",exports.default=r.default.getSingletonFactory(o),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","fast-deep-equal":"iktH"}],"tBtE":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var a=require("../utils/ObjectUtils"),n=e(a),r=require("../../core/FactoryMaker"),o=e(r),s=NaN,i=function e(a,n){t(this,e),this.data={baseUrls:a||null,selectedIdx:n||s},this.children=[]};function c(){var e,t=void 0,a=void 0,r=this.context,o=(0,n.default)(r).getInstance();function c(e,t,n){var r=a.getBaseURLsFromElement(n);e[t]?o.areEqual(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=s):e[t]=new i(r)}function d(e){!function(){if(!a||!a.hasOwnProperty("getBaseURLsFromElement")||!a.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var n=a.getBaseURLsFromElement(e);o.areEqual(n,t.data.baseUrls)||(t.data.baseUrls=n,t.data.selectedIdx=s),e&&e.Period_asArray&&e.Period_asArray.forEach(function(e,n){c(t.children,n,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,r){c(t.children[n].children,r,e),e.Representation_asArray&&e.Representation_asArray.sort(a.getRepresentationSortFunction()).forEach(function(e,a){c(t.children[n].children[r].children,a,e)})})})}function l(){t=new i}return e={reset:l,update:function(e){d(e)},getForPath:function(e){var a=t,n=[a.data];return e&&e.forEach(function(e){(a=a.children[e])&&n.push(a.data)}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(e){!function e(a,n){var r=n||t;a(r.data),r.children&&r.children.forEach(function(t){return e(a,t)})}(function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=s)})},setConfig:function(e){e.dashManifestModel&&(a=e.dashManifestModel)}},l(),e}c.__dashjs_factory_name="BaseURLTreeModel",exports.default=o.default.getClassFactory(c),module.exports=exports.default;
},{"../utils/ObjectUtils":"tQrF","../../core/FactoryMaker":"KAF6"}],"UxEz":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),n=e(t),r=require("../../core/EventBus"),o=e(r);function u(e){e=e||{};var t=[],n=(0,o.default)(this.context).getInstance(),r=e.updateEventName,u=e.addBlacklistEventName;function a(e){-1===t.indexOf(e)&&(t.push(e),n.trigger(r,{entry:e}))}function s(e){a(e.entry)}return function(){u&&n.on(u,s,this)}(),{add:a,contains:function(e){return!!(t.length&&e&&e.length)&&-1!==t.indexOf(e)},reset:function(){t=[]}}}u.__dashjs_factory_name="BlackListController",exports.default=n.default.getClassFactory(u),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","../../core/EventBus":"ASRh"}],"dlWJ":[function(require,module,exports) {
"use strict";function r(r){return r&&r.__esModule?r:{default:r}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../../core/FactoryMaker"),e=r(t);function i(r){var t=(r=r||{}).blacklistController;return{select:function(r){return r&&function(r){var t=0,e=[],i=0,o=void 0,n=void 0;if((n=r.sort(function(r,t){var e=r.dvb_priority-t.dvb_priority;return isNaN(e)?0:e}).filter(function(r,t,e){return!t||e[0].dvb_priority&&r.dvb_priority&&e[0].dvb_priority===r.dvb_priority})).length)return n.length>1&&(n.forEach(function(r){t+=r.dvb_weight,e.push(t)}),o=Math.floor(Math.random()*(t-1)),e.every(function(r,t){return i=t,!(o<r)})),n[i]}((e=[],r.filter(function(r){return!t.contains(r.serviceLocation)||(r.dvb_priority&&e.push(r.dvb_priority),!1)}).filter(function(r){return!e.length||!r.dvb_priority||-1===e.indexOf(r.dvb_priority)})));var e}}}i.__dashjs_factory_name="DVBSelector",exports.default=e.default.getClassFactory(i),module.exports=exports.default;
},{"../../../core/FactoryMaker":"KAF6"}],"s6hU":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../../core/FactoryMaker"),r=e(t);function o(e){var t=(e=e||{}).blacklistController;return{select:function(e){var r=0,o=void 0;return e&&e.some(function(e,o){return r=o,!t.contains(e.serviceLocation)})&&(o=e[r]),o}}}o.__dashjs_factory_name="BasicSelector",exports.default=r.default.getClassFactory(o),module.exports=exports.default;
},{"../../../core/FactoryMaker":"KAF6"}],"Lxig":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../core/errors/Errors"),t=e(r),o=require("../../core/EventBus"),s=e(o),a=require("../../core/events/Events"),l=e(a),n=require("../controllers/BlacklistController"),u=e(n),i=require("./baseUrlResolution/DVBSelector"),c=e(i),d=require("./baseUrlResolution/BasicSelector"),f=e(d),E=require("../../core/FactoryMaker"),_=e(E),I=require("../vo/DashJSError"),R=e(I),O=require("../constants/Constants"),v=e(O);function C(){var e,r=this.context,o=(0,s.default)(r).getInstance(),a=void 0,n=void 0,i=void 0,d=void 0,E=void 0;function _(){n.reset()}return e={chooseSelectorFromManifest:function(e){!function(){if(!a||!a.hasOwnProperty("getIsDVB"))throw new Error(v.default.MISSING_CONFIG_ERROR)}(),E=a.getIsDVB(e)?d:i},select:function(e){if(e){var r=e.baseUrls,s=e.selectedIdx;if(!isNaN(s))return r[s];var a=E.select(r);return a?(e.selectedIdx=r.indexOf(a),a):(o.trigger(l.default.URL_RESOLUTION_FAILED,{error:new R.default(t.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,t.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(E===i&&_()))}},reset:_,setConfig:function(e){e.selector&&(E=e.selector),e.dashManifestModel&&(a=e.dashManifestModel)}},n=(0,u.default)(r).create({updateEventName:l.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:l.default.SERVICE_LOCATION_BLACKLIST_ADD}),i=(0,f.default)(r).create({blacklistController:n}),d=(0,c.default)(r).create({blacklistController:n}),E=i,e}C.__dashjs_factory_name="BaseURLSelector",exports.default=_.default.getClassFactory(C),module.exports=exports.default;
},{"../../core/errors/Errors":"dCLp","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../controllers/BlacklistController":"UxEz","./baseUrlResolution/DVBSelector":"dlWJ","./baseUrlResolution/BasicSelector":"s6hU","../../core/FactoryMaker":"KAF6","../vo/DashJSError":"BHVF","../constants/Constants":"NqGT"}],"XdcR":[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=1,e=1,s=function s(a,o,r,l){t(this,s),this.url=a||"",this.serviceLocation=o||a||"",this.dvb_priority=r||i,this.dvb_weight=l||e,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};s.DEFAULT_DVB_PRIORITY=i,s.DEFAULT_DVB_WEIGHT=e,exports.default=s,module.exports=exports.default;
},{}],"x96n":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../models/BaseURLTreeModel"),r=e(t),a=require("../utils/BaseURLSelector"),i=e(a),o=require("../utils/URLUtils"),l=e(o),s=require("../../dash/vo/BaseURL"),n=e(s),u=require("../../core/FactoryMaker"),d=e(u),f=require("../../core/EventBus"),c=e(f),v=require("../../core/events/Events"),M=e(v);function L(){var e=void 0,t=void 0,a=this.context,o=(0,c.default)(a).getInstance(),s=(0,l.default)(a).getInstance(),u=void 0,d=void 0;function f(e){u.invalidateSelectedIndexes(e.entry)}return e={reset:function(){u.reset(),d.reset()},initialize:function(e){var r;u.setConfig({dashManifestModel:t}),d.setConfig({dashManifestModel:t}),r=e,u.update(r),d.chooseSelectorFromManifest(r)},resolve:function(e){var t=u.getForPath(e).reduce(function(e,t){var r=d.select(t);return r?(s.isRelative(r.url)?e.url=s.resolve(r.url,e.url):(e.url=r.url,e.serviceLocation=r.serviceLocation),e.availabilityTimeOffset=r.availabilityTimeOffset,e.availabilityTimeComplete=r.availabilityTimeComplete,e):new n.default},new n.default);if(!s.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(u=e.baseURLTreeModel),e.baseURLSelector&&(d=e.baseURLSelector),e.dashManifestModel&&(t=e.dashManifestModel)}},u=(0,r.default)(a).create(),d=(0,i.default)(a).create(),o.on(M.default.SERVICE_LOCATION_BLACKLIST_CHANGED,f,e),e}L.__dashjs_factory_name="BaseURLController",exports.default=d.default.getSingletonFactory(L),module.exports=exports.default;
},{"../models/BaseURLTreeModel":"tBtE","../utils/BaseURLSelector":"Lxig","../utils/URLUtils":"rvxi","../../dash/vo/BaseURL":"XdcR","../../core/FactoryMaker":"KAF6","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW"}],"xyoW":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),r=e(t),n=require("../../core/Debug"),a=e(n);function o(){var e=void 0,t=void 0,r=this.context;return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){var r=window.URL.createObjectURL(e);return t.setSource(r),r},detachMediaSource:function(e){e.setSource(null)},setDuration:function(e,t){return e.duration!=t&&(e.duration=t),e.duration},setSeekable:function(e,t,r){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&t>=0&&t<r&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,r))},signalEndOfStream:function(e){var r=e.sourceBuffers,n=r.length;if("open"===e.readyState){for(var a=0;a<n;a++){if(r[a].updating)return;if(0===r[a].buffered.length)return}t.info("call to mediaSource endOfStream"),e.endOfStream()}}},t=(0,a.default)(r).getInstance().getLogger(e),e}o.__dashjs_factory_name="MediaSourceController",exports.default=r.default.getSingletonFactory(o),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb"}],"kiPm":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/Constants"),r=e(t),i=require("../constants/MetricsConstants"),a=e(i),o=require("../Stream"),n=e(o),d=require("../ManifestUpdater"),l=e(d),s=require("../../core/EventBus"),u=e(s),f=require("../../core/events/Events"),c=e(f),E=require("../../core/FactoryMaker"),g=e(E),m=require("../vo/metrics/PlayList"),v=require("../../core/Debug"),T=e(v),S=require("../utils/InitCache"),_=e(S),p=require("../utils/URLUtils"),C=e(p),A=require("../MediaPlayerEvents"),D=e(A),M=require("./TimeSyncController"),I=e(M),P=require("./BaseURLController"),h=e(P),O=require("./MediaSourceController"),R=e(O),L=require("../vo/DashJSError"),N=e(L),y=require("../../core/errors/Errors"),b=e(y);function U(){var e=40,t=this.context,i=(0,u.default)(t).getInstance(),o=void 0,d=void 0,s=void 0,f=void 0,E=void 0,g=void 0,v=void 0,S=void 0,p=void 0,A=void 0,M=void 0,P=void 0,O=void 0,L=void 0,y=void 0,U=void 0,F=void 0,w=void 0,B=void 0,k=void 0,K=void 0,Y=void 0,x=void 0,q=void 0,V=void 0,H=void 0,G=void 0,z=void 0,W=void 0,J=void 0,j=void 0,Q=void 0,Z=void 0,X=void 0,$=void 0,ee=void 0,te=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,ne=void 0,de=void 0,le=void 0,se=void 0,ue=void 0,fe=void 0;function ce(){if(be(r.default.VIDEO)){var e=j.getPlaybackQuality();e&&p.addDroppedFrames(r.default.VIDEO,e)}}function Ee(){if(!(!Z.getJumpGaps()||0===De()||Q.isSeeking()||X||G||z||W)&&++ne>=e){var t=Q.getTime();ue===t?function(e){for(var t=De(),r=Z.getSmallGapLimit(),a=void 0,o=0;o<t.length;o++){var n=t[o].getBuffer(),l=n.getAllBufferRanges(),s=void 0;if(l&&!(l.length<=1)){for(var u=0;u<l.length;u++)if(e<l.start(u)){s=l.start(u);break}if(s>0){var f=s-e;f>0&&f<=r&&(void 0===a||s>a)&&(a=s)}}}var E=Q.getTimeToStreamEnd();void 0===a&&!isNaN(E)&&E<r&&(a=e+E);a>0&&(!isNaN(E)&&a>=e+E?(d.info("Jumping media gap (discontinuity) at time ",e,". Jumping to end of the stream"),i.trigger(c.default.PLAYBACK_ENDED,{isLast:ke().isLast})):(d.info("Jumping media gap (discontinuity) at time ",e,". Jumping to time position",a),Q.seek(a,!0,!0)))}(t):ue=t,ne=0}}function ge(e){var t=Ae(e.seekTime);ae&&(Te(),ie=!1),oe&&(d.debug("[PreloadTimer] stop period preload timer."),clearTimeout(oe),oe=void 0),t===x&&se&&se.deactivate(!0),t&&(t!==x||se&&!x.isActive())?(Fe(m.PlayListTrace.END_OF_PERIOD_STOP_REASON),Pe(x,t,e.seekTime)):Fe(m.PlayListTrace.USER_REQUEST_STOP_REASON),we(m.PlayList.SEEK_START_REASON)}function me(){d.debug("[onPlaybackStarted]"),$?($=!1,we(m.PlayList.INITIAL_PLAYOUT_START_REASON)):X&&(X=!1,we(m.PlayList.RESUME_FROM_PAUSE_START_REASON),Se())}function ve(e){d.debug("[onPlaybackPaused]"),e.ended||(X=!0,Fe(m.PlayListTrace.USER_REQUEST_STOP_REASON),Se())}function Te(){d.debug("[toggleEndPeriodTimer] stop end period timer."),clearTimeout(ae),ae=void 0}function Se(){if(ie)if(ae)Te();else{var e=Q.getTimeToStreamEnd(),t=e>0?1e3*e:0,r=t<2e3?t/4:t-2e3;d.debug("[toggleEndPeriodTimer] Going to fire preload in",r,"milliseconds"),oe=setTimeout(Ce,r),d.debug("[toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in",t,"milliseconds"),ae=setTimeout(function(){i.trigger(c.default.PLAYBACK_ENDED,{isLast:ke().isLast})},t)}}function _e(e){if(e.sender&&(e.sender.getType()===r.default.AUDIO||e.sender.getType()===r.default.VIDEO)){var t=ke().isLast;J&&!t&&void 0===ae&&(d.info("[onTrackBufferingCompleted] end of period detected. Track",e.sender.getType(),"has finished"),ie=!0,!1===X&&Se())}}function pe(){var e=ke().isLast;J&&e&&(d.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),M.signalEndOfStream(J))}function Ce(){var e,t=ke().isLast;J&&!t&&(e=Ie(),(le=x.isProtectionCompatible(e)&&(fe||x.isMediaCodecCompatible(e)))&&(d.info("[onStreamCanLoadNext] Preloading next stream"),x.stopEventController(),x.deactivate(!0),e.preload(J,de),se=e,e.getProcessors().forEach(function(t){S.setIndexHandlerTime(t,e.getStartTime())})))}function Ae(e){var t=0,r=null,i=Y.length;i>0&&(t+=Y[0].getStartTime());for(var a=0;a<i;a++)if(r=Y[a],e<(t=parseFloat((t+r.getDuration()).toFixed(5))))return r;return null}function De(){return x?x.getProcessors():[]}function Me(){var e=Ie();e?(re=void 0,te=void 0,Pe(x,e,NaN)):d.debug("StreamController no next stream found"),Fe(e?m.PlayListTrace.END_OF_PERIOD_STOP_REASON:m.PlayListTrace.END_OF_CONTENT_STOP_REASON),ae=void 0,ie=!1}function Ie(){if(x){var e=(t=ke().start,r=ke().duration,{v:Y.filter(function(e){return e.getStreamInfo().start===parseFloat((t+r).toFixed(5))})[0]});if("object"==typeof e)return e.v}var t,r}function Pe(e,t,r){G||!t||e===t&&t.isActive()||(G=!0,i.trigger(c.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),le=!1,e&&(e.stopEventController(),le=x.isProtectionCompatible(t)&&(fe||x.isMediaCodecCompatible(t))&&!r||t.getPreloaded(),e.deactivate(le)),x=t,se=!1,Q.initialize(ke(),le),j.getElement()?he(r,e,!1,le):function(e){Oe(e,le)}(r))}function he(e,t,r,a){var o=void 0;function n(){J&&(d.debug("MediaSource is open!"),window.URL.revokeObjectURL(o),J.removeEventListener("sourceopen",n),J.removeEventListener("webkitsourceopen",n),Re(),t||i.trigger(c.default.SOURCE_INITIALIZED),r?x.setMediaSource(J):Oe(e,a))}J?a?(Oe(e,a),t||i.trigger(c.default.SOURCE_INITIALIZED)):(M.detachMediaSource(j),J.addEventListener("sourceopen",n,!1),J.addEventListener("webkitsourceopen",n,!1),o=M.attachMediaSource(J,j),d.debug("MediaSource attached to element.  Waiting on open...")):((J=M.createMediaSource()).addEventListener("sourceopen",n,!1),J.addEventListener("webkitsourceopen",n,!1),o=M.attachMediaSource(J,j),d.debug("MediaSource attached to element.  Waiting on open..."))}function Oe(e,t){if(de=x.activate(J,t?de:void 0),re=Ue(r.default.AUDIO),te=Ue(r.default.VIDEO),de){var a=Object.keys(de);a.length>0&&de[a[0]].changeType&&(d.debug("SourceBuffer changeType method supported. Use it to switch codecs in periods transitions"),fe=!0)}var o;$||(isNaN(e)?(o=Q.getStreamStartTime(!0),t||De().forEach(function(e){S.setIndexHandlerTime(e,o)})):Q.seek(e)),x.startEventController(),!H&&$||Q.play(),G=!1,i.trigger(c.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:ke()})}function Re(e){var t=e||ke().manifestInfo.duration,r=M.setDuration(J,t);d.debug("Duration successfully set to: "+r)}function Le(e){for(var t=0,r=Y.length;t<r;t++)if(Y[t].getId()===e.id)return Y[t];return null}function Ne(){var e=g.getValue();q&&(i.trigger(c.default.PROTECTION_CREATED,{controller:q,manifest:e}),q.setMediaElement(j.getElement()),V&&q.setProtectionData(V)),function(){try{var e=S.getStreamsInfo();if(0===e.length)throw new Error("There are no streams");var a=A.getCurrentManifestUpdate(p.getMetricsFor(r.default.STREAM));p.updateManifestUpdateInfo(a,{currentTime:Q.getTime(),buffered:j.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:K.getClientTimeOffset()});for(var d=0,l=e.length;d<l;d++){var u=e[d],E=Le(u);E?E.updateData(u):(E=(0,n.default)(t).create({manifestModel:g,dashManifestModel:v,mediaPlayerModel:Z,metricsModel:p,dashMetrics:A,manifestUpdater:f,adapter:S,timelineConverter:K,capabilities:s,errHandler:k,baseURLController:O,domStorage:L,abrController:y,playbackController:Q,mediaController:U,textController:F,videoModel:j,streamController:o}),Y.push(E),E.initialize(u,q)),p.addManifestUpdateStreamInfo(a,u.id,u.index,u.start,u.duration)}if(!x){var m=Q.getStartTimeFromUriParameters(),T=null;m&&(T=Ae(isNaN(m.fragS)?m.fragT:m.fragS)),Pe(null,null!==T?T:Y[0],NaN)}i.trigger(c.default.STREAMS_COMPOSED)}catch(_){k.manifestError(_.message,"nostreamscomposed",g.getValue()),k.error(new N.default(b.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,_.message+"nostreamscomposed",g.getValue())),W=!0,qe()}}()}function ye(e){e.error?(W=!0,qe()):function(){var t=e.manifest;S.updatePeriods(t);var i=S.getStreamsInfo(void 0,1)[0],a=S.getMediaInfoForType(i,r.default.VIDEO)||S.getMediaInfoForType(i,r.default.AUDIO),o=void 0;a&&(o=v.getUseCalculatedLiveEdgeTimeForAdaptation(S.getDataForMedia(a)))&&(d.debug("SegmentTimeline detected using calculated Live Edge Time"),Z.setUseManifestDateHeaderTimeSource(!1));var n=v.getUTCTimingSources(e.manifest),l=!v.getIsDynamic(t)||o?n:n.concat(Z.getUTCTimingSources()),s=B.isHTTPS(e.manifest.url);l.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===Z.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(s?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),s?"https://":"http://"),d.debug("Matching default timing source protocol to manifest protocol: ",e.value))}),O.initialize(t),P.setConfig({metricsModel:p,dashMetrics:A,baseURLController:O}),P.initialize(l,Z.getUseManifestDateHeaderTimeSource())}()}function be(e){var t=void 0;if(!e)return t;switch(e){case r.default.VIDEO:t=te;break;case r.default.AUDIO:t=re}return t}function Ue(e){var t=!1;return De().forEach(function(r){r.getMediaInfo().type===e&&(t=!0)}),t}function Fe(e,t){t=t||new Date,ee&&(De().forEach(function(r){var i=r.getScheduleController();i&&i.finalisePlayList(t,e)}),p.addPlayList(ee),ee=null)}function we(e){(ee=new m.PlayList).start=new Date,ee.mstart=1e3*Q.getTime(),ee.starttype=e,De().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(ee)})}function Be(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}z=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),d.fatal("Video Element Error: "+t),e.error&&d.fatal(e.error),k.mediaSourceError(t),k.error(new N.default(e.error.code,t)),qe()}}function ke(){return x?x.getStreamInfo():null}function Ke(){if(!(E&&E.hasOwnProperty("load")&&K&&K.hasOwnProperty("initialize")&&K.hasOwnProperty("reset")&&K.hasOwnProperty("getClientTimeOffset")&&g&&k&&p&&Q))throw new Error("setConfig function has to be called previously")}function Ye(e){isNaN(e.newDuration)||Re(e.newDuration)}function xe(){Y=[],q=null,G=!1,x=null,z=!1,W=!1,te=void 0,re=void 0,$=!0,X=!1,H=!0,ee=null,ae=void 0,ie=!1,ne=0}function qe(){Ke(),P.reset(),Fe(z||W?m.PlayListTrace.FAILURE_STOP_REASON:m.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=Y?Y.length:0;e<t;e++){Y[e].reset(z)}!function(){i.off(c.default.PLAYBACK_TIME_UPDATED,ce,this),i.off(c.default.PLAYBACK_SEEKING,ge,this),i.off(c.default.PLAYBACK_ERROR,Be,this),i.off(c.default.PLAYBACK_STARTED,me,this),i.off(c.default.PLAYBACK_PAUSED,ve,this),i.off(c.default.PLAYBACK_ENDED,Me,this),i.off(c.default.MANIFEST_UPDATED,ye,this),i.off(c.default.BUFFERING_COMPLETED,_e,this),i.off(c.default.STREAM_BUFFERING_COMPLETED,pe,this),i.off(c.default.MANIFEST_VALIDITY_CHANGED,Ye,this),i.off(c.default.TIME_SYNCHRONIZATION_COMPLETED,Ne,this),i.off(c.default.WALLCLOCK_TIME_UPDATED,Ee,this),i.off(D.default.METRIC_ADDED,Ve,this)}(),O.reset(),f.reset(),p.clearAllCurrentMetrics(),g.setValue(null),E.reset(),K.reset(),w.reset(),J&&(M.detachMediaSource(j),J=null),j=null,q&&(q.setMediaElement(null),q=null,V=null,g.getValue()&&i.trigger(c.default.PROTECTION_DESTROYED,{data:g.getValue().url})),i.trigger(c.default.STREAM_TEARDOWN_COMPLETE),xe()}function Ve(e){e.metric===a.default.DVR_INFO&&e.mediaType===r.default.AUDIO&&M.setSeekable(J,e.value.range.start,e.value.range.end)}return o={initialize:function(e,r){Ke(),H=e,V=r,K.initialize(),(f=(0,l.default)(t).create()).setConfig({manifestModel:g,dashManifestModel:v,mediaPlayerModel:Z,manifestLoader:E,errHandler:k}),f.initialize(),O.setConfig({dashManifestModel:v}),function(){i.on(c.default.PLAYBACK_TIME_UPDATED,ce,this),i.on(c.default.PLAYBACK_SEEKING,ge,this),i.on(c.default.PLAYBACK_ERROR,Be,this),i.on(c.default.PLAYBACK_STARTED,me,this),i.on(c.default.PLAYBACK_PAUSED,ve,this),i.on(c.default.PLAYBACK_ENDED,Me,this),i.on(c.default.MANIFEST_UPDATED,ye,this),i.on(c.default.BUFFERING_COMPLETED,_e,this),i.on(c.default.STREAM_BUFFERING_COMPLETED,pe,this),i.on(c.default.MANIFEST_VALIDITY_CHANGED,Ye,this),i.on(c.default.TIME_SYNCHRONIZATION_COMPLETED,Ne,this),i.on(c.default.WALLCLOCK_TIME_UPDATED,Ee,this),i.on(D.default.METRIC_ADDED,Ve,this)}()},getActiveStreamInfo:ke,isTrackTypePresent:be,switchToVideoElement:function(e){x&&(Q.initialize(ke()),he(e,null,!0,!1))},getStreamById:function(e){return Y.filter(function(t){return t.getId()===e})[0]},getStreamForTime:Ae,getTimeRelativeToStreamId:function(e,t){for(var r=null,i=0,a=0,o=null,n=Y.length,d=0;d<n;d++){if(a=(r=Y[d]).getStartTime(),o=r.getDuration(),Number.isFinite(a)&&(i=a),r.getId()===t)return e-i;Number.isFinite(o)&&(i+=o)}return null},load:function(e){Ke(),E.load(e)},loadWithManifest:function(e){!function(){if(!f||!f.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),f.setManifest(e)},getActiveStreamProcessors:De,setConfig:function(e){e&&(e.capabilities&&(s=e.capabilities),e.manifestLoader&&(E=e.manifestLoader),e.manifestModel&&(g=e.manifestModel),e.dashManifestModel&&(v=e.dashManifestModel),e.mediaPlayerModel&&(Z=e.mediaPlayerModel),e.protectionController&&(q=e.protectionController),e.adapter&&(S=e.adapter),e.metricsModel&&(p=e.metricsModel),e.dashMetrics&&(A=e.dashMetrics),e.errHandler&&(k=e.errHandler),e.timelineConverter&&(K=e.timelineConverter),e.videoModel&&(j=e.videoModel),e.playbackController&&(Q=e.playbackController),e.domStorage&&(L=e.domStorage),e.abrController&&(y=e.abrController),e.mediaController&&(U=e.mediaController),e.textController&&(F=e.textController))},setProtectionData:function(e){V=e},reset:qe},d=(0,T.default)(t).getInstance().getLogger(o),P=(0,I.default)(t).getInstance(),O=(0,h.default)(t).getInstance(),M=(0,R.default)(t).getInstance(),w=(0,_.default)(t).getInstance(),B=(0,C.default)(t).getInstance(),xe(),o}U.__dashjs_factory_name="StreamController",exports.default=g.default.getSingletonFactory(U),module.exports=exports.default;
},{"../constants/Constants":"NqGT","../constants/MetricsConstants":"Nprb","../Stream":"jqp3","../ManifestUpdater":"bhdF","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6","../vo/metrics/PlayList":"pWQ1","../../core/Debug":"Jjwb","../utils/InitCache":"HvR8","../utils/URLUtils":"rvxi","../MediaPlayerEvents":"t2DM","./TimeSyncController":"Bvnl","./BaseURLController":"x96n","./MediaSourceController":"xyoW","../vo/DashJSError":"BHVF","../../core/errors/Errors":"dCLp"}],"FYkh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,e,r){for(var o=!0;o;){var n=t,u=e,i=r;o=!1,null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,u);if(void 0!==l){if("value"in l)return l.value;var a=l.get;if(void 0===a)return;return a.call(i)}var s=Object.getPrototypeOf(n);if(null===s)return;t=s,e=u,r=i,o=!0,l=s=void 0}};function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=require("../constants/Constants"),u=e(n),i=require("./FragmentRequest"),l=e(i),a=function(e){function n(e,o){r(this,n),t(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.url=e||null,this.type=o||null,this.mediaType=u.default.STREAM,this.responseType=""}return o(n,l["default"]),n}();exports.default=a,module.exports=exports.default;
},{"../constants/Constants":"NqGT","./FragmentRequest":"TOyU"}],"eaQS":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./vo/DashJSError"),t=e(r),o=require("./net/HTTPLoader"),u=e(o),l=require("./vo/metrics/HTTPRequest"),n=require("./vo/TextRequest"),s=e(n),a=require("../core/EventBus"),d=e(a),i=require("../core/events/Events"),c=e(i),f=require("../core/FactoryMaker"),_=e(f),E=require("../core/errors/Errors"),v=e(E);function q(e){e=e||{};var r="urn:mpeg:dash:resolve-to-zero:2013",o=this.context,n=(0,d.default)(o).getInstance(),a=(0,u.default)(o).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier});return{load:function(e,o,u){var d=function(r,l){o.resolved=!0,o.resolvedContent=r||null,n.trigger(c.default.XLINK_ELEMENT_LOADED,{element:o,resolveObject:u,error:r||l?null:new t.default(v.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,v.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})};if(e===r)d(null,!0);else{var i=new s.default(e,l.HTTPRequest.XLINK_EXPANSION_TYPE);a.load({request:i,success:function(e){d(e)},error:function(){d(null)}})}},reset:function(){a&&(a.abort(),a=null)}}}q.__dashjs_factory_name="XlinkLoader",exports.default=_.default.getClassFactory(q),module.exports=exports.default;
},{"./vo/DashJSError":"BHVF","./net/HTTPLoader":"WJCH","./vo/metrics/HTTPRequest":"RDXP","./vo/TextRequest":"FYkh","../core/EventBus":"ASRh","../core/events/Events":"VXzW","../core/FactoryMaker":"KAF6","../core/errors/Errors":"dCLp"}],"L4Dq":[function(require,module,exports) {
"use strict";function e(e){e=e||{},function(){void 0===e.escapeMode&&(e.escapeMode=!0);void 0===e.attributePrefix&&(e.attributePrefix="_");e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0);e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0);void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0);e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1);e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1);void 0===e.ignoreRoot&&(e.ignoreRoot=!1)}();var t={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function r(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function n(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function i(e,t,r,n){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==n)break}else if(a instanceof RegExp){if(a.test(n))break}else if("function"==typeof a&&a(t,r,n))break}return i!=e.length}function a(t,r,n){switch(e.arrayAccessForm){case"property":t[r]instanceof Array?t[r+"_asArray"]=t[r]:t[r+"_asArray"]=[t[r]]}!(t[r]instanceof Array)&&e.arrayAccessFormPaths.length>0&&i(e.arrayAccessFormPaths,t,r,n)&&(t[r]=[t[r]])}function s(e){var t=e.split(/[-T:+Z]/g),r=new Date(t[0],t[1]-1,t[2]),n=t[5].split(".");if(r.setHours(t[3],t[4],n[0]),n.length>1&&r.setMilliseconds(n[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),r.setMinutes(r.getMinutes()-i-r.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())));return r}function o(r,n,a,s){return!(n==t.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||i(e.xmlElementsFilter,r,a,s)}function l(n,c){if(n.nodeType==t.DOCUMENT_NODE){for(var u=new Object,_=n.childNodes,f=0;f<_.length;f++){if((p=_[f]).nodeType==t.ELEMENT_NODE)if(e.ignoreRoot)u=l(p);else(u={})[x=r(p)]=l(p)}return u}if(n.nodeType==t.ELEMENT_NODE){(u=new Object).__cnt=0;var d=[];for(_=n.childNodes,f=0;f<_.length;f++){var p,x=r(p=_[f]);if(p.nodeType!=t.COMMENT_NODE){var m=c+"."+x;if(o(u,p.nodeType,x,m))if(u.__cnt++,null==u[x]){var g=l(p,m);if("#text"!=x||/[^\s]/.test(g))(h={})[x]=g,d.push(h);u[x]=g,a(u,x,m)}else{null!=u[x]&&(u[x]instanceof Array||(u[x]=[u[x]],a(u,x,m)));var h;g=l(p,m);if("#text"!=x||/[^\s]/.test(g))(h={})[x]=g,d.push(h);u[x][u[x].length]=g}}}u.__children=d;for(var v=r(n),y=0;y<n.attributes.length;y++){var O=n.attributes[y];u.__cnt++;for(var E=O.value,N=0,T=e.matchers.length;N<T;N++){var D=e.matchers[N];D.test(O,v)&&(E=D.converter(O.value))}u[e.attributePrefix+O.name]=E}var b=function(e){return e.prefix}(n);return null!=b&&""!=b&&(u.__cnt++,u.__prefix=b),null!=u["#text"]&&(u.__text=u["#text"],u.__text instanceof Array&&(u.__text=u.__text.join("\n")),e.stripWhitespaces&&(u.__text=u.__text.trim()),delete u["#text"],"property"==e.arrayAccessForm&&delete u["#text_asArray"],u.__text=function(t,r,n){if(e.datetimeAccessFormPaths.length>0){var a=n.split(".#")[0];return i(e.datetimeAccessFormPaths,t,r,a)?s(t):t}return t}(u.__text,x,c+"."+x)),null!=u["#cdata-section"]&&(u.__cdata=u["#cdata-section"],delete u["#cdata-section"],"property"==e.arrayAccessForm&&delete u["#cdata-section_asArray"]),0==u.__cnt&&"text"==e.emptyNodeForm?u="":1==u.__cnt&&null!=u.__text?u=u.__text:1!=u.__cnt||null==u.__cdata||e.keepCData?u.__cnt>1&&null!=u.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==u.__text||""==u.__text.trim())&&delete u.__text:u=u.__cdata,delete u.__cnt,!e.enableToStringFunc||null==u.__text&&null==u.__cdata||(u.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),u}if(n.nodeType==t.TEXT_NODE||n.nodeType==t.CDATA_SECTION_NODE)return n.nodeValue}function c(t,r,i,a){var s="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+r;if(null!=i)for(var o=0;o<i.length;o++){var l=i[o],c=t[l];e.escapeMode&&(c=n(c)),s+=" "+l.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?s+='"'+c+'"':s+="'"+c+"'"}return s+=a?"/>":">"}function u(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function _(t,r){return"property"==e.arrayAccessForm&&(n=r.toString(),i="_asArray",-1!==n.indexOf(i,n.length-i.length))||0==r.toString().indexOf(e.attributePrefix)||0==r.toString().indexOf("__")||t[r]instanceof Function;var n,i}function f(e){var t=0;if(e instanceof Object)for(var r in e)_(e,r)||t++;return t}function d(t,r,n){return 0==e.jsonPropertiesFilter.length||""==n||i(e.jsonPropertiesFilter,t,r,n)}function p(t){var r=[];if(t instanceof Object)for(var n in t)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(e.attributePrefix)&&r.push(n);return r}function x(t){var r="";return t instanceof Object?r+=function(t){var r="";return null!=t.__cdata&&(r+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?r+=n(t.__text):r+=t.__text),r}(t):null!=t&&(e.escapeMode?r+=n(t):r+=t),r}function m(e,t){return""===e?t:e+"."+t}function g(e,t,r,n){var i="";if(0==e.length)i+=c(e,t,r,!0);else for(var a=0;a<e.length;a++)i+=c(e[a],t,p(e[a]),!1),i+=h(e[a],m(n,t)),i+=u(e[a],t);return i}function h(e,t){var r="";if(f(e)>0)for(var n in e)if(!_(e,n)&&(""==t||d(e,n,m(t,n)))){var i=e[n],a=p(i);if(null==i||null==i)r+=c(i,n,a,!0);else if(i instanceof Object)if(i instanceof Array)r+=g(i,n,a,t);else if(i instanceof Date)r+=c(i,n,a,!1),r+=i.toISOString(),r+=u(i,n);else{f(i)>0||null!=i.__text||null!=i.__cdata?(r+=c(i,n,a,!1),r+=h(i,m(t,n)),r+=u(i,n)):r+=c(i,n,a,!0)}else r+=c(i,n,a,!1),r+=x(i),r+=u(i,n)}return r+=x(e)}this.parseXmlString=function(e){var t;window.ActiveXObject||window;if(void 0===e)return null;if(window.DOMParser){var r=new window.DOMParser;try{(t=r.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(n){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?s(e):e},this.xml2json=function(e){return l(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return h(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,module.exports=exports.default;
},{}],"eOXy":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../XlinkLoader"),r=e(t),n=require("../../core/EventBus"),o=e(n),l=require("../../core/events/Events"),a=e(l),s=require("../../core/FactoryMaker"),i=e(s),d=require("../../../externals/xml2json"),u=e(d),f=require("../utils/URLUtils"),v=e(f),c=require("../../dash/constants/DashConstants"),p=e(c),E="onLoad",h="onActuate",A="urn:mpeg:dash:resolve-to-zero:2013";function _(e){e=e||{};var t=this.context,n=(0,o.default)(t).getInstance(),l=(0,v.default)(t).getInstance(),s=void 0,i=void 0,d=void 0,f=void 0,c=void 0,_=void 0;function y(e,t,r){var n={},o=void 0,a=void 0;n.elements=e,n.type=t,n.resolveType=r,0===n.elements.length&&m(n);for(var s=0;s<n.elements.length;s++)o=n.elements[s],a=l.isHTTPURL(o.url)?o.url:o.originalContent.BaseURL+o.url,_.load(a,o,n)}function T(e){var t,r=void 0,n="";if(r=e.element,t=e.resolveObject,r.resolvedContent){var o=0;0===r.resolvedContent.indexOf("<?xml")&&(o=r.resolvedContent.indexOf("?>")+2),n=r.resolvedContent.substr(0,o)+"<response>"+r.resolvedContent.substr(o)+"</response>",r.resolvedContent=c.xml_str2json(n)}(function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0})(t)&&m(t)}function m(e){var t=[],r=void 0,o=void 0;if(function(e){var t=[],r=void 0,n=void 0,o=void 0,l=void 0,a=void 0,s=void 0;for(l=e.elements.length-1;l>=0;l--){if(r=e.elements[l],n=r.type+"_asArray",r.resolvedContent){if(r.resolvedContent)for(a=0;a<r.resolvedContent[n].length;a++)o=r.resolvedContent[n][a],t.push(o)}else delete r.originalContent["xlink:actuate"],delete r.originalContent["xlink:href"],t.push(r.originalContent);for(r.parentElement[n].splice(r.index,1),s=0;s<t.length;s++)r.parentElement[n].splice(r.index+s,0,t[s]);t=[]}e.elements.length>0&&d.run(f)}(e),e.resolveType===h&&n.trigger(a.default.XLINK_READY,{manifest:f}),e.resolveType===E)switch(e.type){case p.default.PERIOD:for(r=0;r<f[p.default.PERIOD+"_asArray"].length;r++)(o=f[p.default.PERIOD+"_asArray"][r]).hasOwnProperty(p.default.ADAPTATION_SET+"_asArray")&&(t=t.concat(g(o[p.default.ADAPTATION_SET+"_asArray"],o,p.default.ADAPTATION_SET,E))),o.hasOwnProperty(p.default.EVENT_STREAM+"_asArray")&&(t=t.concat(g(o[p.default.EVENT_STREAM+"_asArray"],o,p.default.EVENT_STREAM,E)));y(t,p.default.ADAPTATION_SET,E);break;case p.default.ADAPTATION_SET:n.trigger(a.default.XLINK_READY,{manifest:f})}}function g(e,t,r,n){var o=[],l=void 0,a=void 0,s=void 0;for(a=e.length-1;a>=0;a--)(l=e[a]).hasOwnProperty("xlink:href")&&l["xlink:href"]===A&&e.splice(a,1);for(a=0;a<e.length;a++)(l=e[a]).hasOwnProperty("xlink:href")&&l.hasOwnProperty("xlink:actuate")&&l["xlink:actuate"]===n&&(s=x(l["xlink:href"],t,r,a,n,l),o.push(s));return o}function x(e,t,r,n,o,l){return{url:e,parentElement:t,type:r,index:n,resolveType:o,originalContent:l,resolvedContent:null,resolved:!1}}return s={resolveManifestOnLoad:function(e){c=new u.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:i}),y(g((f=e).Period_asArray,f,p.default.PERIOD,E),p.default.PERIOD,E)},setMatchers:function(e){e&&(i=e)},setIron:function(e){e&&(d=e)},reset:function(){n.off(a.default.XLINK_ELEMENT_LOADED,T,s),_&&(_.reset(),_=null)}},n.on(a.default.XLINK_ELEMENT_LOADED,T,s),_=(0,r.default)(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),s}_.__dashjs_factory_name="XlinkController",exports.default=i.default.getClassFactory(_),module.exports=exports.default;
},{"../XlinkLoader":"eaQS","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6","../../../externals/xml2json":"L4Dq","../utils/URLUtils":"rvxi","../../dash/constants/DashConstants":"wyUT"}],"vkOp":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../core/FactoryMaker"),a=e(r);function t(e){function r(e,r){for(var a in e)r.hasOwnProperty(a)||(r[a]=e[a])}function a(e,a,t){for(var n=0,o=e.length;n<o;++n){var f=e[n];if(a[f.name])if(t[f.name]){if(f.merge){var i=a[f.name],u=t[f.name];"object"==typeof i&&"object"==typeof u?r(i,u):t[f.name]=i+u}}else t[f.name]=a[f.name]}}function t(e,r){for(var n=0,o=e.children.length;n<o;++n){var f=e.children[n],i=r[f.name+"_asArray"];if(i)for(var u=0,s=i.length;u<s;++u){var l=i[u];a(e.properties,r,l),t(f,l)}}}return{run:function(r){if(null===r||"object"!=typeof r)return r;if("period"in e)for(var a=e.period,n=r.Period_asArray,o=0,f=n.length;o<f;++o){var i=n[o];if(t(a,i),"adaptationset"in e){var u=i.AdaptationSet_asArray;if(u)for(var s=e.adaptationset,l=0,c=u.length;l<c;++l)t(s,u[l])}}return r}}}t.__dashjs_factory_name="ObjectIron";var n=a.default.getClassFactory(t);exports.default=n,module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6"}],"chfE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(e,n){t(this,r),this._test=e,this._converter=n}return e(r,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),r}();exports.default=r,module.exports=exports.default;
},{}],"E9Ne":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,e,u){for(var a=!0;a;){var f=t,l=e,E=u;a=!1,null===f&&(f=Function.prototype);var d=Object.getOwnPropertyDescriptor(f,l);if(void 0!==d){if("value"in d)return d.value;var r=d.get;if(void 0===r)return;return r.call(E)}var I=Object.getPrototypeOf(f);if(null===I)return;t=I,e=l,u=E,a=!0,d=I=void 0}};function e(t){return t&&t.__esModule?t:{default:t}}function u(t,e,u){return e in t?Object.defineProperty(t,e,{value:u,enumerable:!0,configurable:!0,writable:!0}):t[e]=u,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=require("./BaseMatcher"),E=e(l),d=require("../../constants/DashConstants"),r=e(d),I=function(e){function l(){a(this,l),t(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,function(t,e){var a,f=(u(a={},r.default.MPD,[r.default.ID,r.default.PROFILES]),u(a,r.default.PERIOD,[r.default.ID]),u(a,r.default.BASE_URL,[r.default.SERVICE_LOCATION,r.default.BYTE_RANGE]),u(a,r.default.SEGMENT_BASE,[r.default.INDEX_RANGE]),u(a,r.default.INITIALIZATION,[r.default.RANGE]),u(a,r.default.REPRESENTATION_INDEX,[r.default.RANGE]),u(a,r.default.SEGMENT_LIST,[r.default.INDEX_RANGE]),u(a,r.default.BITSTREAM_SWITCHING,[r.default.RANGE]),u(a,r.default.SEGMENT_URL,[r.default.MEDIA_RANGE,r.default.INDEX_RANGE]),u(a,r.default.SEGMENT_TEMPLATE,[r.default.INDEX_RANGE,r.default.MEDIA,r.default.INDEX,r.default.INITIALIZATION_MINUS,r.default.BITSTREAM_SWITCHING_MINUS]),u(a,r.default.ASSET_IDENTIFIER,[r.default.VALUE,r.default.ID]),u(a,r.default.EVENT_STREAM,[r.default.VALUE]),u(a,r.default.ADAPTATION_SET,[r.default.PROFILES,r.default.MIME_TYPE,r.default.SEGMENT_PROFILES,r.default.CODECS,r.default.CONTENT_TYPE]),u(a,r.default.FRAME_PACKING,[r.default.VALUE,r.default.ID]),u(a,r.default.AUDIO_CHANNEL_CONFIGURATION,[r.default.VALUE,r.default.ID]),u(a,r.default.CONTENT_PROTECTION,[r.default.VALUE,r.default.ID]),u(a,r.default.ESSENTIAL_PROPERTY,[r.default.VALUE,r.default.ID]),u(a,r.default.SUPPLEMENTAL_PROPERTY,[r.default.VALUE,r.default.ID]),u(a,r.default.INBAND_EVENT_STREAM,[r.default.VALUE,r.default.ID]),u(a,r.default.ACCESSIBILITY,[r.default.VALUE,r.default.ID]),u(a,r.default.ROLE,[r.default.VALUE,r.default.ID]),u(a,r.default.RATING,[r.default.VALUE,r.default.ID]),u(a,r.default.VIEWPOINT,[r.default.VALUE,r.default.ID]),u(a,r.default.CONTENT_COMPONENT,[r.default.CONTENT_TYPE]),u(a,r.default.REPRESENTATION,[r.default.ID,r.default.DEPENDENCY_ID,r.default.MEDIA_STREAM_STRUCTURE_ID]),u(a,r.default.SUBSET,[r.default.ID]),u(a,r.default.METRICS,[r.default.METRICS_MINUS]),u(a,r.default.REPORTING,[r.default.VALUE,r.default.ID]),a);if(f.hasOwnProperty(e)){var l=f[e];return void 0!==l&&l.indexOf(t.name)>=0}return!1},function(t){return String(t)})}return f(l,E["default"]),l}();exports.default=I,module.exports=exports.default;
},{"./BaseMatcher":"chfE","../../constants/DashConstants":"wyUT"}],"iyyd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,e,r){for(var o=!0;o;){var a=t,n=e,u=r;o=!1,null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,n);if(void 0!==l){if("value"in l)return l.value;var f=l.get;if(void 0===f)return;return f.call(u)}var s=Object.getPrototypeOf(a);if(null===s)return;t=s,e=n,r=u,o=!0,l=s=void 0}};function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=require("./BaseMatcher"),n=e(a),u=require("../../../streaming/constants/Constants"),l=e(u),f=require("../../constants/DashConstants"),s=e(f),i=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,c=31536e3,p=2592e3,d=86400,T=3600,_=60,E=function(e){function a(){r(this,a),t(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,function(t){for(var e=[s.default.MIN_BUFFER_TIME,s.default.MEDIA_PRESENTATION_DURATION,s.default.MINIMUM_UPDATE_PERIOD,s.default.TIMESHIFT_BUFFER_DEPTH,s.default.MAX_SEGMENT_DURATION,s.default.MAX_SUBSEGMENT_DURATION,l.default.SUGGESTED_PRESENTATION_DELAY,s.default.START,l.default.START_TIME,s.default.DURATION],r=e.length,o=0;o<r;o++)if(t.nodeName===e[o])return i.test(t.value);return!1},function(t){var e=i.exec(t),r=parseFloat(e[2]||0)*c+parseFloat(e[4]||0)*p+parseFloat(e[6]||0)*d+parseFloat(e[8]||0)*T+parseFloat(e[10]||0)*_+parseFloat(e[12]||0);return void 0!==e[1]&&(r=-r),r})}return o(a,n["default"]),a}();exports.default=E,module.exports=exports.default;
},{"./BaseMatcher":"chfE","../../../streaming/constants/Constants":"NqGT","../../constants/DashConstants":"wyUT"}],"fMKs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,e,r){for(var o=!0;o;){var n=t,a=e,u=r;o=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,a);if(void 0!==i){if("value"in i)return i.value;var p=i.get;if(void 0===p)return;return p.call(u)}var c=Object.getPrototypeOf(n);if(null===c)return;t=c,e=a,r=u,o=!0,i=c=void 0}};function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=require("./BaseMatcher"),a=e(n),u=60,i=60,p=1e3,c=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,s=function(e){function n(){r(this,n),t(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,function(t){return c.test(t.value)},function(t){var e=c.exec(t),r=void 0;if(r=Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),e[6]&&parseInt(e[6],10)||0,e[7]&&parseFloat(e[7])*p||0),e[9]&&e[10]){var o=parseInt(e[9],10)*i+parseInt(e[10],10);r+=("+"===e[8]?-1:1)*o*u*p}return new Date(r)})}return o(n,a["default"]),n}();exports.default=s,module.exports=exports.default;
},{"./BaseMatcher":"chfE"}],"RwGU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,e,r){for(var o=!0;o;){var n=t,u=e,a=r;o=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,u);if(void 0!==i){if("value"in i)return i.value;var c=i.get;if(void 0===c)return;return c.call(a)}var f=Object.getPrototypeOf(n);if(null===f)return;t=f,e=u,r=a,o=!0,i=f=void 0}};function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=require("./BaseMatcher"),u=e(n),a=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,i=function(e){function n(){r(this,n),t(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,function(t){return a.test(t.value)},function(t){return parseFloat(t)})}return o(n,u["default"]),n}();exports.default=i,module.exports=exports.default;
},{"./BaseMatcher":"chfE"}],"lK3B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(e){t(this,r);var n;this._name=e,this._merge=(n=e)&&n.length&&n.charAt(0)===n.charAt(0).toUpperCase()}return e(r,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),r}();exports.default=r,module.exports=exports.default;
},{}],"eiJ0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function r(e){return e&&e.__esModule?e:{default:e}}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var n=require("./CommonProperty"),i=r(n),o=function(){function r(e,n,o){var u=this;t(this,r),this._name=e||"",this._properties=[],this._children=o||[],Array.isArray(n)&&n.forEach(function(e){u._properties.push(new i.default(e))})}return e(r,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),r}();exports.default=o,module.exports=exports.default;
},{"./CommonProperty":"lK3B"}],"QueQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,e,r){for(var u=!0;u;){var o=t,a=e,f=r;u=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var n=l.get;if(void 0===n)return;return n.call(f)}var E=Object.getPrototypeOf(o);if(null===E)return;t=E,e=a,r=f,u=!0,l=E=void 0}};function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=require("./MapNode"),a=e(o),f=require("../../constants/DashConstants"),l=e(f),n=function(e){function o(){r(this,o);var e=[l.default.PROFILES,l.default.WIDTH,l.default.HEIGHT,l.default.SAR,l.default.FRAMERATE,l.default.AUDIO_SAMPLING_RATE,l.default.MIME_TYPE,l.default.SEGMENT_PROFILES,l.default.CODECS,l.default.MAXIMUM_SAP_PERIOD,l.default.START_WITH_SAP,l.default.MAX_PLAYOUT_RATE,l.default.CODING_DEPENDENCY,l.default.SCAN_TYPE,l.default.FRAME_PACKING,l.default.AUDIO_CHANNEL_CONFIGURATION,l.default.CONTENT_PROTECTION,l.default.ESSENTIAL_PROPERTY,l.default.SUPPLEMENTAL_PROPERTY,l.default.INBAND_EVENT_STREAM];t(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,l.default.ADAPTATION_SET,e,[new a.default(l.default.REPRESENTATION,e,[new a.default(l.default.SUB_REPRESENTATION,e)])])}return u(o,a["default"]),o}();exports.default=n,module.exports=exports.default;
},{"./MapNode":"eiJ0","../../constants/DashConstants":"wyUT"}],"SR9F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,e,r){for(var o=!0;o;){var n=t,u=e,a=r;o=!1,null===n&&(n=Function.prototype);var f=Object.getOwnPropertyDescriptor(n,u);if(void 0!==f){if("value"in f)return f.value;var l=f.get;if(void 0===l)return;return l.call(a)}var i=Object.getPrototypeOf(n);if(null===i)return;t=i,e=u,r=a,o=!0,f=i=void 0}};function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=require("./MapNode"),u=e(n),a=require("../../constants/DashConstants"),f=e(a),l=function(e){function n(){r(this,n);var e=[f.default.SEGMENT_BASE,f.default.SEGMENT_TEMPLATE,f.default.SEGMENT_LIST];t(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,f.default.PERIOD,e,[new u.default(f.default.ADAPTATION_SET,e,[new u.default(f.default.REPRESENTATION,e)])])}return o(n,u["default"]),n}();exports.default=l,module.exports=exports.default;
},{"./MapNode":"eiJ0","../../constants/DashConstants":"wyUT"}],"sDA5":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../core/FactoryMaker"),t=e(r),a=require("../../core/Debug"),o=e(a),n=require("./objectiron"),i=e(n),s=require("../../../externals/xml2json"),u=e(s),c=require("./matchers/StringMatcher"),d=e(c),f=require("./matchers/DurationMatcher"),l=e(f),m=require("./matchers/DateTimeMatcher"),p=e(m),w=require("./matchers/NumericMatcher"),h=e(w),g=require("./maps/RepresentationBaseValuesMap"),v=e(g),M=require("./maps/SegmentValuesMap"),q=e(M);function x(){var e=this.context,r=void 0,t=void 0,a=void 0,n=void 0,s=void 0;return r={parse:function(e){var r,a=window.performance.now();if(!(r=n.xml_str2json(e)))throw new Error("parsing the manifest failed");var o=window.performance.now();s.run(r);var i=window.performance.now();return t.info("Parsing complete: ( xml2json: "+(o-a).toPrecision(3)+"ms, objectiron: "+(i-o).toPrecision(3)+"ms, total: "+((i-a)/1e3).toPrecision(3)+"s)"),r},getMatchers:function(){return a},getIron:function(){return s}},t=(0,o.default)(e).getInstance().getLogger(r),a=[new l.default,new p.default,new h.default,new d.default],n=new u.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:a}),s=(0,i.default)(e).create({adaptationset:new v.default,period:new q.default}),r}x.__dashjs_factory_name="DashParser",exports.default=t.default.getClassFactory(x),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb","./objectiron":"vkOp","../../../externals/xml2json":"L4Dq","./matchers/StringMatcher":"E9Ne","./matchers/DurationMatcher":"iyyd","./matchers/DateTimeMatcher":"fMKs","./matchers/NumericMatcher":"RwGU","./maps/RepresentationBaseValuesMap":"QueQ","./maps/SegmentValuesMap":"SR9F"}],"s9p5":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./constants/Constants"),t=e(r),a=require("./controllers/XlinkController"),l=e(a),o=require("./net/HTTPLoader"),s=e(o),u=require("./utils/URLUtils"),i=e(u),n=require("./vo/TextRequest"),d=e(n),E=require("./vo/DashJSError"),_=e(E),f=require("./vo/metrics/HTTPRequest"),R=require("../core/EventBus"),A=e(R),I=require("../core/events/Events"),c=e(I),M=require("../core/errors/Errors"),L=e(M),N=require("../core/FactoryMaker"),O=e(N),D=require("../dash/parser/DashParser"),S=e(D),T=require("../core/Debug"),v=e(T);function g(e){e=e||{};var r=this.context,a=(0,A.default)(r).getInstance(),o=(0,i.default)(r).getInstance(),u=void 0,n=void 0,E=void 0,R=void 0,I=void 0,M=e.mssHandler,N=e.errHandler;function O(e){a.trigger(c.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return u={load:function(e){var l=new d.default(e,f.HTTPRequest.MPD_TYPE);E.load({request:l,success:function(l,s,u){if(R){var i=void 0,d=void 0,E=void 0;if(u&&u!==e?(d=o.parseBaseUrl(u),i=u):(o.isRelative(e)&&(e=o.resolve(e,window.location.href)),d=o.parseBaseUrl(e)),null===I&&(I=function(e){var t=null;return e.indexOf("SmoothStreamingMedia")>-1?(M&&(t=M.createMssParser(),M.registerEvents()),t):e.indexOf("MPD")>-1?(0,S.default)(r).create():t}(l)),null!==I){R.setMatchers(I.getMatchers()),R.setIron(I.getIron());try{E=I.parse(l)}catch(f){return void a.trigger(c.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new _.default(L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}E?(E.url=i||e,E.originalUrl||(E.originalUrl=E.url),E.hasOwnProperty(t.default.LOCATION)&&(d=o.parseBaseUrl(E.Location_asArray[0]),n.debug("BaseURI set by Location to: "+d)),E.baseUri=d,E.loadedTime=new Date,R.resolveManifestOnLoad(E)):a.trigger(c.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new _.default(L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}else a.trigger(c.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new _.default(L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}},error:function(r,t,l){a.trigger(c.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new _.default(L.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,L.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(e+", ")+l)})}})},reset:function(){a.off(c.default.XLINK_READY,O,u),R&&(R.reset(),R=null),E&&(E.abort(),E=null),M&&M.reset()}},n=(0,v.default)(r).getInstance().getLogger(u),a.on(c.default.XLINK_READY,O,u),E=(0,s.default)(r).create({errHandler:N,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),R=(0,l.default)(r).create({errHandler:N,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),I=null,u}g.__dashjs_factory_name="ManifestLoader";var F=O.default.getClassFactory(g);exports.default=F,module.exports=exports.default;
},{"./constants/Constants":"NqGT","./controllers/XlinkController":"eOXy","./net/HTTPLoader":"WJCH","./utils/URLUtils":"rvxi","./vo/TextRequest":"FYkh","./vo/DashJSError":"BHVF","./vo/metrics/HTTPRequest":"RDXP","../core/EventBus":"ASRh","../core/events/Events":"VXzW","../core/errors/Errors":"dCLp","../core/FactoryMaker":"KAF6","../dash/parser/DashParser":"sDA5","../core/Debug":"Jjwb"}],"JveW":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../core/EventBus"),t=e(r),o=require("../../core/events/Events"),n=e(o),i=require("../../core/FactoryMaker"),a=e(i);function u(){var e=this.context,r=(0,t.default)(e).getInstance();return{capabilityError:function(e){r.trigger(n.default.ERROR,{error:"capability",event:e})},downloadError:function(e,t,o){r.trigger(n.default.ERROR,{error:"download",event:{id:e,url:t,request:o}})},manifestError:function(e,t,o,i){r.trigger(n.default.ERROR,{error:"manifestError",event:{message:e,id:t,manifest:o,event:i}})},timedTextError:function(e,t,o){r.trigger(n.default.ERROR,{error:"cc",event:{message:e,id:t,cc:o}})},mediaSourceError:function(e){r.trigger(n.default.ERROR,{error:"mediasource",event:e})},mediaKeySessionError:function(e){r.trigger(n.default.ERROR,{error:"key_session",event:e})},mediaKeyMessageError:function(e){r.trigger(n.default.ERROR,{error:"key_message",event:e})},error:function(e){r.trigger(n.default.ERROR,{error:e})}}}u.__dashjs_factory_name="ErrorHandler",exports.default=a.default.getSingletonFactory(u),module.exports=exports.default;
},{"../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6"}],"P2iS":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../core/FactoryMaker"),t=e(r);function o(){var e,r=void 0;return e={supportsMediaSource:function(){var e="WebKitMediaSource"in window,r="MediaSource"in window;return e||r},supportsEncryptedMedia:function(){return r},supportsCodec:function(e){return!!("MediaSource"in window&&MediaSource.isTypeSupported(e))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){r=e}},r=!1,e}o.__dashjs_factory_name="Capabilities",exports.default=t.default.getSingletonFactory(o),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6"}],"G02k":[function(require,module,exports) {
"use strict";function t(t,l){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var l=function l(){t(this,l),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};exports.default=l,module.exports=exports.default;
},{}],"Xbr3":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../vo/URIFragmentData"),t=e(r),a=require("../../core/FactoryMaker"),n=e(a);function u(){var e=void 0;return{initialize:function(r){if(e=new t.default,!r)return null;var a=r.indexOf("#");if(-1!==a)for(var n=r.substr(a+1).split("&"),u=0,o=n.length;u<o;++u){var i=n[u],s=i.indexOf("=");if(-1!==s){var f=i.substring(0,s);e.hasOwnProperty(f)&&(e[f]=i.substr(s+1))}}},getURIFragmentData:function(){return e}}}u.__dashjs_factory_name="URIFragmentModel",exports.default=n.default.getSingletonFactory(u),module.exports=exports.default;
},{"../vo/URIFragmentData":"G02k","../../core/FactoryMaker":"KAF6"}],"ykjY":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/EventBus"),r=e(t),u=require("../../core/events/Events"),n=e(u),o=require("../../core/FactoryMaker"),a=e(o);function s(){var e=this.context,t=(0,r.default)(e).getInstance(),u=void 0;return{getValue:function(){return u},setValue:function(e){u=e,e&&t.trigger(n.default.MANIFEST_LOADED,{data:e})}}}s.__dashjs_factory_name="ManifestModel",exports.default=a.default.getSingletonFactory(s),module.exports=exports.default;
},{"../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6"}],"AJX8":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function t(){e(this,t),this.schemeIdUri="",this.value=""};exports.default=t,module.exports=exports.default;
},{}],"n5tK":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("../../dash/vo/UTCTiming"),r=e(n),o=require("../../core/FactoryMaker"),u=e(o),a=require("../vo/metrics/HTTPRequest"),i=require("../constants/Constants"),c=e(i),f=require("../rules/abr/ABRRulesCollection"),T=e(f),s=require("../utils/SupervisorTools"),l=4,d=36e4,m=36e4,p=.9,y=1e4,R=20,g=80,h=10,P=12,v=20,E=30,_=60,A=600,b=.2,S=.8,M=100,I=50,N=5,D=3,k=1e3,B=3,L=500,G=1,U=500,C=3,H=10,O=5,q=.02,Y=0,F=.5,w=50,W=!1;function K(){var e,n,o,u=void 0,i=void 0,f=void 0,K=void 0,V=void 0,X=void 0,x=void 0,Q=void 0,j=void 0,J=void 0,z=void 0,Z=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,oe=void 0,ue=void 0,ae=void 0,ie=void 0,ce=void 0,fe=void 0,Te=void 0,se=void 0,le=void 0,de=void 0,me=void 0,pe=void 0,ye=void 0,Re=void 0,ge=void 0,he=void 0,Pe=void 0,ve=void 0,Ee=void 0,_e={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"};function Ae(e){var t=void 0;for(t=0;t<le.length;t++)if(le[t].rulename===e)return t;return-1}function be(){return Re?V||C:V}function Se(e,t){Me(e,t);var n=new r.default;n.schemeIdUri=e,n.value=t,f.push(n)}function Me(e,t){(0,s.checkParameterType)(e,"string"),(0,s.checkParameterType)(t,"string"),f.forEach(function(n,r){n.schemeIdUri===e&&n.value===t&&f.splice(r,1)})}function Ie(){return Re}return e={setABRStrategy:function(e){if(e!==c.default.ABR_STRATEGY_DYNAMIC&&e!==c.default.ABR_STRATEGY_BOLA&&e!==c.default.ABR_STRATEGY_THROUGHPUT)throw c.default.BAD_ARGUMENT_ERROR;ce=e},getABRStrategy:function(){return ce},setUseDefaultABRRules:function(e){(0,s.checkParameterType)(e,"boolean"),fe=e},getUseDefaultABRRules:function(){return fe},getABRCustomRules:function(){return le},addABRCustomRule:function(e,t,n){if("string"!=typeof e||e!==T.default.ABANDON_FRAGMENT_RULES&&e!==T.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw c.default.BAD_ARGUMENT_ERROR;var r=Ae(t);-1===r?le.push({type:e,rulename:t,rule:n}):(le[r].type=e,le[r].rule=n)},removeABRCustomRule:function(e){if(e){var t=Ae(e);-1!==t&&le.splice(t,1)}else le=[]},setBandwidthSafetyFactor:function(e){(0,s.checkParameterType)(e,"number"),re=e},getBandwidthSafetyFactor:function(){return re},setAbandonLoadTimeout:function(e){(0,s.checkParameterType)(e,"number"),oe=e},getAbandonLoadTimeout:function(){return oe},setLastBitrateCachingInfo:function(e,t){if("boolean"!=typeof e||void 0!==t&&("number"!=typeof t||isNaN(t)))throw c.default.BAD_ARGUMENT_ERROR;J.enabled=e,void 0!==t&&(J.ttl=t)},getLastBitrateCachingInfo:function(){return J},setLastMediaSettingsCachingInfo:function(e,t){if("boolean"!=typeof e||void 0!==t&&("number"!=typeof t||isNaN(t)))throw c.default.BAD_ARGUMENT_ERROR;z.enabled=e,void 0!==t&&(z.ttl=t)},getLastMediaSettingsCachingInfo:function(){return z},setStableBufferTime:function(e){(0,s.checkParameterType)(e,"number"),Z=e},getStableBufferTime:function(){return Ie()?.6*be():isNaN(Z)?se?v:P:Z},setBufferTimeAtTopQuality:function(e){(0,s.checkParameterType)(e,"number"),$=e},getBufferTimeAtTopQuality:function(){return $},setBufferTimeAtTopQualityLongForm:function(e){(0,s.checkParameterType)(e,"number"),ee=e},getBufferTimeAtTopQualityLongForm:function(){return ee},setLongFormContentDurationThreshold:function(e){(0,s.checkParameterType)(e,"number"),te=e},getLongFormContentDurationThreshold:function(){return te},setSegmentOverlapToleranceTime:function(e){(0,s.checkParameterType)(e,"number"),ne=e},getSegmentOverlapToleranceTime:function(){return ne},getCacheLoadThresholdForType:function(e){return me[e]},setCacheLoadThresholdForType:function(e,t){(0,s.checkParameterType)(t,"number"),(0,s.checkIsVideoOrAudioType)(e),me[e]=t},setBufferToKeep:function(e){(0,s.checkParameterType)(e,"number"),x=e},getBufferToKeep:function(){return x},setBufferAheadToKeep:function(e){(0,s.checkParameterType)(e,"number"),Q=e},getBufferAheadToKeep:function(){return Q},setBufferPruningInterval:function(e){(0,s.checkParameterType)(e,"number"),j=e},getBufferPruningInterval:function(){return j},setRetryAttemptsForType:function(e,t){if("number"!=typeof t||"string"!=typeof e||e!==a.HTTPRequest.MPD_TYPE&&e!==a.HTTPRequest.MEDIA_SEGMENT_TYPE)throw c.default.BAD_ARGUMENT_ERROR;ue[e]=t},getRetryAttemptsForType:function(e){return Ie()?ue[e]*O:ue[e]},setRetryIntervalForType:function(e,t){(0,s.checkParameterType)(t,"number"),ae[e]=t},getRetryIntervalForType:function(e){return Ie()?ae[e]/H:ae[e]},setWallclockTimeUpdateInterval:function(e){(0,s.checkParameterType)(e,"number"),ie=e},getWallclockTimeUpdateInterval:function(){return ie},setScheduleWhilePaused:function(e){(0,s.checkParameterType)(e,"boolean"),X=e},getScheduleWhilePaused:function(){return X},getUseSuggestedPresentationDelay:function(){return i},setUseSuggestedPresentationDelay:function(e){(0,s.checkParameterType)(e,"boolean"),i=e},setLiveDelayFragmentCount:function(e){(0,s.checkParameterType)(e,"number"),K=e},getLiveDelayFragmentCount:function(){return K},getLiveDelay:be,setLiveDelay:function(e){void 0!==e&&(0,s.checkParameterType)(e,"number"),V=e},setUseManifestDateHeaderTimeSource:function(e){(0,s.checkParameterType)(e,"boolean"),u=e},getUseManifestDateHeaderTimeSource:function(){return u},addUTCTimingSource:Se,removeUTCTimingSource:Me,getUTCTimingSources:function(){return f},clearDefaultUTCTimingSources:function(){f=[]},restoreDefaultUTCTimingSources:function(){Se(_e.scheme,_e.value)},setXHRWithCredentialsForType:function e(t,n){t?Te[t]=!!n:Object.keys(Te).forEach(function(t){e(t,n)})},getXHRWithCredentialsForType:function(e){var t=Te[e];return void 0===t?Te.default:t},setFastSwitchEnabled:function(e){(0,s.checkParameterType)(e,"boolean"),se=e},getFastSwitchEnabled:function(){return se},setMovingAverageMethod:function(e){if(e!==c.default.MOVING_AVERAGE_SLIDING_WINDOW&&e!==c.default.MOVING_AVERAGE_EWMA)throw c.default.BAD_ARGUMENT_ERROR;de=e},getMovingAverageMethod:function(){return de},setJumpGaps:function(e){(0,s.checkParameterType)(e,"boolean"),pe=e},getJumpGaps:function(){return pe},setSmallGapLimit:function(e){(0,s.checkParameterType)(e,"number"),ye=e},getSmallGapLimit:function(){return ye},getLowLatencyEnabled:Ie,setLowLatencyEnabled:function(e){(0,s.checkParameterType)(e,"boolean"),Re=e},setCatchUpPlaybackRate:function(e){(0,s.checkParameterType)(e,"number"),(0,s.checkRange)(e,0,.5),Ee=e},getCatchUpPlaybackRate:function(){return Ee},setLowLatencyMinDrift:function(e){(0,s.checkParameterType)(e,"number"),Pe=e},getLowLatencyMinDrift:function(){return Pe},setLowLatencyMaxDriftBeforeSeeking:function(e){(0,s.checkParameterType)(e,"number"),ve=e},getLowLatencyMaxDriftBeforeSeeking:function(){return ve},setManifestUpdateRetryInterval:function(e){(0,s.checkParameterType)(e,"number"),ge=e},getManifestUpdateRetryInterval:function(){return ge},setKeepProtectionMediaKeys:function(e){(0,s.checkParameterType)(e,"boolean"),he=e},getKeepProtectionMediaKeys:function(){return he},getDefaultUtcTimingSource:function(){return _e},reset:function(){}},f=[],i=!1,u=!0,X=!0,ce=c.default.ABR_STRATEGY_DYNAMIC,fe=!0,se=!1,J={enabled:!0,ttl:d},z={enabled:!0,ttl:m},K=l,V=void 0,x=R,Q=g,j=h,Z=NaN,$=E,ee=_,te=A,ne=b,re=p,oe=y,ie=w,pe=!1,ye=S,ge=M,Te={default:W},le=[],de=c.default.MOVING_AVERAGE_SLIDING_WINDOW,Re=!1,Pe=q,ve=Y,Ee=F,t(n={},a.HTTPRequest.MPD_TYPE,B),t(n,a.HTTPRequest.XLINK_EXPANSION_TYPE,G),t(n,a.HTTPRequest.MEDIA_SEGMENT_TYPE,D),t(n,a.HTTPRequest.INIT_SEGMENT_TYPE,D),t(n,a.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,D),t(n,a.HTTPRequest.INDEX_SEGMENT_TYPE,D),t(n,a.HTTPRequest.OTHER_TYPE,D),ue=n,t(o={},a.HTTPRequest.MPD_TYPE,L),t(o,a.HTTPRequest.XLINK_EXPANSION_TYPE,U),t(o,a.HTTPRequest.MEDIA_SEGMENT_TYPE,k),t(o,a.HTTPRequest.INIT_SEGMENT_TYPE,k),t(o,a.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,k),t(o,a.HTTPRequest.INDEX_SEGMENT_TYPE,k),t(o,a.HTTPRequest.OTHER_TYPE,k),ae=o,(me={})[c.default.VIDEO]=I,me[c.default.AUDIO]=N,he=!1,e}K.__dashjs_factory_name="MediaPlayerModel",exports.default=u.default.getSingletonFactory(K),module.exports=exports.default;
},{"../../dash/vo/UTCTiming":"AJX8","../../core/FactoryMaker":"KAF6","../vo/metrics/HTTPRequest":"RDXP","../constants/Constants":"NqGT","../rules/abr/ABRRulesCollection":"yUDT","../utils/SupervisorTools":"LTZo"}],"P7bT":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]};exports.default=e,module.exports=exports.default;
},{}],"Vz15":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null};exports.default=e,module.exports=exports.default;
},{}],"JPS2":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function t(){e(this,t),this.t=null,this.level=null};exports.default=t,module.exports=exports.default;
},{}],"pA60":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../controllers/BufferController"),o=e(r),n=function e(){t(this,e),this.target=null,this.state=o.default.BUFFER_EMPTY};exports.default=n,module.exports=exports.default;
},{"../../controllers/BufferController":"P0rN"}],"mvFq":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.time=null,this.range=null,this.manifestInfo=null};exports.default=e,module.exports=exports.default;
},{}],"XXrT":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function t(){e(this,t),this.time=null,this.droppedFrames=null};exports.default=t,module.exports=exports.default;
},{}],"p78s":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},i=function e(){t(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},n=function e(){t(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};exports.ManifestUpdate=e,exports.ManifestUpdateStreamInfo=i,exports.ManifestUpdateRepresentationInfo=n;
},{}],"tKVt":[function(require,module,exports) {
"use strict";function t(t,l){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var l=function l(){t(this,l),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};exports.default=l,module.exports=exports.default;
},{}],"lS8s":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function t(){e(this,t),this.loadingRequests=[],this.executedRequests=[]};exports.default=t,module.exports=exports.default;
},{}],"WJNi":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/Constants"),r=e(t),a=require("../constants/MetricsConstants"),n=e(a),i=require("../vo/MetricsList"),u=e(i),d=require("../vo/metrics/HTTPRequest"),f=require("../vo/metrics/RepresentationSwitch"),o=e(f),s=require("../vo/metrics/BufferLevel"),l=e(s),c=require("../vo/metrics/BufferState"),p=e(c),T=require("../vo/metrics/DVRInfo"),m=e(T),v=require("../vo/metrics/DroppedFrames"),E=e(v),R=require("../vo/metrics/ManifestUpdate"),_=require("../vo/metrics/SchedulingInfo"),M=e(_),I=require("../../core/EventBus"),S=e(I),y=require("../vo/metrics/RequestsQueue"),q=e(y),A=require("../../core/events/Events"),g=e(A),F=require("../../core/FactoryMaker"),D=e(F);function h(){var e,t=1e3,a=this.context,i=(0,S.default)(a).getInstance(),f=void 0;function s(){i.trigger(g.default.METRICS_CHANGED)}function c(e){i.trigger(g.default.METRIC_CHANGED,{mediaType:e}),s()}function T(e,t,r){i.trigger(g.default.METRIC_UPDATED,{mediaType:e,metric:t,value:r}),c(e)}function v(e,t,r){i.trigger(g.default.METRIC_ADDED,{mediaType:e,metric:t,value:r}),c(e)}function _(e){var t=void 0;return f.hasOwnProperty(e)?t=f[e]:(t=new u.default,f[e]=t),t}function I(e,r,a){var n=_(e);n[r].push(a),n[r].length>t&&n[r].shift()}function y(e,t,r){I(e,t,r),v(e,t,r)}return e={clearCurrentMetricsForType:function(e){delete f[e],c(e)},clearAllCurrentMetrics:function(){f={},s()},getReadOnlyMetricsFor:function(e){return f.hasOwnProperty(e)?f[e]:null},getMetricsFor:_,addHttpRequest:function e(t,r,a,i,u,f,o,s,l,c,p,T,m,v){var E=new d.HTTPRequest;u&&u!==i&&(e(t,null,a,i,null,null,o,s,null,null,null,T,null,null),E.actualurl=u),E.tcpid=r,E.type=a,E.url=i,E.range=o,E.trequest=s,E.tresponse=l,E.responsecode=p,E._tfinish=c,E._stream=t,E._mediaduration=T,E._responseHeaders=m,E._serviceLocation=f,v?v.forEach(function(e){!function(e,t,r,a){var n=new d.HTTPRequestTrace;n.s=t,n.d=r,n.b=a,e.trace.push(n),e.interval||(e.interval=0),e.interval+=r}(E,e.s,e.d,e.b)}):(delete E.interval,delete E.trace),y(t,n.default.HTTP_REQUEST,E)},addRepresentationSwitch:function(e,t,r,a,i){var u=new o.default;u.t=t,u.mt=r,u.to=a,i?u.lto=i:delete u.lto,y(e,n.default.TRACK_SWITCH,u)},addBufferLevel:function(e,t,r){var a=new l.default;a.t=t,a.level=r,y(e,n.default.BUFFER_LEVEL,a)},addBufferState:function(e,t,r){var a=new p.default;a.target=r,a.state=t,y(e,n.default.BUFFER_STATE,a)},addDVRInfo:function(e,t,r,a){var i=new m.default;i.time=t,i.range=a,i.manifestInfo=r,y(e,n.default.DVR_INFO,i)},addDroppedFrames:function(e,t){var r=new E.default,a=_(e).DroppedFrames;r.time=t.creationTime,r.droppedFrames=t.droppedVideoFrames,a.length>0&&a[a.length-1]==r||y(e,n.default.DROPPED_FRAMES,r)},addSchedulingInfo:function(e,t,r,a,i,u,d,f,o){var s=new M.default;s.mediaType=e,s.t=t,s.type=r,s.startTime=a,s.availabilityStartTime=i,s.duration=u,s.quality=d,s.range=f,s.state=o,y(e,n.default.SCHEDULING_INFO,s)},addRequestsQueue:function(e,t,r){var a=new q.default;a.loadingRequests=t,a.executedRequests=r,_(e).RequestsQueue=a,v(e,n.default.REQUESTS_QUEUE,a)},addManifestUpdate:function(e,t,a,i,u,d,f,o,s,l){var c=new R.ManifestUpdate;c.mediaType=e,c.type=t,c.requestTime=a,c.fetchTime=i,c.availabilityStartTime=u,c.presentationStartTime=d,c.clientTimeOffset=f,c.currentTime=o,c.buffered=s,c.latency=l,I(r.default.STREAM,n.default.MANIFEST_UPDATE,c),v(e,n.default.MANIFEST_UPDATE,c)},updateManifestUpdateInfo:function(e,t){if(e){for(var r in t)e[r]=t[r];T(e.mediaType,n.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,r,a,i){if(e){var u=new R.ManifestUpdateStreamInfo;u.id=t,u.index=r,u.start=a,u.duration=i,e.streamInfo.push(u),T(e.mediaType,n.default.MANIFEST_UPDATE_STREAM_INFO,e)}},addManifestUpdateRepresentationInfo:function(e,t,r,a,i,u,d,f){if(e){var o=new R.ManifestUpdateRepresentationInfo;o.id=t,o.index=r,o.streamIndex=a,o.mediaType=i,o.startNumber=d,o.fragmentInfoType=f,o.presentationTimeOffset=u,e.representationInfo.push(o),T(e.mediaType,n.default.MANIFEST_UPDATE_TRACK_INFO,e)}},addPlayList:function(e){var t=r.default.STREAM;e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,y(t,n.default.PLAY_LIST,e)},addDVBErrors:function(e){y(r.default.STREAM,n.default.DVB_ERRORS,e)}},f={},e}h.__dashjs_factory_name="MetricsModel",exports.default=D.default.getSingletonFactory(h),module.exports=exports.default;
},{"../constants/Constants":"NqGT","../constants/MetricsConstants":"Nprb","../vo/MetricsList":"P7bT","../vo/metrics/HTTPRequest":"RDXP","../vo/metrics/RepresentationSwitch":"Vz15","../vo/metrics/BufferLevel":"JPS2","../vo/metrics/BufferState":"pA60","../vo/metrics/DVRInfo":"mvFq","../vo/metrics/DroppedFrames":"XXrT","../vo/metrics/ManifestUpdate":"p78s","../vo/metrics/SchedulingInfo":"tKVt","../../core/EventBus":"ASRh","../vo/metrics/RequestsQueue":"lS8s","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6"}],"OplP":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),n=e(t),i=require("../../core/EventBus"),r=e(i),a=require("../../core/events/Events"),o=e(a),u=require("../../core/Debug"),c=e(u);function d(){var e=void 0,t=void 0,n=void 0,i=void 0,a=void 0,u="element is not video or audio DOM type!",d=this.context,l=(0,r.default)(d).getInstance(),s=[];function f(){n&&(n.playbackRate=a||1,n.removeEventListener("canplay",f))}function g(e){n&&(n.readyState<=2&&e>0?n.addEventListener("canplay",f):n.playbackRate=e)}function p(){return s.length>0}function v(e){var t=s.indexOf(e),i=void 0;null!==e&&(-1!==t&&s.splice(t,1),n&&!1===p()&&0===n.playbackRate&&(g(a||1),n.paused||((i=document.createEvent("Event")).initEvent("playing",!0,!1),n.dispatchEvent(i))))}function T(){if(n&&p()&&0===n.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),n.dispatchEvent(e)}}function y(){return n?n.buffered:null}return e={initialize:function(){l.on(o.default.PLAYBACK_PLAYING,T,this)},setCurrentTime:function(e,t){if(n){if(n.currentTime==e)return;try{e=t?function(e){var t=y(),n=e,i=9999999999;if(t)for(var r=0;r<t.length;r++){var a=t.start(r),o=t.end(r),u=Math.abs(a-e),c=Math.abs(o-e);if(e>=a&&e<=o)return e;u<i&&(i=u,n=a),c<i&&(i=c,n=o)}return n}(e):e,n.currentTime=e}catch(i){0===n.readyState&&i.code===i.INVALID_STATE_ERR&&setTimeout(function(){n.currentTime=e},400)}}},play:function(){if(n){n.autoplay=!0;var e=n.play();e&&e.catch&&"undefined"!=typeof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&l.trigger(o.default.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing ("+e+")")})}},isPaused:function(){return n?n.paused:null},pause:function(){n&&(n.pause(),n.autoplay=!1)},isSeeking:function(){return n?n.seeking:null},getTime:function(){return n?n.currentTime:null},getPlaybackRate:function(){return n?n.playbackRate:null},setPlaybackRate:g,getPlayedRanges:function(){return n?n.played:null},getEnded:function(){return n?n.ended:null},setStallState:function(e,t){!function(e,t){t?function(e){var t=void 0;null===e||n.seeking||-1!==s.indexOf(e)||(s.push(e),n&&1===s.length&&((t=document.createEvent("Event")).initEvent("waiting",!0,!1),a=n.playbackRate,g(0),n.dispatchEvent(t)))}(e):v(e)}(e,t)},getElement:function(){return n},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw u;(n=e)&&(n.preload="auto")},setSource:function(e){n&&(e?n.src=e:(n.removeAttribute("src"),n.load()))},getSource:function(){return n?n.src:null},getTTMLRenderingDiv:function(){return i},setTTMLRenderingDiv:function(e){(i=e).style.position="absolute",i.style.display="flex",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top=0,i.style.left=0},getPlaybackQuality:function(){if(!n)return null;var e="webkitDroppedFrameCount"in n&&"webkitDecodedFrameCount"in n,t=null;return"getVideoPlaybackQuality"in n?t=n.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDroppedFrameCount+n.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:function(e,t){n&&n.addEventListener(e,t)},removeEventListener:function(e,t){n&&n.removeEventListener(e,t)},getReadyState:function(){return n?n.readyState:NaN},getBufferRange:y,getClientWidth:function(){return n?n.clientWidth:NaN},getClientHeight:function(){return n?n.clientHeight:NaN},getTextTracks:function(){return n?n.textTracks:[]},getTextTrack:function(e,t,i,r,a){if(n)for(var o=0;o<n.textTracks.length;o++)if(n.textTracks[o].kind===e&&(!t||n.textTracks[o].label==t)&&n.textTracks[o].language===i&&n.textTracks[o].isTTML===r&&n.textTracks[o].isEmbedded===a)return n.textTracks[o];return null},addTextTrack:function(e,t,i){return n?n.addTextTrack(e,t,i):null},appendChild:function(e){n&&(n.appendChild(e),void 0!==e.isTTML&&(n.textTracks[n.textTracks.length-1].isTTML=e.isTTML,n.textTracks[n.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){n&&n.removeChild(e)},getVideoWidth:function(){return n?n.videoWidth:NaN},getVideoHeight:function(){return n?n.videoHeight:NaN},getVideoRelativeOffsetTop:function(){return n&&n.parentNode?n.getBoundingClientRect().top-n.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){return n&&n.parentNode?n.getBoundingClientRect().left-n.parentNode.getBoundingClientRect().left:NaN},reset:function(){l.off(o.default.PLAYBACK_PLAYING,T,this)}},t=(0,c.default)(d).getInstance().getLogger(e),e}d.__dashjs_factory_name="VideoModel",exports.default=n.default.getSingletonFactory(d),module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/Debug":"Jjwb"}],"WUkp":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/FactoryMaker"),a=e(t),r=require("../../core/Debug"),s=e(r),n=require("../constants/Constants"),o=e(n),i=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],d="dashjs_?_bitrate",g="dashjs_?_settings",c="localStorage",l="sessionStorage",u="LastBitrate",f="LastMediaSettings";function m(e){e=e||{};var t=this.context,a=e.mediaPlayerModel,r=void 0,n=void 0,m=void 0;function S(e){if(void 0!==m)return m;m=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e])}catch(a){return n.warn("DOMStorage access denied: "+a.message),m}if(!t||e!==c&&e!==l)return m;try{t.setItem("1","1"),t.removeItem("1"),m=!0}catch(a){n.warn("DOMStorage is supported, but cannot be used: "+a.message)}return m}function v(){return 6e5*Math.round((new Date).getTime()/6e5)}function h(e,t){return S(e)&&a["get"+t+"CachingInfo"]().enabled}function y(){if(!a||!a.hasOwnProperty("getLastMediaSettingsCachingInfo"))throw new Error(o.default.MISSING_CONFIG_ERROR)}return r={getSavedBitrateSettings:function(e){var t=NaN;if(y(),h(c,u)){var r=d.replace(/\?/,e);try{var s=JSON.parse(localStorage.getItem(r))||{},o=(new Date).getTime()-parseInt(s.timestamp,10)>=a.getLastMediaSettingsCachingInfo().ttl||!1,i=parseFloat(s.bitrate);isNaN(i)||o?o&&localStorage.removeItem(r):(t=i,n.debug("Last saved bitrate for "+e+" was "+i))}catch(g){return null}}return t},setSavedBitrateSettings:function(e,t){if(h(c,u)&&t){var a=d.replace(/\?/,e);try{localStorage.setItem(a,JSON.stringify({bitrate:t.toFixed(3),timestamp:v()}))}catch(r){n.error(r.message)}}},getSavedMediaSettings:function(e){if(y(),!h(c,f))return null;var t=null,r=g.replace(/\?/,e);try{var s=JSON.parse(localStorage.getItem(r))||{},n=(new Date).getTime()-parseInt(s.timestamp,10)>=a.getLastMediaSettingsCachingInfo().ttl||!1;t=s.settings,n&&(localStorage.removeItem(r),t=null)}catch(o){return null}return t},setSavedMediaSettings:function(e,t){if(h(c,f)){var a=g.replace(/\?/,e);try{localStorage.setItem(a,JSON.stringify({settings:t,timestamp:v()}))}catch(r){n.error(r.message)}}}},n=(0,s.default)(t).getInstance().getLogger(r),S(c)&&i.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(a){n.error(a.message)}}}),r}m.__dashjs_factory_name="DOMStorage";var S=a.default.getSingletonFactory(m);exports.default=S,module.exports=exports.default;
},{"../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb","../constants/Constants":"NqGT"}],"uUTl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVersionString=r;var e="2.9.3";function r(){return e}
},{}],"EiHn":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};exports.default=e,module.exports=exports.default;
},{}],"nVXy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}();function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(){i(this,n),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null}return t(n,[{key:"isMediaInfoEqual",value:function(t){if(!t)return!1;var i=this.id===t.id,n=this.viewpoint===t.viewpoint,e=this.lang===t.lang,l=this.roles.toString()===t.roles.toString(),o=this.accessibility.toString()===t.accessibility.toString(),r=this.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return i&&n&&e&&l&&o&&r}}]),n}();exports.default=n,module.exports=exports.default;
},{}],"scCK":[function(require,module,exports) {
"use strict";function t(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function s(){t(this,s),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0};exports.default=s,module.exports=exports.default;
},{}],"V575":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};exports.default=e,module.exports=exports.default;
},{}],"dxFK":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};exports.default=e,module.exports=exports.default;
},{}],"BYAf":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../streaming/constants/Constants"),n=e(t),r=require("./constants/DashConstants"),i=e(r),a=require("../streaming/vo/RepresentationInfo"),o=e(a),d=require("../streaming/vo/MediaInfo"),s=e(d),u=require("../streaming/vo/StreamInfo"),l=e(u),f=require("../streaming/vo/ManifestInfo"),g=e(f),p=require("./vo/Event"),m=e(p),c=require("../core/FactoryMaker"),v=e(c),h=require("../../externals/cea608-parser"),I=e(h),y=require("../streaming/utils/SupervisorTools");function x(){var e,t=void 0,r=void 0,a=void 0,d=void 0;function u(e,t){return t&&e?t.getRepresentationForQuality(e.quality):null}function f(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&a[e.streamInfo.id]?a[e.streamInfo.id][e.index]:null}function p(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e.id===i.id)return i}return null}function c(e){var n=new o.default,r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],i=t.getRepresentationFor(e.index,r);return n.id=e.id,n.quality=e.index,n.bandwidth=t.getBandwidth(i),n.DVRWindow=e.segmentAvailabilityRange,n.fragmentDuration=e.segmentDuration||(e.segments&&e.segments.length>0?e.segments[0].duration:NaN),n.MSETimeOffset=e.MSETimeOffset,n.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,n.mediaInfo=v(e.adaptation),n}function v(e){var n,r=new s.default,i=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return r.id=e.id,r.index=e.index,r.type=e.type,r.streamInfo=x(e.period),r.representationCount=t.getRepresentationCount(i),r.labels=t.getLabelsForAdaptation(i),r.lang=t.getLanguageForAdaptation(i),n=t.getViewpointForAdaptation(i),r.viewpoint=n?n.value:void 0,r.accessibility=t.getAccessibilityForAdaptation(i).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==I.default&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n}),r.audioChannelConfiguration=t.getAudioChannelConfigurationForAdaptation(i).map(function(e){return e.value}),r.roles=t.getRolesForAdaptation(i).map(function(e){return e.value}),r.codec=t.getCodec(i),r.mimeType=t.getMimeType(i),r.contentProtection=t.getContentProtectionData(i),r.bitrateList=t.getBitrateListForAdaptation(i),r.contentProtection&&r.contentProtection.forEach(function(e){e.KID=t.getKID(e)}),r.isText=t.getIsTextTrack(r.mimeType),r}function h(e,t,r){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=n.default.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=r,e.roles=["caption"]}function x(e){var n,r,i=new l.default;return i.id=e.id,i.index=e.index,i.start=e.start,i.duration=e.duration,i.manifestInfo=(n=e.mpd,(r=new g.default).DVRWindowSize=n.timeShiftBufferDepth,r.loadedTime=n.manifest.loadedTime,r.availableFrom=n.availabilityStartTime,r.minBufferTime=n.manifest.minBufferTime,r.maxFragmentDuration=n.maxSegmentDuration,r.duration=t.getDuration(n.manifest),r.isDynamic=t.getIsDynamic(n.manifest),r),i.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(i.start+i.duration-i.manifestInfo.duration)<1,i}function T(e,n,r,a){var o,s=t.getAdaptationsForType(e,n,r);if(!s||0===s.length)return null;if(s.length>1&&a){var u=F(a,r);if(d[a.id]&&d[a.id][r])for(var l=0,f=s.length;l<f;l++)if(d[a.id][r].isMediaInfoEqual(u[l]))return s[l];for(l=0,f=s.length;l<f;l++)if(o=s[l],t.getRolesForAdaptation(o).filter(function(e){return e.value===i.default.MAIN})[0])return s[l]}return s[0]}function F(e,i,o){var d,s=r,u=o,l=[],f=void 0,g=void 0,m=void 0,c=void 0,I=void 0;if(u){A();var y=t.getMpd(u);s=t.getRegularPeriods(y)}else{if(!(r.length>0))return l;u=r[0].mpd.manifest}var x=p(e,s),T=x.id,F=t.getAdaptationsForType(u,e.index,i!==n.default.EMBEDDED_TEXT?i:n.default.VIDEO);if(!F)return l;for(a[T]=a[T]||t.getAdaptationsForPeriod(x),c=0,d=F.length;c<d;c++)if(f=F[c],m=t.getIndexForAdaptation(f,u,e.index),g=v(a[T][m]),i===n.default.EMBEDDED_TEXT){var C=g.accessibility.length;for(I=0;I<C;I++)if(g){var E=g.accessibility[I];if(0===E.indexOf("cea-608:")){var D=E.substring(8).split(";");if("CC"===D[0].substring(0,2))for(I=0;I<D.length;I++)g||(g=v.call(this,a[T][m])),h(g,D[I].substring(0,3),D[I].substring(4)),l.push(g),g=null;else for(I=0;I<D.length;I++)g||(g=v.call(this,a[T][m])),h(g,"CC"+(I+1),D[I]),l.push(g),g=null}else 0===E.indexOf("cea-608")&&(h(g,n.default.CC1,"eng"),l.push(g),g=null)}}else i===n.default.IMAGE?(g.type=n.default.IMAGE,l.push(g),g=null):g&&l.push(g);return l}function A(){if(!t||!t.hasOwnProperty("getMpd")||!t.hasOwnProperty("getRegularPeriods"))throw new Error("setConfig function has to be called previously")}function C(e){if(!(e&&e.hasOwnProperty("getRepresentationController")&&e.hasOwnProperty("getIndexHandler")&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getType")&&e.hasOwnProperty("getStreamInfo")))throw new Error("streamProcessor parameter is missing or malformed!")}function E(){r=[],a={},d={}}return e={convertDataToRepresentationInfo:c,getDataForMedia:f,getStreamsInfo:function(e,n){var i=[],a=r;if(e){A();var o=t.getMpd(e);a=t.getRegularPeriods(o)}n||(n=a.length);for(var d=0;d<n;d++)i.push(x(a[d]));return i},getMediaInfoForType:function(e,n){if(0===r.length)return null;var i=r[0].mpd.manifest,o=T(i,e.index,n,e);if(!o)return null;var d=p(e,r),s=d.id,u=t.getIndexForAdaptation(o,i,e.index);return a[s]=a[s]||t.getAdaptationsForPeriod(d),v(a[s][u])},getAllMediaInfoForType:F,getRepresentationInfo:function(e,t){!function(e){if(!e||!e.hasOwnProperty("getRepresentationForQuality")||!e.hasOwnProperty("getCurrentRepresentation"))throw new Error("representationController parameter is missing or malformed!")}(e);var n=void 0;return void 0!==t?((0,y.checkInteger)(t),n=e.getRepresentationForQuality(t)):n=e.getCurrentRepresentation(),n?c(n):null},getAdaptationForType:T,updateData:function(e){C(e);var n,i=p(e.getStreamInfo(),r),a=e.getMediaInfo(),o=f(a),d=e.getType(),s=void 0;n=a?a.id:null,r.length>0&&(s=n?t.getAdaptationForId(n,r[0].mpd.manifest,i.index):t.getAdaptationForIndex(a.index,r[0].mpd.manifest,i.index),e.getRepresentationController().updateData(s,o,d))},getInitRequest:function(e,t){var n,r=void 0,i=void 0;return C(e),(0,y.checkInteger)(t),r=e.getRepresentationController(),i=e.getIndexHandler(),n=r?r.getRepresentationForQuality(t):null,i?i.getInitRequest(n):null},getFragmentRequest:function(e,t,n,r){var i,a=void 0,o=null;return C(e),i=u(t,e.getRepresentationController()),(a=e.getIndexHandler())&&(o=void 0!==n&&void 0!==r?a.getSegmentRequestForTime(i,n,r):a.getNextSegmentRequest(i)),o},getIndexHandlerTime:function(e){C(e);var t=e.getIndexHandler();return t?t.getCurrentTime():NaN},setIndexHandlerTime:function(e,t){C(e);var n=e.getIndexHandler();n&&n.setCurrentTime(t)},getEventsFor:function(e,n){var i=[];if(0===r.length)return i;var a=r[0].mpd.manifest;return e instanceof l.default?i=t.getEventsForPeriod(p(e,r)):e instanceof s.default?i=t.getEventStreamForAdaptationSet(a,f(e)):e instanceof o.default&&(i=t.getEventStreamForRepresentation(a,u(e,n.getRepresentationController()))),i},getEvent:function(e,t,n){if(!e||!t)return null;var r=new m.default,i=e.scheme_id_uri,a=e.value,o=e.timescale,d=e.presentation_time_delta,s=e.event_duration,u=e.id,l=e.message_data,f=n*o+d;return t[i+"/"+a]?(r.eventStream=t[i+"/"+a],r.eventStream.value=a,r.eventStream.timescale=o,r.duration=s,r.id=u,r.presentationTime=f,r.messageData=l,r.presentationTimeDelta=d,r):null},setConfig:function(e){e&&e.dashManifestModel&&(t=e.dashManifestModel)},updatePeriods:function(e){if(!e)return null;A();var n=t.getMpd(e);r=t.getRegularPeriods(n),a={}},reset:E,resetIndexHandler:function(e){C(e);var t=e.getIndexHandler();t&&t.resetIndex()},setCurrentMediaInfo:function(e,t,n){d[e]=d[e]||{},d[e][t]=d[e][t]||{},d[e][t]=n}},E(),e}x.__dashjs_factory_name="DashAdapter",exports.default=v.default.getSingletonFactory(x),module.exports=exports.default;
},{"../streaming/constants/Constants":"NqGT","./constants/DashConstants":"wyUT","../streaming/vo/RepresentationInfo":"EiHn","../streaming/vo/MediaInfo":"nVXy","../streaming/vo/StreamInfo":"scCK","../streaming/vo/ManifestInfo":"V575","./vo/Event":"dxFK","../core/FactoryMaker":"KAF6","../../externals/cea608-parser":"vfor","../streaming/utils/SupervisorTools":"LTZo"}],"UxDX":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function t(){e(this,t),this.period=null,this.index=-1,this.type=null};exports.default=t,module.exports=exports.default;
},{}],"J4UX":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};e.DEFAULT_ID="defaultId",exports.default=e,module.exports=exports.default;
},{}],"IzIR":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};exports.default=e,module.exports=exports.default;
},{}],"pFVO":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function t(){e(this,t),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};exports.default=t,module.exports=exports.default;
},{}],"w19D":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../streaming/constants/Constants"),a=e(t),r=require("../constants/DashConstants"),n=e(r),i=require("../vo/Representation"),o=e(i),s=require("../vo/AdaptationSet"),d=e(s),u=require("../vo/Period"),l=e(u),f=require("../vo/Mpd"),p=e(f),A=require("../vo/UTCTiming"),y=e(A),E=require("../vo/Event"),_=e(E),T=require("../vo/BaseURL"),h=e(T),m=require("../vo/EventStream"),I=e(m),c=require("../../streaming/utils/ObjectUtils"),v=e(c),P=require("../../streaming/utils/URLUtils"),g=e(P),O=require("../../core/FactoryMaker"),w=e(O),S=require("../../core/Debug"),R=e(S),M=require("../../streaming/vo/DashJSError"),D=e(M),N=require("../../core/errors/Errors"),L=e(N),U=require("../../streaming/thumbnail/ThumbnailTracks");function b(e){e=e||{};var t=void 0,r=void 0,i=this.context,s=(0,g.default)(i).getInstance(),u=e.timelineConverter,f=e.errHandler,A=e.BASE64,E="urn:dvb:dash:profile:dvb-dash:2014",T=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function m(e,t){var r=void 0,i=void 0,o=void 0,s=void 0,d=void 0,u=void 0,l=!1,f=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(s=e.ContentComponent_asArray),d=t!==a.default.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&e.Representation_asArray.length>0){var p=x(e.Representation_asArray[0]);if(p&&p.length>0&&U.THUMBNAILS_SCHEME_ID_URIS.indexOf(p[0].schemeIdUri)>=0)return t===a.default.IMAGE;if(e.Representation_asArray[0].hasOwnProperty(n.default.CODECS)&&(0===(u=e.Representation_asArray[0].codecs).search(a.default.STPP)||0===u.search(a.default.WVTT)))return t===a.default.FRAGMENTED_TEXT}if(s){if(s.length>1)return t===a.default.MUXED;s[0]&&s[0].contentType===t&&(l=!0,f=!0)}if(e.hasOwnProperty(n.default.MIME_TYPE)&&(l=d.test(e.mimeType),f=!0),!f)for(r=0,i=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!f&&r<i;)(o=e.Representation_asArray[r]).hasOwnProperty(n.default.MIME_TYPE)&&(l=d.test(o.mimeType),f=!0),r++;return l}function c(e){return m(e,a.default.AUDIO)}function P(e){return m(e,a.default.VIDEO)}function O(e){return m(e,a.default.FRAGMENTED_TEXT)}function w(e){return m(e,a.default.IMAGE)}function S(e){return"text/vtt"===e||"application/ttml+xml"===e}function M(){return function(e,t){return e.bandwidth-t.bandwidth}}function N(e){return e&&void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e}function b(e,t){return e&&e.Period_asArray&&T(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function C(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===n.default.DYNAMIC),t}function x(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function F(e){if(e&&e.period&&T(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&T(e.index))return N(t.AdaptationSet_asArray[e.index])}}function B(e){var t=e.S_asArray[e.S_asArray.length-1];return!t.hasOwnProperty("r")||t.r>=0}function G(e,t){if(!e)throw new Error("Period cannot be null or undefined");var a=l.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty(n.default.ID)&&e.id.length>0&&"__proto__"!==e.id&&(a=e.id),a}function V(e,t){var r=[],i=void 0;if(!e)return r;for(i=0;i<e.length;i++){var o=new I.default;if(o.timescale=1,o.representation=t,!e[i].hasOwnProperty(a.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");o.schemeIdUri=e[i].schemeIdUri,e[i].hasOwnProperty(n.default.TIMESCALE)&&(o.timescale=e[i].timescale),e[i].hasOwnProperty(n.default.VALUE)&&(o.value=e[i].value),r.push(o)}return r}function Y(e){var t=[],a=e.BaseURL_asArray||[e.baseUri],r=!1;return a.some(function(a){if(a){var i=new h.default,o=a.__text||a;return s.isRelative(o)&&(r=!0,e.baseUri&&(o=s.resolve(o,e.baseUri))),i.url=o,a.hasOwnProperty(n.default.SERVICE_LOCATION)&&a.serviceLocation.length?i.serviceLocation=a.serviceLocation:i.serviceLocation=o,a.hasOwnProperty(n.default.DVB_PRIORITY)&&(i.dvb_priority=a[n.default.DVB_PRIORITY]),a.hasOwnProperty(n.default.DVB_WEIGHT)&&(i.dvb_weight=a[n.default.DVB_WEIGHT]),a.hasOwnProperty(n.default.AVAILABILITY_TIME_OFFSET)&&(i.availabilityTimeOffset=a[n.default.AVAILABILITY_TIME_OFFSET]),a.hasOwnProperty(n.default.AVAILABILITY_TIME_COMPLETE)&&(i.availabilityTimeComplete="false"!==a[n.default.AVAILABILITY_TIME_COMPLETE]),t.push(i),r}}),t}return t={getIsTypeOf:m,getIsTextTrack:S,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(n.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(n.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(n.default.ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(n.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(n.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,a){var r=b(t,a);return r.length>0&&T(e)?r[e]:null},getIndexForAdaptation:function(e,t,a){var r=b(t,a),n=r.length;if(e)for(var o=0;o<n;o++)if((0,v.default)(i).getInstance().areEqual(r[o],e))return o;return-1},getAdaptationForId:function(e,t,a){var r,i=b(t,a),o=void 0;for(o=0,r=i.length;o<r;o++)if(i[o].hasOwnProperty(n.default.ID)&&i[o].id===e)return i[o];return null},getAdaptationsForType:function(e,t,a){var r,n=b(e,t),i=void 0,o=[];for(i=0,r=n.length;i<r;i++)m(n[i],a)&&o.push(N(n[i]));return o},getCodec:function(e,t,a){var r=null;if(e&&e.Representation_asArray&&e.Representation_asArray.length>0){var n=T(t)&&t>=0&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0];n&&(r=n.mimeType+';codecs="'+n.codecs+'"',a&&void 0!==n.width&&(r+=';width="'+n.width+'";height="'+n.height+'"'))}return r},getMimeType:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(n.default.CENC_DEFAULT_KID)?e[n.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e.Label_asArray||!e.Label_asArray.length)return[];for(var t=[],a=0;a<e.Label_asArray.length;a++)t.push({lang:e.Label_asArray[a].lang,text:e.Label_asArray[a].__text||e.Label_asArray[a]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(n.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:C,getIsDVB:function(e){return function(e,t){var a=!1;return e&&e.profiles&&e.profiles.length>0&&(a=-1!==e.profiles.indexOf(t)),a}(e,E)},getDuration:function(e){return e&&e.hasOwnProperty(n.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],a=NaN;return e&&e.hasOwnProperty(n.default.MINIMUM_UPDATE_PERIOD)&&(a=e.minimumUpdatePeriod),isNaN(a)?a:Math.max(a-t,1)},getRepresentationCount:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?N(e).Representation_asArray.map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null}}):null},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&T(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t=[],a=F(e),r=void 0,i=void 0;if(e&&e.period&&T(e.period.index)){var s=Y(e.period.mpd.manifest);s&&(i=s[0])}if(a&&a.Representation_asArray)for(var d=0,l=a.Representation_asArray.length;d<l;++d){var f=a.Representation_asArray[d],p=new o.default;if(p.index=d,p.adaptation=e,f.hasOwnProperty(n.default.ID)&&(p.id=f.id),f.hasOwnProperty(n.default.CODECS)&&(p.codecs=f.codecs),f.hasOwnProperty(n.default.CODEC_PRIVATE_DATA)&&(p.codecPrivateData=f.codecPrivateData),f.hasOwnProperty(n.default.BANDWITH)&&(p.bandwidth=f.bandwidth),f.hasOwnProperty(n.default.WIDTH)&&(p.width=f.width),f.hasOwnProperty(n.default.HEIGHT)&&(p.height=f.height),f.hasOwnProperty(n.default.SCAN_TYPE)&&(p.scanType=f.scanType),f.hasOwnProperty(n.default.MAX_PLAYOUT_RATE)&&(p.maxPlayoutRate=f.maxPlayoutRate),f.hasOwnProperty(n.default.SEGMENT_BASE)?(r=f.SegmentBase,p.segmentInfoType=n.default.SEGMENT_BASE):f.hasOwnProperty(n.default.SEGMENT_LIST)?(r=f.SegmentList).hasOwnProperty(n.default.SEGMENT_TIMELINE)?(p.segmentInfoType=n.default.SEGMENT_TIMELINE,p.useCalculatedLiveEdgeTime=B(r.SegmentTimeline)):(p.segmentInfoType=n.default.SEGMENT_LIST,p.useCalculatedLiveEdgeTime=!0):f.hasOwnProperty(n.default.SEGMENT_TEMPLATE)?((r=f.SegmentTemplate).hasOwnProperty(n.default.SEGMENT_TIMELINE)?(p.segmentInfoType=n.default.SEGMENT_TIMELINE,p.useCalculatedLiveEdgeTime=B(r.SegmentTimeline)):p.segmentInfoType=n.default.SEGMENT_TEMPLATE,r.hasOwnProperty(n.default.INITIALIZATION_MINUS)&&(p.initialization=r.initialization.split("$Bandwidth$").join(f.bandwidth).split("$RepresentationID$").join(f.id))):p.segmentInfoType=n.default.BASE_URL,p.essentialProperties=x(f),r){if(r.hasOwnProperty(n.default.INITIALIZATION)){var A=r.Initialization;A.hasOwnProperty(n.default.SOURCE_URL)?p.initialization=A.sourceURL:A.hasOwnProperty(n.default.RANGE)&&(p.range=A.range)}else f.hasOwnProperty(n.default.MIME_TYPE)&&S(f.mimeType)&&(p.range=0);r.hasOwnProperty(n.default.TIMESCALE)&&(p.timescale=r.timescale),r.hasOwnProperty(n.default.DURATION)&&(p.segmentDuration=r.duration/p.timescale),r.hasOwnProperty(n.default.MEDIA)&&(p.media=r.media),r.hasOwnProperty(n.default.START_NUMBER)&&(p.startNumber=r.startNumber),r.hasOwnProperty(n.default.INDEX_RANGE)&&(p.indexRange=r.indexRange),r.hasOwnProperty(n.default.PRESENTATION_TIME_OFFSET)&&(p.presentationTimeOffset=r.presentationTimeOffset/p.timescale),r.hasOwnProperty(n.default.AVAILABILITY_TIME_OFFSET)?p.availabilityTimeOffset=r.availabilityTimeOffset:i&&void 0!==i.availabilityTimeOffset&&(p.availabilityTimeOffset=i.availabilityTimeOffset),r.hasOwnProperty(n.default.AVAILABILITY_TIME_COMPLETE)?p.availabilityTimeComplete="false"!==r.availabilityTimeComplete:i&&void 0!==i.availabilityTimeComplete&&(p.availabilityTimeComplete=i.availabilityTimeComplete)}p.MSETimeOffset=u.calcMSETimeOffset(p),p.path=[e.period.index,e.index,d],t.push(p)}return t},getAdaptationsForPeriod:function(e){var t=e&&T(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,r=[],i=void 0,o=void 0,s=void 0;if(t&&t.AdaptationSet_asArray)for(s=0;s<t.AdaptationSet_asArray.length;s++)o=t.AdaptationSet_asArray[s],i=new d.default,o.hasOwnProperty(n.default.ID)&&(i.id=o.id),i.index=s,i.period=e,m(o,a.default.MUXED)?i.type=a.default.MUXED:c(o)?i.type=a.default.AUDIO:P(o)?i.type=a.default.VIDEO:O(o)?i.type=a.default.FRAGMENTED_TEXT:w(o)?i.type=a.default.IMAGE:i.type=a.default.TEXT,r.push(i);return r},getRegularPeriods:function(e){var t,a=!!e&&C(e.manifest),i=[],o=null,s=null,d=null,u=null,p=void 0;for(p=0,t=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;p<t;p++)(s=e.manifest.Period_asArray[p]).hasOwnProperty(n.default.START)?(u=new l.default).start=s.start:null!==o&&o.hasOwnProperty(n.default.DURATION)&&null!==d?(u=new l.default).start=parseFloat((d.start+d.duration).toFixed(5)):0!==p||a||((u=new l.default).start=0),null!==d&&isNaN(d.duration)&&(null!==u?d.duration=parseFloat((u.start-d.start).toFixed(5)):r.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==u&&(u.id=G(s,p),u.index=p,u.mpd=e,s.hasOwnProperty(n.default.DURATION)&&(u.duration=s.duration),i.push(u),o=s,d=u),s=null,u=null;return 0===i.length?i:(null!==d&&isNaN(d.duration)&&(d.duration=parseFloat((function(e){var t=C(e.mpd.manifest),a=void 0;return e.mpd.manifest.mediaPresentationDuration?a=e.mpd.manifest.mediaPresentationDuration:e.duration?a=e.duration:t?a=Number.POSITIVE_INFINITY:f.error(new D.default(L.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),a}(d)-d.start).toFixed(5))),i)},getMpd:function(e){var t=new p.default;return e&&(t.manifest=e,e.hasOwnProperty(n.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty(n.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(n.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(n.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(a.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(n.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(n.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,r=t?t.Period_asArray:null,i=r&&e&&T(e.index)?r[e.index].EventStream_asArray:null,o=[],s=void 0,d=void 0;if(i)for(s=0;s<i.length;s++){var u=new I.default;if(u.period=e,u.timescale=1,!i[s].hasOwnProperty(a.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(u.schemeIdUri=i[s].schemeIdUri,i[s].hasOwnProperty(n.default.TIMESCALE)&&(u.timescale=i[s].timescale),i[s].hasOwnProperty(n.default.VALUE)&&(u.value=i[s].value),d=0;i[s].Event_asArray&&d<i[s].Event_asArray.length;d++){var l=new _.default;l.presentationTime=0,l.eventStream=u,i[s].Event_asArray[d].hasOwnProperty(n.default.PRESENTATION_TIME)&&(l.presentationTime=i[s].Event_asArray[d].presentationTime),i[s].Event_asArray[d].hasOwnProperty(n.default.DURATION)&&(l.duration=i[s].Event_asArray[d].duration),i[s].Event_asArray[d].hasOwnProperty(n.default.ID)&&(l.id=i[s].Event_asArray[d].id),i[s].Event_asArray[d].Signal&&i[s].Event_asArray[d].Signal.Binary?l.messageData=A.decodeArray(i[s].Event_asArray[d].Signal.Binary):l.messageData=i[s].Event_asArray[d].messageData||i[s].Event_asArray[d].__text,o.push(l)}}return o},getEventStreamForAdaptationSet:function(e,t){var a=void 0,r=void 0,n=void 0;return e&&e.Period_asArray&&t&&t.period&&T(t.period.index)&&(r=e.Period_asArray[t.period.index])&&r.AdaptationSet_asArray&&T(t.index)&&(n=r.AdaptationSet_asArray[t.index])&&(a=n.InbandEventStream_asArray),V(a,null)},getEventStreamForRepresentation:function(e,t){var a=void 0,r=void 0,n=void 0,i=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&T(t.adaptation.period.index)&&(r=e.Period_asArray[t.adaptation.period.index])&&r.AdaptationSet_asArray&&T(t.adaptation.index)&&(n=r.AdaptationSet_asArray[t.adaptation.index])&&n.Representation_asArray&&T(t.index)&&(i=n.Representation_asArray[t.index])&&(a=i.InbandEventStream_asArray),V(a,t)},getUTCTimingSources:function(e){var t=C(e),r=!!e&&e.hasOwnProperty(n.default.AVAILABILITY_START_TIME),i=e?e.UTCTiming_asArray:null,o=[];return(t||r)&&i&&i.forEach(function(e){var t=new y.default;e.hasOwnProperty(a.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(n.default.VALUE)&&(t.value=e.value.toString(),o.push(t)))}),o},getBaseURLsFromElement:Y,getRepresentationSortFunction:M,getLocation:function(e){if(e&&e.hasOwnProperty(a.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getUseCalculatedLiveEdgeTimeForAdaptation:function(e){var t=F(e).Representation_asArray[0],a=void 0;return t.hasOwnProperty(n.default.SEGMENT_LIST)?!(a=t.SegmentList).hasOwnProperty(n.default.SEGMENT_TIMELINE)||B(a.SegmentTimeline):!(!t.hasOwnProperty(n.default.SEGMENT_TEMPLATE)||!(a=t.SegmentTemplate).hasOwnProperty(n.default.SEGMENT_TIMELINE))&&B(a.SegmentTimeline)}},r=(0,R.default)(i).getInstance().getLogger(t),t}b.__dashjs_factory_name="DashManifestModel",exports.default=w.default.getSingletonFactory(b),module.exports=exports.default;
},{"../../streaming/constants/Constants":"NqGT","../constants/DashConstants":"wyUT","../vo/Representation":"AvRg","../vo/AdaptationSet":"UxDX","../vo/Period":"J4UX","../vo/Mpd":"IzIR","../vo/UTCTiming":"AJX8","../vo/Event":"dxFK","../vo/BaseURL":"XdcR","../vo/EventStream":"pFVO","../../streaming/utils/ObjectUtils":"tQrF","../../streaming/utils/URLUtils":"rvxi","../../core/FactoryMaker":"KAF6","../../core/Debug":"Jjwb","../../streaming/vo/DashJSError":"BHVF","../../core/errors/Errors":"dCLp","../../streaming/thumbnail/ThumbnailTracks":"CSz1"}],"bHDD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(){t(this,n)}return e(n,null,[{key:"round10",value:function(e,t){return r("round",e,t)}}]),n}();function r(e,t,n){return void 0===n||0==+n?Math[e](t):(n=+n,null===(t=+t)||isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))}exports.default=n,module.exports=exports.default;
},{}],"ajqe":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../streaming/vo/metrics/HTTPRequest"),r=require("../core/FactoryMaker"),n=e(r),u=require("../streaming/constants/MetricsConstants"),i=e(u),o=require("./utils/Round10"),a=e(o);function s(e){var r=(e=e||{}).dashManifestModel,n=e.manifestModel;function u(e){var t=n.getValue();return t?t.Period_asArray[e]:-1}function o(e){return l(e,i.default.BUFFER_LEVEL)}function s(e){if(!e)return null;var t=e.HttpList,r=null,n=void 0;if(!t||t.length<=0)return null;for(n=t.length-1;n>=0;){if(t[n].responsecode){r=t[n];break}n--}return r}function f(e){return e&&e.HttpList?e.HttpList:[]}function l(e,t){if(!e)return null;var r=e[t];return!r||r.length<=0?null:r[r.length-1]}function d(e){var t={};if(!e)return t;for(var r=e.trim().split("\r\n"),n=0,u=r.length;n<u;n++){var i=r[n],o=i.indexOf(": ");o>0&&(t[i.substring(0,o)]=i.substring(o+2))}return t}function c(e,t,r){var n=void 0,u=void 0,i=void 0,o=void 0,a=void 0;if(e)for(n=e.AdaptationSet_asArray,o=0;o<n.length;o+=1)for(i=n[o].Representation_asArray,a=0;a<i.length;a+=1)if(t===(u=i[a]).id)return r?a:u;return null}function g(e,t){return r.getIsTypeOf(e,t)}return{getBandwidthForRepresentation:function(e,t){var r;return null===(r=c(u(t),e))?null:r.bandwidth},getIndexForRepresentation:function(e,t){return function(e,t){var r=c(e,t,!0);return null!==r?r:-1}(u(t),e)},getMaxIndexForBufferType:function(e,t){return function(e,t){var r=void 0,n=void 0,u=void 0,i=void 0;if(!e||!t)return-1;for(n=e.AdaptationSet_asArray,i=0;i<n.length;i+=1)if(r=n[i],u=r.Representation_asArray,g(r,t))return u.length;return-1}(u(t),e)},getCurrentRepresentationSwitch:function(e){return l(e,i.default.TRACK_SWITCH)},getLatestBufferLevelVO:o,getCurrentBufferLevel:function(e){var t=o(e);return t?a.default.round10(t.level/1e3,-3):0},getCurrentHttpRequest:s,getHttpRequests:f,getCurrentDroppedFrames:function(e){return l(e,i.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return l(e,i.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return l(e,i.default.DVR_INFO)},getCurrentManifestUpdate:function(e){return l(e,i.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var r={},n=s(e);return n&&(r=d(n._responseHeaders)),void 0===r[t]?null:r[t]},getLatestMPDRequestHeaderValueByID:function(e,r){var n,u={},i=void 0,o=void 0;for(o=(n=f(e)).length-1;o>=0;o--)if((i=n[o]).type===t.HTTPRequest.MPD_TYPE){u=d(i._responseHeaders);break}return void 0===u[r]?null:u[r]},getRequestsQueue:function(e){return e?e.RequestsQueue:null}}}s.__dashjs_factory_name="DashMetrics",exports.default=n.default.getSingletonFactory(s),module.exports=exports.default;
},{"../streaming/vo/metrics/HTTPRequest":"RDXP","../core/FactoryMaker":"KAF6","../streaming/constants/MetricsConstants":"Nprb","./utils/Round10":"bHDD"}],"lm9K":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../core/EventBus"),i=e(t),a=require("../../core/events/Events"),n=e(a),r=require("../../core/FactoryMaker"),o=e(r);function s(){var e=this.context,t=(0,i.default)(e).getInstance(),a=void 0,r=void 0,o=void 0;function s(e){a=e}function l(e,t,i,n){return n?i&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:i?new Date(t.availabilityStartTime.getTime()+1e3*(e-a)):t.availabilityStartTime}function f(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*a)/1e3}function m(e){r||void 0!==e.offset&&(s(e.offset/1e3),r=!0)}function u(){a=0,r=!1,o=NaN}return{initialize:function(){u(),t.on(n.default.TIME_SYNCHRONIZATION_COMPLETED,m,this)},isTimeSyncCompleted:function(){return r},setTimeSyncCompleted:function(e){r=e},getClientTimeOffset:function(){return a},setClientTimeOffset:s,getExpectedLiveEdge:function(){return o},setExpectedLiveEdge:function(e){o=e},calcAvailabilityStartTimeFromPresentationTime:function(e,t,i){return l.call(this,e,t,i)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,i){return l.call(this,e,t,i,!0)},calcPresentationTimeFromWallTime:f,calcPresentationTimeFromMediaTime:function(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var i=e.adaptation.period,a={start:i.start,end:i.start+i.duration};if(!t)return a;if(!r&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var n=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),o=f(new Date,i),s=i.start+i.duration;a.start=Math.max(o-i.mpd.timeShiftBufferDepth,i.start);var l=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<n?n-e.availabilityTimeOffset:n;return a.end=o>=s&&o-l<s?s:o-l,a},calcWallTimeForSegment:function(e,t){var i=void 0,a=void 0,n=void 0;return t&&(i=e.representation.adaptation.period.mpd.suggestedPresentationDelay,a=e.presentationStartTime+i,n=new Date(e.availabilityStartTime.getTime()+1e3*a)),n},calcMSETimeOffset:function(e){var t=e.presentationTimeOffset;return e.adaptation.period.start-t},reset:function(){t.off(n.default.TIME_SYNCHRONIZATION_COMPLETED,m,this),u()}}}s.__dashjs_factory_name="TimelineConverter",exports.default=o.default.getSingletonFactory(s),module.exports=exports.default;
},{"../../core/EventBus":"ASRh","../../core/events/Events":"VXzW","../../core/FactoryMaker":"KAF6"}],"byzx":[function(require,module,exports) {
"use strict";var r={encode:function(r){for(var e=[],n=0;n<r.length;++n){var o=r.charCodeAt(n);o<128?e.push(o):o<2048?(e.push(192|o>>6),e.push(128|63&o)):o<65536?(e.push(224|o>>12),e.push(128|63&o>>6),e.push(128|63&o)):(e.push(240|o>>18),e.push(128|63&o>>12),e.push(128|63&o>>6),e.push(128|63&o))}return e},decode:function(r){for(var e=[],n=0;n<r.length;){var o=r[n++];o<128||(o<224?(o=(31&o)<<6,o|=63&r[n++]):o<240?(o=(15&o)<<12,o|=(63&r[n++])<<6,o|=63&r[n++]):(o=(7&o)<<18,o|=(63&r[n++])<<12,o|=(63&r[n++])<<6,o|=63&r[n++])),e.push(String.fromCharCode(o))}return e.join("")}},e={};!function(n){var o=function(r){for(var e=0,o=[],t=0|r.length/3;0<t--;){var h=(r[e]<<16)+(r[e+1]<<8)+r[e+2];e+=3,o.push(n.charAt(63&h>>18)),o.push(n.charAt(63&h>>12)),o.push(n.charAt(63&h>>6)),o.push(n.charAt(63&h))}if(2==r.length-e){h=(r[e]<<16)+(r[e+1]<<8);o.push(n.charAt(63&h>>18)),o.push(n.charAt(63&h>>12)),o.push(n.charAt(63&h>>6)),o.push("=")}else if(1==r.length-e){h=r[e]<<16;o.push(n.charAt(63&h>>18)),o.push(n.charAt(63&h>>12)),o.push("==")}return o.join("")},t=function(){for(var r=[],e=0;e<n.length;++e)r[n.charCodeAt(e)]=e;return r["=".charCodeAt(0)]=0,r}(),h=function(r){for(var e=0,n=[],o=0|r.length/4;0<o--;){var h=(t[r.charCodeAt(e)]<<18)+(t[r.charCodeAt(e+1)]<<12)+(t[r.charCodeAt(e+2)]<<6)+t[r.charCodeAt(e+3)];n.push(255&h>>16),n.push(255&h>>8),n.push(255&h),e+=4}return n&&("="==r.charAt(e-2)?(n.pop(),n.pop()):"="==r.charAt(e-1)&&n.pop()),n},c={encode:function(r){for(var e=[],n=0;n<r.length;++n)e.push(r.charCodeAt(n));return e},decode:function(r){for(var e=0;e<s.length;++e)a[e]=String.fromCharCode(a[e]);return a.join("")}};e.decodeArray=function(r){var e=h(r);return new Uint8Array(e)},e.encodeASCII=function(r){var e=c.encode(r);return o(e)},e.decodeASCII=function(r){var e=h(r);return c.decode(e)},e.encode=function(e){var n=r.encode(e);return o(n)},e.decode=function(e){var n=h(e);return r.decode(n)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),"undefined"!=typeof exports&&(exports.decode=e.decode,exports.decodeArray=e.decodeArray,exports.encode=e.encode,exports.encodeASCII=e.encodeASCII);
},{}],"DTgk":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./constants/Constants"),n=e(t),r=require("./constants/MetricsConstants"),i=e(r),o=require("./controllers/PlaybackController"),a=e(o),u=require("./controllers/StreamController"),l=e(u),s=require("./controllers/MediaController"),f=e(s),c=require("./controllers/BaseURLController"),d=e(c),g=require("./ManifestLoader"),m=e(g),T=require("./utils/ErrorHandler"),v=e(T),h=require("./utils/Capabilities"),M=e(h),y=require("./text/TextTracks"),p=e(y),S=require("./utils/RequestModifier"),I=e(S),R=require("./text/TextController"),C=e(R),A=require("./models/URIFragmentModel"),L=e(A),w=require("./models/ManifestModel"),B=e(w),F=require("./models/MediaPlayerModel"),b=e(F),D=require("./models/MetricsModel"),P=e(D),E=require("./controllers/AbrController"),x=e(E),k=require("./models/VideoModel"),q=e(k),U=require("./utils/DOMStorage"),_=e(U),N=require("./../core/Debug"),O=e(N),H=require("./../core/errors/Errors"),V=e(H),z=require("./../core/EventBus"),G=e(z),Q=require("./../core/events/Events"),W=e(Q),Y=require("./MediaPlayerEvents"),K=e(Y),j=require("../core/FactoryMaker"),X=e(j),J=require("./../core/Version"),Z=require("../dash/DashAdapter"),$=e(Z),ee=require("../dash/models/DashManifestModel"),te=e(ee),ne=require("../dash/DashMetrics"),re=e(ne),ie=require("../dash/utils/TimelineConverter"),oe=e(ie),ae=require("./vo/metrics/HTTPRequest"),ue=require("../../externals/base64"),le=e(ue),se=require("codem-isoboxer"),fe=e(se),ce=require("./vo/DashJSError"),de=e(ce),ge=require("./utils/SupervisorTools");function me(){var e="You must first call initialize() and set a source before calling this method",t="You must first call initialize() and set a valid source and view before calling this method",r="You must first call attachView() to set the video element before calling this method",o="You must first call attachSource() with a valid source before calling this method",u="MediaPlayer not initialized!",s="Playback minimum drift has an invalid value! Use a number from 0 to 0.5",c="Playback maximum drift has an invalid value! Use a number greater or equal to 0",g=this.context,T=(0,G.default)(g).getInstance(),h=(0,O.default)(g).getInstance(),y=void 0,S=void 0,R=void 0,A=void 0,w=void 0,F=void 0,D=void 0,E=void 0,k=void 0,U=void 0,N=void 0,H=void 0,z=void 0,Q=void 0,Y=void 0,j=void 0,Z=void 0,ee=void 0,ne=void 0,ie=void 0,ue=void 0,se=void 0,ce=void 0,me=void 0,Te=void 0,ve=void 0,he=void 0,Me=void 0;function ye(){return!!R&&!!Te.getElement()}function pe(){return(0,J.getVersionString)()}function Se(){if(!D)throw t;return ue.isPaused()}function Ie(e){var t=Ue();if(!t)return 0;var n=ue.getLiveDelay(),r=t.range.start+e;return r>t.range.end-n&&(r=t.range.end-n),r}function Re(e){if(!D)throw t;var n=Fe().currentTime;if(void 0!==e)n=ie.getTimeRelativeToStreamId(n,e);else if(ue.getIsDynamic()){var r=Ue();n=null===r?0:Ce()-(r.range.end-r.time)}return n}function Ce(){if(!D)throw t;var e=Fe().duration;if(ue.getIsDynamic()){var n,r=Ue();if(!r)return 0;e=(n=r.range.end-r.range.start)<r.manifestInfo.DVRWindowSize?n:r.manifestInfo.DVRWindowSize}return e}function Ae(e){(0,ge.checkParameterType)(e,"boolean"),E=e}function Le(){Z.restoreDefaultUTCTimingSources()}function we(){return se}function Be(e){return j.getReadOnlyMetricsFor(e)}function Fe(){if(!Te.getElement())throw r;return Te.getElement()}function be(e){if(!w)throw u;Te.setElement(e),e&&(qe(),function(){if(z)return;var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(g).create();z=t.createMetricsReporting({debug:h,eventBus:T,mediaElement:Fe(),dashManifestModel:ce,metricsModel:j,events:W.default,constants:n.default,metricsConstants:i.default})}}(),function(){if(Q)return;var e=dashjs.MssHandler;"function"==typeof e&&(V.default.extend(e.errors),Q=e(g).create({eventBus:T,mediaPlayerModel:Z,metricsModel:j,manifestModel:me,playbackController:ue,protectionController:H,baseURLController:(0,d.default)(g).getInstance(),errHandler:ee,events:W.default,constants:n.default,debug:h,initSegmentType:ae.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:le.default,ISOBoxer:fe.default}))}(),ie&&ie.switchToVideoElement()),D&&xe(),Ne()}function De(t){if(!F)throw e;var n=ie.getActiveStreamInfo();return N.getTracksFor(t,n)}function Pe(e){if(!w)throw u;"string"==typeof e&&he.initialize(e),R=e,(F||D)&&xe(),ye()&&Ne()}function Ee(){if(!F)throw e;var t=ie.getActiveStreamInfo();return t?ie.getStreamById(t.id):null}function xe(){D=!1,F=!1,Y.reset(),ie.reset(),ue.reset(),k.reset(),N.reset(),ve.reset(),H&&(Z.getKeepProtectionMediaKeys()?H.stop():(H.reset(),H=null,qe()))}function ke(){return(0,m.default)(g).create({errHandler:ee,metricsModel:j,mediaPlayerModel:Z,requestModifier:(0,I.default)(g).getInstance(),mssHandler:Q})}function qe(){if(H)return H;var e=dashjs.Protection;if("function"==typeof e){var t=e(g).create();return W.default.extend(e.events),K.default.extend(e.events,{publicOnly:!0}),V.default.extend(e.errors),ne||(ne=(0,M.default)(g).getInstance()),H=t.createProtectionSystem({debug:h,errHandler:ee,videoModel:Te,capabilities:ne,eventBus:T,events:W.default,BASE64:le.default,constants:n.default})}return null}function Ue(){var e=j.getReadOnlyMetricsFor(n.default.VIDEO)||j.getReadOnlyMetricsFor(n.default.AUDIO);return se.getCurrentDVRInfo(e)}function _e(e){var t=Ue();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function Ne(){var e;!F&&R&&(F=!0,S.info("Streaming Initialized"),e=ke(),ie||(ie=(0,l.default)(g).getInstance()),N.setConfig({domStorage:Me}),ie.setConfig({capabilities:ne,manifestLoader:e,manifestModel:me,dashManifestModel:ce,mediaPlayerModel:Z,protectionController:H,adapter:Y,metricsModel:j,dashMetrics:se,errHandler:ee,timelineConverter:U,videoModel:Te,playbackController:ue,domStorage:Me,abrController:k,mediaController:N,textController:ve}),ue.setConfig({streamController:ie,metricsModel:j,dashMetrics:se,manifestModel:me,mediaPlayerModel:Z,dashManifestModel:ce,adapter:Y,videoModel:Te,timelineConverter:U,uriFragmentModel:he}),k.setConfig({streamController:ie,domStorage:Me,mediaPlayerModel:Z,metricsModel:j,dashMetrics:se,manifestModel:me,videoModel:Te,adapter:Y}),k.createAbrRulesCollection(),ve.setConfig({errHandler:ee,manifestModel:me,dashManifestModel:ce,mediaController:N,streamController:ie,videoModel:Te}),ie.initialize(E,A),"string"==typeof R?ie.load(R):ie.loadWithManifest(R)),!D&&ye()&&(D=!0,S.info("Playback Initialized"))}return y={initialize:function(e,t,n){if(ne||(ne=(0,M.default)(g).getInstance()),ee=(0,v.default)(g).getInstance(),!ne.supportsMediaSource())return ee.capabilityError("mediasource"),void ee.error(new de.default(V.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,V.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE));w||(w=!0,U=(0,oe.default)(g).getInstance(),k||(k=(0,x.default)(g).getInstance()),ue||(ue=(0,a.default)(g).getInstance()),N||(N=(0,f.default)(g).getInstance()),Y=(0,$.default)(g).getInstance(),ce=(0,te.default)(g).getInstance({timelineConverter:U,errHandler:ee,BASE64:le.default}),me=(0,B.default)(g).getInstance(),se=(0,re.default)(g).getInstance({manifestModel:me,dashManifestModel:ce}),j=(0,P.default)(g).getInstance(),ve=(0,C.default)(g).getInstance(),Me=(0,_.default)(g).getInstance({mediaPlayerModel:Z}),Y.setConfig({dashManifestModel:ce}),Le(),Ae(void 0===n||n),e&&be(e),t&&Pe(t),S.info("[dash.js "+pe()+"] MediaPlayer has been initialized"))},setConfig:function(e){e&&(e.capabilities&&(ne=e.capabilities),e.streamController&&(ie=e.streamController),e.playbackController&&(ue=e.playbackController),e.mediaPlayerModel&&(Z=e.mediaPlayerModel),e.abrController&&(k=e.abrController),e.mediaController&&(N=e.mediaController))},on:function(e,t,n){T.on(e,t,n)},off:function(e,t,n){T.off(e,t,n)},extend:function(e,t,n){X.default.extend(e,t,n,g)},attachView:be,attachSource:Pe,isReady:ye,preload:function(){if(Te.getElement()||F)return!1;if(!R)throw o;Ne()},play:function(){if(!D)throw t;(!E||Se()&&D)&&ue.play()},isPaused:Se,pause:function(){if(!D)throw t;ue.pause()},isSeeking:function(){if(!D)throw t;return ue.isSeeking()},isDynamic:function(){if(!D)throw t;return ue.getIsDynamic()},seek:function(e){if(!D)throw t;if((0,ge.checkParameterType)(e,"number"),isNaN(e))throw n.default.BAD_ARGUMENT_ERROR;var r=ue.getIsDynamic()?Ie(e):e;ue.seek(r)},setPlaybackRate:function(e){Fe().playbackRate=e},getPlaybackRate:function(){return Fe().playbackRate},setMute:function(e){(0,ge.checkParameterType)(e,"boolean"),Fe().muted=e},isMuted:function(){return Fe().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw n.default.BAD_ARGUMENT_ERROR;Fe().volume=e},getVolume:function(){return Fe().volume},time:Re,duration:Ce,timeAsUTC:function(){if(!D)throw t;return Re()<0?NaN:_e(Re())},durationAsUTC:function(){if(!D)throw t;return _e(Ce())},getActiveStream:Ee,getDVRWindowSize:function(){var e=Ue();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:Ie,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},formatUTC:function(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=new Date(1e3*e),o=i.toLocaleDateString(t),a=i.toLocaleTimeString(t,{hour12:n});return r?a+" "+o:a},getVersion:pe,getDebug:function(){return h},getBufferLength:function(e){var t,r=[n.default.VIDEO,n.default.AUDIO,n.default.FRAGMENTED_TEXT];return e?-1!==r.indexOf(e)?(t=we().getCurrentBufferLevel(Be(e)))||NaN:(S.warn("getBufferLength requested for invalid type"),NaN):(t=r.map(function(e){return De(e).length>0?we().getCurrentBufferLevel(Be(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)}))===Number.MAX_VALUE?NaN:t},getTTMLRenderingDiv:function(){return Te?Te.getTTMLRenderingDiv():null},getVideoElement:Fe,getSource:function(){if(!R)throw o;return R},setLiveDelayFragmentCount:function(e){Z.setLiveDelayFragmentCount(e)},setLiveDelay:function(e){Z.setLiveDelay(e)},getLiveDelay:function(){return Z.getLiveDelay()},getCurrentLiveLatency:function(){if(!w)throw u;return D?ue.getCurrentLiveLatency():NaN},useSuggestedPresentationDelay:function(e){Z.setUseSuggestedPresentationDelay(e)},enableLastBitrateCaching:function(e,t){Z.setLastBitrateCachingInfo(e,t)},enableLastMediaSettingsCaching:function(e,t){Z.setLastMediaSettingsCachingInfo(e,t)},setMaxAllowedBitrateFor:function(e,t){k.setMaxAllowedBitrateFor(e,t)},getMaxAllowedBitrateFor:function(e){return k.getMaxAllowedBitrateFor(e)},getTopBitrateInfoFor:function(t){if(!F)throw e;return k.getTopBitrateInfoFor(t)},setMinAllowedBitrateFor:function(e,t){k.setMinAllowedBitrateFor(e,t)},getMinAllowedBitrateFor:function(e){return k.getMinAllowedBitrateFor(e)},setMaxAllowedRepresentationRatioFor:function(e,t){k.setMaxAllowedRepresentationRatioFor(e,t)},getMaxAllowedRepresentationRatioFor:function(e){return k.getMaxAllowedRepresentationRatioFor(e)},setAutoPlay:Ae,getAutoPlay:function(){return E},setScheduleWhilePaused:function(e){Z.setScheduleWhilePaused(e)},getScheduleWhilePaused:function(){return Z.getScheduleWhilePaused()},getDashMetrics:we,getMetricsFor:Be,getQualityFor:function(t){if(!F)throw e;if(t===n.default.IMAGE){var r=Ee();if(!r)return-1;var i=r.getThumbnailController();return i?i.getCurrentTrackIndex():-1}return k.getQualityFor(t,ie.getActiveStreamInfo())},setQualityFor:function(t,r){if(!F)throw e;if(t===n.default.IMAGE){var i=Ee();if(!i)return;var o=i.getThumbnailController();o&&o.setTrackByIndex(r)}k.setPlaybackQuality(t,ie.getActiveStreamInfo(),r)},updatePortalSize:function(){k.setElementSize(),k.setWindowResizeEventCalled(!0)},getLimitBitrateByPortal:function(){return k.getLimitBitrateByPortal()},setLimitBitrateByPortal:function(e){k.setLimitBitrateByPortal(e)},getUsePixelRatioInLimitBitrateByPortal:function(){return k.getUsePixelRatioInLimitBitrateByPortal()},setUsePixelRatioInLimitBitrateByPortal:function(e){k.setUsePixelRatioInLimitBitrateByPortal(e)},setTextDefaultLanguage:function(e){void 0===ve&&(ve=(0,C.default)(g).getInstance()),ve.setTextDefaultLanguage(e)},getTextDefaultLanguage:function(){return void 0===ve&&(ve=(0,C.default)(g).getInstance()),ve.getTextDefaultLanguage()},setTextDefaultEnabled:function(e){void 0===ve&&(ve=(0,C.default)(g).getInstance()),ve.setTextDefaultEnabled(e)},getTextDefaultEnabled:function(){return void 0===ve&&(ve=(0,C.default)(g).getInstance()),ve.getTextDefaultEnabled()},enableText:function(e){void 0===ve&&(ve=(0,C.default)(g).getInstance()),ve.enableText(e)},enableForcedTextStreaming:function(e){void 0===ve&&(ve=(0,C.default)(g).getInstance()),ve.enableForcedTextStreaming(e)},isTextEnabled:function(){return void 0===ve&&(ve=(0,C.default)(g).getInstance()),ve.isTextEnabled()},setTextTrack:function(e){if(!D)throw t;void 0===ve&&(ve=(0,C.default)(g).getInstance()),ve.setTextTrack(e)},getBitrateInfoListFor:function(t){if(!F)throw e;var n=Ee();return n?n.getBitrateListFor(t):[]},setInitialBitrateFor:function(e,t){k.setInitialBitrateFor(e,t)},getInitialBitrateFor:function(t){if(!F)throw e;return k.getInitialBitrateFor(t)},setInitialRepresentationRatioFor:function(e,t){k.setInitialRepresentationRatioFor(e,t)},getInitialRepresentationRatioFor:function(e){return k.getInitialRepresentationRatioFor(e)},getStreamsFromManifest:function(t){if(!F)throw e;return Y.getStreamsInfo(t)},getTracksFor:De,getTracksForTypeFromManifest:function(t,n,r){if(!F)throw e;return(r=r||Y.getStreamsInfo(n,1)[0])?Y.getAllMediaInfoForType(r,t,n):[]},getCurrentTrackFor:function(t){if(!F)throw e;var n=ie.getActiveStreamInfo();return N.getCurrentTrackFor(t,n)},setInitialMediaSettingsFor:function(e,t){if(!w)throw u;N.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!w)throw u;return N.getInitialSettings(e)},setCurrentTrack:function(t){if(!F)throw e;N.setTrack(t)},getTrackSwitchModeFor:function(e){if(!w)throw u;return N.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!w)throw u;N.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){if(!w)throw u;N.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){if(!w)throw u;return N.getSelectionModeForInitialTrack()},setFastSwitchEnabled:function(e){Z.setFastSwitchEnabled(e)},getFastSwitchEnabled:function(){return Z.getFastSwitchEnabled()},setMovingAverageMethod:function(e){Z.setMovingAverageMethod(e)},getMovingAverageMethod:function(){return Z.getMovingAverageMethod()},getAutoSwitchQualityFor:function(e){return k.getAutoSwitchBitrateFor(e)},setAutoSwitchQualityFor:function(e,t){k.setAutoSwitchBitrateFor(e,t)},setABRStrategy:function(e){Z.setABRStrategy(e)},getABRStrategy:function(){return Z.getABRStrategy()},useDefaultABRRules:function(e){Z.setUseDefaultABRRules(e)},addABRCustomRule:function(e,t,n){Z.addABRCustomRule(e,t,n)},removeABRCustomRule:function(e){Z.removeABRCustomRule(e)},removeAllABRCustomRule:function(){Z.removeABRCustomRule()},setBandwidthSafetyFactor:function(e){Z.setBandwidthSafetyFactor(e)},getBandwidthSafetyFactor:function(){return Z.getBandwidthSafetyFactor()},getAverageThroughput:function(e){var t=k.getThroughputHistory();return t?t.getAverageThroughput(e):0},setAbandonLoadTimeout:function(e){Z.setAbandonLoadTimeout(e)},retrieveManifest:function(e,t){var n=ke(),r=this;T.on(W.default.INTERNAL_MANIFEST_LOADED,function e(i){i.error?t(null,i.error):t(i.manifest),T.off(W.default.INTERNAL_MANIFEST_LOADED,e,r),n.reset()},r),he.initialize(e),n.load(e)},addUTCTimingSource:function(e,t){Z.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){Z.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){Z.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Le,setBufferToKeep:function(e){Z.setBufferToKeep(e)},setBufferAheadToKeep:function(e){Z.setBufferAheadToKeep(e)},setBufferPruningInterval:function(e){Z.setBufferPruningInterval(e)},setStableBufferTime:function(e){Z.setStableBufferTime(e)},getStableBufferTime:function(){return Z.getStableBufferTime()},setBufferTimeAtTopQuality:function(e){Z.setBufferTimeAtTopQuality(e)},getBufferTimeAtTopQuality:function(){return Z.getBufferTimeAtTopQuality()},setBufferTimeAtTopQualityLongForm:function(e){Z.setBufferTimeAtTopQualityLongForm(e)},getBufferTimeAtTopQualityLongForm:function(){return Z.getBufferTimeAtTopQualityLongForm()},setFragmentLoaderRetryAttempts:function(e){Z.setRetryAttemptsForType(ae.HTTPRequest.MEDIA_SEGMENT_TYPE,e)},setFragmentLoaderRetryInterval:function(e){Z.setRetryIntervalForType(ae.HTTPRequest.MEDIA_SEGMENT_TYPE,e)},setManifestLoaderRetryAttempts:function(e){Z.setRetryAttemptsForType(ae.HTTPRequest.MPD_TYPE,e)},setManifestLoaderRetryInterval:function(e){Z.setRetryIntervalForType(ae.HTTPRequest.MPD_TYPE,e)},setXHRWithCredentialsForType:function(e,t){Z.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return Z.getXHRWithCredentialsForType(e)},setJumpGaps:function(e){Z.setJumpGaps(e)},getJumpGaps:function(){return Z.getJumpGaps()},setSmallGapLimit:function(e){Z.setSmallGapLimit(e)},getSmallGapLimit:function(){return Z.getSmallGapLimit()},setLowLatencyEnabled:function(e){Z.setLowLatencyEnabled(e)},getLowLatencyEnabled:function(){return Z.getLowLatencyEnabled()},setCatchUpPlaybackRate:function(e){Z.setCatchUpPlaybackRate(e)},getCatchUpPlaybackRate:function(){return Z.getCatchUpPlaybackRate()},setLowLatencyMinDrift:function(e){if("number"!=typeof e||isNaN(e)||e<0||e>.5)throw s;Z.setLowLatencyMinDrift(e)},getLowLatencyMinDrift:function(){return Z.getLowLatencyMinDrift()},setLowLatencyMaxDriftBeforeSeeking:function(e){if("number"!=typeof e||isNaN(e)||e<0)throw c;Z.setLowLatencyMaxDriftBeforeSeeking(e)},getLowLatencyMaxDriftBeforeSeeking:function(){return Z.getLowLatencyMaxDriftBeforeSeeking()},setManifestUpdateRetryInterval:function(e){Z.setManifestUpdateRetryInterval(e)},getManifestUpdateRetryInterval:function(){return Z.getManifestUpdateRetryInterval()},setLongFormContentDurationThreshold:function(e){Z.setLongFormContentDurationThreshold(e)},setSegmentOverlapToleranceTime:function(e){Z.setSegmentOverlapToleranceTime(e)},setCacheLoadThresholdForType:function(e,t){Z.setCacheLoadThresholdForType(e,t)},getProtectionController:function(){return qe()},attachProtectionController:function(e){H=e},setProtectionData:function(e){A=e,ie&&ie.setProtectionData(A)},enableManifestDateHeaderTimeSource:function(e){Z.setUseManifestDateHeaderTimeSource(e)},displayCaptionsOnTop:function(e){var t=(0,p.default)(g).getInstance();t.setConfig({videoModel:Te}),t.initialize(),t.displayCConTop(e)},attachVideoContainer:function(e){S.warn("attachVideoContainer method has been deprecated and will be removed in dash.js v3.0.0")},attachTTMLRenderingDiv:function(e){if(!Te.getElement())throw r;Te.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=NaN;return ve&&(e=ve.getCurrentTrackIdx()),e},getUseDeadTimeLatencyForAbr:function(){return k.getUseDeadTimeLatency()},setUseDeadTimeLatencyForAbr:function(e){k.setUseDeadTimeLatency(e)},getThumbnail:function(e,t){if(e<0)return null;var n=ue.getIsDynamic()?Ie(e):e,r=ie.getStreamForTime(n);if(null===r)return null;var i=r.getThumbnailController();if(!i)return null;var o=ie.getTimeRelativeToStreamId(n,r.getId());return i.get(o,t)},keepProtectionMediaKeys:function(e){Z.setKeepProtectionMediaKeys(e)},reset:function(){Pe(null),be(null),A=null,H&&(H.reset(),H=null),z&&(z.reset(),z=null)}},S=h.getLogger(y),w=!1,D=!1,F=!1,E=!0,H=null,A=null,Y=null,W.default.extend(K.default),Z=(0,b.default)(g).getInstance(),Te=(0,q.default)(g).getInstance(),he=(0,L.default)(g).getInstance(),y}me.__dashjs_factory_name="MediaPlayer";var Te=X.default.getClassFactory(me);Te.events=K.default,Te.errors=V.default,X.default.updateClassFactory(me.__dashjs_factory_name,Te),exports.default=Te,module.exports=exports.default;
},{"./constants/Constants":"NqGT","./constants/MetricsConstants":"Nprb","./controllers/PlaybackController":"URKx","./controllers/StreamController":"kiPm","./controllers/MediaController":"skwV","./controllers/BaseURLController":"x96n","./ManifestLoader":"s9p5","./utils/ErrorHandler":"JveW","./utils/Capabilities":"P2iS","./text/TextTracks":"fKFN","./utils/RequestModifier":"iL20","./text/TextController":"BJUk","./models/URIFragmentModel":"Xbr3","./models/ManifestModel":"ykjY","./models/MediaPlayerModel":"n5tK","./models/MetricsModel":"WJNi","./controllers/AbrController":"MLDH","./models/VideoModel":"OplP","./utils/DOMStorage":"WUkp","./../core/Debug":"Jjwb","./../core/errors/Errors":"dCLp","./../core/EventBus":"ASRh","./../core/events/Events":"VXzW","./MediaPlayerEvents":"t2DM","../core/FactoryMaker":"KAF6","./../core/Version":"uUTl","../dash/DashAdapter":"BYAf","../dash/models/DashManifestModel":"w19D","../dash/DashMetrics":"ajqe","../dash/utils/TimelineConverter":"lm9K","./vo/metrics/HTTPRequest":"RDXP","../../externals/base64":"byzx","codem-isoboxer":"upQ5","./vo/DashJSError":"BHVF","./utils/SupervisorTools":"LTZo"}],"IIQf":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=require("./src/streaming/MediaPlayer"),t=r(a),u=require("./src/core/FactoryMaker"),o=r(u),d=require("./src/core/Debug"),s=r(d),i=require("./src/core/Version"),l="undefined"!=typeof window&&window||e,n=l.dashjs;n||(n=l.dashjs={}),n.MediaPlayer=t.default,n.FactoryMaker=o.default,n.Debug=s.default,n.Version=(0,i.getVersionString)(),exports.default=n,exports.MediaPlayer=t.default,exports.FactoryMaker=o.default,exports.Debug=s.default;
},{"./src/streaming/MediaPlayer":"DTgk","./src/core/FactoryMaker":"KAF6","./src/core/Debug":"Jjwb","./src/core/Version":"uUTl"}],"zCtC":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};e.SSL_CONNECTION_FAILED_PREFIX="SSL",e.DNS_RESOLUTION_FAILED="C00",e.HOST_UNREACHABLE="C01",e.CONNECTION_REFUSED="C02",e.CONNECTION_ERROR="C03",e.CORRUPT_MEDIA_ISOBMFF="M00",e.CORRUPT_MEDIA_OTHER="M01",e.BASE_URL_CHANGED="F00",e.BECAME_REPORTER="S00",exports.default=e,module.exports=exports.default;
},{}],"nCWg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e,t,r){for(var o=!0;o;){var n=e,i=t,u=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if("value"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(u)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,r=u,o=!0,a=l=void 0}};function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var n=require("../../core/events/EventsBase"),i=t(n),u=function(t){function n(){r(this,n),e(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return o(n,i["default"]),n}(),a=new u;exports.default=a,module.exports=exports.default;
},{"../../core/events/EventsBase":"Y3I9"}],"epcA":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../vo/DVBErrors"),o=e(r),t=require("../MetricsReportingEvents"),n=e(t);function E(e){var r=void 0,t=void 0,E=(e=e||{}).eventBus,s=e.metricsModel,a=e.metricsConstants,i=e.events;function c(e){var r=new o.default;if(t){for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.mpdurl||(r.mpdurl=t.originalUrl||t.url),r.terror||(r.terror=new Date),s.addDVBErrors(r)}}function f(e){e.error||(t=e.manifest)}function u(e){c({errorcode:o.default.BASE_URL_CHANGED,servicelocation:e.entry})}function _(){c({errorcode:o.default.BECAME_REPORTER})}function d(e){switch(e.metric){case a.HTTP_REQUEST:(0===(r=e.value).responsecode||r.responsecode>=400||r.responsecode<100||r.responsecode>=600)&&c({errorcode:r.responsecode||o.default.CONNECTION_ERROR,url:r.url,terror:r.tresponse,servicelocation:r._serviceLocation})}var r}function R(e){var r=void 0;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:r=o.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:r=o.default.CORRUPT_MEDIA_OTHER;break;default:return}c({errorcode:r})}function l(){E.on(i.MANIFEST_UPDATED,f,r),E.on(i.SERVICE_LOCATION_BLACKLIST_CHANGED,u,r),E.on(i.METRIC_ADDED,d,r),E.on(i.METRIC_UPDATED,d,r),E.on(i.PLAYBACK_ERROR,R,r),E.on(n.default.BECAME_REPORTING_PLAYER,_,r)}return r={initialise:l,reset:function(){E.off(i.MANIFEST_UPDATED,f,r),E.off(i.SERVICE_LOCATION_BLACKLIST_CHANGED,u,r),E.off(i.METRIC_ADDED,d,r),E.off(i.METRIC_UPDATED,d,r),E.off(i.PLAYBACK_ERROR,R,r),E.off(n.default.BECAME_REPORTING_PLAYER,_,r)}},l(),r}E.__dashjs_factory_name="DVBErrorsTranslator",exports.default=dashjs.FactoryMaker.getSingletonFactory(E),module.exports=exports.default;
},{"../vo/DVBErrors":"zCtC","../MetricsReportingEvents":"nCWg"}],"vUBf":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../utils/CustomTimeRanges"),r=e(t);function a(e){e=e||{};var t,a=!1,n=this.context,i=void 0,o=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,r=t+e.duration;i.add(t,r)}),a=!!e[0]._useWallClockTime)},reset:function(){i.clear()},isEnabled:function(){var e,t=i.length;if(!t)return!0;e=a?(new Date).getTime()/1e3:o.currentTime;for(var r=0;r<t;r+=1){var n=i.start(r),u=i.end(r);if(n<=e&&e<u)return!0}return!1}},i=(0,r.default)(n).create(),t}a.__dashjs_factory_name="RangeController",exports.default=dashjs.FactoryMaker.getClassFactory(a),module.exports=exports.default;
},{"../../utils/CustomTimeRanges":"JUYk"}],"Gb23":[function(require,module,exports) {
"use strict";function e(){return{serialise:function e(t){var o=[],r=[],n=void 0,i=void 0;for(n in t)if(t.hasOwnProperty(n)&&0!==n.indexOf("_")){if(null==(i=t[n])&&(i=""),Array.isArray(i)){if(!i.length)continue;r=[],i.forEach(function(t){var o="Object"!==Object.prototype.toString.call(t).slice(8,-1);r.push(o?t:e(t))}),i=r.map(encodeURIComponent).join(",")}else"string"==typeof i?i=encodeURIComponent(i):i instanceof Date?i=i.toISOString():"number"==typeof i&&(i=Math.round(i));o.push(n+"="+i)}return o.join("&")}}}Object.defineProperty(exports,"__esModule",{value:!0}),e.__dashjs_factory_name="MetricSerialiser",exports.default=dashjs.FactoryMaker.getSingletonFactory(e),module.exports=exports.default;
},{}],"Oggr":[function(require,module,exports) {
"use strict";function t(){var t,e=window.crypto||window.msCrypto,o=Uint32Array,r=Math.pow(2,8*o.BYTES_PER_ELEMENT)-1,n=10,a=void 0,d=void 0;function s(){e&&(a||(a=new o(n)),e.getRandomValues(a),d=0)}return t={random:function(t,o){var n=void 0;return t||(t=0),o||(o=1),e?(d===a.length&&s(),n=a[d]/r,d+=1):n=Math.random(),n*(o-t)+t}},s(),t}Object.defineProperty(exports,"__esModule",{value:!0}),t.__dashjs_factory_name="RNG",exports.default=dashjs.FactoryMaker.getSingletonFactory(t),module.exports=exports.default;
},{}],"konn":[function(require,module,exports) {
"use strict";function r(r){return r&&r.__esModule?r:{default:r}}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../utils/MetricSerialiser"),t=r(e),n=require("../../utils/RNG"),i=r(n);function o(r){r=r||{};var e,n=this.context,o=void 0,a=void 0,s=void 0,u=void 0,d=void 0,c=void 0,l=!0,f=!0,v=[],p=r.metricsConstants;function b(){s=!1,u=!1,d=null,c=null}return e={report:function(r,e){Array.isArray(e)||(e=[e]),u&&c.isEnabled()&&e.forEach(function(e){var t=o.serialise(e);l&&r!==p.DVB_ERRORS&&(t="metricname="+r+"&"+t),function(r,e,t){var n=new XMLHttpRequest,i=function(){var r=v.indexOf(n);-1!==r&&(v.splice(r,1),n.status>=200&&n.status<300?e&&e():t&&t())};v.push(n);try{n.open("GET",r),n.onloadend=i,n.onerror=i,n.send()}catch(o){n.onerror()}}(t=d+"?"+t,null,function(){u=!1})})},initialize:function(r,e){var t=void 0;if(c=e,!(d=r["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");s||((t=r["dvb:probability"]||r["dvb:priority"]||0)&&(1e3===t||t/1e3>=a.random())&&(u=!0),s=!0)},reset:function(){f||(v.forEach(function(r){return r.abort()}),v=[]),b()}},o=(0,t.default)(n).getInstance(),a=(0,i.default)(n).getInstance(),b(),e}o.__dashjs_factory_name="DVBReporting",exports.default=dashjs.FactoryMaker.getClassFactory(o),module.exports=exports.default;
},{"../../utils/MetricSerialiser":"Gb23","../../utils/RNG":"Oggr"}],"szI0":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./reporters/DVBReporting"),r=e(t);function n(e){e=e||{};var t={"urn:dvb:dash:reporting:2014":r.default},n=this.context,o=e.debug,i=e.metricsConstants;return{create:function(e,r){var s=void 0;try{(s=t[e.schemeIdUri](n).create({metricsConstants:i})).initialize(e,r)}catch(a){s=null,o.error("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+a.message+")")}return s},register:function(e,r){t[e]=r},unregister:function(e){delete t[e]}}}n.__dashjs_factory_name="ReportingFactory",exports.default=dashjs.FactoryMaker.getSingletonFactory(n),module.exports=exports.default;
},{"./reporters/DVBReporting":"konn"}],"DneM":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../reporting/ReportingFactory"),r=e(t);function n(e){var t=[],n=(0,r.default)(this.context).getInstance(e);return{initialize:function(e,r){e.some(function(e){var o=n.create(e,r);if(o)return t.push(o),!0})},reset:function(){t.forEach(function(e){return e.reset()}),t=[]},report:function(e,r){t.forEach(function(t){return t.report(e,r)})}}}n.__dashjs_factory_name="ReportingController",exports.default=dashjs.FactoryMaker.getClassFactory(n),module.exports=exports.default;
},{"../reporting/ReportingFactory":"szI0"}],"tDhS":[function(require,module,exports) {
"use strict";function e(){return{reconstructFullMetricName:function(e,r,t){var n=e;return r&&(n+="("+r,t&&t.length&&(n+=","+t),n+=")"),n},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(exports,"__esModule",{value:!0}),e.__dashjs_factory_name="HandlerHelpers",exports.default=dashjs.FactoryMaker.getSingletonFactory(e),module.exports=exports.default;
},{}],"BE6x":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../utils/HandlerHelpers"),r=e(t);function n(e){e=e||{};var t=void 0,n=void 0,u=void 0,l=void 0,a=void 0,o=this.context,i=(0,r.default)(o).getInstance(),c=[],s=e.metricsConstants;function d(){var e=function(){try{return Object.keys(c).map(function(e){return c[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&a!==e.t&&(a=e.t,t.report(u,e))}return{initialize:function(e,r,a){r&&(n=i.validateN(a),t=r,u=i.reconstructFullMetricName(e,a),l=setInterval(d,n))},reset:function(){clearInterval(l),l=null,n=0,t=null,a=null},handleNewMetric:function(e,t,r){e===s.BUFFER_LEVEL&&(c[r]=t)}}}n.__dashjs_factory_name="BufferLevelHandler",exports.default=dashjs.FactoryMaker.getClassFactory(n),module.exports=exports.default;
},{"../../utils/HandlerHelpers":"tDhS"}],"xkmW":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../MetricsReportingEvents"),r=e(t);function n(e){var t=void 0,n=(e=e||{}).eventBus,o=e.metricsConstants;function u(){n.off(r.default.METRICS_INITIALISATION_COMPLETE,u,this),n.trigger(r.default.BECAME_REPORTING_PLAYER)}return{initialize:function(e,o){o&&(t=o,n.on(r.default.METRICS_INITIALISATION_COMPLETE,u,this))},reset:function(){t=null},handleNewMetric:function(e,r){e===o.DVB_ERRORS&&t&&t.report(e,r)}}}exports.default=dashjs.FactoryMaker.getClassFactory(n),module.exports=exports.default;
},{"../../MetricsReportingEvents":"nCWg"}],"CzWv":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../utils/HandlerHelpers"),n=e(t);function r(e){e=e||{};var t=void 0,r=void 0,l=void 0,a=void 0,o=void 0,s=[],u=(0,n.default)(this.context).getInstance(),i=e.metricsConstants;function c(){var e=s;e.length&&t&&t.report(a,e),s=[]}return{initialize:function(e,n,s,i){n&&(r=u.validateN(s),t=n,i&&i.length&&(l=i),a=u.reconstructFullMetricName(e,s,i),o=setInterval(c,r))},reset:function(){clearInterval(o),o=null,r=null,l=null,s=[],t=null},handleNewMetric:function(e,t){e===i.HTTP_REQUEST&&(l&&l!==t.type||s.push(t))}}}r.__dashjs_factory_name="HttpListHandler",exports.default=dashjs.FactoryMaker.getClassFactory(r),module.exports=exports.default;
},{"../../utils/HandlerHelpers":"tDhS"}],"exzY":[function(require,module,exports) {
"use strict";function e(){var e=void 0,t=void 0;return{initialize:function(r,o){e=r,t=o},reset:function(){t=null,e=void 0},handleNewMetric:function(r,o){r===e&&t&&t.report(e,o)}}}Object.defineProperty(exports,"__esModule",{value:!0}),e.__dashjs_factory_name="GenericMetricHandler",exports.default=dashjs.FactoryMaker.getClassFactory(e),module.exports=exports.default;
},{}],"PSim":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./handlers/BufferLevelHandler"),r=e(t),a=require("./handlers/DVBErrorsHandler"),n=e(a),s=require("./handlers/HttpListHandler"),u=e(s),i=require("./handlers/GenericMetricHandler"),l=e(i);function d(e){var t=(e=e||{}).debug,a=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,s=this.context,i={BufferLevel:r.default,DVBErrors:n.default,HttpList:u.default,PlayList:l.default,RepSwitchList:l.default,TcpList:l.default};return{create:function(r,n){var u,l=r.match(a);if(l){try{(u=i[l[1]](s).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants})).initialize(l[1],n,l[3],l[5])}catch(d){u=null,t.error("MetricsHandlerFactory: Could not create handler for type "+l[1]+" with args "+l[3]+", "+l[5]+" ("+d.message+")")}return u}},register:function(e,t){i[e]=t},unregister:function(e){delete i[e]}}}d.__dashjs_factory_name="MetricsHandlerFactory",exports.default=dashjs.FactoryMaker.getSingletonFactory(d),module.exports=exports.default;
},{"./handlers/BufferLevelHandler":"BE6x","./handlers/DVBErrorsHandler":"xkmW","./handlers/HttpListHandler":"CzWv","./handlers/GenericMetricHandler":"exzY"}],"k1u3":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../metrics/MetricsHandlerFactory"),n=e(t);function r(e){e=e||{};var t=[],r=void 0,s=this.context,o=e.eventBus,a=e.events,i=(0,n.default)(s).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function u(e){t.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}return r={initialize:function(e,n){e.split(",").forEach(function(e,r,s){var o;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var a=s[r+1];a&&-1===a.indexOf("(")&&-1!==a.indexOf(")")&&(e+=","+a,delete s[r+1])}(o=i.create(e,n))&&t.push(o)}),o.on(a.METRIC_ADDED,u,r),o.on(a.METRIC_UPDATED,u,r)},reset:function(){o.off(a.METRIC_ADDED,u,r),o.off(a.METRIC_UPDATED,u,r),t.forEach(function(e){return e.reset()}),t=[]}}}r.__dashjs_factory_name="MetricsHandlersController",exports.default=dashjs.FactoryMaker.getClassFactory(r),module.exports=exports.default;
},{"../metrics/MetricsHandlerFactory":"PSim"}],"VVvU":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./RangeController"),r=e(t),i=require("./ReportingController"),n=e(i),s=require("./MetricsHandlersController"),a=e(s);function o(e){e=e||{};var t=void 0,i=void 0,s=void 0,o=this.context;function l(){t&&t.reset(),i&&i.reset(),s&&s.reset()}return{initialize:function(u){try{(s=(0,r.default)(o).create({mediaElement:e.mediaElement})).initialize(u.Range),(i=(0,n.default)(o).create({debug:e.debug,metricsConstants:e.metricsConstants})).initialize(u.Reporting,s),(t=(0,a.default)(o).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events})).initialize(u.metrics,i)}catch(c){throw l(),c}},reset:l}}o.__dashjs_factory_name="MetricsController",exports.default=dashjs.FactoryMaker.getClassFactory(o),module.exports=exports.default;
},{"./RangeController":"vUBf","./ReportingController":"DneM","./MetricsHandlersController":"k1u3"}],"UzW2":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.metrics="",this.Range=[],this.Reporting=[]};exports.default=e,module.exports=exports.default;
},{}],"qWF2":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};exports.default=e,module.exports=exports.default;
},{}],"iS3u":[function(require,module,exports) {
"use strict";function r(r){return r&&r.__esModule?r:{default:r}}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../vo/Metrics"),t=r(e),a=require("../vo/Range"),n=r(a),s=require("../vo/Reporting"),i=r(s);function o(r){var e=(r=r||{}).dashManifestModel,a=r.constants;return{getMetrics:function(r){var s=[];return r.Metrics_asArray&&r.Metrics_asArray.forEach(function(o){var u=new t.default,c=e.getIsDynamic(r);o.hasOwnProperty("metrics")&&(u.metrics=o.metrics,o.Range_asArray&&o.Range_asArray.forEach(function(t){var s=new n.default;s.starttime=function(r,t,n){var s,i,o=e.getMpd(r),u=0;return t?u=o.availabilityStartTime.getTime()/1e3:(s=this.getRegularPeriods(o)).length&&(u=s[0].start),i=u,n&&n.hasOwnProperty(a.START_TIME)&&(i+=n.starttime),i}(r,c,t),t.hasOwnProperty("duration")?s.duration=t.duration:s.duration=e.getDuration(r),s._useWallClockTime=c,u.Range.push(s)}),o.Reporting_asArray&&(o.Reporting_asArray.forEach(function(r){var e=new i.default;if(r.hasOwnProperty(a.SCHEME_ID_URI)){for(var t in e.schemeIdUri=r.schemeIdUri,r)r.hasOwnProperty(t)&&(e[t]=r[t]);u.Reporting.push(e)}}),s.push(u)))}),s}}}o.__dashjs_factory_name="ManifestParsing",exports.default=dashjs.FactoryMaker.getSingletonFactory(o),module.exports=exports.default;
},{"../vo/Metrics":"UzW2","../vo/Range":"qWF2","../vo/Reporting":"AJX8"}],"LCoA":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./MetricsController"),r=e(t),n=require("../utils/ManifestParsing"),s=e(n),o=require("../MetricsReportingEvents"),a=e(o);function i(e){e=e||{};var t={},n=this.context,o=e.eventBus,i=e.events;function c(i){if(!i.error){var c=Object.keys(t);(0,s.default)(n).getInstance({dashManifestModel:e.dashManifestModel,constants:e.constants}).getMetrics(i.manifest).forEach(function(s){var o=JSON.stringify(s);if(t.hasOwnProperty(o))c.splice(o,1);else try{var a=(0,r.default)(n).create(e);a.initialize(s),t[o]=a}catch(i){}}),c.forEach(function(e){t[e].reset(),delete t[e]}),o.trigger(a.default.METRICS_INITIALISATION_COMPLETE)}}function f(){Object.keys(t).forEach(function(e){t[e].reset()}),t={}}return o.on(i.MANIFEST_UPDATED,c),o.on(i.STREAM_TEARDOWN_COMPLETE,f),{reset:function(){o.off(i.MANIFEST_UPDATED,c),o.off(i.STREAM_TEARDOWN_COMPLETE,f)}}}i.__dashjs_factory_name="MetricsCollectionController",exports.default=dashjs.FactoryMaker.getClassFactory(i),module.exports=exports.default;
},{"./MetricsController":"VVvU","../utils/ManifestParsing":"iS3u","../MetricsReportingEvents":"nCWg"}],"fuCe":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./utils/DVBErrorsTranslator"),r=e(t),s=require("./MetricsReportingEvents"),n=e(s),a=require("./controllers/MetricsCollectionController"),o=e(a),c=require("./metrics/MetricsHandlerFactory"),i=e(c),u=require("./reporting/ReportingFactory"),l=e(u);function d(){var e=this.context;return{createMetricsReporting:function(t){return(0,r.default)(e).getInstance({eventBus:t.eventBus,metricsModel:t.metricsModel,metricsConstants:t.metricsConstants,events:t.events}),(0,o.default)(e).create(t)},getReportingFactory:function(){return(0,l.default)(e).getInstance()},getMetricsHandlerFactory:function(){return(0,i.default)(e).getInstance()}}}d.__dashjs_factory_name="MetricsReporting";var f=dashjs.FactoryMaker.getClassFactory(d);f.events=n.default,dashjs.FactoryMaker.updateClassFactory(d.__dashjs_factory_name,f),exports.default=f,module.exports=exports.default;
},{"./utils/DVBErrorsTranslator":"epcA","./MetricsReportingEvents":"nCWg","./controllers/MetricsCollectionController":"LCoA","./metrics/MetricsHandlerFactory":"PSim","./reporting/ReportingFactory":"szI0"}],"ulyA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(){t(this,n)}return e(n,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"===r.schemeIdUri.toLowerCase()&&"cenc"===r.value.toLowerCase()&&(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,t){var r=n.parsePSSHList(t);return r.hasOwnProperty(e.uuid.toLowerCase())?r[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?t.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];for(var t=new DataView(e.buffer||e),n={},r=0;;){var o,i,a=void 0,u=r;if(r>=t.buffer.byteLength)break;if(o=r+t.getUint32(r),r+=4,1886614376===t.getUint32(r))if(r+=4,0===(i=t.getUint8(r))||1===i){r++,r+=3,a="";var f=void 0,l=void 0;for(f=0;f<4;f++)a+=1===(l=t.getUint8(r+f).toString(16)).length?"0"+l:l;for(r+=4,a+="-",f=0;f<2;f++)a+=1===(l=t.getUint8(r+f).toString(16)).length?"0"+l:l;for(r+=2,a+="-",f=0;f<2;f++)a+=1===(l=t.getUint8(r+f).toString(16)).length?"0"+l:l;for(r+=2,a+="-",f=0;f<2;f++)a+=1===(l=t.getUint8(r+f).toString(16)).length?"0"+l:l;for(r+=2,a+="-",f=0;f<6;f++)a+=1===(l=t.getUint8(r+f).toString(16)).length?"0"+l:l;r+=6,a=a.toLowerCase(),t.getUint32(r),r+=4,n[a]=t.buffer.slice(u,o),r=o}else r=o;else r=o}return n}}]),n}();exports.default=n,module.exports=exports.default;
},{}],"QqB2":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(s,o){t(this,e),this.contentType=s,this.robustness=o};exports.default=e,module.exports=exports.default;
},{}],"bU3h":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(i,s,n,a,o){t(this,e),this.initDataTypes=["cenc"],i&&i.length&&(this.audioCapabilities=i),s&&s.length&&(this.videoCapabilities=s),this.distinctiveIdentifier=n,this.persistentState=a,this.sessionTypes=o};exports.default=e,module.exports=exports.default;
},{}],"zeMI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var E=function(E,e,t){for(var r=!0;r;){var _=E,o=e,i=t;r=!1,null===_&&(_=Function.prototype);var s=Object.getOwnPropertyDescriptor(_,o);if(void 0!==s){if("value"in s)return s.value;var R=s.get;if(void 0===R)return;return R.call(i)}var n=Object.getPrototypeOf(_);if(null===n)return;E=n,e=o,t=i,r=!0,s=n=void 0}};function e(E){return E&&E.__esModule?E:{default:E}}function t(E,e){if(!(E instanceof e))throw new TypeError("Cannot call a class as a function")}function r(E,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);E.prototype=Object.create(e&&e.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(E,e):E.__proto__=e)}var _=require("../../../core/errors/ErrorsBase"),o=e(_),i=function(e){function _(){t(this,_),E(Object.getPrototypeOf(_.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}return r(_,o["default"]),_}(),s=new i;exports.default=s,module.exports=exports.default;
},{"../../../core/errors/ErrorsBase":"Y3I9"}],"G7Q7":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../CommonEncryption"),r=e(t),n=require("../vo/MediaCapability"),s=e(n),i=require("../vo/KeySystemConfiguration"),a=e(i),o=require("../errors/ProtectionErrors"),E=e(o),S=require("../../vo/DashJSError"),u=e(S),d=5,f=500,_=3,l=1e3,c=8e3;function R(e){var t=(e=e||{}).protectionKeyController,n=e.protectionModel,i=e.eventBus,o=e.events,S=e.debug,R=e.BASE64,y=e.constants,g=[],D=void 0,C=void 0,M=void 0,p=void 0,v=void 0,K=void 0,T=void 0,A=void 0;function m(e,s){var a=r.default.getPSSHForKeySystem(A,e),S=L(A);if(a){for(var d=n.getAllInitData(),f=0;f<d.length;f++)if(t.initDataEquals(a,d[f]))return void C.warn("DRM: Ignoring initData because we have already seen it!");try{n.createKeySession(a,S,I(A),s)}catch(_){i.trigger(o.KEY_SESSION_CREATED,{data:null,error:new u.default(E.default.KEY_SESSION_CREATED_ERROR_CODE,E.default.KEY_SESSION_CREATED_ERROR_MESSAGE+_.message)})}}else e?n.createKeySession(e,S,I(A),s):i.trigger(o.KEY_SESSION_CREATED,{data:null,error:new u.default(E.default.KEY_SESSION_CREATED_ERROR_CODE,E.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+A.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Y(e,t){n.loadKeySession(e,t,I(A))}function h(e){e?(n.setMediaElement(e),i.on(o.NEED_KEY,G,this)):null===e&&(n.setMediaElement(e),i.off(o.NEED_KEY,G,this))}function L(e){var t=null;if(e){var r=e.systemString;v&&(t=r in v?v[r]:null)}return t}function O(e){var t=L(e),r=[],n=[],i=t&&t.audioRobustness&&t.audioRobustness.length>0?t.audioRobustness:T,o=t&&t.videoRobustness&&t.videoRobustness.length>0?t.videoRobustness:T,E=I(e),S=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",u=t&&t.persistentState?t.persistentState:"temporary"===E?"optional":"required";return p.forEach(function(e){e.type===y.AUDIO?r.push(new s.default(e.codec,i)):e.type===y.VIDEO&&n.push(new s.default(e.codec,o))}),new a.default(r,n,S,u,[E])}function I(e){var t=L(e);return t&&t.sessionType?t.sessionType:K}function N(e,r){var s=this,a=[],S=void 0;if(A)for(S=0;S<e.length;S++){if(A===e[S].ks)if("break"===function(){a.push({ks:e[S].ks,configs:[O(A)]});return i.on(o.KEY_SYSTEM_ACCESS_COMPLETE,function t(n){i.off(o.KEY_SYSTEM_ACCESS_COMPLETE,t,s),n.error?r||i.trigger(o.KEY_SYSTEM_SELECTED,{error:new u.default(E.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,E.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+n.error)}):(C.info("DRM: KeySystem Access Granted"),i.trigger(o.KEY_SYSTEM_SELECTED,{data:n.data}),e[S].sessionId?Y(e[S].sessionId,e[S].initData):e[S].initData&&m(e[S].initData,e[S].cdmData))},s),n.requestKeySystemAccess(a),"break"}())break}else if(void 0===A){var d;!function(){A=null,M.push(e);for(var f=0;f<e.length;f++)a.push({ks:e[f].ks,configs:[O(e[f].ks)]});var _=void 0,l=function e(t){i.off(o.KEY_SYSTEM_ACCESS_COMPLETE,e,s),t.error?(A=void 0,i.off(o.INTERNAL_KEY_SYSTEM_SELECTED,d,s),r||i.trigger(o.KEY_SYSTEM_SELECTED,{data:null,error:new u.default(E.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,E.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+t.error)})):(_=t.data,C.info("DRM: KeySystem Access Granted ("+_.keySystem.systemString+")!  Selecting key system..."),n.selectKeySystem(_))};d=function e(a){if(i.off(o.INTERNAL_KEY_SYSTEM_SELECTED,e,s),i.off(o.KEY_SYSTEM_ACCESS_COMPLETE,l,s),a.error)A=void 0,r||i.trigger(o.KEY_SYSTEM_SELECTED,{data:null,error:new u.default(E.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,E.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+a.error)});else{if(!n)return;A=n.getKeySystem(),i.trigger(o.KEY_SYSTEM_SELECTED,{data:_});var d=L(A);d&&d.serverCertificate&&d.serverCertificate.length>0&&n.setServerCertificate(R.decodeArray(d.serverCertificate).buffer);for(var f=0;f<M.length;f++)for(S=0;S<M[f].length;S++)if(A===M[f][S].ks){if(t.isClearKey(A)&&d&&d.hasOwnProperty("clearkeys")){var c={kids:Object.keys(d.clearkeys)};M[f][S].initData=(new TextEncoder).encode(JSON.stringify(c))}M[f][S].sessionId?Y(M[f][S].sessionId,M[f][S].initData):null!==M[f][S].initData&&m(M[f][S].initData,M[f][S].cdmData);break}}},i.on(o.INTERNAL_KEY_SYSTEM_SELECTED,d,s),i.on(o.KEY_SYSTEM_ACCESS_COMPLETE,l,s),n.requestKeySystemAccess(a)}()}else M.push(e)}function w(e,t){i.trigger(o.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function b(e){e.error?i.trigger(o.KEY_STATUSES_CHANGED,{data:null,error:e.error}):C.debug("DRM: key status = "+e.status)}function k(e){C.debug("DRM: onKeyMessage");var s=e.data;i.trigger(o.KEY_MESSAGE,{data:s});var a=s.messageType?s.messageType:"license-request",S=s.message,d=s.sessionToken,f=L(A),R=A?A.systemString:null,y=t.getLicenseServer(A,f,a),g={sessionToken:d,messageType:a};if(S&&0!==S.byteLength){if(!y)return C.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+d.getSessionID()),void w(g);if(t.isClearKey(A)){var D=t.processClearKeyLicenseRequest(A,f,S);if(D)return C.debug("DRM: ClearKey license request handled by application!"),w(g),void n.updateKeySession(d,D)}var M=null;if(f&&f.serverURL){var p=f.serverURL;"string"==typeof p&&""!==p?M=p:"object"==typeof p&&p.hasOwnProperty(a)&&(M=p[a])}else f&&f.laURL&&""!==f.laURL?M=f.laURL:(M=A.getLicenseServerURLFromInitData(r.default.getPSSHData(d.initData)))||(M=e.data.laURL);if(M=y.getServerURLFromMessage(M,S,a)){var v={},K=!1,T=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(K=!0),v[t]=e[t]};f&&T(f.httpRequestHeaders),T(A.getRequestHeadersFromMessage(S)),f&&"boolean"==typeof f.withCredentials&&(K=f.withCredentials);var m=function(e,t,r,n){var s=e.response?y.getErrorResponse(e.response,r,n):"NONE";w(t,new u.default(E.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,E.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+r+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+s))},Y=A.getLicenseRequestFromMessage(S),h=y.getHTTPMethod(a),O=y.getResponseType(R,a),I=f&&!isNaN(f.httpTimeout)?f.httpTimeout:c;!function e(t,r,n,s,i,a,o,E,S,u,d){var f=new XMLHttpRequest;f.open(n,t,!0);f.responseType=s;f.withCredentials=i;E>0&&(f.timeout=E);for(var _ in r)f.setRequestHeader(_,r[_]);var c=function(){o--,setTimeout(function(){e(t,r,n,s,i,a,o,E,S,u,d)},l)};f.onload=function(){200===this.status||o<=0?S(this):(C.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+o),c())};f.ontimeout=f.onerror=function(){o<=0?d(this):(C.warn("License request network request failed . Retrying it... Pending retries: "+o),c())};f.onabort=function(){u(this)};f.send(a)}(M,v,h,O,K,Y,_,I,function(e){if(n)if(200===e.status){var t=y.getLicenseMessage(e.response,R,a);null!==t?(w(g),n.updateKeySession(d,t)):m(e,g,R,a)}else m(e,g,R,a)},function(e){w(g,new u.default(E.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,E.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+R+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},function(e){w(g,new u.default(E.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,E.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+R+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))})}else w(g,new u.default(E.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,E.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else w(g,new u.default(E.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,E.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function G(e,s){if(C.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===p.length&&(C.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(s=void 0===s?1:s+1)<d))g.push(setTimeout(function(){G(e,s)},f));else{var i=e.key.initData;if(ArrayBuffer.isView(i)&&(i=i.buffer),A){var a=r.default.getPSSHForKeySystem(A,i);if(a)for(var o=n.getAllInitData(),E=0;E<o.length;E++)if(t.initDataEquals(a,o[E]))return void C.warn("DRM: Ignoring initData because we have already seen it!")}C.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(i)));var S=t.getSupportedKeySystems(i,v);0!==S.length?N(S,!1):C.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else C.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}return D={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");!function(){if(!(i&&i.hasOwnProperty("on")&&t&&t.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}(),i.on(o.INTERNAL_KEY_MESSAGE,k,this),i.on(o.INTERNAL_KEY_STATUS_CHANGED,b,this),p.push(e);var r=t.getSupportedKeySystemsFromContentProtection(e.contentProtection);r&&r.length>0&&N(r,!0)},createKeySession:m,loadKeySession:Y,removeKeySession:function(e){n.removeKeySession(e)},closeKeySession:function(e){n.closeKeySession(e)},setServerCertificate:function(e){n.setServerCertificate(e)},setMediaElement:h,setSessionType:function(e){K=e},setRobustnessLevel:function(e){T=e},setProtectionData:function(e){v=e,t.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return t.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return t?t.getKeySystems():[]},stop:function(){n&&n.stop()},reset:function(){i.off(o.INTERNAL_KEY_MESSAGE,k,this),i.off(o.INTERNAL_KEY_STATUS_CHANGED,b,this),h(null),A=void 0,n&&(n.reset(),n=null),g.forEach(function(e){return clearTimeout(e)}),g=[],p=[]}},C=S.getLogger(D),M=[],p=[],K="temporary",T="",D}R.__dashjs_factory_name="ProtectionController",exports.default=dashjs.FactoryMaker.getClassFactory(R),module.exports=exports.default;
},{"../CommonEncryption":"ulyA","../vo/MediaCapability":"QqB2","../vo/KeySystemConfiguration":"bU3h","../errors/ProtectionErrors":"zeMI","../../vo/DashJSError":"BHVF"}],"MWKD":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function t(o,s){e(this,t),this.keyID=o,this.key=s};exports.default=t,module.exports=exports.default;
},{}],"jU6R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(e,n){if(t(this,r),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=n}return e(r,[{key:"toJWK",value:function(){var e=void 0,t=this.keyPairs.length,r={keys:[]};for(e=0;e<t;e++){var n={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};r.keys.push(n)}this.type&&(r.type=this.type);var i=JSON.stringify(r),o=i.length,a=new ArrayBuffer(o),s=new Uint8Array(a);for(e=0;e<o;e++)s[e]=i.charCodeAt(e);return a}}]),r}();exports.default=r,module.exports=exports.default;
},{}],"Eo7G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(){t(this,n),this.init()}return e(n,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),n}(),r=new n;exports.default=r,module.exports=exports.default;
},{}],"HDSq":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../vo/KeyPair"),t=e(r),n=require("../vo/ClearKeyKeySet"),a=e(n),o=require("../CommonEncryption"),u=e(o),s=require("../../constants/ProtectionConstants"),i=e(s),l="e2719d58-a985-b3c9-781a-b030af78d30e",c=i.default.CLEARKEY_KEYSTEM_STRING,d="urn:uuid:"+l;function f(e){var r=(e=e||{}).BASE64;return{uuid:l,schemeIdURI:d,systemString:c,getInitData:function(e){return u.default.parseInitDataFromContentProtection(e,r)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,r){var n=null;if(e){for(var o=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(r))),u=[],s=0;s<o.kids.length;s++){var i=o.kids[s],l=e.clearkeys&&e.clearkeys.hasOwnProperty(i)?e.clearkeys[i]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+i+") is not known!");u.push(new t.default(i,l))}n=new a.default(u)}return n}}}f.__dashjs_factory_name="KeySystemClearKey",exports.default=dashjs.FactoryMaker.getSingletonFactory(f),module.exports=exports.default;
},{"../vo/KeyPair":"MWKD","../vo/ClearKeyKeySet":"jU6R","../CommonEncryption":"ulyA","../../constants/ProtectionConstants":"Eo7G"}],"NvAv":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../vo/KeyPair"),r=e(t),n=require("../vo/ClearKeyKeySet"),o=e(n),a=require("../CommonEncryption"),u=e(a),s=require("../../constants/ProtectionConstants"),i=e(s),c="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",l=i.default.CLEARKEY_KEYSTEM_STRING,d="urn:uuid:"+c;function f(e){var t=void 0,n=e.BASE64,a=e.debug.getLogger(t);return t={uuid:c,schemeIdURI:d,systemString:l,getInitData:function(e){return u.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var u=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),s=[],i=0;i<u.kids.length;i++){var c=u.kids[i],l=e.clearkeys&&e.clearkeys.hasOwnProperty(c)?e.clearkeys[c]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+c+") is not known!");s.push(new r.default(c,l))}n=new o.default(s),a.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}f.__dashjs_factory_name="KeySystemW3CClearKey",exports.default=dashjs.FactoryMaker.getSingletonFactory(f),module.exports=exports.default;
},{"../vo/KeyPair":"MWKD","../vo/ClearKeyKeySet":"jU6R","../CommonEncryption":"ulyA","../../constants/ProtectionConstants":"Eo7G"}],"dCjl":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../CommonEncryption"),n=e(t),r=require("../../constants/ProtectionConstants"),s=e(r),u="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",o=s.default.WIDEVINE_KEYSTEM_STRING,i="urn:uuid:"+u;function a(e){var t=null,r=(e=e||{}).BASE64;return{uuid:u,schemeIdURI:i,systemString:o,init:function(e){e&&(t=e)},getInitData:function(e){return n.default.parseInitDataFromContentProtection(e,r)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}}}a.__dashjs_factory_name="KeySystemWidevine",exports.default=dashjs.FactoryMaker.getSingletonFactory(a),module.exports=exports.default;
},{"../CommonEncryption":"ulyA","../../constants/ProtectionConstants":"Eo7G"}],"cQ0w":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../CommonEncryption"),n=e(t),r=require("../../constants/ProtectionConstants"),a=e(r),o="9a04f079-9840-4286-ab92-e65be0885f95",i=a.default.PLAYREADY_KEYSTEM_STRING,s="urn:uuid:"+o,l='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>',u=void 0;function d(e){var t="utf16",r=(e=e||{}).BASE64;function a(){if(!r||!r.hasOwnProperty("decodeArray")||!r.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:o,schemeIdURI:s,systemString:i,getInitData:function(e){var t,o,i,s=new Uint8Array([112,115,115,104,0,0,0,0]),l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=0,d=null,f=void 0,g=void 0;if(a(),"pssh"in e)return n.default.parseInitDataFromContentProtection(e,r);if("pro"in e)d=r.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;d=r.decodeArray(e.prheader.__text)}return t=d.length,o=4+s.length+l.length+4+t,i=new ArrayBuffer(o),f=new Uint8Array(i),(g=new DataView(i)).setUint32(u,o),u+=4,f.set(s,u),u+=s.length,f.set(l,u),u+=l.length,g.setUint32(u,t),u+=4,f.set(d,u),u+=t,f.buffer},getRequestHeadersFromMessage:function(e){var n,r=void 0,a={},o=new DOMParser,i="utf16"===t?new Uint16Array(e):new Uint8Array(e);n=String.fromCharCode.apply(null,i);for(var s=(r=o.parseFromString(n,"application/xml")).getElementsByTagName("name"),l=r.getElementsByTagName("value"),u=0;u<s.length;u++)a[s[u].childNodes[0].nodeValue]=l[u].childNodes[0].nodeValue;return a.hasOwnProperty("Content")&&(a["Content-Type"]=a.Content,delete a.Content),a.hasOwnProperty("Content-Type")||(a["Content-Type"]="text/xml; charset="+t),a},getLicenseRequestFromMessage:function(e){var n=null,o=new DOMParser,i="utf16"===t?new Uint16Array(e):new Uint8Array(e);a();var s=String.fromCharCode.apply(null,i),l=o.parseFromString(s,"application/xml");if(l.getElementsByTagName("Challenge")[0]){var u=l.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;u&&(n=r.decode(u))}else if(l.getElementsByTagName("parsererror").length)return e;return n},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,a=new DOMParser,o=0;o<n;o++){var i=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===i){var l=e.slice(r,r+s),u=String.fromCharCode.apply(null,new Uint16Array(l)),d=a.parseFromString(u,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var f=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(f)return f}if(d.getElementsByTagName("LUI_URL")[0]){var g=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(g)return g}}else r+=s}return null},getCDMData:function(){var e=void 0,t=void 0,n=void 0,o=void 0;if(a(),u&&u.cdmData){for(e=[],o=0;o<u.cdmData.length;++o)e.push(u.cdmData.charCodeAt(o)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=r.encode(e),t=l.replace("%CUSTOMDATA%",e),n=[],o=0;o<t.length;++o)n.push(t.charCodeAt(o)),n.push(0);return new Uint8Array(n).buffer}return null},getSessionId:function(e){return u&&u.sessionId?u.sessionId:e&&e.sessionId?e.sessionId:null},setPlayReadyMessageFormat:function(e){if("utf8"!==e&&"utf16"!==e)throw new Error("Illegal PlayReady message format! -- "+e);t=e},init:function(e){e&&(u=e)}}}d.__dashjs_factory_name="KeySystemPlayReady",exports.default=dashjs.FactoryMaker.getSingletonFactory(d),module.exports=exports.default;
},{"../CommonEncryption":"ulyA","../../constants/ProtectionConstants":"Eo7G"}],"XsY2":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../constants/ProtectionConstants"),n=e(r);function t(e){var r=(e=e||{}).BASE64,t={};t[n.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return r.decodeArray(e.license)},getErrorResponse:function(e){return e}},t[n.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}};return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return t[e].responseType},getLicenseMessage:function(e,n){return function(){if(!r||!r.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),t[n].getLicenseMessage(e)},getErrorResponse:function(e,r){return t[r].getErrorResponse(e)}}}t.__dashjs_factory_name="DRMToday",exports.default=dashjs.FactoryMaker.getSingletonFactory(t),module.exports=exports.default;
},{"../../constants/ProtectionConstants":"Eo7G"}],"k13Z":[function(require,module,exports) {
"use strict";function e(){var e="http://schemas.xmlsoap.org/soap/envelope/";function t(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(n){return function(n){if(window.DOMParser){var r=t(n),a=(new window.DOMParser).parseFromString(r,"text/xml"),l=a?a.getElementsByTagNameNS(e,"Envelope")[0]:null,s=l?l.getElementsByTagNameNS(e,"Body")[0]:null;if(s&&s.getElementsByTagNameNS(e,"Fault")[0])return null}return n}.call(this,n)},getErrorResponse:function(n){return function(n){var r="",a="",l="",s=-1,o=-1;if(window.DOMParser){var u=t(n),g=(new window.DOMParser).parseFromString(u,"text/xml"),i=g?g.getElementsByTagNameNS(e,"Envelope")[0]:null,m=i?i.getElementsByTagNameNS(e,"Body")[0]:null,d=m?m.getElementsByTagNameNS(e,"Fault")[0]:null,f=d?d.getElementsByTagName("detail")[0]:null,y=f?f.getElementsByTagName("Exception")[0]:null,c=null;if(null===d)return u;r=(c=d.getElementsByTagName("faultstring")[0].firstChild)?c.nodeValue:null,null!==y&&(a=(c=y.getElementsByTagName("StatusCode")[0])?c.firstChild.nodeValue:null,s=(l=(c=y.getElementsByTagName("Message")[0])?c.firstChild.nodeValue:null)?l.lastIndexOf("[")+1:-1,o=l?l.indexOf("]"):-1,l=l?l.substring(s,o):"")}var p="code: "+a+", name: "+r;return l&&(p+=", message: "+l),p}.call(this,n)}}}Object.defineProperty(exports,"__esModule",{value:!0}),e.__dashjs_factory_name="PlayReady",exports.default=dashjs.FactoryMaker.getSingletonFactory(e),module.exports=exports.default;
},{}],"NQEa":[function(require,module,exports) {
"use strict";function e(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(exports,"__esModule",{value:!0}),e.__dashjs_factory_name="Widevine",exports.default=dashjs.FactoryMaker.getSingletonFactory(e),module.exports=exports.default;
},{}],"Woyj":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../vo/KeyPair"),t=e(r),n=require("../vo/ClearKeyKeySet"),o=e(n);function a(){return{getServerURLFromMessage:function(e,r){var t=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(r)));e+="/?";for(var n=0;n<t.kids.length;n++)e+=t.kids[n]+"&";return e=e.substring(0,e.length-1)},getHTTPMethod:function(){return"GET"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var r=[],n=0;n<e.keys.length;n++){var a=e.keys[n],s=a.kid.replace(/=/g,""),u=a.k.replace(/=/g,"");r.push(new t.default(s,u))}return new o.default(r)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}a.__dashjs_factory_name="ClearKey",exports.default=dashjs.FactoryMaker.getSingletonFactory(a),module.exports=exports.default;
},{"../vo/KeyPair":"MWKD","../vo/ClearKeyKeySet":"jU6R"}],"tTO1":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./../CommonEncryption"),r=e(t),n=require("./../drm/KeySystemClearKey"),i=e(n),s=require("./../drm/KeySystemW3CClearKey"),a=e(s),o=require("./../drm/KeySystemWidevine"),u=e(o),d=require("./../drm/KeySystemPlayReady"),l=e(d),y=require("./../servers/DRMToday"),c=e(y),f=require("./../servers/PlayReady"),g=e(f),v=require("./../servers/Widevine"),S=e(v),m=require("./../servers/ClearKey"),h=e(m),p=require("../../constants/ProtectionConstants"),I=e(p);function E(){var e=this.context,t=void 0,n=void 0,s=void 0,o=void 0,d=void 0,y=void 0,f=void 0;return t={initialize:function(){o=[];var t=void 0;t=(0,l.default)(e).getInstance({BASE64:d}),o.push(t),t=(0,u.default)(e).getInstance({BASE64:d}),o.push(t),t=(0,i.default)(e).getInstance({BASE64:d}),o.push(t),y=t,t=(0,a.default)(e).getInstance({BASE64:d,debug:n}),o.push(t),f=t},setProtectionData:function(e){for(var t,r,n=0;n<o.length;n++){var i=o[n];i.hasOwnProperty("init")&&i.init((t=i.systemString,r=void 0,r=null,e&&(r=t in e?e[t]:null),r))}},isClearKey:function(e){return e===y||e===f},initDataEquals:function(e,t){if(e.byteLength===t.byteLength){for(var r=new Uint8Array(e),n=new Uint8Array(t),i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}return!1},getKeySystems:function(){return o},getKeySystemBySystemString:function(e){for(var t=0;t<o.length;t++)if(o[t].systemString===e)return o[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t=void 0,r=void 0,n=void 0,i=void 0,s=[];if(e)for(n=0;n<o.length;++n)for(r=o[n],i=0;i<e.length;++i)if((t=e[i]).schemeIdUri.toLowerCase()===r.schemeIdURI){var a=r.getInitData(t);a?s.push({ks:o[n],initData:a,cdmData:r.getCDMData(),sessionId:r.getSessionId(t)}):this.isClearKey(r)&&s.push({ks:r,initData:null})}return s},getSupportedKeySystems:function(e,t){for(var n=[],i=r.default.parsePSSHList(e),s=void 0,a=void 0,u=void 0,d=0;d<o.length;++d)a=(s=o[d]).systemString,u=!t||a in t,s.uuid in i&&u&&n.push({ks:s,initData:i[s.uuid],cdmData:s.getCDMData(),sessionId:s.getSessionId()});return n},getLicenseServer:function(t,r,n){if("license-release"===n||"individualization-request"===n)return null;var i=null;return r&&r.hasOwnProperty("drmtoday")?i=(0,c.default)(e).getInstance({BASE64:d}):t.systemString===I.default.WIDEVINE_KEYSTEM_STRING?i=(0,S.default)(e).getInstance():t.systemString===I.default.PLAYREADY_KEYSTEM_STRING?i=(0,g.default)(e).getInstance():t.systemString===I.default.CLEARKEY_KEYSTEM_STRING&&(i=(0,h.default)(e).getInstance()),i},processClearKeyLicenseRequest:function(e,t,r){try{return e.getClearKeysFromProtectionData(t,r)}catch(n){return s.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,s=n.getLogger(t)),e.BASE64&&(d=e.BASE64))}}}E.__dashjs_factory_name="ProtectionKeyController",exports.default=dashjs.FactoryMaker.getSingletonFactory(E),module.exports=exports.default;
},{"./../CommonEncryption":"ulyA","./../drm/KeySystemClearKey":"HDSq","./../drm/KeySystemW3CClearKey":"NvAv","./../drm/KeySystemWidevine":"dCjl","./../drm/KeySystemPlayReady":"cQ0w","./../servers/DRMToday":"XsY2","./../servers/PlayReady":"k13Z","./../servers/Widevine":"NQEa","./../servers/ClearKey":"Woyj","../../constants/ProtectionConstants":"Eo7G"}],"vZWj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e,t,r){for(var E=!0;E;){var o=e,i=t,s=r;E=!1,null===o&&(o=Function.prototype);var n=Object.getOwnPropertyDescriptor(o,i);if(void 0!==n){if("value"in n)return n.value;var c=n.get;if(void 0===c)return;return c.call(s)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=s,E=!0,n=u=void 0}};function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=require("../../core/events/EventsBase"),i=t(o),s=function(t){function o(){r(this,o),e(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return E(o,i["default"]),o}(),n=new s;exports.default=n,module.exports=exports.default;
},{"../../core/events/EventsBase":"Y3I9"}],"BeRg":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(a,i){t(this,e),this.initData=a,this.initDataType=i};exports.default=e,module.exports=exports.default;
},{}],"P5f3":[function(require,module,exports) {
"use strict";function e(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function s(t,o,n,a){e(this,s),this.sessionToken=t,this.message=o,this.defaultURL=n,this.messageType=a||"license-request"};exports.default=s,module.exports=exports.default;
},{}],"HQqA":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(o,s){t(this,e),this.keySystem=o,this.ksConfiguration=s};exports.default=e,module.exports=exports.default;
},{}],"ZoYo":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../controllers/ProtectionKeyController"),n=e(t),s=require("../vo/NeedKey"),r=e(s),i=require("../errors/ProtectionErrors"),a=e(i),o=require("../../vo/DashJSError"),E=e(o),u=require("../vo/KeyMessage"),c=e(u),S=require("../vo/KeySystemAccess"),d=e(S),g=require("../../constants/ProtectionConstants"),f=e(g);function _(e){e=e||{};var t=this.context,s=e.eventBus,i=e.events,o=e.debug,u=void 0,S=void 0,g=void 0,_=void 0,l=void 0,y=void 0,R=void 0,D=void 0;function v(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function T(e){for(var t=0;t<y.length;t++)if(y[t]===e){y.splice(t,1);break}}function C(e){var t=void 0,n=void 0;return e&&e.length>0&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function K(e,t,n,r){var o={session:e,initData:t,sessionId:r,handleEvent:function(e){switch(e.type){case"keystatuseschange":s.trigger(i.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=C(arguments);switch(e.status){case"expired":s.trigger(i.INTERNAL_KEY_STATUS_CHANGED,{error:new E.default(a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:s.trigger(i.INTERNAL_KEY_STATUS_CHANGED,e)}});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;s.trigger(i.INTERNAL_KEY_MESSAGE,{data:new c.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach(function(){"usable"===C(arguments).status&&(t=!0)}),t},getSessionType:function(){return n}};return e.addEventListener("keystatuseschange",o),e.addEventListener("message",o),e.closed.then(function(){T(o),S.debug("DRM: Session closed.  SessionID = "+o.getSessionID()),s.trigger(i.KEY_SESSION_CLOSED,{data:o.getSessionID()})}),y.push(o),o}return u={getAllInitData:function(){for(var e=[],t=0;t<y.length;t++)y[t].initData&&e.push(y[t].initData);return e},requestKeySystemAccess:function(e){!function e(t,n){var r,a,o,E;void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?(a=t[r=n].ks,o=t[r].configs,(E=a.systemString)===f.default.PLAYREADY_KEYSTEM_STRING&&"required"===o[0].persistentState&&(E+=".recommendation"),navigator.requestMediaKeySystemAccess(E,o).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,n=new d.default(a,t);n.mksa=e,s.trigger(i.KEY_SYSTEM_ACCESS_COMPLETE,{data:n})}).catch(function(n){++r<t.length?e(t,r):s.trigger(i.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+n.message})})):s.trigger(i.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"})}(e,0)},getKeySystem:function(){return g},selectKeySystem:function(e){e.mksa.createMediaKeys().then(function(t){g=e.keySystem,l=t,_?_.setMediaKeys(l).then(function(){s.trigger(i.INTERNAL_KEY_SYSTEM_SELECTED)}):s.trigger(i.INTERNAL_KEY_SYSTEM_SELECTED)}).catch(function(){s.trigger(i.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})},setMediaElement:function(e){_!==e&&(_&&(_.removeEventListener("encrypted",R),_.setMediaKeys&&_.setMediaKeys(null)),(_=e)&&(_.addEventListener("encrypted",R),_.setMediaKeys&&l&&_.setMediaKeys(l)))},setServerCertificate:function(e){if(!g||!l)throw new Error("Can not set server certificate until you have selected a key system");l.setServerCertificate(e).then(function(){S.info("DRM: License server certificate successfully updated."),s.trigger(i.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){s.trigger(i.SERVER_CERTIFICATE_UPDATED,{error:new E.default(a.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,a.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})},createKeySession:function(e,t,n){if(!g||!l)throw new Error("Can not create sessions until you have selected a key system");var r=l.createSession(n),o=K(r,e,n),u=this.getKeySystem().systemString===f.default.CLEARKEY_KEYSTEM_STRING&&t&&t.clearkeys?"keyids":"cenc";r.generateRequest(u,e).then(function(){S.debug("DRM: Session created.  SessionID = "+o.getSessionID()),s.trigger(i.KEY_SESSION_CREATED,{data:o})}).catch(function(e){T(o),s.trigger(i.KEY_SESSION_CREATED,{data:null,error:new E.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})},updateKeySession:function(e,t){var n=e.session;D.isClearKey(g)&&(t=t.toJWK()),n.update(t).catch(function(t){s.trigger(i.KEY_ERROR,{data:new E.default(a.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})})},loadKeySession:function(e,t,n){if(!g||!l)throw new Error("Can not load sessions until you have selected a key system");for(var r=0;r<y.length;r++)if(e===y[r].sessionId)return void S.warn("DRM: Ignoring session ID because we have already seen it!");var o=l.createSession(n),u=K(o,t,n,e);o.load(e).then(function(t){t?(S.debug("DRM: Session loaded.  SessionID = "+u.getSessionID()),s.trigger(i.KEY_SESSION_CREATED,{data:u})):(T(u),s.trigger(i.KEY_SESSION_CREATED,{data:null,error:new E.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+e+")")}))}).catch(function(t){T(u),s.trigger(i.KEY_SESSION_CREATED,{data:null,error:new E.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+e+")! "+t.name)})})},removeKeySession:function(e){e.session.remove().then(function(){S.debug("DRM: Session removed.  SessionID = "+e.getSessionID()),s.trigger(i.KEY_SESSION_REMOVED,{data:e.getSessionID()})},function(t){s.trigger(i.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})})},closeKeySession:function(e){v(e).catch(function(t){T(e),s.trigger(i.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})})},stop:function(){for(var e=void 0,t=0;t<y.length;t++)(e=y[t]).getUsable()||v(e).catch(function(){T(e)})},reset:function(){var e=y.length,t=void 0;0!==e?function(){for(var n=function(e){T(e),0===y.length&&(_?(_.removeEventListener("encrypted",R),_.setMediaKeys(null).then(function(){s.trigger(i.TEARDOWN_COMPLETE)})):s.trigger(i.TEARDOWN_COMPLETE))},r=0;r<e;r++)!function(e){t.session.closed.then(function(){n(e)}),v(t).catch(function(){n(e)})}(t=y[r])}():s.trigger(i.TEARDOWN_COMPLETE)}},S=o.getLogger(u),g=null,_=null,l=null,y=[],D=(0,n.default)(t).getInstance(),R={handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;s.trigger(i.NEED_KEY,{key:new r.default(t,e.initDataType)})}}}},u}_.__dashjs_factory_name="ProtectionModel_21Jan2015",exports.default=dashjs.FactoryMaker.getClassFactory(_),module.exports=exports.default;
},{"../controllers/ProtectionKeyController":"tTO1","../vo/NeedKey":"BeRg","../errors/ProtectionErrors":"zeMI","../../vo/DashJSError":"BHVF","../vo/KeyMessage":"P5f3","../vo/KeySystemAccess":"HQqA","../../constants/ProtectionConstants":"Eo7G"}],"TXmn":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../controllers/ProtectionKeyController"),r=e(t),n=require("../vo/NeedKey"),i=e(n),s=require("../../vo/DashJSError"),a=e(s),o=require("../errors/ProtectionErrors"),d=e(o),u=require("../vo/KeyMessage"),l=e(u),E=require("../vo/KeySystemConfiguration"),g=e(E),y=require("../vo/KeySystemAccess"),c=e(y);function f(e){e=e||{};var t=this.context,n=e.eventBus,s=e.events,o=e.debug,u=e.api,E=void 0,y=void 0,f=void 0,v=void 0,S=void 0,m=void 0,p=void 0,K=void 0,h=void 0;function C(){try{for(var e=0;e<p.length;e++)_(p[e]);f&&f.removeEventListener(u.needkey,K),n.trigger(s.TEARDOWN_COMPLETE)}catch(t){n.trigger(s.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+t.message})}}function _(e){var t=e.session;t.removeEventListener(u.error,e),t.removeEventListener(u.message,e),t.removeEventListener(u.ready,e),t.removeEventListener(u.close,e);for(var r=0;r<p.length;r++)if(p[r]===e){p.splice(r,1);break}t[u.release]()}function D(){var e=null,t=function(){f.removeEventListener("loadedmetadata",e),f[u.setMediaKeys](S),n.trigger(s.VIDEO_ELEMENT_SELECTED)};f.readyState>=1?t():(e=t.bind(this),f.addEventListener("loadedmetadata",e))}return E={getAllInitData:function(){for(var e=[],t=0;t<p.length;t++)e.push(p[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,r=0;r<e.length;r++)for(var i=e[r].ks.systemString,a=e[r].configs,o=null,d=null,l=0;l<a.length;l++){var E=a[l].audioCapabilities,y=a[l].videoCapabilities;if(E&&0!==E.length){o=[];for(var f=0;f<E.length;f++)window[u.MediaKeys].isTypeSupported(i,E[f].contentType)&&o.push(E[f])}if(y&&0!==y.length){d=[];for(var v=0;v<y.length;v++)window[u.MediaKeys].isTypeSupported(i,y[v].contentType)&&d.push(y[v])}if(!(!o&&!d||o&&0===o.length||d&&0===d.length)){t=!0;var S=new g.default(o,d),m=h.getKeySystemBySystemString(i);n.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{data:new c.default(m,S)});break}}t||n.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return v},selectKeySystem:function(e){try{S=e.mediaKeys=new window[u.MediaKeys](e.keySystem.systemString),v=e.keySystem,m=e,f&&D(),n.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED)}catch(t){n.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+v.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(e){f!==e&&(f&&f.removeEventListener(u.needkey,K),(f=e)&&(f.addEventListener(u.needkey,K),S&&D()))},createKeySession:function(e,t,r,i){if(!v||!S||!m)throw new Error("Can not create sessions until you have selected a key system");var o=null;if(m.ksConfiguration.videoCapabilities&&m.ksConfiguration.videoCapabilities.length>0&&(o=m.ksConfiguration.videoCapabilities[0]),null===o&&m.ksConfiguration.audioCapabilities&&m.ksConfiguration.audioCapabilities.length>0&&(o=m.ksConfiguration.audioCapabilities[0]),null===o)throw new Error("Can not create sessions for unknown content types.");var E=o.contentType,g=S.createSession(E,new Uint8Array(e),i?new Uint8Array(i):null),c=function(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case u.error:n.trigger(s.KEY_ERROR,{data:new a.default(d.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case u.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;n.trigger(s.INTERNAL_KEY_MESSAGE,{data:new l.default(this,t,e.destinationURL)});break;case u.ready:y.debug("DRM: Key added."),n.trigger(s.KEY_ADDED);break;case u.close:y.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),n.trigger(s.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}(g,e);g.addEventListener(u.error,c),g.addEventListener(u.message,c),g.addEventListener(u.ready,c),g.addEventListener(u.close,c),p.push(c),y.debug("DRM: Session created.  SessionID = "+c.getSessionID()),n.trigger(s.KEY_SESSION_CREATED,{data:c})},updateKeySession:function(e,t){var r=e.session;h.isClearKey(v)?r.update(new Uint8Array(t.toJWK())):r.update(new Uint8Array(t))},closeKeySession:_,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:C,reset:C},y=o.getLogger(E),f=null,v=null,S=null,m=null,p=[],h=(0,r.default)(t).getInstance(),K={handleEvent:function(e){switch(e.type){case u.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(s.NEED_KEY,{key:new i.default(t,"cenc")})}}}},E}f.__dashjs_factory_name="ProtectionModel_3Feb2014",exports.default=dashjs.FactoryMaker.getClassFactory(f),module.exports=exports.default;
},{"../controllers/ProtectionKeyController":"tTO1","../vo/NeedKey":"BeRg","../../vo/DashJSError":"BHVF","../errors/ProtectionErrors":"zeMI","../vo/KeyMessage":"P5f3","../vo/KeySystemConfiguration":"bU3h","../vo/KeySystemAccess":"HQqA"}],"f3Ot":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../controllers/ProtectionKeyController"),r=e(t),s=require("../vo/NeedKey"),n=e(s),E=require("../../vo/DashJSError"),a=e(E),i=require("../vo/KeyMessage"),o=e(i),d=require("../vo/KeySystemConfiguration"),u=e(d),l=require("../vo/KeySystemAccess"),_=e(l),f=require("../errors/ProtectionErrors"),y=e(f);function g(e){e=e||{};var t=this.context,s=e.eventBus,E=e.events,i=e.debug,d=e.api,l=e.errHandler,f=void 0,g=void 0,c=void 0,S=void 0,R=void 0,D=void 0,A=void 0,v=void 0,K=void 0;function I(){c&&m();for(var e=0;e<A.length;e++)M(A[e]);s.trigger(E.TEARDOWN_COMPLETE)}function M(e){try{c[d.cancelKeyRequest](S.systemString,e.sessionID)}catch(t){s.trigger(E.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionID+") "+t.message})}}function k(e,t){if(t&&e){for(var r=e.length,s=0;s<r;s++)if(e[s].sessionID==t)return e[s];return null}return null}function m(){c.removeEventListener(d.keyerror,K),c.removeEventListener(d.needkey,K),c.removeEventListener(d.keymessage,K),c.removeEventListener(d.keyadded,K)}return f={getAllInitData:function(){for(var e=[],t=0;t<D.length;t++)e.push(D[t].initData);for(t=0;t<A.length;t++)e.push(A[t].initData);return e},requestKeySystemAccess:function(e){var t=c;t||(t=document.createElement("video"));for(var r=!1,n=0;n<e.length;n++)for(var a=e[n].ks.systemString,i=e[n].configs,o=null,d=0;d<i.length;d++){var l=i[d].videoCapabilities;if(l&&0!==l.length){o=[];for(var f=0;f<l.length;f++)""!==t.canPlayType(l[f].contentType,a)&&o.push(l[f])}if(o&&(!o||0!==o.length)){r=!0;var y=new u.default(null,o),g=R.getKeySystemBySystemString(a);s.trigger(E.KEY_SYSTEM_ACCESS_COMPLETE,{data:new _.default(g,y)});break}}r||s.trigger(E.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return S},selectKeySystem:function(e){S=e.keySystem,s.trigger(E.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){if(c!==e){if(c){m();for(var t=0;t<A.length;t++)M(A[t]);A=[]}(c=e)&&(c.addEventListener(d.keyerror,K),c.addEventListener(d.needkey,K),c.addEventListener(d.keymessage,K),c.addEventListener(d.keyadded,K),s.trigger(E.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!S)throw new Error("Can not create sessions until you have selected a key system");if(v||0===A.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return D.push(t),c[d.generateKeyRequest](S.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var r=e.sessionID;if(R.isClearKey(S))for(var s=0;s<t.keyPairs.length;s++)c[d.addKey](S.systemString,t.keyPairs[s].key,t.keyPairs[s].keyID,r);else c[d.addKey](S.systemString,new Uint8Array(t),new Uint8Array(e.initData),r)},closeKeySession:M,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:I,reset:I},g=i.getLogger(f),c=null,S=null,D=[],A=[],R=(0,r.default)(t).getInstance(),K={handleEvent:function(e){var t=null;switch(e.type){case d.needkey:var r=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;s.trigger(E.NEED_KEY,{key:new n.default(r,"cenc")});break;case d.keyerror:if((t=k(A,e.sessionId))||(t=k(D,e.sessionId)),t){var i=y.default.MEDIA_KEYERR_CODE,u="";switch(e.errorCode.code){case 1:i=y.default.MEDIA_KEYERR_UNKNOWN_CODE,u+="MEDIA_KEYERR_UNKNOWN - "+y.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:i=y.default.MEDIA_KEYERR_CLIENT_CODE,u+="MEDIA_KEYERR_CLIENT - "+y.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:i=y.default.MEDIA_KEYERR_SERVICE_CODE,u+="MEDIA_KEYERR_SERVICE - "+y.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:i=y.default.MEDIA_KEYERR_OUTPUT_CODE,u+="MEDIA_KEYERR_OUTPUT - "+y.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:i=y.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,u+="MEDIA_KEYERR_HARDWARECHANGE - "+y.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:i=y.default.MEDIA_KEYERR_DOMAIN_CODE,u+="MEDIA_KEYERR_DOMAIN - "+y.default.MEDIA_KEYERR_DOMAIN_MESSAGE}u+="  System Code = "+e.systemCode,s.trigger(E.KEY_ERROR,{data:new a.default(i,u,t)})}else g.error("No session token found for key error");break;case d.keyadded:(t=k(A,e.sessionId))||(t=k(D,e.sessionId)),t?(g.debug("DRM: Key added."),s.trigger(E.KEY_ADDED,{data:t})):g.debug("No session token found for key added");break;case d.keymessage:if((v=null!==e.sessionId&&void 0!==e.sessionId)?!(t=k(A,e.sessionId))&&D.length>0&&(t=D.shift(),A.push(t),t.sessionID=e.sessionId,s.trigger(E.KEY_SESSION_CREATED,{data:t})):D.length>0&&(t=D.shift(),A.push(t),0!==D.length&&(l.mediaKeyMessageError(y.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE),l.error(new a.default(y.default.MEDIA_KEY_MESSAGE_ERROR_CODE,y.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE)))),t){var _=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=_,s.trigger(E.INTERNAL_KEY_MESSAGE,{data:new o.default(t,_,e.defaultURL)})}else g.warn("No session token found for key message")}}},f}g.__dashjs_factory_name="ProtectionModel_01b",exports.default=dashjs.FactoryMaker.getClassFactory(g),module.exports=exports.default;
},{"../controllers/ProtectionKeyController":"tTO1","../vo/NeedKey":"BeRg","../../vo/DashJSError":"BHVF","../vo/KeyMessage":"P5f3","../vo/KeySystemConfiguration":"bU3h","../vo/KeySystemAccess":"HQqA","../errors/ProtectionErrors":"zeMI"}],"hK9v":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./controllers/ProtectionController"),r=e(t),s=require("./controllers/ProtectionKeyController"),o=e(s),n=require("./ProtectionEvents"),d=e(n),a=require("./errors/ProtectionErrors"),i=e(a),l=require("./models/ProtectionModel_21Jan2015"),u=e(l),y=require("./models/ProtectionModel_3Feb2014"),c=e(y),k=require("./models/ProtectionModel_01b"),g=e(k),v=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],f=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function M(){var e=void 0,t=this.context;function s(e,t){for(var r=0;r<t.length;r++){var s=t[r];if("function"==typeof e[s[Object.keys(s)[0]]])return s}return null}return e={createProtectionSystem:function(n){var d=null,a=(0,o.default)(t).getInstance();a.setConfig({debug:n.debug,BASE64:n.BASE64}),a.initialize();var i=function(r){var o=r.debug,n=o.getLogger(e),d=r.eventBus,a=r.errHandler,i=r.videoModel?r.videoModel.getElement():null;return i&&void 0===i.onencrypted||i&&void 0===i.mediaKeys?s(i,f)?(n.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,c.default)(t).create({debug:o,eventBus:d,events:r.events,api:s(i,f)})):s(i,v)?(n.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,g.default)(t).create({debug:o,eventBus:d,errHandler:a,events:r.events,api:s(i,v)})):(n.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(n.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,u.default)(t).create({debug:o,eventBus:d,events:r.events}))}(n);return!d&&i&&(d=(0,r.default)(t).create({protectionModel:i,protectionKeyController:a,eventBus:n.eventBus,debug:n.debug,events:n.events,BASE64:n.BASE64,constants:n.constants}),n.capabilities.setEncryptedMediaSupported(!0)),d}}}M.__dashjs_factory_name="Protection";var m=dashjs.FactoryMaker.getClassFactory(M);m.events=d.default,m.errors=i.default,dashjs.FactoryMaker.updateClassFactory(M.__dashjs_factory_name,m),exports.default=m,module.exports=exports.default;
},{"./controllers/ProtectionController":"G7Q7","./controllers/ProtectionKeyController":"tTO1","./ProtectionEvents":"vZWj","./errors/ProtectionErrors":"zeMI","./models/ProtectionModel_21Jan2015":"ZoYo","./models/ProtectionModel_3Feb2014":"TXmn","./models/ProtectionModel_01b":"f3Ot"}],"riYJ":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./MediaPlayer"),t=e(r);function n(){var e="application/dash+xml",r=void 0;function n(n,a,d){if(!n||!/^VIDEO$/i.test(n.nodeName))return null;if(n._dashjs_player)return n._dashjs_player;var o=void 0,l=n.id||n.name||"video element";if(!(a=a||[].slice.call(n.querySelectorAll("source")).filter(function(r){return r.type==e})[0])&&n.src)(a=document.createElement("source")).src=n.src;else if(!a&&!n.src)return null;return d=d||{},(o=(0,t.default)(d).create()).initialize(n,a.src,n.autoplay),r||(r=o.getDebug().getLogger()),r.debug("Converted "+l+" to dash.js player and added content: "+a.src),n._dashjs_player=o,o}function a(e){for(var r=!0;r;){var t=e;if(r=!1,/^VIDEO$/i.test(t.nodeName))return t;e=t.parentNode,r=!0}}return{create:n,createAll:function(r,t){var d=[];r=r||"[data-dashjs-player]";for(var o=(t=t||document).querySelectorAll(r),l=0;l<o.length;l++){var i=n(o[l],null);d.push(i)}var u=t.querySelectorAll('source[type="'+e+'"]');for(l=0;l<u.length;l++)i=n(a(u[l]),null),d.push(i);return d}}}var a=n(),d=void 0;function o(){window.removeEventListener("load",o),a.createAll()}function l(){window.dashjs&&(window.clearInterval(d),a.createAll())}var i="undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate;!i&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?a.createAll():d=window.setInterval(l,500):window.addEventListener("load",o)),exports.default=a,module.exports=exports.default;
},{"./MediaPlayer":"DTgk"}],"sSxP":[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./index_mediaplayerOnly"),t=require("./src/streaming/metrics/MetricsReporting"),a=e(t),s=require("./src/streaming/protection/Protection"),i=e(s),o=require("./src/streaming/MediaPlayerFactory"),d=e(o),u=require("./src/core/Debug"),l=e(u);dashjs.Protection=i.default,dashjs.MetricsReporting=a.default,dashjs.MediaPlayerFactory=d.default,dashjs.Debug=l.default,exports.default=dashjs,exports.MediaPlayer=r.MediaPlayer,exports.Protection=i.default,exports.MetricsReporting=a.default,exports.MediaPlayerFactory=d.default,exports.Debug=l.default;
},{"./index_mediaplayerOnly":"IIQf","./src/streaming/metrics/MetricsReporting":"fuCe","./src/streaming/protection/Protection":"hK9v","./src/streaming/MediaPlayerFactory":"riYJ","./src/core/Debug":"Jjwb"}],"tfxd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("dashjs")),a=i(require("video.js")),t=i(require("global/window")),r=i(require("global/document"));function i(e){return e&&e.__esModule?e:{default:e}}function n(t,r){var i=t.dash.mediaPlayer,n=i.getTracksFor("audio"),s=t.audioTracks();function o(e){return"dash-audio-"+e}function l(e,a){return e.find(function(e){return o(e.index)===a.id})}s.length&&r.clearTracks(["audio"]);var d=i.getCurrentTrackFor("audio");n.forEach(function(e){var r,i;if(Array.isArray(e.labels))for(var n=0;n<e.labels.length;n++)if(e.labels[n].lang&&-1!==t.language().indexOf(e.labels[n].lang.toLowerCase())){r=e.labels[n];break}r?i=r.text:Array.isArray(e.labels)&&1===e.labels.length?i=e.labels[0].text:(i=e.lang,e.roles&&e.roles.length&&(i+=" ("+e.roles.join(", ")+")")),s.addTrack(new a.default.AudioTrack({enabled:e===d,id:o(e.index),kind:e.kind||"main",label:i,language:e.lang}))});var u=function(){for(var e=0;e<s.length;e++){var a=s[e];if(a.enabled){var t=l(n,a);i.setCurrentTrack(t)}else;}};s.addEventListener("change",u),t.dash.mediaPlayer.on(e.default.MediaPlayer.events.STREAM_TEARDOWN_COMPLETE,function(){s.removeEventListener("change",u)})}function s(a,t){a.dash.mediaPlayer.on(e.default.MediaPlayer.events.PLAYBACK_METADATA_LOADED,n.bind(null,a,t))}function o(e,a){for(var t=0;t<e.length;t++)if(a(e[t]))return e[t]}function l(a,t,r){var i=[],n=r.map(function(e){var t;if(Array.isArray(e.labels))for(var r=0;r<e.labels.length;r++)if(e.labels[r].lang&&-1!==a.language().indexOf(e.labels[r].lang.toLowerCase())){t=e.labels[r];break}return{dashTrack:e,trackConfig:{label:t?t.text:Array.isArray(e.labels)&&1===e.labels.length?e.labels[0].text:e.lang||e.label,language:e.lang,srclang:e.lang,kind:e.kind}}}).map(function(e){var t=e.trackConfig,r=e.dashTrack,n=a.addRemoteTextTrack(t,!1);return i.push({textTrack:n.track,dashTrack:r}),n});function s(){for(var e=a.dash.mediaPlayer,t=a.textTracks(),n=-1,s=function(e){var a=t[e];if("showing"===a.mode){var s=o(i,function(e){return e.textTrack===a}),l=s?s.dashTrack:null;l&&(n=r.indexOf(l))}},l=0;l<t.length;l+=1)s(l);n!==e.getCurrentTextTrackIndex()&&e.setTextTrack(n)}return a.textTracks().on("change",s),a.dash.mediaPlayer.on(e.default.MediaPlayer.events.STREAM_TEARDOWN_COMPLETE,function(){a.textTracks().off("change",s)}),s(),n}function d(r,i,n){t.default.VTTCue&&!/\[native code\]/.test(t.default.VTTCue.toString())&&(t.default.VTTCue=!1);var s=[];if(i.featuresNativeTextTracks)a.default.log.error("You must pass {html: {nativeCaptions: false}} in the videojs constructor to use text tracks in videojs-contrib-dash");else{var o=r.dash.mediaPlayer;o.on(e.default.MediaPlayer.events.TEXT_TRACKS_ADDED,d),o.on(e.default.MediaPlayer.events.CAN_PLAY,function(){o.off(e.default.MediaPlayer.events.TEXT_TRACKS_ADDED,d)})}function d(a){a.index;var t=a.tracks;o.off(e.default.MediaPlayer.events.TEXT_TRACKS_ADDED,d),s.forEach(r.removeRemoteTextTrack.bind(r)),s=[],t.length&&(s=l(r,i,t,n))}}var u=function(){function t(r,i,n){var o=this;if(n=n||i.options_,this.player=(0,a.default)(n.playerId),this.player.dash=this.player.dash||{},this.tech_=i,this.el_=i.el(),this.elParent_=this.el_.parentNode,this.hasFiniteDuration_=!1,r.src){i.isReady_=!1,t.updateSourceData&&(a.default.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),r=t.updateSourceData(r)),t.hooks("updatesource").forEach(function(e){r=e(r)});var l=r.src;this.keySystemOptions_=t.buildDashJSProtData(r.keySystemOptions),this.player.dash.mediaPlayer=e.default.MediaPlayer().create(),this.mediaPlayer_=this.player.dash.mediaPlayer,this.mediaPlayer_.setTextDefaultEnabled(!1),t.useVideoJSDebug&&(a.default.log.warn('useVideoJSDebug has been deprecated. Please switch to using hook("beforeinitialize", callback).'),t.useVideoJSDebug(this.mediaPlayer_)),t.beforeInitialize&&(a.default.log.warn('beforeInitialize has been deprecated. Please switch to using hook("beforeinitialize", callback).'),t.beforeInitialize(this.player,this.mediaPlayer_)),t.hooks("beforeinitialize").forEach(function(e){e(o.player,o.mediaPlayer_)}),this.mediaPlayer_.initialize(),this.retriggerError_=function(e){if("capability"===e.error&&"mediasource"===e.event)o.player.error({code:4,message:"The media cannot be played because it requires a feature that your browser does not support."});else if("manifestError"!==e.error||"createParser"!==e.event.id&&"codec"!==e.event.id&&"nostreams"!==e.event.id&&"nostreamscomposed"!==e.event.id&&"parse"!==e.event.id&&"multiplexedrep"!==e.event.id)if("mediasource"===e.error)e.event.match("MEDIA_ERR_ABORTED")?o.player.error({code:1,message:e.event}):e.event.match("MEDIA_ERR_NETWORK")?o.player.error({code:2,message:e.event}):e.event.match("MEDIA_ERR_DECODE")?o.player.error({code:3,message:e.event}):e.event.match("MEDIA_ERR_SRC_NOT_SUPPORTED")?o.player.error({code:4,message:e.event}):e.event.match("MEDIA_ERR_ENCRYPTED")?o.player.error({code:5,message:e.event}):(e.event.match("UNKNOWN"),o.player.error({code:4,message:e.event}));else if("capability"===e.error&&"encryptedmedia"===e.event)o.player.error({code:5,message:"The media cannot be played because it requires encryption features that your browser does not support."});else if("key_session"===e.error)o.player.error({code:5,message:e.event});else if("download"===e.error)o.player.error({code:2,message:"The media playback was aborted because too many consecutive download errors occurred."});else{if("mssError"!==e.error)return;o.player.error({code:3,message:e.event})}else o.player.error({code:4,message:e.event.message});setTimeout(function(){o.mediaPlayer_.reset()},10)},this.mediaPlayer_.on(e.default.MediaPlayer.events.ERROR,this.retriggerError_),this.getDuration_=function(e){var a=e.data.Period_asArray,t=o.hasFiniteDuration_;e.data.mediaPresentationDuration||a[a.length-1].duration?o.hasFiniteDuration_=!0:o.hasFiniteDuration_=!1,o.hasFiniteDuration_!==t&&o.player.trigger("durationchange")},this.mediaPlayer_.on(e.default.MediaPlayer.events.MANIFEST_LOADED,this.getDuration_),n.dash&&Object.keys(n.dash).forEach(function(e){var t,r="set"+e.charAt(0).toUpperCase()+e.slice(1),i=n.dash[e];o.mediaPlayer_.hasOwnProperty(r)&&(a.default.log.warn("Using dash options in videojs-contrib-dash without the set prefix has been deprecated. Change '"+e+"' to '"+r+"'"),e=r),o.mediaPlayer_.hasOwnProperty(e)?(Array.isArray(i)||(i=[i]),(t=o.mediaPlayer_)[e].apply(t,i)):a.default.log.warn("Warning: dash configuration option unrecognized: "+e)}),this.mediaPlayer_.attachView(this.el_),this.mediaPlayer_.setAutoPlay(!1),s.call(null,this.player,i),d.call(null,this.player,i,n),this.tech_.seekable=this.seekable.bind(this),this.tech_.setCurrentTime=this.setCurrentTime.bind(this),this.tech_.currentTime=this.currentTime.bind(this),this.mediaPlayer_.setProtectionData(this.keySystemOptions_),this.mediaPlayer_.attachSource(l),this.tech_.triggerReady()}}t.buildDashJSProtData=function(e){var t={};if(!e||!Array.isArray(e))return null;for(var r=0;r<e.length;r++){var i=e[r],n=a.default.mergeOptions({},i.options);n.licenseUrl&&(n.serverURL=n.licenseUrl,delete n.licenseUrl),t[i.name]=n}return t};var r=t.prototype;return r.currentTime=function(){return this.mediaPlayer_.isDynamic()?this.mediaPlayer_.time()+this.timeDiffFromStart(this.startTime())+10:this.mediaPlayer_.time()},r.dispose=function(){this.mediaPlayer_&&(this.mediaPlayer_.off(e.default.MediaPlayer.events.ERROR,this.retriggerError_),this.mediaPlayer_.off(e.default.MediaPlayer.events.MANIFEST_LOADED,this.getDuration_),this.mediaPlayer_.reset()),this.player.dash&&delete this.player.dash},r.duration=function(){return this.mediaPlayer_.isDynamic()&&!this.hasFiniteDuration_?1/0:this.mediaPlayer_.duration()},t.hooks=function(e,a){return t.hooks_[e]=t.hooks_[e]||[],a&&(t.hooks_[e]=t.hooks_[e].concat(a)),t.hooks_[e]},t.hook=function(e,a){t.hooks(e,a)},t.removeHook=function(e,a){var r=t.hooks(e).indexOf(a);return-1!==r&&(t.hooks_[e]=t.hooks_[e].slice(),t.hooks_[e].splice(r,1),!0)},r.seekable=function(){if(!this.mediaPlayer_.isReady())return a.default.createTimeRange();var e=this.duration(),t=this.mediaPlayer_.getDVRWindowSize(),r=this.timeDiffFromStart(this.startTime());return 0===e?a.default.createTimeRange():this.mediaPlayer_.isDynamic()?a.default.createTimeRange(r,r+t):a.default.createTimeRange(0,e)},r.setCurrentTime=function(e){this.tech_.seekable().length&&this.mediaPlayer_.isDynamic()?this.mediaPlayer_.seek(e-this.timeDiffFromStart(this.startTime())):this.mediaPlayer_.seek(e),this.player.trigger("seeking")},r.startTime=function(){return this.startTime_||(this.startTime_=Date.now()/1e3|0),this.startTime_},r.timeDiffFromStart=function(e){return Date.now()/1e3-e|0},t}();u.hooks_={};var c=function(e){e=JSON.parse(JSON.stringify(e)),u.updateSourceData&&(a.default.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),e=u.updateSourceData(e)),u.hooks("updatesource").forEach(function(a){e=a(e)});var i=r.default.createElement("video");return!(e.keySystemOptions&&!t.default.navigator.requestMediaKeySystemAccess&&!i.msSetMediaKeys)};a.default.DashSourceHandler=function(){return{canHandleSource:function(e){return c(e)?a.default.DashSourceHandler.canPlayType(e.type)?"probably":/\.mpd/i.test(e.src)?"maybe":"":""},handleSource:function(e,a,t){return new u(e,a,t)},canPlayType:function(e){return a.default.DashSourceHandler.canPlayType(e)}}},a.default.DashSourceHandler.canPlayType=function(e){return/^application\/dash\+xml/i.test(e)?"probably":""},t.default.MediaSource&&a.default.getTech("Html5").registerSourceHandler(a.default.DashSourceHandler(),0),a.default.Html5DashJS=u;var h=u;exports.default=h;
},{"dashjs":"sSxP","video.js":"qoWl","global/window":"iDvB","global/document":"rTOJ"}],"agX6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("video.js")),t=r(require("global/document"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i=function r(n){var l=this;if(e.default.browser.IS_IE8)for(var i in l=t.default.createElement("custom"),r.prototype)"constructor"!==i&&(l[i]=r.prototype[i]);return l.id=n.id,l.label=l.id,l.width=n.width,l.height=n.height,l.bitrate=n.bandwidth,l.enabled_=n.enabled,Object.defineProperty(l,"enabled",{get:function(){return l.enabled_()},set:function(e){l.enabled_(e)}}),l},o=function(r){function o(){var n,i=l(l(n=r.call(this)||this));if(e.default.browser.IS_IE8)for(var u in i=t.default.createElement("custom"),o.prototype)"constructor"!==u&&(i[u]=o.prototype[u]);return i.levels_=[],i.selectedIndex_=-1,Object.defineProperty(i,"selectedIndex",{get:function(){return i.selectedIndex_}}),Object.defineProperty(i,"length",{get:function(){return i.levels_.length}}),i||l(n)}n(o,r);var u=o.prototype;return u.addQualityLevel=function(e){var t=this.getQualityLevelById(e.id);if(t)return t;var r=this.levels_.length;return t=new i(e),""+r in this||Object.defineProperty(this,r,{get:function(){return this.levels_[r]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t},u.removeQualityLevel=function(e){for(var t=null,r=0,n=this.length;r<n;r++)if(this[r]===e){t=this.levels_.splice(r,1)[0],this.selectedIndex_===r?this.selectedIndex_=-1:this.selectedIndex_>r&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t},u.getQualityLevelById=function(e){for(var t=0,r=this.length;t<r;t++){var n=this[t];if(n.id===e)return n}return null},u.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},o}(e.default.EventTarget);for(var u in o.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},o.prototype.allowedEvents_)o.prototype["on"+u]=null;var s="2.0.9",a=e.default.registerPlugin||e.default.plugin,d=function(e,t){var r=e.qualityLevels,n=new o;return e.on("dispose",function t(){n.dispose(),e.qualityLevels=r,e.off("dispose",t)}),e.qualityLevels=function(){return n},e.qualityLevels.VERSION=s,n},c=function(t){return d(this,e.default.mergeOptions({},t))};a("qualityLevels",c),c.VERSION=s;var v=c;exports.default=v;
},{"video.js":"qoWl","global/document":"rTOJ"}],"Y6pk":[function(require,module,exports) {
var t=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,r,e,n){var o=r&&r.prototype instanceof v?r:v,i=Object.create(o.prototype),a=new k(n||[]);return i._invoke=function(t,r,e){var n=f;return function(o,i){if(n===l)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return N()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=_(a,e);if(c){if(c===y)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===f)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=l;var u=h(t,r,e);if("normal"===u.type){if(n=e.done?p:s,u.arg===y)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=p,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=u;var f="suspendedStart",s="suspendedYield",l="executing",p="completed",y={};function v(){}function d(){}function g(){}var m={};m[i]=function(){return this};var w=Object.getPrototypeOf,L=w&&w(w(G([])));L&&L!==e&&n.call(L,i)&&(m=L);var x=g.prototype=v.prototype=Object.create(m);function E(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function b(t,r){var e;this._invoke=function(o,i){function a(){return new r(function(e,a){!function e(o,i,a,c){var u=h(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==typeof s&&n.call(s,"__await")?r.resolve(s.__await).then(function(t){e("next",t,a,c)},function(t){e("throw",t,a,c)}):r.resolve(s).then(function(t){f.value=t,a(f)},function(t){return e("throw",t,a,c)})}c(u.arg)}(o,i,e,a)})}return e=e?e.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,_(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function j(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function G(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:N}}function N(){return{value:r,done:!0}}return d.prototype=x.constructor=g,g.constructor=d,g[c]=d.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===d||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(b.prototype),b.prototype[a]=function(){return this},t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(x),x[c]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=G,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),y}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:G(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}},t}("object"==typeof module?module.exports:{});try{regeneratorRuntime=t}catch(r){Function("r","regeneratorRuntime = r")(t)}
},{}],"u8BV":[function(require,module,exports) {
module.exports=require("regenerator-runtime");
},{"regenerator-runtime":"Y6pk"}],"P1y7":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function e(){t(this,e)}return n(e,null,[{key:"aclPath",value:function(t){var e;if(t.href.includes("/hls/playingLive/"))e="/hls/playingLive/*";else{var n=t.pathname;e="".concat(n.substring(0,n.lastIndexOf("/")+1),"*")}return e}},{key:"tokenize",value:function(t,n){var r=new URL("".concat(t.src)),a=e.aclPath(r),o="".concat(n).concat(encodeURIComponent(a)),c={url:o};return fetch(o).then(function(e){return c.httpStatusCode=e.status,c.httpStatusText=e.statusText,e.ok?e.json().then(function(e){return new URLSearchParams(e.token.authparams).forEach(function(t,e){return r.searchParams.set(e,t)}),Object.assign({},t,{src:r.toString(),tokenDiagnostic:c})}):Promise.reject(c)}).catch(function(t){return c.httpStatusText=t.message,Promise.reject(c)})}},{key:"tokenizeSources",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://tp.srgssr.ch/akahd/token?acl=",r=[];return t.forEach(function(t){var a=e.tokenize(t,n);r.push(a)}),Promise.all(r).then(function(t){return t}).catch(function(t){return Promise.reject(t)})}}]),e}(),a=r;exports.default=a;
},{}],"TGvs":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r={AKAMAI:"AKAMAI",NONE:"NONE"},u=function(){function n(){e(this,n)}return t(n,null,[{key:"AKAMAI",get:function(){return r.AKAMAI}},{key:"isProtected",value:function(e){return e.some(function(e){return n.isAkamai(e.tokenType)})}},{key:"isAkamai",value:function(e){return r.AKAMAI===e}},{key:"isNone",value:function(e){return r.NONE===e}},{key:"NONE",get:function(){return r.NONE}}]),n}(),o=u;exports.default=o;
},{}],"PcDf":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=function(){function t(r,n,o){e(this,t),this.browser=navigator.userAgent,this.clientTime=(new Date).toISOString(),this.duration=0,this.environment=n,this.networkType=null,this.platform=navigator.platform,this.player="Letterbox/web/".concat(o),this.playerResult={},this.referrer=document.referrer||null,this.screenType="local",this.urn=r||null,this.version=1}return r(t,[{key:"setIlResult",value:function(e){this.ilResult=t.createResult(e)}},{key:"setDrmResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"irdeto";this.drmResult=t.createResult({url:e})}},{key:"setIlMediaComposition",value:function(e){this.ilResult&&(e.blockReason&&(this.ilResult.blockingReason=e.blockReason),this.ilResult.playableAbroad=e.playableAbroad,this.ilResult.noPlayableResourceFound=e.noPlayableResourceFound)}},{key:"setPlayerResult",value:function(e){this.playerResult=t.createResult(e)}},{key:"setTokenResult",value:function(e){this.tokenResult=t.createResult(e)}}],[{key:"getDuration",value:function(e){return e&&e.duration>0?0|e.duration:void 0}},{key:"getResourceFromUrl",value:function(e){if("function"==typeof performance.getEntriesByType)for(var t=performance.getEntriesByType("resource"),r=t.length;r--;){var n=t[r];if((n.name===e||n.name.includes(e))&&n.duration>0)return n}}},{key:"createResult",value:function(e){var r={},n=e.url,o=t.getResourceFromUrl(n),u=o?o.name:n;if(!1!==e.duration){var a=t.getDuration(o);a&&(r.duration=a)}return u&&"string"==typeof u&&(r.url=u),e.httpStatusCode&&(r.httpStatusCode=e.httpStatusCode),e.httpStatusText&&"OK"!==e.httpStatusText&&(r.errorMessage=e.httpStatusText),r}}]),t}(),o=n;exports.default=o;
},{}],"LRzs":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://srgsnitch.herokuapp.com/report",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(this,t),this.url=r,this.debug=n}return r(t,[{key:"send",value:function(e){if(null==e)return Promise.reject();var t=e;if(t.duration=Date.now()-new Date(t.clientTime).getTime()|0,t.playerResult){var r=t.duration;t.ilResult&&t.ilResult.duration&&(r-=t.ilResult.duration),t.playerResult.duration=r}return fetch(this.url,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then(function(e){return e.ok?e:Promise.reject(e)})}}]),t}(),i=n;exports.default=i;
},{}],"CcDT":[function(require,module,exports) {
module.exports={name:"@srgssr/srgletterbox-web",version:"2.12.0",description:"",main:"dist/letterbox.js",publishConfig:{registry:"https://npm.pkg.github.com/",access:"public"},files:["dist/*","docs/*"],browserslist:["Edge >= 16","Firefox >= 52","Chrome >= 57","Safari >= 10.1","ios_saf >= 9","FirefoxAndroid >= 65","ChromeAndroid >= 76","Opera >= 44"],author:"",license:"ISC",bugs:{url:"https://github.com/srgssr/srgletterbox-web/issues"},repository:{type:"git",url:"git+https://github.com/srgssr/srgletterbox-web.git"},homepage:"https://srgssr.github.io/srgletterbox-web",scripts:{build:"npm run generate:build_info && npm run webpack && npm run generate:doc",clean:"rimraf dist",dev:"npm run parcel:dev","dev:doc":"npm run generate:doc && npm run parcel:dev:doc","dev:https":"npm run parcel:dev:https",deploy:"gh-pages -d dist",eslint:"eslint --ext .js ./src ./test","eslint:fix":"eslint --fix --ext .js ./src ./test","eslint:silent":"eslint --ext .js ./;exit 0","font:install":"cd fonts && npm install && npm rebuild node-sass","generate:build_info":'cross-env echo {\\"date\\":\\"$CODEBUILD_START_TIME\\", \\"commit\\":\\"$CODEBUILD_RESOLVED_SOURCE_VERSION\\" , \\"runner\\":\\"$CODEBUILD_BUILD_ID\\", \\"initiator\\":\\"$CODEBUILD_INITIATOR\\"  } > generated/build.json',"generate:doc":"jsdoc -c jsdoc.json","generate:fonts":"npm run font:install && cd fonts && ./node_modules/grunt/bin/grunt && cd .. && npm run stylelint:font",webpack:"webpack","parcel:dev":"parcel *.html","parcel:dev:doc":"parcel dist/docs/index.html","parcel:dev:https":"parcel index.html --https","parcel:github:page":"npm run predeploy",predeploy:"npm run clean && npm run generate:build_info && npx parcel build index.html --public-url ./",prepublishOnly:"npm run build","release:ci":"semantic-release",test:"jest --verbose","test:coverage":"jest --collectCoverage","test:file:coverage:watch":"jest $npm_config_file_name --coverage --collectCoverageFrom=**/$npm_config_file_name* --watch","test:watch":"jest --watch --verbose",stylelint:"stylelint src/**/*.scss","stylelint:fix":"stylelint src/**/*.scss --fix","stylelint:font":"stylelint src/mediaPlayer/scss/_icons.scss --fix",version:""},dependencies:{bowser:"^2.9.0",dashjs:"^2.9.3","video.js":"7.6.5","videojs-contrib-dash":"github:SRGSSR/videojs-contrib-dash#letterbox-seekable-build","videojs-contrib-eme":"SRGSSR/videojs-contrib-eme#feature/fix-safari-drm","videojs-contrib-quality-levels":"^2.0.9","videojs-vr":"^1.5.0"},devDependencies:{"@babel/cli":"^7.5.0","@babel/core":"^7.5.4","@babel/plugin-transform-runtime":"^7.5.0","@babel/preset-env":"^7.5.4","@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","@semantic-release/changelog":"^3.0.6","@semantic-release/git":"^8.0.0","babel-loader":"^8.1.0","clean-webpack-plugin":"^3.0.0","cross-env":"^6.0.3","css-loader":"^3.4.2",eslint:"^5.14.0","eslint-config-airbnb-base":"^13.2.0","eslint-plugin-i18n-text-localize":"^1.1.1","eslint-plugin-import":"^2.18.0","eslint-plugin-jest":"^22.7.2","file-loader":"^5.0.2","gh-pages":"^2.0.1",husky:"^4.2.3",jest:"^24.4.0",jsdoc:"^3.6.3","mini-css-extract-plugin":"^0.9.0","node-fetch":"^2.6.1","optimize-css-assets-webpack-plugin":"^5.0.3","parcel-bundler":"^1.12.3",sass:"^1.22.4","sass-loader":"^8.0.2","semantic-release":"^16.0.2",semver:"^6.3.0",stylelint:"^11.1.1","stylelint-config-rational-order":"^0.1.2","stylelint-order":"^3.1.1","terser-webpack-plugin":"^2.3.5",webpack:"^4.41.6","webpack-cli":"^3.3.11"},husky:{hooks:{"commit-msg":"commitlint -E HUSKY_GIT_PARAMS","pre-commit":"npm run eslint && npm run stylelint","pre-push":"npm test"}},commitlint:{extends:["@commitlint/config-conventional"]},release:{branches:["master"],prepare:[["@semantic-release/changelog",{changelogFile:"docs/CHANGELOG.md"}],"@semantic-release/npm",["@semantic-release/git",{assets:["docs/CHANGELOG.md","docs/GETTING_STARTED.md","docs/subtitles_and_audio_tracks.md","package.json","package-lock.json","README.md"],message:"chore(release): ${nextRelease.version} [skip ci]\n\n${nextRelease.notes}"}]]}};
},{}],"CrdM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../../utils/BlockingReason.js")),t=r(require("../../utils/Events.js"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=i?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e}var l=15e3,u=3e3,c=function(){function o(e,r,i){n(this,o),this.chapterUrn=e,this.standalone=r,this.player=i,this.log=i.log,i.on([t.ENDED,t.DISPOSE],this.stop.bind(this))}return s(o,[{key:"start",value:function(){this.scheduleCall()}},{key:"stop",value:function(){this.chapterUrn=null,window.clearTimeout(this.timeoutId)}},{key:"periodicCall",value:function(){var e=this,t=this.player.options().SRGProviders;t.mediaComposition.chapterUrn===this.chapterUrn?t.dataService.getMediaCompositionByUrn(this.chapterUrn,this.standalone).then(function(t){e.log.debug("Handle new mediacomposition"),e.handleMediaComposition(t.mediaComposition)}).catch(function(){e.scheduleCall()}):this.stop()}},{key:"scheduleCall",value:function(){var t,o=this.player.options().SRGProviders.mediaComposition,r=o.getMainValidFromDate()-new Date;t=o.getMainBlockReason()===e.default.STARTDATE&&r<0?u:r>0&&r<l?r:l,this.timeoutId=window.setTimeout(this.periodicCall.bind(this),t)}},{key:"handleMediaComposition",value:function(r){var i=this.player.options().SRGProviders.mediaComposition;this.player.options().SRGProviders.mediaComposition=r,this.player.trigger({type:t.MEDIACOMPOSITION_LOADED,data:{mediaComposition:r}});var n=i.getMainBlockReason(),a=r.getMainBlockReason();return!n&&a?(this.log.warn("Stop because of a new block reason"),void this.errorAndStopPlayback(e.default.toError(a))):n!==a?(this.log.warn("Reload because of block reason change"),void this.reload(r)):o.streamUrls(r)!==o.streamUrls(i)?(this.log.warn("Reload because change in stream"),void this.reload(r)):void this.scheduleCall()}},{key:"reload",value:function(e){var t=this.player.options().SRGProviders.letterbox;t.prepareToPlayMediaComposition(e,void 0,t.getPlaybackSettings(),!0)}},{key:"errorAndStopPlayback",value:function(e){var t=this.player.options().SRGProviders.letterbox;this.player.reset(),this.player.error(e),this.stop(),t.prepareToPlayURN(t.getUrn())}}],[{key:"streamUrls",value:function(e){return JSON.stringify(e.getMainResources().map(function(e){return e.src}).sort())}}]),o}();exports.default=c;
},{"../../utils/BlockingReason.js":"ULoR","../../utils/Events.js":"Like"}],"MaRx":[function(require,module,exports) {
var define;
var e;!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof e&&e.amd?e([],r):"object"==typeof exports?exports.bowser=r():t.bowser=r()}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var i=e.getVersionPrecision(t),s=e.getVersionPrecision(r),o=Math.max(i,s),a=0,u=e.map([t,r],function(t){var r=o-e.getVersionPrecision(t),n=t+new Array(r+1).join(".0");return e.map(n.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});for(n&&(a=o-Math.min(i,s)),o-=1;o>=a;){if(u[0][o]>u[1][o])return 1;if(u[0][o]===u[1][o]){if(o===a)return 0;o-=1}else if(u[0][o]<u[1][o])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var i=e[r];if(t(i,r))return i}},e.assign=function(e){for(var t,r,n=e,i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(s));var a=function(){var e=s[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach(function(t){n[t]=e[t]})};for(t=0,r=s.length;t<r;t+=1)a();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(91))&&n.__esModule?n:{default:n},s=r(18);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){}var t,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,r=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],null&&o(t.prototype,null),r&&o(t,r),e}();t.default=a,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=u(r(92)),i=u(r(93)),s=u(r(94)),o=u(r(95)),a=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(n.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(i.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(s.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(o.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,i={},s=0;if(Object.keys(e).forEach(function(t){var o=e[t];"string"==typeof o?(i[t]=o,s+=1):"object"==typeof o&&(r[t]=o,n+=1)}),n>0){var o=Object.keys(r),u=a.default.find(o,function(e){return t.isOS(e)});if(u){var d=this.satisfies(r[u]);if(void 0!==d)return d}var c=a.default.find(o,function(e){return t.isPlatform(e)});if(c){var f=this.satisfies(r[c]);if(void 0!==f)return f}}if(s>0){var l=Object.keys(i),h=a.default.find(l,function(e){return t.isBrowser(e,!0)});if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),i=a.default.getBrowserTypeByAlias(n);return t&&i&&(n=i.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(i,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e}();t.default=d,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:opera)[\s\/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(/(?:opr|opios)[\s\/](\S+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s\/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=i.default.getFirstMatch(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=i.default.getFirstMatch(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=i.default.getFirstMatch(/(?:swing)[\s\/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:coast)[\s\/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=i.default.getFirstMatch(/(?:yabrowser)[\s\/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s\/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s\/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:epiphany)[\s\/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:puffin)[\s\/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:sleipnir)[\s\/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:k-meleon)[\s\/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=i.default.getFirstMatch(/(?:micromessenger)[\s\/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[\/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=i.default.getFirstMatch(/(?:qupzilla)[\s\/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s\/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=i.default.getFirstMatch(/(?:chromium)[\s\/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=i.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:function(e){var t=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return{name:s.OS_MAP.iOS,version:t}}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=i.default.getMacOSVersionName(t),n={name:s.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=i.default.getFirstMatch(/android[\s\/-](\d+(\.\d+)*)/i,e),r=i.default.getAndroidVersionName(t),n={name:s.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:s.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[\/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},r=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},r=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},r=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},r=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=o,e.exports=t.default}})});
},{}],"ZJSt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("bowser"));function r(e){return e&&e.__esModule?e:{default:e}}function t(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),e}var a=function(){function r(){n(this,r)}return i(r,null,[{key:"bowser",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent;return r.bowserInstance&&r.bowserInstance.getUA()===t||(r.bowserInstance=e.default.getParser(t)),r.bowserInstance}},{key:"isIOSSupportingDRM",value:function(){return r.bowser().isOS(e.default.OS_MAP.iOS)&&r.bowser().getOSVersion()>="11.2"&&r.bowser().satisfies({edge:">=41.1",safari:">=11"})}},{key:"isDRMSupported",value:function(){var n,o=r.bowser,i=r.isIOSSupportingDRM,a=(t(n={android:{chrome:">34",edge:">=41.1"}},e.default.OS_MAP.ChromeOS,{chrome:">34"}),t(n,"linux",{chrome:">34",firefox:">47"}),t(n,"macos",{chrome:">=34",edge:">=79",firefox:">47",opera:">=44",safari:">=8"}),t(n,"windows",{chrome:">=34",edge:">=17",firefox:">47",opera:">=44"}),n);return i()||o().satisfies(a)||!1}},{key:"isBrowserOutdated",value:function(){return!("URLSearchParams"in window)}},{key:"isChrome",get:function(){return r.bowser().isBrowser(e.default.BROWSER_MAP.chrome)}},{key:"isChromium",get:function(){return r.bowser().isBrowser(e.default.BROWSER_MAP.chromium)}},{key:"isEdge",get:function(){return r.bowser().isBrowser(e.default.BROWSER_MAP.edge)}},{key:"isOpera",get:function(){return r.bowser().isBrowser(e.default.BROWSER_MAP.opera)}},{key:"isSafari",get:function(){return r.bowser().isBrowser(e.default.BROWSER_MAP.safari)}},{key:"isTouchDevice",get:function(){return matchMedia("(any-hover: none)").matches||matchMedia("(pointer: coarse)").matches}}]),r}(),s=a;exports.default=s;
},{"bowser":"MaRx"}],"kUht":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=b(require("@babel/runtime/regenerator")),r=b(require("video.js")),t=b(require("../../utils/AkamaiTokenService.js")),o=b(require("../../utils/Drm.js")),n=b(require("../../utils/Utils.js")),i=b(require("../../utils/SRGStreamType.js")),s=b(require("../../utils/SRGTokenType.js")),a=b(require("../../diagnostics/PerformanceReport.js")),u=b(require("../../diagnostics/PerformanceService.js")),c=b(require("../../utils/BlockingReason.js")),l=b(require("../../errors/errors.js")),d=require("../../../package.json"),f=b(require("./mediacomposition-periodic-listener.js")),p=b(require("../../dataProvider/model/MediaComposition.js")),m=y(require("../../utils/PlayerEvents.js")),v=y(require("../../utils/SRGEvents.js")),R=y(require("../../utils/SRGQuality.js")),S=b(require("../../utils/SupportedDevices.js"));function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function b(e){return e&&e.__esModule?e:{default:e}}function P(e,r){return _(e)||A(e,r)||k(e,r)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,r){if(e){if("string"==typeof e)return O(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?O(e,r):void 0}}function O(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function A(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],o=!0,n=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(t.push(s.value),!r||t.length!==r);o=!0);}catch(u){n=!0,i=u}finally{try{o||null==a.return||a.return()}finally{if(n)throw i}}return t}}function _(e){if(Array.isArray(e))return e}function j(e,r,t,o,n,i,s){try{var a=e[i](s),u=a.value}catch(c){return void t(c)}a.done?r(u):Promise.resolve(u).then(o,n)}function C(e){return function(){var r=this,t=arguments;return new Promise(function(o,n){var i=e.apply(r,t);function s(e){j(i,o,n,s,a,"next",e)}function a(e){j(i,o,n,s,a,"throw",e)}s(void 0)})}}var D=function(g){var y=g.log;function b(e){var r,t=new u.default,i=new a.default(e,n.default.getEnvironment(),d.version),c=function(){o.default.hasDrm([g.currentSource()])&&i.setDrmResult()},l=function(){var e=g.options().SRGProviders.mediaComposition;if(e){var r=e.getMainChapter(),t=r.blockReason,o=r.playableAbroad;i.setIlMediaComposition({blockReason:t,playableAbroad:o,noPlayableResourceFound:0===g.currentSources().length})}},f=function(){s.default.isProtected([g.currentSource()])&&i.setTokenResult(g.currentSource().tokenDiagnostic)},p=!1,v=function(){l(),c(),f(),i.setPlayerResult({url:g.currentSource().src,duration:!1}),t.send(i),g.off(m.ERROR,r)};return r=function(){l(),c(),f(),i.setPlayerResult({url:g.currentSource().src,httpStatusText:g.error().type||g.error().message,duration:!1}),p||(t.send(i),p=!0),g.off(m.CAN_PLAY_THROUGH,v)},g.one(m.CAN_PLAY_THROUGH,v),g.one(m.ERROR,r),i}function h(e,n){try{var i=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(function(e){return!["RTMP","HDS"].includes(e.streaming)})}(e);if(!r.default.browser.IS_ANY_SAFARI&&o.default.hasDrm(i)&&(i=i.filter(function(e){return"DASH"===e.streaming})),r.default.browser.IS_ANY_SAFARI&&o.default.hasDrm(i)&&(i=i.filter(function(e){return"HLS"===e.streaming})),!1===g.options().SRGProviders.letterbox.hdMode){var a=i.filter(function(e){return![R.types.HD,R.types.HQ].includes(e.quality)});a.length>0&&(i=a)}return s.default.isProtected(i)?t.default.tokenizeSources(i).then(function(e){return e}).catch(function(e){n.setTokenResult(e),g.error(l.default.ERROR_BLOCKING_REASON_UNKNOWN)}):i}catch(u){return n.setTokenResult(u),void g.error(l.default.ERROR_BLOCKING_REASON_UNKNOWN)}}function k(e,r,t){return g.options().SRGProviders.dataService.getMediaCompositionByUrn(e,r).then(function(e){var r=e.diagnostic,o=e.mediaComposition;return t.setIlResult(r),o}).catch(function(e){t.setIlResult(e),g.error(l.default.IL_ERROR)})}function O(){return(O=C(e.default.mark(function t(n){var s,a,u,d,m,R,O,A,_;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==g.error()&&g.error(null),g.options().SRGProviders.periodicListener&&g.options().SRGProviders.periodicListener.stop(),s=n.src,a=n.playbackSettings,u=n.pendingSeek,d=n.standalone,R=b(s),!n.mediaComposition){e.next=8;break}m=n.mediaComposition,e.next=11;break;case 8:return e.next=10,k(s,d,R);case 10:m=e.sent;case 11:if(!m){e.next=18;break}y.debug("Media composition loaded"),g.options({SRGProviders:{mediaComposition:Object.assign(new p.default,m,{pendingSeek:u,playbackSettings:a})}}),g.trigger({type:v.MEDIACOMPOSITION_LOADED,data:{mediaComposition:g.options().SRGProviders.mediaComposition}}),j=g.options().SRGProviders.mediaComposition.getMainChapter(),C=void 0,(C=j.aspectRatio)&&g.trigger({type:v.ASPECT_RATIO,data:{aspectRatio:C}}),e.next=20;break;case 18:return y.warn("No media composition"),e.abrupt("return");case 20:return e.next=22,h(g.options().SRGProviders.mediaComposition.getMainResources(),R);case 22:if(O=e.sent,g.options({SRGProviders:{periodicListener:new f.default(g.options().SRGProviders.mediaComposition.chapterUrn,d,g)}}),g.options().SRGProviders.periodicListener.start(),O){e.next=28;break}return y.warn("No resource"),e.abrupt("return");case 28:if(!g.options().SRGProviders.mediaComposition.getMainBlockReason()){e.next=31;break}return g.error(c.default.toError(g.options().SRGProviders.mediaComposition.getMainBlockReason())),e.abrupt("return");case 31:if(g.options().SRGProviders.mediaComposition.getFilteredExternalSubtitles(y).forEach(function(e){g.addRemoteTextTrack({kind:"SDH"===e.type?"captions":"subtitles",label:e.language,language:e.locale,src:e.url})}),g.poster(g.options().SRGProviders.mediaComposition.getMainChapterImageUrl()),S.default.isDRMSupported()||!o.default.hasDrm(O)){e.next=36;break}return g.error(l.default.ERROR_DRM_NOT_SUPPORTED_MESSAGE),e.abrupt("return");case 36:A=P(O,1),_=A[0],console.log("DRMF",O),g.options().drmf&&(console.log("DRMF"),_.keySystems["com.apple.fps.1_0"].certificateUri+="x"),g.src(_),"AUDIO"!==g.currentSource().mediaType?(g.removeClass("srgssr-audio-source"),g.$("video").setAttribute("crossorigin","anonymous")):g.addClass("srgssr-audio-source"),r.default.browser.IS_ANY_SAFARI&&o.default.hasDrm(O)&&(g.eme=r.default.getPlugin("eme"),g.eme()),t=g.currentSource().streamType,i.default.isDvr(t)?(g.options({liveui:!0}),g.liveTracker.startTracking()):(g.options({liveui:!1}),g.liveTracker.stopTracking()),y.debug("Srgssr middleware ready");case 44:case"end":return e.stop()}var t,j,C},t)}))).apply(this,arguments)}return{setSource:function(e){return O.apply(this,arguments)}}},G=D;exports.default=G,r.default.use("srgssr/urn",function(e){return D(e)});
},{"@babel/runtime/regenerator":"u8BV","video.js":"qoWl","../../utils/AkamaiTokenService.js":"P1y7","../../utils/Drm.js":"OQuU","../../utils/Utils.js":"csCP","../../utils/SRGStreamType.js":"SrUl","../../utils/SRGTokenType.js":"TGvs","../../diagnostics/PerformanceReport.js":"PcDf","../../diagnostics/PerformanceService.js":"LRzs","../../utils/BlockingReason.js":"ULoR","../../errors/errors.js":"LWrW","../../../package.json":"CcDT","./mediacomposition-periodic-listener.js":"CrdM","../../dataProvider/model/MediaComposition.js":"ZOM8","../../utils/PlayerEvents.js":"lUBw","../../utils/SRGEvents.js":"a5op","../../utils/SRGQuality.js":"mKEu","../../utils/SupportedDevices.js":"ZJSt"}],"HwTb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../../utils/Utils.js")),t=r(require("../../utils/SRGEvents.js"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return s(e)||c(e,t)||u(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}}function s(e){if(Array.isArray(e))return e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}var d=1e3,y=function(){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];f(this,n),this.blockedSegments=[],this.currentSegment=void 0,this.playableSegments=[],this.player=e,this.segments=t,this.extractBlockedSegments(),this.extractPlayableSegments()}return m(n,[{key:"extractBlockedSegments",value:function(){this.blockedSegments=this.segments.filter(function(e){return e.blockReason})}},{key:"extractPlayableSegments",value:function(){this.playableSegments=this.segments.filter(function(e){return!e.blockReason})}},{key:"getBlockedSegment",value:function(e){return o(this.blockedSegments.filter(function(t){return n.doesSegmentContainTime(t,e)}),1)[0]}},{key:"getPlayableSegment",value:function(e){return o(this.playableSegments.filter(function(t){return n.doesSegmentContainTime(t,e)}),1)[0]}},{key:"skipIfInBlockedSegment",value:function(e){var t=e,r=this.getBlockedSegment(e);return r&&(t=n.endOfSegmentInSeconds(r),this.player.currentTime(t),this.triggerBlockedSegmentSkipped(r)),t}},{key:"getValidTime",value:function(e){var t=this.getBlockedSegment(e);return t?this.getValidTime(n.endOfSegmentInSeconds(t)):e}},{key:"checkSegmentChange",value:function(e){this.currentSegment!==this.getPlayableSegment(e)&&(this.currentSegment=this.getPlayableSegment(e),this.triggerSegmentChange())}},{key:"triggerBlockedSegmentSkipped",value:function(e){e&&this.player.trigger({type:n.BLOCKED_SEGMENT_SKIPPED,data:e.blockReason})}},{key:"triggerSegmentChange",value:function(){this.currentSegment&&this.player.trigger({type:t.SEGMENT_CHANGE,data:this.currentSegment.urn})}}],[{key:"doesSegmentContainTime",value:function(t,n){return n>=e.default.millisecondsToSeconds(t.markIn)&&n<e.default.millisecondsToSeconds(t.markOut)}},{key:"endOfSegmentInSeconds",value:function(t){return e.default.millisecondsToSeconds(t.markOut+d)}},{key:"BLOCKED_SEGMENT_SKIPPED",get:function(){return t.BLOCKED_SEGMENT_SKIPPED}},{key:"SEGMENT_CHANGE",get:function(){return t.SEGMENT_CHANGE}}]),n}(),S=y;exports.default=S;
},{"../../utils/Utils.js":"csCP","../../utils/SRGEvents.js":"a5op"}],"F3SD":[function(require,module,exports) {
"use strict";var e=a(require("video.js")),t=a(require("../../dataProvider/services/SegmentService.js")),r=a(require("../../utils/SRGStreamType.js")),n=o(require("../../utils/Events.js")),i=a(require("../../utils/Utils.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function a(e){return e&&e.__esModule?e:{default:e}}e.default.use("*",function(u){var o,a;function c(e){var t=e,r=u.currentSource(),a=r.pendingSeek,c=r.pendingSegment,s=u.options().SRGProviders.mediaComposition,d=o.getBlockedSegment(a);return a&&(r.pendingSeek=void 0,u.one(n.PLAYING,function(){t=function(e,t){var r=i.default.millisecondsToSeconds;return e.findMainSegment()&&t&&t!==r(e.findMainSegment().markIn)&&t<r(e.findMainSegment().duration)?r(e.findMainSegment().markIn)+t:t}(s,a),u.currentTime(t),o.triggerBlockedSegmentSkipped(d),function(e,t){t&&(u.trigger({type:n.SEGMENT_SWITCHED,data:{analyticsMetadata:t.analyticsMetadata,origin:"start",isBlocked:!!t.blockReason}}),u.one(n.PLAYING,function(){e.pendingSegment=void 0}))}(r,c)})),t}function s(e){var t=e;return t=c(t),t=o.skipIfInBlockedSegment(t),o.checkSegmentChange(t),t}return{currentTime:s,callPause:function(){r.default.isLive(u.currentSource().streamType)&&u.hasStarted()&&(u.trigger("ended"),u.currentSource().needToRestart=!0)},callPlay:function(){if(u.currentSource().needToRestart||r.default.isLive(u.currentSource().streamType)&&u.autoplay()&&!u.hasStarted())return u.options().SRGProviders.letterbox.restart(!0),e.default.middleware.TERMINATOR},setCurrentTime:function(e){return r.default.isLive(u.currentSource().streamType)?s:o.getValidTime(e)},setSource:function(e,r){if(a!==e.src){a=u.currentSource().src;var n=u.options().SRGProviders.mediaComposition;o=null!=n?new t.default(u,n.getMainSegments()):null}r(null,e)}}});
},{"video.js":"qoWl","../../dataProvider/services/SegmentService.js":"HwTb","../../utils/SRGStreamType.js":"SrUl","../../utils/Events.js":"Like","../../utils/Utils.js":"csCP"}],"Ui4L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=s();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=t.default.getComponent("Button"),b=function(t){c(n,y);var e=f(n);function n(){return r(this,n),e.apply(this,arguments)}return u(n,[{key:"handleClick",value:function(t){this.options().clickHandler&&this.options().clickHandler.call(this,t)}}]),n}();t.default.registerComponent("Button",b);var d=b;exports.default=d;
},{"video.js":"qoWl"}],"ZqKR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("video.js")),e=o(require("../../utils/PlayerEvents.js")),r=o(require("../../utils/SRGEvents.js"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function i(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}function a(t,e,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=s(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function s(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=v();return function(){var r,n=O(t);if(e){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=t.default.getComponent("Component"),m=function(n){p(i,g);var o=b(i);function i(t,e){var r;return c(this,i),(r=o.call(this,t,e)).initListener(),r}return l(i,[{key:"initListener",value:function(){this.player().on([e.LOAD_START,r.MEDIACOMPOSITION_LOADED],this.updateTitle.bind(this))}},{key:"updateTitle",value:function(){this.changeTitle(this.player().options().SRGProviders.mediaComposition.getMainChapter().title)}},{key:"createEl",value:function(){return a(O(i.prototype),"createEl",this).call(this,"h1",{className:this.buildCSSClass()})}},{key:"buildCSSClass",value:function(){return"".concat(a(O(i.prototype),"buildCSSClass",this).call(this)," srg-title").trim()}},{key:"changeTitle",value:function(e){t.default.dom.textContent(this.el(),e)}}]),i}();g.registerComponent("TitleComponent",m);var j=m;exports.default=j;
},{"video.js":"qoWl","../../utils/PlayerEvents.js":"lUBw","../../utils/SRGEvents.js":"a5op"}],"D3Yw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("video.js")),e=r(require("../../../../utils/SRGEvents.js"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=u(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=_();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=t.default.getComponent("ClickableComponent"),v=function(n){f(o,b);var r=h(o);function o(t,e){var n;return a(this,o),n=r.call(this,t,e),e.controlText&&n.controlText(e.controlText),e.isHidden&&n.hide(),n.flashMessage=null,n.createButtonEl(),n}return l(o,[{key:"buildCSSClass",value:function(){var t=this.options().className?"".concat(this.options().className):"";return"".concat(s(g(o.prototype),"buildCSSClass",this).call(this)," sharing-social__action__link ").concat(t," vjs-icon-").concat(this.options().iconName)}},{key:"createEl",value:function(){return s(g(o.prototype),"createEl",this).call(this,"div",{className:"sharing-social__action"})}},{key:"createButtonEl",value:function(){var e=document.createDocumentFragment();e.appendChild(t.default.dom.createEl("a",{className:this.buildCSSClass()},{target:"_blank",rel:"noopener"})),e.appendChild(t.default.dom.createEl("span",{className:"sharing-social__action__title",innerHTML:this.options().caption})),this.el().appendChild(e)}},{key:"triggerAnalytics",value:function(){var t=this.player().currentSource(),n=t.bu,r=t.eventData,o=t.id,i=t.mediaType;this.player().trigger({type:e.SOCIAL_SHARING,data:{socialVendor:this.name(),bu:n,eventData:r,id:o,mediaType:i}})}},{key:"triggerAction",value:function(){return window.open(this.options().href(),"_blank","toolbar=0,\n      location = 0,\n      status = 0,\n      menubar = 0,\n      scrollbars = 1,\n      resizable = 0,\n      width = 550px,\n      height = 420px")}},{key:"triggerFlash",value:function(){var t=this;this.$(".sharing-social__action__title").textContent=this.localize(this.flashMessage),this.$(".sharing-social__action__link").classList.add("sharing-social__action__link--clicked"),this.setTimeout(function(){t.$(".sharing-social__action__title").textContent=t.options().caption,t.$(".sharing-social__action__link").classList.remove("sharing-social__action__link--clicked")},750)}},{key:"handleClick",value:function(t){t.preventDefault(),this.triggerAnalytics(),this.triggerAction(),this.flashMessage&&this.triggerFlash()}}]),o}();t.default.registerComponent("SharingSocialAction",v);var m=v;exports.default=m;
},{"video.js":"qoWl","../../../../utils/SRGEvents.js":"a5op"}],"i0Uz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("video.js")),e=n(require("./sharing-social-action.js")),r=n(require("../../../../utils/Utils.js"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){f(o,e.default);var n=l(o);function o(t,e){var r;return u(this,o),(r=n.call(this,t,e)).flashMessage="Copied",r}return c(o,[{key:"triggerAction",value:function(){r.default.copyTextToClipboard(this.options().href())}}]),o}();t.default.registerComponent("SharingCopyLinkAction",h);var d=h;exports.default=d;
},{"video.js":"qoWl","./sharing-social-action.js":"D3Yw","../../../../utils/Utils.js":"csCP"}],"uwnU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("video.js")),e=n(require("./sharing-social-action.js")),r=n(require("../../../../utils/Utils.js"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){f(o,e.default);var n=l(o);function o(t,e){var r;return i(this,o),(r=n.call(this,t,e)).flashMessage="Copied",r}return c(o,[{key:"triggerAction",value:function(){r.default.copyTextToClipboard('<iframe width="560" height="315" src="'.concat(this.options().href(),'&subdivisions=false" allowfullscreen allow="geolocation *; autoplay; encrypted-media"></iframe>'))}}]),o}();t.default.registerComponent("SharingEmbedAction",d);var h=d;exports.default=h;
},{"video.js":"qoWl","./sharing-social-action.js":"D3Yw","../../../../utils/Utils.js":"csCP"}],"JzMf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("video.js")),e=r(require("./sharing-social-action.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}function i(t,e,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=f(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){l(n,e.default);var r=s(n);function n(){return o(this,n),r.apply(this,arguments)}return c(n,[{key:"triggerAction",value:function(){var t=i(h(n.prototype),"triggerAction",this).call(this);this.setTimeout(function(){t.close()},500)}}]),n}();t.default.registerComponent("SharingMailAction",v);var d=v;exports.default=d;
},{"video.js":"qoWl","./sharing-social-action.js":"D3Yw"}],"wW0e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("video.js")),t=l(require("./actions/sharing-social-action.js")),n=l(require("./actions/sharing-copy-link-action.js")),r=l(require("./actions/sharing-embed-action.js")),o=l(require("./actions/sharing-mail-action.js")),i=c(require("../../../utils/Events.js"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=v();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=e.default.getComponent("Component"),O=function(e){y(c,j);var a=m(c);function c(e,t){var n;f(this,c);var r=(n=a.call(this,e,t)).options(),o=r.socialSharing,l=r.socialSharingStrategy;return n.addChildren(l,o),n.player().on(i.TIME_UPDATE,function(){l.isEmbeddable()?n.getChild("embed").show():n.getChild("embed").hide()}),n}return p(c,[{key:"addChildren",value:function(e,i){var a=this;[new t.default(this.player(),{name:"facebook",caption:this.localize("Facebook"),controlText:this.localize("Share on Facebook"),iconName:"facebook",href:function(){return"https://www.facebook.com/sharer/sharer.php?u=".concat(e.getShareURL())}}),new t.default(this.player(),{name:"twitter",caption:this.localize("Twitter"),controlText:this.localize("Share on Twitter"),iconName:"twitter",href:function(){return"https://twitter.com/intent/tweet?text=".concat(e.getShareTitle(),"&url=").concat(e.getShareURL(),"&via=").concat(i().twitterAccount)}}),new t.default(this.player(),{name:"linkedin",caption:this.localize("LinkedIn"),controlText:this.localize("Share on Linkedin"),iconName:"linkedin",href:function(){return"https://www.linkedin.com/shareArticle?mini=true&url=".concat(e.getShareURL(),"&title=").concat(e.getShareTitle())}}),new t.default(this.player(),{name:"whatsapp",caption:this.localize("WhatsApp"),controlText:this.localize("Share on Whatsapp"),iconName:"whatsapp",href:function(){return"https://api.whatsapp.com/send?text=".concat(e.getShareURL())}}),new o.default(this.player(),{name:"mail",caption:this.localize("Mail"),controlText:this.localize("Share by e-mail"),iconName:"mail",href:function(){return"mailto:?Subject=".concat(e.getShareTitle(),"&body=").concat(e.getShareURL())}}),new n.default(this.player(),{name:"link",caption:this.localize("Copy link"),controlText:this.localize("Copy link"),iconName:"link",href:function(){return e.getShareURL()}}),new r.default(this.player(),{name:"embed",caption:this.localize("Embed"),controlText:this.localize("Embed"),iconName:"embed",isHidden:!e.isEmbeddable(),href:function(){return e.getEmbedURL()}})].forEach(function(e){a.addChild(e)})}},{key:"createEl",value:function(){return h(S(c.prototype),"createEl",this).call(this,"div",{className:"sharing-container__buttons"})}}]),c}();j.registerComponent("SharingButtons",O);var k=O;exports.default=k;
},{"video.js":"qoWl","./actions/sharing-social-action.js":"D3Yw","./actions/sharing-copy-link-action.js":"i0Uz","./actions/sharing-embed-action.js":"uwnU","./actions/sharing-mail-action.js":"JzMf","../../../utils/Events.js":"Like"}],"eIGl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=i(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var n,o=b(t);if(e){var r=b(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=t.default.getComponent("Button"),v=function(t){f(n,h);var e=a(n);function n(t){var r,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,n),r=e.call(this,t,c),c.controlText&&r.controlText(c.controlText),r}return c(n,[{key:"buildCSSClass",value:function(){var t=this.options().className?"".concat(this.options().className):"";return"".concat(u(b(n.prototype),"buildCSSClass",this).call(this)," ").concat(t," vjs-icon-").concat(this.options().icon)}},{key:"handleClick",value:function(t){this.options().onClick&&this.options().onClick(t)}}]),n}();t.default.registerComponent("SharingButton",v);var d=v;exports.default=d;
},{"video.js":"qoWl"}],"nc2u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=u(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=f();return function(){var n,i=h(t);if(e){var r=h(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=t.default.getComponent("ClickableComponent"),b=function(e){l(r,y);var n=s(r);function r(t){var e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isHidden:!1};i(this,r),e=n.call(this,t,o);var a=o.controlText,u=o.isHidden;return e.controlText(a),e.disable(e.options().disabled),u&&e.hide(),e}return o(r,[{key:"buildCSSClass",value:function(){return"sharing-option__label ".concat(a(h(r.prototype),"buildCSSClass",this).call(this))}},{key:"createEl",value:function(){var t=a(h(r.prototype),"createEl",this).call(this,"label",{className:this.buildCSSClass()});return t.appendChild(this.createChildrenFragment()),t}},{key:"createChildrenFragment",value:function(){var t=document.createDocumentFragment(),e=this.createInputRadioEl(),n=r.createRadioButtonEl(),i=this.createLabelEl();return t.appendChild(e),t.appendChild(n),t.appendChild(i),t}},{key:"createInputRadioEl",value:function(){return t.default.dom.createEl("input",{className:"sharing-option__input",checked:this.options().checked,value:this.options().value},{type:"radio",name:"sharing-option","aria-hidden":"true",tabIndex:"-1"})}},{key:"createLabelEl",value:function(){return t.default.dom.createEl("span",{innerHTML:this.localize(this.options().labelText)},{"aria-hidden":"true"})}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$(".sharing-option__input").disabled=t,this.removeClass("sharing-option--disable"),this.el().setAttribute("aria-disabled","false"),t&&(this.$(".sharing-option__input").checked=!1,this.addClass("sharing-option--disable"),this.el().setAttribute("aria-disabled","true"))}},{key:"handleClick",value:function(){this.isChecked()||this.$(".sharing-option__input").disabled||(this.$(".sharing-option__input").checked=!0,this.options().clickHandler&&this.options().clickHandler.call(this,arguments))}},{key:"isChecked",value:function(){return this.$(".sharing-option__input").checked}},{key:"isHidden",value:function(){return!!this.options().isHidden&&this.options().isHidden()}},{key:"update",value:function(){this.isHidden()?this.hide():this.show()}}],[{key:"createRadioButtonEl",value:function(){return t.default.dom.createEl("span",{className:"sharing-option__radio-button"},{"aria-hidden":"true"})}}]),r}();t.default.registerComponent("SharingOption",b);var v=b;exports.default=v;
},{"video.js":"qoWl"}],"Bqqs":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n={srf:"srf",rsi:"rsi",rtr:"rtr",rts:"rts",swi:"play.swissinfo"},a=function(){function r(){e(this,r)}return t(r,null,[{key:"redirectUrl",value:function(e){var t=e.id,n=e.vendor,a=e.mediaType,o=r.getHostNameByVendor(n),i=r.getPlayMediaType(a);if(o)return"".concat(o,"/play/").concat(i,"/redirect/detail/").concat(t)}},{key:"embedUrl",value:function(e){var t=e.urn,n=e.vendor,a=r.getHostNameByVendor(n);if(a)return"".concat(a,"/play/embed?urn=").concat(t)}},{key:"getHostNameByVendor",value:function(e){if(e){var r=n[e.trim().toLowerCase()];return"https://".concat(r,".ch")}}},{key:"getPlayMediaType",value:function(e){return"VIDEO"===e?"tv":"AUDIO"===e?"radio":void 0}},{key:"redirectUrlFromSubdivision",value:function(e){var t=r.getHostNameByVendor(e.vendor),n=r.getPlayMediaType(e.mediaType),a=e.id;if(t)return"".concat(t,"/play/").concat(n,"/redirect/detail/").concat(a)}}]),r}(),o=a;exports.default=o;
},{}],"aWMA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./PlayPortal.js")),t=i(require("../dataProvider/services/SegmentService.js"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e}var s=function(){function i(e){var t,u,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.SHARING_MODES.FULL_LENGTH;n(this,i),this.player=e,this.mode=s;var o=i.SHARING_MODES;this.shareStrategies=(r(t={},o.FULL_LENGTH,this.getFullLengthShareURL.bind(this)),r(t,o.CURRENT_SUBDIVISION,this.getCurrentSubdivisionShareURL.bind(this)),r(t,o.CURRENT_POSITION,this.getCurrentPositionShareURL.bind(this)),t),this.embedStrategies=(r(u={},o.FULL_LENGTH,this.getFullLengthEmbedURL.bind(this)),r(u,o.CURRENT_SUBDIVISION,this.getCurrentSubdivisionEmbedURL.bind(this)),r(u,o.CURRENT_POSITION,this.getCurrentPositionEmbedURL.bind(this)),u),this.titleStrategies=(r(a={},o.FULL_LENGTH,this.getMainChapterTitle.bind(this)),r(a,o.CURRENT_SUBDIVISION,this.getCurrentSubdivisionTitle.bind(this)),r(a,o.CURRENT_POSITION,this.getMainChapterTitle.bind(this)),a)}return a(i,[{key:"isEmbeddable",value:function(){if(this.player.hasClass("srgssr-touch-enabled"))return!1;var e=this.getCurrentSubdivision();return e?!e.noEmbed:!this.getMainChapter().noEmbed}},{key:"setMode",value:function(e){this.mode=e}},{key:"getShareURL",value:function(){return this.shareStrategies[this.mode]()}},{key:"getEmbedURL",value:function(){return this.embedStrategies[this.mode]()}},{key:"getCurrentPositionEmbedURL",value:function(){return"".concat(this.getFullLengthEmbedURL(),"&startTime=").concat(parseInt(this.player.currentTime(),10))}},{key:"getCurrentSubdivisionEmbedURL",value:function(){var t=this.getCurrentSubdivision();return t?e.default.embedUrl(t):this.getFullLengthEmbedURL()}},{key:"getFullLengthEmbedURL",value:function(){var t=this.getMainChapter();return e.default.embedUrl(t)}},{key:"getFullLengthShareURL",value:function(){var t=this.getMainChapter();return e.default.redirectUrl(t)}},{key:"getCurrentSubdivisionShareURL",value:function(){var t=this.getCurrentSubdivision();return t?e.default.redirectUrlFromSubdivision(t):this.getFullLengthShareURL()}},{key:"getCurrentPositionShareURL",value:function(){return"".concat(this.getFullLengthShareURL(),"?startTime=").concat(parseInt(this.player.currentTime(),10))}},{key:"getMainChapter",value:function(){return this.player.options().SRGProviders.mediaComposition.getMainChapter()}},{key:"getCurrentSubdivision",value:function(){return new t.default(this.player,this.player.options().SRGProviders.mediaComposition.getSubdivisions()).getPlayableSegment(this.player.currentTime())}},{key:"getCurrentSubdivisionTitle",value:function(){var e=this.getCurrentSubdivision();if(e)return e.title}},{key:"getMainChapterTitle",value:function(){return this.getMainChapter().title}},{key:"getShareTitle",value:function(){return this.titleStrategies[this.mode]()}}],[{key:"SHARING_MODES",get:function(){return{FULL_LENGTH:"fulllength",CURRENT_SUBDIVISION:"currentSubdivision",CURRENT_POSITION:"currentPosition"}}}]),i}(),o=s;exports.default=o;
},{"./PlayPortal.js":"Bqqs","../dataProvider/services/SegmentService.js":"HwTb"}],"q4Tc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("video.js")),t=u(require("./sharing-option.js")),n=i(require("../../../utils/Events.js")),r=u(require("../../../utils/SRGSocialSharing.js"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=r?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=p(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=g();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=e.default.getComponent("Component"),_=function(e){d(i,O);var o=h(i);function i(e,t){var u;a(this,i),u=o.call(this,e,t);var c=r.default.SHARING_MODES;return u.addChildren(c),u.player().on(n.TIME_UPDATE,function(){u.options().socialSharingStrategy.getCurrentSubdivision()?u.getChild(c.CURRENT_SUBDIVISION).disable(!1):(u.getChild(c.CURRENT_SUBDIVISION).isChecked()&&u.getChild(c.FULL_LENGTH).handleClick(),u.getChild(c.CURRENT_SUBDIVISION).disable(!0))}),u}return f(i,[{key:"addChildren",value:function(e){var n=this;[new t.default(this.player(),{name:e.FULL_LENGTH,controlText:"Share the episode",labelText:"Episode",checked:!0,clickHandler:function(){n.options().socialSharingStrategy.setMode(e.FULL_LENGTH)}}),new t.default(this.player(),{name:e.CURRENT_SUBDIVISION,controlText:"Share the current subject",labelText:"Current subject",disabled:!0,isHidden:function(){return!n.player().options().SRGProviders.mediaComposition.getSubdivisions().length},clickHandler:function(){n.options().socialSharingStrategy.setMode(e.CURRENT_SUBDIVISION)}}),new t.default(this.player(),{name:e.CURRENT_POSITION,controlText:"Share at current position",labelText:"Current position",clickHandler:function(){n.options().socialSharingStrategy.setMode(e.CURRENT_POSITION)}})].forEach(function(e){n.addChild(e)})}},{key:"createEl",value:function(){return s(v(i.prototype),"createEl",this).call(this,"div",{className:"sharing-container__options"})}},{key:"handleClick",value:function(e){e.preventDefault(),this.sharingContainer.show()}}]),i}();O.registerComponent("SharingOptions",_);var C=_;exports.default=C;
},{"video.js":"qoWl","./sharing-option.js":"nc2u","../../../utils/Events.js":"Like","../../../utils/SRGSocialSharing.js":"aWMA"}],"giVy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("video.js")),t=a(require("./sharing-buttons.js")),n=a(require("./sharing-button.js")),r=a(require("./sharing-options.js")),i=a(require("../../../utils/SRGSocialSharing.js")),o=a(require("../../../utils/Utils.js"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=m();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=e.default.getComponent("Component"),C=function(a){d(u,S);var s=y(u);function u(e,t){var n;return l(this,u),(n=s.call(this,e,t)).hasBeenPausedBefore=!1,n.socialSharingStrategy=new i.default(e),n.hide(),n.createChildren(),n}return c(u,[{key:"reset",value:function(e,t){this.socialSharing=e,t?this.getChild("sharingOptions").hide():this.getChild("sharingOptions").show(),this.getChild("sharingOptions").children().forEach(function(e){e.name()===i.default.SHARING_MODES.FULL_LENGTH&&e.handleClick(),e.update()})}},{key:"show",value:function(){this.removeClass("sharing-container--hidden"),this.options().parent.addClass("sharing-module--opened"),o.default.hideFromAccessibility(!1,this.el()),this.setFocusToFirstElement(),this.hasBeenPausedBefore=this.player().paused(),this.player().paused()||this.player().pause()}},{key:"hide",value:function(){this.addClass("sharing-container--hidden"),o.default.hideFromAccessibility(!0,this.el()),this.options().parent.removeClass("sharing-module--opened"),this.player().hasStarted()&&this.player().paused()&&!this.hasBeenPausedBefore&&this.player().play()}},{key:"setFocusToFirstElement",value:function(){var e=o.default.getKeyboardFocusableElements(this.el());e&&e.length>0&&e[0].focus()}},{key:"createEl",value:function(){return h(v(u.prototype),"createEl",this).call(this,"div",{className:"sharing-container sharing-container--hidden"})}},{key:"createChildren",value:function(){var i=this;this.addChild(new n.default(this.player(),{name:"close",controlText:this.localize("Close"),className:"sharing-container__close",icon:"close",onClick:function(){i.hide(),i.options().parent.getChild("sharingButton").focus()}})),this.addChild(new S(this.player(),{name:"containerTitle",el:e.default.dom.createEl("h1",{className:"sharing-container__title",innerHTML:this.localize("Share")})})),this.addChild(new r.default(this.player(),{name:"sharingOptions",socialSharingStrategy:this.socialSharingStrategy})),this.addChild(new t.default(this.player(),{socialSharing:function(){return i.socialSharing},socialSharingStrategy:this.socialSharingStrategy}))}}]),u}();S.registerComponent("SharingContainer",C);var O=C;exports.default=O;
},{"video.js":"qoWl","./sharing-buttons.js":"wW0e","./sharing-button.js":"eIGl","./sharing-options.js":"q4Tc","../../../utils/SRGSocialSharing.js":"aWMA","../../../utils/Utils.js":"csCP"}],"oont":[function(require,module,exports) {
module.exports={rsi:{twitterAccount:"RSIonline"},rtr:{twitterAccount:"RTRSRG"},rts:{twitterAccount:"RadioTeleSuisse"},srf:{twitterAccount:"SRF"},swi:{twitterAccount:"swissinfo"}};
},{}],"UZKG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("video.js")),t=c(require("./sharing-container.js")),r=c(require("./sharing-button.js")),n=a(require("../../../utils/Events.js")),o=c(require("../../../utils/SocialSharing.json")),i=c(require("../../../utils/SRGStreamType.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function y(e,t,r){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=d(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=O();return function(){var r,n=j(e);if(t){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=e.default.getComponent("Component"),w=function(e){h(a,C);var u=v(a);function a(e,c){var f;return l(this,a),(f=u.call(this,e,c)).hide(),f.on(e,n.LOAD_START,function(){f.hide(),f.getChild("sharingContainer")||(f.addChild(new r.default(e,{name:"sharingButton",controlText:f.localize("Share"),className:"sharing-module__link",icon:"share",onClick:f.handleClick.bind(m(f))})),f.addChild(new t.default(e,{name:"sharingContainer",parent:m(f)})))}),f.on(e,n.FIRST_PLAY,function(){var e=f.player().options().SRGProviders.mediaComposition.getMainChapter().vendor,t=e&&o.default[e.toLowerCase()],r=f.options().isComponentVisible;if((void 0===r||r)&&t){f.show();var n=!i.default.isOnDemand(f.player().currentSource().streamType);f.getChild("sharingContainer").reset(t,n)}}),f}return p(a,[{key:"createEl",value:function(){return y(j(a.prototype),"createEl",this).call(this,"div",{className:"sharing-module"})}},{key:"handleClick",value:function(e){e.preventDefault(),this.getChild("sharingContainer").show()}}]),a}();C.registerComponent("SharingModule",w);var _=w;exports.default=_;
},{"video.js":"qoWl","./sharing-container.js":"giVy","./sharing-button.js":"eIGl","../../../utils/Events.js":"Like","../../../utils/SocialSharing.json":"oont","../../../utils/SRGStreamType.js":"SrUl"}],"jMsP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function c(t,e,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=i(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}require("./title-component.js"),require("./socialSharing/sharing-module.js");var d=t.default.getComponent("Component"),h=function(e){f(o,d);var r=a(o);function o(e,u){n(this,o);var c=t.default.mergeOptions({children:["TitleComponent","SharingModule"]},u);return r.call(this,e,c)}return u(o,[{key:"createEl",value:function(){return c(b(o.prototype),"createEl",this).call(this,"div",{className:"vjs-container-header",dir:"ltr"})}}]),o}();d.registerComponent("HeaderComponent",h);var v=h;exports.default=v;
},{"video.js":"qoWl","./title-component.js":"ZqKR","./socialSharing/sharing-module.js":"UZKG"}],"Flzo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function c(t,e,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=i(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=t.default.getComponent("PictureInPictureToggle"),d=function(t){f(r,h);var e=a(r);function r(){return n(this,r),e.apply(this,arguments)}return u(r,[{key:"enable",value:function(){c(b(r.prototype),"enable",this).call(this),this.show()}},{key:"disable",value:function(){c(b(r.prototype),"disable",this).call(this),this.hide()}}]),r}();t.default.registerComponent("PictureInPictureToggle",d);var v=d;exports.default=v;
},{"video.js":"qoWl"}],"UODL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("video.js")),e=require("../../utils/Events.js");function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=f(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=h();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=t.default.getComponent("Component"),b=5e3,g=function(t){a(r,v);var n=s(r);function r(t,e){var i;return o(this,r),(i=n.call(this,t,e)).init(),i}return u(r,[{key:"buildCSSClass",value:function(){return"image-copyright ".concat(c(d(r.prototype),"buildCSSClass",this).call(this))}},{key:"createEl",value:function(){return c(d(r.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass()})}},{key:"hideAfterTimeout",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;this.player().one(e.FIRST_PLAY,function(){setTimeout(t.hide.bind(t),n)})}},{key:"init",value:function(){var t=this;this.player().on(e.LOAD_START,function(){var e=t.player().currentSource(),n=e.imageCopyright,o=e.mediaType;t.reset(),r.hasImageCopyright(n,o)&&(t.updateInnerText(n),t.show(),t.hideAfterTimeout())})}},{key:"reset",value:function(){this.updateInnerText(""),this.hide()}},{key:"updateInnerText",value:function(t){this.el().innerText=t}}],[{key:"hasImageCopyright",value:function(t,e){return!!t&&"AUDIO"===e}}]),r}();t.default.registerComponent("ImageCopyright",g);var m=g;exports.default=m;
},{"video.js":"qoWl","../../utils/Events.js":"Like"}],"Fs0w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("video.js")),t=r(require("../../utils/SRGStreamType.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function l(e,t,r){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=h();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=e.default.getComponent("PlayToggle"),b=function(e){s(n,d);var r=f(n);function n(){return o(this,n),r.apply(this,arguments)}return i(n,[{key:"handlePlay",value:function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused");var e=t.default.isLive(this.player().currentSource().streamType),r=!t.default.isOnDemand(this.player().currentSource().streamType)&&"Chromecast"===this.player().tech().name();e||r?(this.removeClass("vjs-playing"),this.addClass("vjs-playing-live"),this.controlText("Stop")):(this.addClass("vjs-playing"),this.controlText("Pause"))}},{key:"handlePause",value:function(e){this.removeClass("vjs-playing-live"),this.removeClass("vjs-ended"),l(v(n.prototype),"handlePause",this).call(this,e)}},{key:"handleEnded",value:function(e){this.removeClass("vjs-playing-live"),l(v(n.prototype),"handleEnded",this).call(this,e)}}]),n}();e.default.registerComponent("PlayToggle",b);var m=b;exports.default=m;
},{"video.js":"qoWl","../../utils/SRGStreamType.js":"SrUl"}],"YzP1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("video.js")),t=n(require("../../utils/PlayerEvents.js"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}function l(e,t,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=c(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=v();return function(){var i,n=m(e);if(t){var r=m(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return y(this,i)}}function y(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=e.default.getComponent("SeekBar"),T=function(i){h(r,b);var n=f(r);function r(e,t){var i;return s(this,r),(i=n.call(this,e,t)).newTime=void 0,i.position=void 0,i.initListener(),i}return u(r,[{key:"initListener",value:function(){var e=this;this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.player().on(t.SEEKED,function(){e.displayTimeToolTip(!0)})}},{key:"update",value:function(){l(m(r.prototype),"update",this).call(this)}},{key:"getCurrentTime_",value:function(){return this.player().scrubbing()?this.player().getCache().currentTime:this.player().currentTime()}},{key:"createEl",value:function(){return l(m(r.prototype),"createEl",this).call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}},{key:"handleMouseDown",value:function(t){t&&t.stopPropagation(),"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||e.default.IS_CHROME||t.preventDefault(),e.default.dom.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.player().scrubbing(!0);var i=this.bar.el().ownerDocument;this.on(i,"mousemove",this.handleMouseMove),this.on(i,"mouseup",this.handleMouseUp),this.on(i,"touchmove",this.handleMouseMove),this.on(i,"touchend",this.handleMouseUp),this.calculateNewTime(t),this.player().currentTime(this.newTime),this.videoWasPlaying=!this.player().paused(),this.videoWasPlaying&&this.player().pause()}},{key:"handleMouseMove",value:function(e){this.displayTimeToolTip(!1),this.calculateNewTime(e),this.player().getCache().currentTime=this.newTime,this.player().currentTime(this.newTime),this.player().liveTracker&&this.player().liveTracker.isLive()||this.setPosition()}},{key:"handleMouseUp",value:function(t){t&&t.stopPropagation();var i=this.bar.el().ownerDocument;e.default.dom.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove),this.off(i,"mouseup",this.handleMouseUp),this.off(i,"touchmove",this.handleMouseMove),this.off(i,"touchend",this.handleMouseUp),this.player().liveTracker&&this.player().liveTracker.isLive()||(this.player().currentTime(this.newTime),this.setPosition()),this.player().scrubbing(!1),this.videoWasPlaying&&r.silencePromise(this.player().play())}},{key:"setPosition",value:function(){this.bar.update(this.newTime,l(m(r.prototype),"update",this).call(this));var e=this.player().duration()===1/0?this.player().liveTracker.liveWindow():this.player().duration();this.bar.el().style.width="".concat(r.percentage(this.newTime,e),"%")}},{key:"calculateNewTime",value:function(e){var t=this.calculateDistance(e),i=this.player().liveTracker;if(i&&i.isLive()){var n=i.seekableStart(),r=i.liveCurrentTime();this.newTime=n+t*i.liveWindow(),this.newTime>=r&&(this.newTime=r-10),this.newTime<=n&&(this.newTime=n+.1)}else this.newTime=t*this.player().duration(),this.newTime===this.player().duration()&&(this.newTime=this.newTime-.1)}},{key:"displayTimeToolTip",value:function(e){void 0!==this.bar.timeTooltip&&(e?this.bar.timeTooltip.show():this.bar.timeTooltip.hide())}}],[{key:"silencePromise",value:function(e){e.then(null,function(){})}},{key:"percentage",value:function(e,t){return e/t*100}}]),r}();T.prototype.playerEvent="timeupdate",e.default.registerComponent("SeekBarCustomComponent",T);var w=T;exports.default=w;
},{"video.js":"qoWl","../../utils/PlayerEvents.js":"lUBw"}],"fKfQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("video.js"));require("./seekbar-custom-component.js");var t=u(require("../../utils/SRGStreamType.js")),o=r(require("../../utils/PlayerEvents.js"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=r?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(o,u,i):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function u(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=y();return function(){var o,n=m(e);if(t){var r=m(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return h(this,o)}}function h(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=e.default.getComponent("ProgressControl"),b=function(n){l(u,v);var r=p(u);function u(t,o){var n;s(this,u);var i=e.default.mergeOptions({children:["SeekBarCustomComponent"]},o);return(n=r.call(this,t,i)).initListener(),n}return f(u,[{key:"initListener",value:function(){var e=this;this.player().on(o.LOAD_START,function(){t.default.isLive(e.player().currentSource().streamType)?e.hide():e.show()})}},{key:"handleMouseMove",value:function(t){var o=this.getChild("SeekBarCustomComponent");if(o){var n=o.getChild("mouseTimeDisplay"),r=o.el(),u=e.default.dom.getBoundingClientRect(r),i=e.default.dom.getPointerPosition(r,t).x;i>1?i=1:i<0&&(i=0),n&&n.update(u,i)}}},{key:"handleMouseSeek",value:function(e){var t=this.getChild("SeekBarCustomComponent");t&&t.handleMouseMove(e)}},{key:"handleMouseDown",value:function(e){var t=this.el().ownerDocument,o=this.getChild("SeekBarCustomComponent");o&&o.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)}},{key:"handleMouseUp",value:function(e){var t=this.el().ownerDocument,o=this.getChild("SeekBarCustomComponent");o&&o.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)}}]),u}();e.default.registerComponent("ProgressControl",b);var g=b;exports.default=g;
},{"video.js":"qoWl","./seekbar-custom-component.js":"YzP1","../../utils/SRGStreamType.js":"SrUl","../../utils/PlayerEvents.js":"lUBw"}],"H4T1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("video.js"));require("./progress-control-component.js");var e=u(require("../../utils/SRGStreamType.js")),r=o(require("../../utils/Events.js"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var i=o?Object.getOwnPropertyDescriptor(t,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=t[u]}return r.default=t,e&&e.set(t,r),r}function u(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=t.default.getComponent("BigPlayButton"),b=function(t){f(o,v);var n=l(o);function o(t,u){var i;return c(this,o),(i=n.call(this,t,u)).player().on(r.LOADED_DATA,function(){(e.default.isDvr(i.player().currentSource().streamType)||e.default.isLive(i.player().currentSource().streamType))&&i.player().el().classList.add("first-play")}),i.el().firstChild.addEventListener(r.ANIMATION_END,function(){i.player().paused()?e.default.isLive(i.player().currentSource().streamType)&&i.player().hasStarted(!1):(i.player().overlayComponent.hide(),i.player().el().classList.remove("first-play"))}),i}return o}();t.default.registerComponent("BigPlayButton",b);var O=b;exports.default=O;
},{"video.js":"qoWl","./progress-control-component.js":"fKfQ","../../utils/SRGStreamType.js":"SrUl","../../utils/Events.js":"Like"}],"snyy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("video.js"));require("./big-play-button-component.js");var e=n(require("../../utils/PlayerEvents.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var i=o?Object.getOwnPropertyDescriptor(t,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=t[u]}return n.default=t,e&&e.set(t,n),n}function o(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}function l(t,e,r){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=a(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function a(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=h();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=t.default.getComponent("Component"),g=function(r){s(o,O);var n=y(o);function o(e,r){var u;i(this,o);var c=t.default.mergeOptions({children:["BigPlayButton"]},r);return(u=n.call(this,e,c)).initListener(),u}return f(o,[{key:"initListener",value:function(){var t=this;this.player().on(e.SEEKING,function(){t.hide()}),this.player().on(e.SEEKED,function(){t.player().scrubbing()||t.show()}),this.player().on(e.PAUSE,function(){t.show()})}},{key:"createEl",value:function(){return l(d(o.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass()})}},{key:"buildCSSClass",value:function(){return"".concat(l(d(o.prototype),"buildCSSClass",this).call(this)," vjs-srgssr-overlay").trim()}}]),o}();O.registerComponent("OverlayComponent",g);var j=g;exports.default=j;
},{"video.js":"qoWl","./big-play-button-component.js":"H4T1","../../utils/PlayerEvents.js":"lUBw"}],"fHKc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("video.js")),t=u(require("../../utils/SRGStreamType.js")),r=u(require("../../utils/Utils.js")),n=i(require("../../utils/PlayerEvents.js"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=d();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=e.default.getComponent("CurrentTimeDisplay"),O=function(e){s(i,m);var o=y(i);function i(e,t){var r;return a(this,i),(r=o.call(this,e,t)).initListener(),r}return l(i,[{key:"initListener",value:function(){var e=this;this.player().on(n.DURATION_CHANGE,function(){setTimeout(function(){e.updateFormattedTime_(0)},1)})}},{key:"updateContent",value:function(){var e=this.player().scrubbing()?this.player().getCache().currentTime:this.player().currentTime();if(this.player().liveTracker&&this.player().liveTracker.isTracking()||t.default.isDvr(this.player().currentSource().streamType)){var n=this.player().controlBar.progressControl.SeekBarCustomComponent.getPercent(),o=this.player().liveTracker.liveWindow(),i=o-n*o;e=r.default.getSecondsSinceMidnight()-i}this.updateFormattedTime_(e)}}]),i}();e.default.registerComponent("CurrentTimeDisplay",O);var g=O;exports.default=g;
},{"video.js":"qoWl","../../utils/SRGStreamType.js":"SrUl","../../utils/Utils.js":"csCP","../../utils/PlayerEvents.js":"lUBw"}],"Xp9k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("video.js"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=s();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=e.default.getComponent("seekToLive"),v=function(e){u(n,y);var t=f(n);function n(e,o){var i;return r(this,n),(i=t.call(this,e,o)).controlText(i.localize("Seek to live, currently playing live")),i.updateLiveEdgeStatus(),i.initListener(),i}return i(n,[{key:"initListener",value:function(){var e=this;this.on(this.player(),"durationchange",function(){e.player().liveTracker&&e.on(e.player().liveTracker,"liveedgechange",e.updateLiveEdgeStatus)})}}]),n}();e.default.registerComponent("SeekToLive",v);var b=v;exports.default=b;
},{"video.js":"qoWl"}],"Zpd8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=i(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var n,o=b(t);if(e){var r=b(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=t.default.getComponent("Button"),d=function(t){f(n,h);var e=a(n);function n(t,r){var u;return o(this,n),(u=e.call(this,t,r)).controlText("Close"),u}return u(n,[{key:"buildCSSClass",value:function(){return"srg-menu__close-button vjs-icon-close ".concat(c(b(n.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){this.SRGMenuComponent.hideContainer()}},{key:"SRGMenuComponent",get:function(){return this.parentComponent_&&this.parentComponent_.parentComponent_?this.parentComponent_.parentComponent_:null}}]),n}();t.default.registerComponent("SRGMenuCloseButton",d);var v=d;exports.default=v;
},{"video.js":"qoWl"}],"qxG4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=t.default.getComponent("Component"),h=function(t){f(n,v);var e=a(n);function n(t,o){var u;return r(this,n),(u=e.call(this,t,o)).el().setAttribute("role",u.options().role||"menu"),u}return u(n,[{key:"createEl",value:function(){return c(b(n.prototype),"createEl",this).call(this,"div",{className:"".concat(this.options().className?this.options().className:""," srg-menu__panel")})}}]),n}();t.default.registerComponent("SRGMenuPanel",h);var d=h;exports.default=d;
},{"video.js":"qoWl"}],"MycA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=y();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=t.default.getComponent("Button"),h=function(e){l(o,d);var n=f(o);function o(){return r(this,o),n.apply(this,arguments)}return c(o,[{key:"createEl",value:function(){var e=t.default.dom.createEl("div",{className:"srg-menu__panel-back"});return e.appendChild(u(b(o.prototype),"createEl",this).call(this,void 0,{innerHTML:this.localize("Back")})),e}},{key:"buildCSSClass",value:function(){return"srg-menu__back-button ".concat(u(b(o.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(t){if(t.stopPropagation(),!this.options().clickHandler)throw new Error("".concat(this.constructor.name," must be initialized with a clickHandler option"));this.options().clickHandler()}}]),o}();t.default.registerComponent("SRGMenuBackButton",h);var v=h;exports.default=v;
},{"video.js":"qoWl"}],"LxHY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("video.js")),e=n(require("../../../../utils/Events.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var i=o?Object.getOwnPropertyDescriptor(t,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=t[u]}return n.default=t,e&&e.set(t,n),n}function o(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){return p(t)||s(t)||f(t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function p(t){if(Array.isArray(t))return t}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),t}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=j();return function(){var r,n=w(t);if(e){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g(this,r)}}function g(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?O(t):e}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=t.default.getComponent("Component"),_=function(t){v(n,P);var r=m(n);function n(t,e){var o;y(this,n);var u=(o=r.call(this,t,e)).options(),i=u.changeEvent,a=u.changeTarget;return i&&(void 0===a?function(){return t}:a)().on(i,function(){o.updateValue()}),o}return b(n,[{key:"dispatchValue",value:function(t){if(t!==this.getValue()){var e=a(this.name()),r=e[0],n=e.slice(1);this.updateProperty("".concat(r.toLowerCase()).concat(n.join("")),t)}}},{key:"updateProperty",value:function(t,r){var n=i({},t,r);this.player().trigger({type:e.MENU_VALUE_UPDATED,data:n})}},{key:"updateValue",value:function(){throw new Error("".concat(this.constructor.name," must overwrite the updateValue method."))}},{key:"closePanel",value:function(){this.options().handler.closePanel()}},{key:"addPanel",value:function(t){var e=this.options(),r=e.widget,n=e.handler;r&&n.addWidget(r),n.addPanel(t)}},{key:"getValue",value:function(){return this.options().value()}}]),n}();t.default.registerComponent("SRGMenuItem",_);var S=_;exports.default=S;
},{"video.js":"qoWl","../../../../utils/Events.js":"Like"}],"LN5j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("video.js")),t=l(require("./srg-menu-item.js")),n=u(require("../../../../utils/Events.js")),r=require("../../../../utils/KeyCodes.js");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var l=r?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function l(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=p(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=v();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(o){d(l,t.default);var u=h(l);function l(e,t){var o;return i(this,l),(o=u.call(this,e,t)).toggleEl.addEventListener(n.KEY_DOWN,function(e){[r.SPACE,r.ENTER].includes(e.keyCode)&&(e.preventDefault(),e.stopPropagation(),o.inputEl.checked=!o.inputEl.checked,o.onInputValueChange())}),o.inputEl.addEventListener(n.CLICK,function(){return o.onInputValueChange()}),o}return f(l,[{key:"onInputValueChange",value:function(){var e=this;setTimeout(function(){e.updateInputState(e.inputEl)},1e3*parseFloat(window.getComputedStyle(this.$(".slider")).transitionDuration))}},{key:"updateValue",value:function(){var e=!0===this.getValue();this.inputEl.checked=e,this.toggleEl.setAttribute("aria-pressed",e)}},{key:"updateInputState",value:function(e){this.dispatchValue(e.checked)}},{key:"createEl",value:function(){var e=document.createDocumentFragment();this.toggleEl=l.createToggleEl(this.localize(this.options().label)),this.inputEl=l.createInputEl();var t=l.createSpanEl(),n=this.createLabelEl();this.toggleEl.appendChild(this.inputEl),this.toggleEl.appendChild(t),e.appendChild(n),e.appendChild(this.toggleEl);var r=s(E(l.prototype),"createEl",this).call(this,"div",{className:"srg-menu__panel-item"});return this.updateValue(),r.appendChild(e),r}},{key:"createLabelEl",value:function(){return e.default.dom.createEl("span",{className:"srg-toggle-panel__label"},{},this.localize(this.options().label))}}],[{key:"createInputEl",value:function(){return e.default.dom.createEl("input",{className:"checkbox"},{type:"checkbox"})}},{key:"createToggleEl",value:function(t){return e.default.dom.createEl("label",{className:"switch"},{tabIndex:0,role:"button","aria-label":t})}},{key:"createSpanEl",value:function(){return e.default.dom.createEl("span",{className:"slider"})}}]),l}();e.default.registerComponent("SRGMenuToggleItem",m);var O=m;exports.default=O;
},{"video.js":"qoWl","./srg-menu-item.js":"LxHY","../../../../utils/Events.js":"Like","../../../../utils/KeyCodes.js":"KSE4"}],"loua":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("video.js")),t=o(require("../srg-menu-panel.js")),n=o(require("./srg-menu-item.js")),r=l(require("../../../../utils/Events.js"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}return n.default=e,t&&t.set(e,n),n}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=p(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=v();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=e.default.getComponent("Button"),P=function(a){d(o,n.default);var l=b(o);function o(e,t){var n;return u(this,o),(n=l.call(this,e,t)).renderPanel(),n}return s(o,[{key:"renderPanel",value:function(){var n=this;this.listPanel=new t.default(this.player(),{className:"srg-menu__panel-item--list"}),this.options().items.forEach(function(t){var r=new _(n.player(),{clickHandler:function(){n.dispatchValue(t.value)},el:e.default.dom.createEl("button",{className:n.getValue()===t.value?"srg-menu__panel-item--selected":""},{"aria-label":t.label,role:"menuitem"},e.default.dom.createEl("span",{className:"srg-menu__panel-item-label"},{},t.label))}).el();t.badge&&r.appendChild(e.default.dom.createEl("span",{className:"vjs-icon-".concat(t.badge," srg-menu__panel-item-badge")})),n.listPanel.el().appendChild(r)})}},{key:"updateValue",value:function(){this.button.innerText=this.getLabelValue(),this.button.setAttribute("aria-label","".concat(this.localize(this.options().label)," ").concat(this.getLabelValue())),this.renderPanel(),this.valueDispatched&&(this.valueDispatched=!1,this.button.focus())}},{key:"dispatchValue",value:function(e){f(g(o.prototype),"dispatchValue",this).call(this,e),this.closePanel(),this.valueDispatched=!0}},{key:"createEl",value:function(){var e=document.createDocumentFragment(),t=this.createLabelEl(),n=this.createLinkEl();e.appendChild(t),e.appendChild(n);var r=f(g(o.prototype),"createEl",this).call(this,"div",{className:"srg-menu__panel-item"});return r.appendChild(e),r}},{key:"createLabelEl",value:function(){return e.default.dom.createEl("span",{className:"srg-menu__panel-item__label"},{},this.localize(this.options().label))}},{key:"getLabelValue",value:function(){var e=this,t=this.options().items.filter(function(t){return t.value===e.getValue()});return t&&t.length?t.pop().label:null}},{key:"createLinkEl",value:function(){var t=this,n=this.getLabelValue();return this.button=new _(this.player(),{el:e.default.dom.createEl("button",{className:"srg-menu__panel-item__link"},{tabindex:0,role:"button","aria-label":"".concat(this.localize(this.options().label)," ").concat(this.localize(n))},this.localize(n))}).el(),this.button.addEventListener(r.CLICK,function(e){e.preventDefault(),e.stopPropagation(),t.addPanel(t.listPanel);var n=t.listPanel.el().firstChild;n&&n.focus()}),this.button}}]),o}();e.default.registerComponent("SRGMenuListItem",P);var O=P;exports.default=O;
},{"video.js":"qoWl","../srg-menu-panel.js":"qxG4","./srg-menu-item.js":"LxHY","../../../../utils/Events.js":"Like"}],"wYq8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("video.js")),t=l(require("../../../utils/Events.js")),n=require("../../../utils/KeyCodes.js"),i=u(require("../../../utils/Utils.js")),r=u(require("../../../utils/SupportedDevices.js")),o=u(require("./srg-menu-panel.js")),s=u(require("./srg-menu-back-button.js"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(null==e)return{};var n,i,r=y(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function y(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=O(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=E();return function(){var n,i=_(e);if(t){var r=_(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}require("./items/srg-menu-toggle-item.js"),require("./items/srg-menu-list-item.js");var w=e.default.getComponent("Component"),N="srg-menu--open",D={LIST:"SRGMenuListItem",TOGGLE:"SRGMenuToggleItem"},T=function(a){C(u,w);var l=S(u);function u(n,i){var o;b(this,u);var s=e.default.mergeOptions({children:u.createPanelContainerComponent(i),hasBeenPausedBefore:!1},i);return(o=l.call(this,n,s)).handleKeyboard=o.handleKeyboard.bind(k(o)),o.hide(),o.hideFromAccessibility(!0),o.overlay.on(t.CLICK,function(e){o.isContainerVisible()&&(e.stopPropagation(),o.hideContainer(!1))}),o.player().on(t.PLAY,function(){r.default.isTouchDevice&&o.isContainerVisible()&&o.hideContainer()}),o.player().on(t.CAN_PLAY,function(){o.buildMenu()}),o.stack=[],o.mainPanel=null,o.backButton=null,o.widget=null,o}return m(u,[{key:"updateState",value:function(){}},{key:"buildMenu",value:function(){this.updateState(),this.state=i.default.removeUndefinedValuesFromObject(this.state),this.init(this.state)}},{key:"init",value:function(e){var t=this,n={};this.stack=[],Object.keys(e).forEach(function(i){e[i].disabled||(n[i]=t.buildChildren(e[i]))}),0!==Object.keys(e).length&&0!==Object.keys(n).length?(this.mainPanel=new o.default(this.player(),{children:n}),this.backButton=new s.default(this.player(),{clickHandler:this.closePanel.bind(this)}),this.addPanel(this.mainPanel),this.show()):this.hide()}},{key:"buildChildren",value:function(e){var t=e.type,n=e.label,i=e.widget,r=(e.disabled,p(e,["type","label","widget","disabled"]));return i&&(r.widget=this.buildChildren(i)),h({componentClass:t,label:this.localize(n),handler:this},r)}},{key:"addPanel",value:function(e){this.stack.push(e),this.setPanel(e)}},{key:"closePanel",value:function(){this.stack.length<=1||(this.widget&&(this.widget=null),this.stack.pop(),this.setPanel(this.stack[this.stack.length-1]),this.setFocusToFirstElement())}},{key:"setPanel",value:function(t){if(this.removeChildren(),this.stack.length>1){var n=this.createHeader();if(this.container.panels.addChild(n),n.addChild(this.backButton),this.widget){var i=e.default.getComponent(this.widget.componentClass);this.widget=new i(this.player(),this.widget),n.addChild(this.widget)}}this.container.panels.addChild(t)}},{key:"closePanels",value:function(){for(;this.stack.length>1;)this.closePanel()}},{key:"removeChildren",value:function(){e.default.dom.emptyEl(this.container.panels.el()),this.container.panels.children().length=0}},{key:"addWidget",value:function(e){this.widget=e}},{key:"buildCSSClass",value:function(){return"srg-menu vjs-control ".concat(g(_(u.prototype),"buildCSSClass",this).call(this))}},{key:"createEl",value:function(){return g(_(u.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass()})}},{key:"createHeader",value:function(){return new w(this.player(),{name:"header",el:e.default.dom.createEl("div",{className:"srg-menu__panel-header"})})}},{key:"hideContainer",value:function(){var e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.off(t.KEY_DOWN,this.handleKeyboard),this.player().off(t.ON_ESC_PRESSED,this.handleKeyboard),this.removeClass(u.CSS_MENU_OPEN),this.hideFromAccessibility(!0),this.closePanels(),this.player().getCache().inactivityTimeout=2e3,this.player().options({inactivityTimeout:2e3}),this.setTimeout(function(){e.player().userActive(!1)},2e3),r.default.isTouchDevice&&this.player().paused()&&!this.options().hasBeenPausedBefore&&n&&(this.player().play(),this.options({hasBeenPausedBefore:!1}))}},{key:"hideFromAccessibility",value:function(e){this.container.el().setAttribute("aria-hidden",e),e?this.container.el().setAttribute("hidden",e):this.container.el().removeAttribute("hidden")}},{key:"isContainerVisible",value:function(){return this.hasClass(u.CSS_MENU_OPEN)}},{key:"showContainer",value:function(){var e=this;this.on(t.KEY_DOWN,this.handleKeyboard),this.player().on(t.ON_ESC_PRESSED,this.handleKeyboard),this.addClass(u.CSS_MENU_OPEN),this.hideFromAccessibility(!1),this.options({hasBeenPausedBefore:this.player().paused()}),this.player().one(t.USER_INACTIVE,function(){e.isContainerVisible()&&(e.player().userActive(!0),e.player().options({inactivityTimeout:0}))}),r.default.isTouchDevice&&!this.player().paused()&&this.player().pause(),this.setFocusToFirstElement()}},{key:"handleKeyboard",value:function(e){e.keyCode!==n.ESCAPE&&e.type!==t.ON_ESC_PRESSED||(e.preventDefault(),e.stopPropagation(),this.stack.length<=1?(this.hideContainer(),this.el().querySelector(".srg-menu__button").focus()):this.closePanel())}},{key:"setFocusToFirstElement",value:function(){var e=i.default.getKeyboardFocusableElements(this.container.panels.el());e&&e.length>0&&e[0].focus()}}],[{key:"createPanelContainerComponent",value:function(){return{container:{componentClass:"Component",children:e.default.mergeOptions({closeButton:{componentClass:"SRGMenuCloseButton"}},{panels:{componentClass:"Component",el:e.default.dom.createEl("div",{className:"srg-menu__container__panels"})}}),el:e.default.dom.createEl("div",{className:"srg-menu__container"})},overlay:{componentClass:"Component",el:e.default.dom.createEl("div",{className:"srg-menu__overlay"})}}}},{key:"CSS_MENU_OPEN",get:function(){return N}},{key:"PANEL_COMPONENTS_TYPES",get:function(){return D}}]),u}();e.default.registerComponent("SRGMenu",T);var R=T;exports.default=R;
},{"video.js":"qoWl","../../../utils/Events.js":"Like","../../../utils/KeyCodes.js":"KSE4","../../../utils/Utils.js":"csCP","../../../utils/SupportedDevices.js":"ZJSt","./srg-menu-panel.js":"qxG4","./srg-menu-back-button.js":"MycA","./items/srg-menu-toggle-item.js":"LN5j","./items/srg-menu-list-item.js":"loua"}],"BQU5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=t.default.getComponent("Button"),h=function(t){f(n,d);var e=l(n);function n(t,o){var u;return r(this,n),(u=e.call(this,t,o)).el().setAttribute("aria-expanded","false"),u}return u(n,[{key:"buildCSSClass",value:function(){return"srg-menu__button ".concat(i(b(n.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){this.SRGMenuComponent.isContainerVisible()?(this.SRGMenuComponent.hideContainer(),this.el().setAttribute("aria-expanded","false")):(this.SRGMenuComponent.showContainer(),this.el().setAttribute("aria-expanded","true"))}},{key:"SRGMenuComponent",get:function(){return this.parentComponent_}}]),n}();t.default.registerComponent("SRGMenuButton",h);var v=h;exports.default=v;
},{"video.js":"qoWl"}],"Vm0t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("video.js")),e=a(require("../srg-menu.js")),n=i(require("../../../../utils/Events.js")),r=i(require("../../../../utils/SRGQuality.js")),o=a(require("../../../../utils/SRGStreamType.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function a(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=y(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=P();return function(){var n,r=S(t);if(e){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=function(u){b(a,e.default);var i=v(a);function a(e,r){var o;c(this,a);var u=t.default.mergeOptions({children:{settingsButton:!0}},r);return(o=i.call(this,e,u)).continuousPlaybackOptionEnabled=!0,o.state={quality:{},speed:{}},e.on(n.CONTINUOUS_PLAYBACK_INTEGRATION_CHANGE,function(t){var e=t.data;o.continuousPlaybackOptionEnabled=e,o.stack.length&&o.buildMenu()}),o}return f(a,[{key:"updateState",value:function(){this.state.continuousPlayback=this.buildContinuousPlayback(),this.state.quality=this.buildQuality(),this.state.speed=this.buildSpeed()}},{key:"buildContinuousPlayback",value:function(){if(this.continuousPlaybackOptionEnabled){var t=this.player().options().SRGProviders.letterbox;return{label:"Continuous Playback",type:e.default.PANEL_COMPONENTS_TYPES.TOGGLE,disabled:!o.default.isOnDemand(this.player().currentSource().streamType),value:function(){return t.isContinuousPlaybackEnabled()},changeEvent:n.CONTINUOUS_PLAYBACK_CHANGE}}}},{key:"buildQuality",value:function(){var t=this.player().options().SRGProviders,o=t.letterbox,u=t.mediaComposition;return{label:"HD",type:e.default.PANEL_COMPONENTS_TYPES.TOGGLE,value:function(){return o.isHdMode()},changeEvent:n.QUALITY_CHANGE,disabled:!r.containQualities(u.getMainResources())}}},{key:"buildSpeed",value:function(){var t=this,r=this.player().options().playbackRates.map(function(t){return{label:1===t?"Normal":"".concat(t," x"),value:t}});return{label:"Speed",type:e.default.PANEL_COMPONENTS_TYPES.LIST,disabled:!o.default.isOnDemand(this.player().currentSource().streamType),items:r,value:function(){return t.player().playbackRate()},changeEvent:n.RATE_CHANGE}}},{key:"buildCSSClass",value:function(){return"settings-menu ".concat(p(S(a.prototype),"buildCSSClass",this).call(this))}}]),a}();t.default.registerComponent("SettingsMenu",E);var _=E;exports.default=_;
},{"video.js":"qoWl","../srg-menu.js":"wYq8","../../../../utils/Events.js":"Like","../../../../utils/SRGQuality.js":"mKEu","../../../../utils/SRGStreamType.js":"SrUl"}],"x5aq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=t.default.getComponent("SRGMenuButton"),v=function(t){f(n,d);var e=a(n);function n(t,o){var u;return r(this,n),(u=e.call(this,t,o)).controlText("Edit player settings"),u.el().setAttribute("aria-haspopup","true"),u}return u(n,[{key:"buildCSSClass",value:function(){return"srg-menu__settings-button ".concat(c(b(n.prototype),"buildCSSClass",this).call(this))}}]),n}();t.default.registerComponent("SettingsButton",v);var h=v;exports.default=h;
},{"video.js":"qoWl"}],"FQQI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("video.js")),e=n(require("../../items/srg-menu-item.js"));function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=s(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function s(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=h();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=t.default.getComponent("Button"),v="srg-menu__subtitles-size-selector__item--selected",b=function(n){l(i,e.default);var r=f(i);function i(){return o(this,i),r.apply(this,arguments)}return u(i,[{key:"init",value:function(){this.fontSizes=new Map,this.fontSizes.set(1,1),this.fontSizes.set(1.3,2),this.fontSizes.set(1.6,3),this.items=[]}},{key:"updateValue",value:function(){var t=this.fontSizes.get(this.getValue()),e=this.items[t];this.items.forEach(function(t){t===e?t.classList.add(v):t.classList.remove(v)})}},{key:"createEl",value:function(){var t=this;this.init();var e=document.createDocumentFragment();this.fontSizes.forEach(function(n,r){var o=t.createFontSizeEl(n,t.getValue()===r,function(e){e.stopPropagation(),t.dispatchValue(r)});t.items[n]=o,e.appendChild(o)});var n=c(d(i.prototype),"createEl",this).call(this,"div",{className:"srg-menu__subtitles-size-selector"});return n.appendChild(e),n}},{key:"createFontSizeEl",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=new m(this.player(),{clickHandler:r,el:t.default.dom.createEl("button",{className:"srg-menu__subtitles-size-selector__item size-selector-item--".concat(e," ").concat(n?"srg-menu__subtitles-size-selector__item--selected":"")},{},"A")});return o.createControlTextEl(o.el()),o.controlText(this.localize("Font size level {1}",[e])),o.el()}}]),i}();t.default.registerComponent("SRGSubtitlesMenuSizeItem",b);var _=b;exports.default=_;
},{"video.js":"qoWl","../../items/srg-menu-item.js":"LxHY"}],"nmLk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("video.js"));require("./items/srg-subtitles-menu-size-item.js");var e=o(require("../srg-menu.js")),r=o(require("../../../../utils/Utils.js")),n=i(require("../../../../utils/Events.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t}function f(t,e,r){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=p(t,e);if(n){var u=Object.getOwnPropertyDescriptor(n,e);return u.get?u.get.call(r):u.value}})(t,e,r||t)}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=g();return function(){var r,n=S(t);if(e){var u=S(this).constructor;r=Reflect.construct(n,arguments,u)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(u){b(o,e.default);var i=y(o);function o(e,r){var u;l(this,o);var a=t.default.mergeOptions({children:{subtitlesButton:!0}},r);return(u=i.call(this,e,a)).state={},u.setSubtitleButtonState=u.setSubtitleButtonState.bind(h(u)),u.player().textTracks().on(n.CHANGE,u.setSubtitleButtonState),u}return c(o,[{key:"updateState",value:function(){this.state.audioDescription=this.buildAudioDescription(),this.state.audio=this.buildAudio(),this.state.subtitles=this.buildSubtitles(),this.setSubtitleButtonState()}},{key:"setSubtitleButtonState",value:function(){var t=this.state.subtitles&&this.state.subtitles.value();t&&"off"!==t?this.player().$(".srg-menu__subtitles-button").classList.add("srg-menu__subtitles-button--active"):this.player().$(".srg-menu__subtitles-button").classList.remove("srg-menu__subtitles-button--active")}},{key:"buildSubtitles",value:function(){var t=this,r=Array.from(this.player().textTracks()).filter(function(t){var e=t.kind,r=t.language;return!["metadata","forced"].includes(e)&&r.length});if(!(r.length<1)){var u=r.map(function(t){var e=t.label,r=t.language,n=t.kind;return{label:e,value:r,badge:"captions"===n&&n}});return u.unshift({label:this.localize("Off"),value:"off"}),{label:"Subtitles",type:e.default.PANEL_COMPONENTS_TYPES.LIST,widget:this.buildSubtitleSizeSelector(),items:u,changeTarget:function(){return t.player().textTracks()},changeEvent:[n.ADD_TRACK,n.CHANGE],value:function(){var t=r.find(function(t){return"showing"===t.mode});return t?t.language:"off"}}}}},{key:"buildSubtitleSizeSelector",value:function(){var t=this;if(!this.player().tech().featuresNativeTextTracks)return{label:"Size Selector",type:"SRGSubtitlesMenuSizeItem",name:"subtitlesSize",changeEvent:n.TEXT_TRACK_SIZE_CHANGE,value:function(){return t.player().getChild("TextTrackDisplay").fontSize}}}},{key:"buildAudioDescription",value:function(){var t=this,u=Array.from(this.player().audioTracks()).filter(function(t){var e=t.kind;return r.default.isAudioDescription(e)});if(!(u.length<1))return{label:"Audio Description",type:e.default.PANEL_COMPONENTS_TYPES.TOGGLE,changeTarget:function(){return t.player().audioTracks()},changeEvent:[n.ADD_TRACK,n.CHANGE],value:function(){return u.filter(function(t){return!0===t.enabled}).length>0}}}},{key:"buildAudio",value:function(){var t=this,u=Array.from(this.player().audioTracks());if(!(u.length<2)){var i=u.map(function(t){var e=t.label,n=t.id,u=t.kind;return{label:e.split(" (AD)").join(""),value:n,badge:!!r.default.isAudioDescription(u)&&"audio-description"}});return{label:"Audio",type:e.default.PANEL_COMPONENTS_TYPES.LIST,items:i,changeTarget:function(){return t.player().audioTracks()},changeEvent:[n.ADD_TRACK,n.CHANGE],value:function(){var t=u.find(function(t){return t.enabled});return t?t.id:null}}}}},{key:"buildCSSClass",value:function(){return"subtitles-menu ".concat(f(S(o.prototype),"buildCSSClass",this).call(this))}}]),o}();t.default.registerComponent("SubtitlesMenu",m);var _=m;exports.default=_;
},{"video.js":"qoWl","./items/srg-subtitles-menu-size-item.js":"FQQI","../srg-menu.js":"wYq8","../../../../utils/Utils.js":"csCP","../../../../utils/Events.js":"Like"}],"NgAz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function c(t,e,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=i(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=t.default.getComponent("SRGMenuButton"),v=function(t){f(r,d);var e=a(r);function r(t,o){var u;return n(this,r),(u=e.call(this,t,o)).controlText("Audio and subtitles"),u.el().setAttribute("aria-haspopup","true"),u}return u(r,[{key:"buildCSSClass",value:function(){return"srg-menu__subtitles-button ".concat(c(b(r.prototype),"buildCSSClass",this).call(this))}}]),r}();t.default.registerComponent("SubtitlesButton",v);var h=v;exports.default=h;
},{"video.js":"qoWl"}],"Exzc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("video.js")),t=r(require("../../srg-menu-panel.js")),n=r(require("../../items/srg-menu-item.js"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=m();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=e.default.getComponent("Button"),b="srg-menu__panel-item--selected",h=function(r){a(i,n.default);var o=s(i);function i(){return u(this,i),o.apply(this,arguments)}return l(i,[{key:"updateValue",value:function(){var e=this.listElements.get(this.getValue());this.listElements.forEach(function(t){t===e?t.classList.add(b):t.classList.remove(b)})}},{key:"createEl",value:function(){var e=this;this.listElements=new Map;var n=new t.default(this.player(),{className:"srg-menu__panel-item--list"});return this.options().items.forEach(function(t){e.listElements.set(t.value,e.createListElement(t,n))}),n.el()}},{key:"createListElement",value:function(e,t){var n=this,r=e.label,o=e.value,u=this.getValue()===o,l=new d(this.player(),{clickHandler:function(){n.dispatchValue(o)},el:i.createButtonEl({label:r,isSelected:u})}).el();return t.el().appendChild(l),l}}],[{key:"createButtonEl",value:function(t){var n=t.label,r=t.isSelected;return e.default.dom.createEl("button",{className:r?b:""},{"aria-label":n,role:"menuitem"},e.default.dom.createEl("span",{className:"srg-menu__panel-item-label"},{},n))}}]),i}();e.default.registerComponent("SimpleListItem",h);var v=h;exports.default=v;
},{"video.js":"qoWl","../../srg-menu-panel.js":"qxG4","../../items/srg-menu-item.js":"LxHY"}],"w0m9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("video.js")),e=o(require("../../../../../utils/Events.js")),r=u(require("./simple-list-item.js"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var i=o?Object.getOwnPropertyDescriptor(t,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=t[u]}return r.default=t,e&&e.set(t,r),r}function u(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=v();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){a(o,r.default);var n=p(o);function o(t,r){var u;return c(this,o),(u=n.call(this,t,r)).clickComponent=r.scrollClickComponent,u.clickComponent.on(e.MENU_VALUE_SCROLL,function(){u.scrollValue()}),u}return l(o,[{key:"scrollValue",value:function(){var t=this,e=this.options().items,r=this.getValue();e.every(function(e,n,o){if(e.value===r){var u=o[(n+1)%o.length].value;return t.dispatchValue(u),!1}return!0})}}]),o}();t.default.registerComponent("ListScrollClickItem",h);var O=h;exports.default=O;
},{"video.js":"qoWl","../../../../../utils/Events.js":"Like","./simple-list-item.js":"Exzc"}],"MtBy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("video.js")),t=i(require("../srg-menu.js")),r=u(require("../../../../utils/Events.js")),n=i(require("../../../../utils/SRGStreamType.js"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function i(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=p(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=O();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}require("./items/list-scroll-click-item.js");var j=function(o){y(i,t.default);var u=d(i);function i(t,r){var n;a(this,i);var o=e.default.mergeOptions({children:{playbackRateButton:!0}},r);return(n=u.call(this,t,o)).state={speed:{}},n}return f(i,[{key:"updateState",value:function(){this.state.speed=this.buildSpeed()}},{key:"buildSpeed",value:function(){var e=this,t=this.player().options().playbackRates.map(function(e){return{label:"".concat(e," x"),value:e}});return{label:"Speed",type:"ListScrollClickItem",disabled:!n.default.isOnDemand(this.player().currentSource().streamType),items:t,value:function(){return e.player().playbackRate()},changeEvent:r.RATE_CHANGE,scrollClickComponent:this.playbackRateButton}}},{key:"buildCSSClass",value:function(){return"playback-rate-menu ".concat(s(m(i.prototype),"buildCSSClass",this).call(this))}}]),i}();e.default.registerComponent("PlaybackRateMenu",j);var g=j;exports.default=g;
},{"video.js":"qoWl","../srg-menu.js":"wYq8","../../../../utils/Events.js":"Like","../../../../utils/SRGStreamType.js":"SrUl","./items/list-scroll-click-item.js":"w0m9"}],"ZZX8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("video.js")),t=u(require("../../../../utils/SupportedDevices.js")),n=o(require("../../../../utils/Events.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=s(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=v();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=e.default.getComponent("SRGMenuButton"),j=function(e){p(o,_);var r=b(o);function o(e,u){var i;return a(this,o),(i=r.call(this,e,u)).controlText("Playback Rate"),i.el().setAttribute("aria-haspopup","true"),e.on([n.CAN_PLAY,n.RATE_CHANGE],function(){i.updateLabelValue(i.player().playbackRate())}),t.default.isTouchDevice?d(i):(i.on(n.MOUSE_ENTER,function(){i.addClass("vjs-hover"),i.SRGMenuComponent.isContainerVisible()||(i.SRGMenuComponent.showContainer(),i.el().setAttribute("aria-expanded","true"),i.SRGMenuComponent.overlay.one(n.MOUSE_ENTER,function(){i.SRGMenuComponent.hideContainer(),i.el().setAttribute("aria-expanded","false")}))}),i)}return l(o,[{key:"createEl",value:function(){var e=f(O(o.prototype),"createEl",this).call(this);return this.labelEl=f(O(o.prototype),"createEl",this).call(this,"div",{className:"vjs-playback-rate-value"}),e.appendChild(this.labelEl),e}},{key:"updateLabelValue",value:function(e){this.labelEl.innerText="".concat(e," x")}},{key:"handleClick",value:function(){t.default.isTouchDevice?this.trigger(n.MENU_VALUE_SCROLL):f(O(o.prototype),"handleClick",this).call(this)}},{key:"buildCSSClass",value:function(){return"srg-menu__playback-rate-button ".concat(f(O(o.prototype),"buildCSSClass",this).call(this))}}]),o}();e.default.registerComponent("PlaybackRateButton",j);var C=j;exports.default=C;
},{"video.js":"qoWl","../../../../utils/SupportedDevices.js":"ZJSt","../../../../utils/Events.js":"Like"}],"whWg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("../../utils/SupportedDevices.js")),t=n(require("../../utils/SRGEvents.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var c=function(){function r(t,n){o(this,r),(e.default.isChrome||e.default.isChromium)&&(this.localPlayer=t,this.receiverApplicationId=n,this.loadSenderFramework())}return s(r,[{key:"initializeCastApi",value:function(){var e=window,t=e.cast.framework,r=e.chrome;this.castFramework=t,this.castContext=this.castFramework.CastContext.getInstance(),this.castContextEventType=this.castFramework.CastContextEventType,this.sessionState=t.SessionState,this.castContext.setOptions({receiverApplicationId:this.receiverApplicationId,autoJoinPolicy:r.cast.AutoJoinPolicy.ORIGIN_SCOPED})}},{key:"loadSenderFramework",value:function(){var e=this,r=document.getElementById("chromecastSender");if(window.__onGCastApiAvailable=function(r){r&&(e.initializeCastApi(),e.localPlayer.trigger(t.CHROMECAST_SCRIPT_LOADED))},!r){var n=document.createElement("script");n.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",n.id="chromecastSender",n.async=!0,n.defer="defer",n.type="text/javascript",document.body.appendChild(n)}}}],[{key:"createGoogleCastLauncherButton",value:function(){var e=document.createElement("google-cast-launcher");return e.style.display="none",e}},{key:"getCurrentSession",value:function(){return window.cast.framework.CastContext.getInstance().getCurrentSession()}}]),r}(),u=c;exports.default=u;
},{"../../utils/SupportedDevices.js":"ZJSt","../../utils/SRGEvents.js":"a5op"}],"bCz8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("video.js")),t=s(require("../utils/chromecast-loader.js")),r=s(require("../../utils/SupportedDevices.js")),n=i(require("../../utils/Events.js")),o=s(require("../../utils/SRGStreamType.js"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function p(e,t,r){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=h(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=S();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=e.default.getComponent("Button"),T=function(e){y(i,g);var a=C(i);function i(e,o){var s;if(u(this,i),(s=a.call(this,e,o)).isCasting=!1,s.hide(),r.default.isChrome||r.default.isChromium){var c=s.player().options().chromeCastReceiver;s.chromecastLoader=new t.default(s.player(),c),s.player().one(n.CHROMECAST_SCRIPT_LOADED,function(){s.chromeCastButton=t.default.createGoogleCastLauncherButton(),s.initListeners(),s.el().append(s.chromeCastButton),s.updateControlText()})}return s}return f(i,[{key:"buildCSSClass",value:function(){return"".concat(p(b(i.prototype),"buildCSSClass",this).call(this)," srg-chromecast-control")}},{key:"handleClick",value:function(){this.isCasting&&this.chromecastLoader.castContext.getSessionState()===this.chromecastLoader.sessionState.SESSION_STARTED?this.chromecastLoader.castContext.endCurrentSession():this.chromeCastButton.click()}},{key:"updateControlText",value:function(){this.hasClass("srg-chromecast-active")?this.controlText(this.localize("Stop casting")):this.controlText(this.localize("Start casting"))}},{key:"initListeners",value:function(){var e=this,t=this.chromecastLoader,r=t.castContext,n=t.castContextEventType,o=t.castFramework.CastState,a=t.sessionState;r.addEventListener(n.CAST_STATE_CHANGED,function(t){switch(t.castState){case o.NO_DEVICES_AVAILABLE:e.hide();break;case o.NOT_CONNECTED:e.show(),e.isCasting=!1,e.removeClass("srg-chromecast-active"),e.updateControlText();break;case o.CONNECTING:e.player().pause(),e.player().tech().trigger("waiting");break;case o.CONNECTED:e.addClass("srg-chromecast-active"),e.updateControlText(),e.isCasting=!0}}),r.addEventListener(n.SESSION_STATE_CHANGED,function(t){switch(t.sessionState){case a.SESSION_ENDED:e.onChromecastEnded();break;case a.SESSION_STARTED:e.onChromecastStarted();break;default:e.isCasting=!1}})}},{key:"onChromecastStarted",value:function(){var e=this.player().options().SRGProviders.mediaComposition,t={currentTime:this.player().currentTime(),localPlayer:this.player(),muted:this.player().muted(),streamType:this.player().currentSource().streamType,title:e.getMainChapter().title,urn:e.getMainChapter().urn};this.player().loadTech_("Chromecast",t)}},{key:"onChromecastEnded",value:function(){var e=this,t=this.player().currentTime(),r=this.player().tech().options().source;if(r){var a=r.urn,i=r.streamType,s={src:{src:a,type:"srgssr/urn"}};this.player().loadMedia(s,function(){o.default.isOnDemand(i)?e.player().currentTime(t):e.player().one(n.PLAYING,function(){e.player().liveTracker.seekToLiveEdge()})})}}}]),i}();e.default.registerComponent("ChromecastToggleComponent",T);var O=T;exports.default=O;
},{"video.js":"qoWl","../utils/chromecast-loader.js":"whWg","../../utils/SupportedDevices.js":"ZJSt","../../utils/Events.js":"Like","../../utils/SRGStreamType.js":"SrUl"}],"wEyg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("video.js")),e=o(require("../../utils/PlayerEvents.js")),r=i(require("../../utils/PlayPortal.js"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function i(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t}function s(t,e,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=f(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=v();return function(){var r,n=O(t);if(e){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=t.default.getComponent("ClickableComponent"),g=function(t){p(o,j);var n=d(o);function o(t,e){var r;return c(this,o),(r=n.call(this,t,e)).update(),r.initListener(),r}return a(o,[{key:"initListener",value:function(){this.player().on(e.LOAD_START,this.update.bind(this))}},{key:"buildCSSClass",value:function(){return"".concat(s(O(o.prototype),"buildCSSClass",this).call(this)," vjs-srgssr-button vjs-srgssr-").concat(this.selectedBU)}},{key:"show",value:function(){s(O(o.prototype),"show",this).call(this),this.update()}},{key:"update",value:function(){var t,e=this.player().options().SRGProviders.mediaComposition,n=this.options().isComponentVisible,o=void 0===n||n,i=e&&e.getMainChapter(),u=this.el();o&&i&&(t=i.vendor),t?(this.selectedBU=t.toLowerCase(),u&&(u.className=this.buildCSSClass())):this.hide(),u&&(i?(u.setAttribute("href",r.default.redirectUrl(i)),u.title=this.localize("Open {1} in Play {2}",[i?i.title:"",i?i.vendor.toUpperCase():""])):(u.setAttribute("href",""),u.title=""))}},{key:"createEl",value:function(){return s(O(o.prototype),"createEl",this).call(this,"a",{innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>'})}}]),o}();t.default.registerComponent("SRGSSRButtonComponent",g);var m=g;exports.default=m;
},{"video.js":"qoWl","../../utils/PlayerEvents.js":"lUBw","../../utils/PlayPortal.js":"Bqqs"}],"VFJF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=y();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=t.default.getComponent("Component"),h="srgssr-end-screen-feature--show",v=function(t){f(n,d);var e=s(n);function n(){return r(this,n),e.apply(this,arguments)}return u(n,[{key:"mount",value:function(){this.show()}},{key:"unmount",value:function(){this.hide()}},{key:"show",value:function(){this.addClass(h)}},{key:"hide",value:function(){this.removeClass(h)}},{key:"buildCSSClass",value:function(){return"".concat(c(b(n.prototype),"buildCSSClass",this).call(this)," srgssr-end-screen-feature")}}]),n}();t.default.registerComponent("EndScreenFeature",v);var m=v;exports.default=m;
},{"video.js":"qoWl"}],"NM6w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("video.js")),t=a(require("../../utils/ImageProperties.js")),r=a(require("../../utils/PlayPortal.js")),n=a(require("../../utils/Utils.js")),o=u(require("../../utils/SRGEvents.js"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function a(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function p(e,t,r){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=d(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=g();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=e.default.getComponent("ClickableComponent"),E=function(i){m(a,_);var u=h(a);function a(e,t){var r;return c(this,a),(r=u.call(this,e,t)).itemInfo=t.itemInfo,r.updateChildren(),r}return s(a,[{key:"buildCSSClass",value:function(){return"".concat(p(O(a.prototype),"buildCSSClass",this).call(this)," item")}},{key:"createDurationEl",value:function(){return e.default.dom.createEl("div",{className:"item__duration"},{},this.formatDuration())}},{key:"createEl",value:function(){return p(O(a.prototype),"createEl",this).call(this,"a",{className:this.buildCSSClass()})}},{key:"createImageEl",value:function(){return e.default.dom.createEl("img",{alt:this.itemInfo.imageTitle,className:"item__img",src:"".concat(decodeURIComponent(this.itemInfo.imageUrl)).concat(t.default.WIDTH300)})}},{key:"createShowEl",value:function(){return e.default.dom.createEl("p",{className:"item__show"},{},this.itemInfo.show.title)}},{key:"createTitleEl",value:function(){return e.default.dom.createEl("p",{className:"item__title"},{},this.itemInfo.title)}},{key:"formatDuration",value:function(){return e.default.formatTime(n.default.millisecondsToSeconds(this.itemInfo.duration))}},{key:"handleClick",value:function(e){e.preventDefault();var t=this.player().options().SRGProviders.letterbox,r=this.itemInfo.urn;this.triggerRecommendationHit(r),t.prepareToPlayURN(r,void 0,{recommendationId:this.options().recommendationId},!0)}},{key:"triggerRecommendationHit",value:function(e){this.player().trigger({type:o.RECOMMENDATION_HIT,data:{urn:e}})}},{key:"updateChildren",value:function(){e.default.setAttributes(this.el(),{href:"".concat(r.default.redirectUrlFromSubdivision(this.itemInfo))});var t=document.createDocumentFragment(),n=a.createDescriptionEl();n.appendChild(this.createTitleEl()),n.appendChild(this.createShowEl()),n.appendChild(this.createDurationEl()),t.appendChild(this.createImageEl()),t.appendChild(n),this.el().appendChild(t),this.el().title=this.itemInfo.title,this.el().style.transitionDelay="".concat(Math.random().toString(),"s")}},{key:"urn",value:function(){return this.itemInfo.urn}}],[{key:"createDescriptionEl",value:function(){return e.default.dom.createEl("div",{className:"item__description"})}}]),a}();e.default.registerComponent("Item",E);var C=E;exports.default=C;
},{"video.js":"qoWl","../../utils/ImageProperties.js":"xj5b","../../utils/PlayPortal.js":"Bqqs","../../utils/Utils.js":"csCP","../../utils/SRGEvents.js":"a5op"}],"ZGQp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("video.js")),t=c(require("./end-screen-feature.js")),n=c(require("../item-component.js")),r=u(require("../../../utils/VideojsEvents.js")),o=u(require("../../../utils/SRGEvents.js"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=r?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=p(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=g();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=18,w=6,S=140,C=240,E=function(i){y(c,t.default);var u=m(c);function c(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,c),(t=u.call(this,e,n)).recommendationId=null,t.on(e,r.PLAYER_RESIZE,t.gridTemplate.bind(b(t))),t}return s(c,[{key:"mount",value:function(e){var t=this,r=e.mediaList,o=e.recommendationId;this.recommendationId=o,r.forEach(function(e){var r=new n.default(t.player(),{itemInfo:e,recommendationId:o});t.addChild(r)}),this.gridTemplate()}},{key:"unmount",value:function(){d(O(c.prototype),"unmount",this).call(this),this.removeChildren()}},{key:"gridTemplate",value:function(){var t=this,n=parseInt(e.default.computedStyle(this.el(),"paddingBottom"),10),r=this.width()/C|0,o=(this.height()-n)/S|0,i=r>w?w:r,u=r*o;this.itemCount=c.itemsToShow(u,i),this.el().style.gridTemplateColumns="1fr ".repeat(i).trim(),this.itemCount?this.show():this.hide(),this.children().forEach(function(e,n){n<=t.itemCount?e.show():e.hide()}),this.triggerRecommendationDisplayed({recommendationId:this.recommendationId})}},{key:"displayedItems",value:function(){return this.children().filter(function(e){return!e.hasClass("vjs-hidden")})}},{key:"removeChildren",value:function(){e.default.dom.emptyEl(this.el()),this.children().length=0}},{key:"triggerRecommendationDisplayed",value:function(){this.player().trigger(o.RECOMMENDATION_DISPLAYED)}},{key:"buildCSSClass",value:function(){return"".concat(d(O(c.prototype),"buildCSSClass",this).call(this)," srgssr-recommendation-grid")}},{key:"createEl",value:function(){var t=this.buildCSSClass();return e.default.dom.createEl("div",{className:t})}}],[{key:"itemsToShow",value:function(e,t){return e>j?j-j%t-1:e-e%t-1}}]),c}();e.default.registerComponent("RecommendationGrid",E);var P=E;exports.default=P;
},{"video.js":"qoWl","./end-screen-feature.js":"VFJF","../item-component.js":"NM6w","../../../utils/VideojsEvents.js":"M9YT","../../../utils/SRGEvents.js":"a5op"}],"YVC3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("video.js")),e=n(require("../../../utils/SRGEvents.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}function a(t,e,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=s(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function s(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=b();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=t.default.getComponent("Button"),g=function(t){f(n,w);var r=y(n);function n(t,e){var o;return u(this,n),(o=r.call(this,t,e)).duration=e.duration,o.timeout=null,o}return l(n,[{key:"start",value:function(){var t=this,r=1e3*this.duration;this.timeout=this.setTimeout(function(){t.trigger(e.CONTINUOUSPLAYBACK_DONE)},r),this.el().querySelector(".circle-red").style.animation="countdown ".concat(this.duration,"s linear forwards")}},{key:"reset",value:function(){this.clearTimeout(this.timeout),this.el().querySelector(".circle-red").style.animation="none"}},{key:"buildCSSClass",value:function(){return"".concat(a(v(n.prototype),"buildCSSClass",this).call(this)," srgssr-circular-countdown")}},{key:"createEl",value:function(){var t=a(v(n.prototype),"createEl",this).call(this,"button",{className:this.buildCSSClass()});return t.appendChild(n.createCountDownCircleSVG()),t}},{key:"handleClick",value:function(){this.trigger(e.CONTINUOUSPLAYBACK_DONE)}}],[{key:"createCountDownCircleSVG",value:function(){var t=document.createDocumentFragment(),e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add("circle-countdown"),e.setAttribute("width","50"),e.setAttribute("height","50");var r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.classList.add("circle-white"),r.setAttribute("cx","25"),r.setAttribute("cy","25"),r.setAttribute("r","23");var n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.classList.add("circle-red"),n.setAttribute("cx","25"),n.setAttribute("cy","25"),n.setAttribute("r","23");var o=document.createElementNS("http://www.w3.org/2000/svg","polyline");return o.setAttribute("fill","white"),o.setAttribute("points","14 10, 14 28, 29 19"),o.setAttribute("transform","rotate(270, 25, 19)"),t.appendChild(r),t.appendChild(n),t.appendChild(o),e.appendChild(t),e}}]),n}();t.default.registerComponent("CircularCountDown",g);var m=g;exports.default=m;
},{"video.js":"qoWl","../../../utils/SRGEvents.js":"a5op"}],"nLj2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("video.js")),e=n(require("../../../utils/SRGEvents.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var c=o?Object.getOwnPropertyDescriptor(t,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=t[u]}return n.default=t,e&&e.set(t,n),n}function o(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function l(t,e,r){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=a(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function a(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=d();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=t.default.getComponent("Button"),g=function(t){s(n,O);var r=y(n);function n(t,e){var o;return c(this,n),(o=r.call(this,t,e)).show(),o}return f(n,[{key:"buildCSSClass",value:function(){return"srg-cancel-button ".concat(l(h(n.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){this.trigger(e.CONTINUOUSPLAYBACK_CANCEL)}},{key:"createEl",value:function(){return l(h(n.prototype),"createEl",this).call(this,"button",{className:this.buildCSSClass(),innerHTML:this.localize("Cancel")})}}]),n}();t.default.registerComponent("CancelButton",g);var j=g;exports.default=j;
},{"video.js":"qoWl","../../../utils/SRGEvents.js":"a5op"}],"qarG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("video.js")),e=s(require("./end-screen-feature.js")),n=s(require("./circular-count-down.js")),r=s(require("../../../utils/ImageProperties.js")),i=s(require("./cancel-button.js")),o=s(require("../../../utils/Utils.js")),a=l(require("../../../utils/SRGEvents.js")),c=l(require("../../../utils/VideojsEvents.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function s(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function y(t,e,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=m(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function m(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=O();return function(){var n,r=P(t);if(e){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return k(this,n)}}function k(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?g(t):e}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E="srgssr-has-continuous-playback",_="continuous-playback--small",N=10,S=function(u){b(s,e.default);var l=v(s);function s(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,s),(e=l.call(this,t,n)).recommendationId=null,e.currentMediaURN=null,e.cancelContinuousPlayback=e.cancelContinuousPlayback.bind(g(e)),e.checkResize=e.checkResize.bind(g(e)),e.redirectToMedia=e.redirectToMedia.bind(g(e)),e}return h(s,[{key:"mount",value:function(t){var e=t.mediaList,n=t.recommendationId;e&&(this.recommendationId=n,this.updateShowInformation(e[0]),this.triggerContinuousPlaybackDisplayed(),y(P(s.prototype),"mount",this).call(this),this.player().addClass(E),this.timer.reset(),this.timer.start(),this.checkResize(),this.on(this.timer,a.CONTINUOUSPLAYBACK_DONE,this.redirectToMedia),this.on(this.cancelBtn,a.CONTINUOUSPLAYBACK_CANCEL,this.cancelContinuousPlayback),this.on(this.player(),c.PLAYER_RESIZE,this.checkResize))}},{key:"unmount",value:function(){y(P(s.prototype),"unmount",this).call(this),this.player().removeClass(E),this.reset()}},{key:"reset",value:function(){this.timer.reset(),this.off(this.timer,a.CONTINUOUSPLAYBACK_DONE,this.redirectToMedia),this.off(this.cancelBtn,a.CONTINUOUSPLAYBACK_CANCEL,this.cancelContinuousPlayback),this.off(this.player(),c.PLAYER_RESIZE,this.checkResize)}},{key:"triggerContinuousPlaybackDisplayed",value:function(){this.player().trigger(a.CONTINUOUS_PLAYBACK_DISPLAYED)}},{key:"cancelContinuousPlayback",value:function(){this.trigger(a.CONTINUOUSPLAYBACK_CANCEL)}},{key:"checkResize",value:function(){this.height()<=279?this.addClass(_):this.removeClass(_)}},{key:"redirectToMedia",value:function(){var t=this.player().options().SRGProviders.letterbox;this.triggerContinuousPlaybackHit(this.currentMediaURN),t.prepareToPlayURN(this.currentMediaURN,void 0,{recommendationId:this.recommendationId,forcePlay:!0},!0)}},{key:"updateShowInformation",value:function(e){var n=e.show,i=e.title,a=e.imageUrl,c=e.urn,u=e.duration;this.el().style.backgroundImage="url(".concat(decodeURIComponent(a)).concat(r.default.WIDTH700,")"),this.title.textContent=n.title,this.description.textContent=i,this.duration.textContent=this.localize("Duration: {1}",[t.default.formatTime(o.default.millisecondsToSeconds(u),"600")]),this.currentMediaURN=c}},{key:"triggerContinuousPlaybackHit",value:function(t){this.player().trigger({type:a.CONTINUOUS_PLAYBACK_HIT,data:{urn:t}})}},{key:"buildCSSClass",value:function(){return"".concat(y(P(s.prototype),"buildCSSClass",this).call(this)," vjs-poster srgssr-continuous-playback")}},{key:"createEl",value:function(){var t=document.createDocumentFragment(),e=this.buildCSSClass(),r=y(P(s.prototype),"createEl",this).call(this,"div",{className:e}),o=s.createContainerEl(),a=this.createComingNextEl();return this.title=s.createTitleEl(),this.description=s.createDescriptionEl(),this.duration=s.createDurationEl(),this.timer=new n.default(this.player(),{duration:N}),this.cancelBtn=new i.default(this.player()),t.appendChild(a),t.appendChild(this.title),t.appendChild(this.description),t.appendChild(this.duration),t.appendChild(this.timer.contentEl()),t.appendChild(this.cancelBtn.contentEl()),o.appendChild(t),r.appendChild(o),r}},{key:"createComingNextEl",value:function(){return t.default.dom.createEl("span",{className:"continuous-playback__coming-next"},{},this.localize("Coming next"))}}],[{key:"createContainerEl",value:function(){return t.default.dom.createEl("div",{className:"continuous-playback__container"})}},{key:"createTitleEl",value:function(){return t.default.dom.createEl("h1",{className:"continuous-playback__title"})}},{key:"createDescriptionEl",value:function(){return t.default.dom.createEl("p",{className:"continuous-playback__description"})}},{key:"createDurationEl",value:function(){return t.default.dom.createEl("span",{className:"continuous-playback__duration"})}}]),s}();t.default.registerComponent("ContinuousPlayback",S);var R=S;exports.default=R;
},{"video.js":"qoWl","./end-screen-feature.js":"VFJF","./circular-count-down.js":"YVC3","../../../utils/ImageProperties.js":"xj5b","./cancel-button.js":"nLj2","../../../utils/Utils.js":"csCP","../../../utils/SRGEvents.js":"a5op","../../../utils/VideojsEvents.js":"M9YT"}],"vhtp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=t.default.getComponent("Button"),d=function(t){l(n,v);var e=a(n);function n(t,o){var u;return r(this,n),(u=e.call(this,t,o)).show(),u}return u(n,[{key:"buildCSSClass",value:function(){return"srg-replay-button vjs-play-control vjs-control vjs-button vjs-paused vjs-ended ".concat(c(b(n.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){this.player().play()}},{key:"createEl",value:function(){return c(b(n.prototype),"createEl",this).call(this,"button",{className:this.buildCSSClass()})}}]),n}();t.default.registerComponent("ReplayButton",d);var h=d;exports.default=h;
},{"video.js":"qoWl"}],"bklm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("video.js")),e=n(require("./end-screen-feature.js")),r=n(require("./replay-button.js"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}function f(t,e,r){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=l(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=d();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){a(o,e.default);var n=p(o);function o(){return u(this,o),n.apply(this,arguments)}return i(o,[{key:"buildCSSClass",value:function(){return"".concat(f(h(o.prototype),"buildCSSClass",this).call(this)," srgssr-replay")}},{key:"createEl",value:function(){var t=document.createDocumentFragment(),e=this.buildCSSClass(),n=f(h(o.prototype),"createEl",this).call(this,"div",{className:e});return this.replayBtn=new r.default(this.player()),t.appendChild(this.replayBtn.contentEl()),n.appendChild(t),n}}]),o}();t.default.registerComponent("Replay",v);var m=v;exports.default=m;
},{"video.js":"qoWl","./end-screen-feature.js":"VFJF","./replay-button.js":"vhtp"}],"dJny":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/regenerator")),t=c(require("video.js")),n=s(require("../../../utils/PlayerEvents.js")),o=s(require("../../../utils/SRGEvents.js")),r=c(require("./recommendation-grid-component.js")),i=c(require("./continuous-playback-component.js")),a=c(require("./replay-component.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n,o,r,i,a){try{var u=e[i](a),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(o,r)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var i=e.apply(t,n);function a(e){d(i,o,r,a,u,"next",e)}function u(e){d(i,o,r,a,u,"throw",e)}a(void 0)})}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=b(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=E();return function(){var n,o=R(e);if(t){var r=R(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=t.default.getComponent("Component"),O=.9,g=.5,j="srgssr-end-screen--show",L=function(u){v(c,w);var s=k(c);function c(e,t){var n;return f(this,c),(n=s.call(this,e,t)).recommendationComponent=new r.default(n.player()),n.continuousPlaybackComponent=new i.default(n.player()),n.replayComponent=new a.default(n.player()),n.mountedComponent=null,n.buildEndScreen=n.buildEndScreen.bind(S(n)),n.hideAndReset=n.hideAndReset.bind(S(n)),n.cancelContinuousPlayback=n.cancelContinuousPlayback.bind(S(n)),n.initListeners(e),n}return h(c,[{key:"buildEndScreen",value:function(){var t=p(e.default.mark(function t(){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPlayerAtEnd()){e.next=2;break}return e.abrupt("return");case 2:if(this.mediaSetLoaded&&this.mediaList){e.next=5;break}return e.next=5,this.preloadMediaSet();case 5:this.addClass(j),this.isContinuousPlaybackEnabled()?this.mountContinuousPlaybackComponent():this.areRecommendationsEnabled()?this.mountRecommendationGridComponent():this.mountReplay();case 7:case"end":return e.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"cancelContinuousPlayback",value:function(){this.unmountCurrentComponent(),this.off(this.continuousPlaybackComponent,o.CONTINUOUSPLAYBACK_CANCEL,this.cancelContinuousPlayback),this.areRecommendationsEnabled()?this.mountRecommendationGridComponent():this.mountReplay()}},{key:"mountContinuousPlaybackComponent",value:function(){this.addChild(this.continuousPlaybackComponent),this.mountedComponent=this.continuousPlaybackComponent,this.continuousPlaybackComponent.mount({mediaList:this.mediaList,recommendationId:this.options().recommendationId}),this.on(this.continuousPlaybackComponent,o.CONTINUOUSPLAYBACK_CANCEL,this.cancelContinuousPlayback)}},{key:"mountRecommendationGridComponent",value:function(){this.addChild(this.recommendationComponent),this.mountedComponent=this.recommendationComponent,this.recommendationComponent.mount({mediaList:this.mediaList,recommendationId:this.options().recommendationId})}},{key:"mountReplay",value:function(){this.addChild(this.replayComponent),this.mountedComponent=this.replayComponent,this.replayComponent.mount()}},{key:"getMediaList",value:function(){var t=p(e.default.mark(function t(){var n,o,r,i,a;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.player().options().SRGProviders.mediaComposition.getMainChapter(),o=n.vendor,r=n.id,i=n.mediaType,a=this.player().options().SRGProviders.dataService,e.abrupt("return",a.getEndScreenList(o,i,r));case 3:case"end":return e.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"initListeners",value:function(e){var t=this;this.on(e,[n.ENDED,n.SEEKED],this.buildEndScreen),this.on(e,n.TIME_UPDATE,this.preloadMediaSet.bind(this)),[n.LOAD_START,n.PLAYING,n.ERROR,n.SEEKING].forEach(function(n){t.on(e,n,t.hideAndReset)})}},{key:"loadMediaSet",value:function(){var t=p(e.default.mark(function t(){var n,o,r;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMediaList();case 2:n=e.sent,o=n.mediaList,r=n.recommendationId,this.options().recommendationId=r,this.mediaList=o;case 7:case"end":return e.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"preloadMediaSet",value:function(){var t=p(e.default.mark(function t(){var n;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.player().duration()*O,!(this.player().currentTime()>=n)||this.mediaSetLoaded){e.next=5;break}return this.mediaSetLoaded=!0,e.next=5,this.loadMediaSet();case 5:case"end":return e.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"hideAndReset",value:function(){this.isShown()&&(this.mediaSetLoaded=!1,this.removeClass(j),this.unmountCurrentComponent())}},{key:"unmountCurrentComponent",value:function(){this.mountedComponent&&(this.mountedComponent.unmount(),this.removeChild(this.mountedComponent))}},{key:"isPlayerAtEnd",value:function(){return this.player().ended()||this.player().currentTime()>this.player().duration()-g}},{key:"isContinuousPlaybackEnabled",value:function(){return this.player().options().SRGProviders.letterbox.isContinuousPlaybackEnabled()}},{key:"areRecommendationsEnabled",value:function(){return this.player().options().SRGProviders.letterbox.areRecommendationsEnabled()}},{key:"isShown",value:function(){return this.hasClass(j)}},{key:"displayedItems",value:function(){return this.recommendationComponent.displayedItems()}},{key:"createEl",value:function(){var e=this.buildCSSClass();return t.default.dom.createEl("div",{className:e})}},{key:"buildCSSClass",value:function(){return"".concat(y(R(c.prototype),"buildCSSClass",this).call(this)," srgssr-end-screen")}}]),c}();t.default.registerComponent("EndScreen",L);var x=L;exports.default=x;
},{"@babel/runtime/regenerator":"u8BV","video.js":"qoWl","../../../utils/PlayerEvents.js":"lUBw","../../../utils/SRGEvents.js":"a5op","./recommendation-grid-component.js":"ZGQp","./continuous-playback-component.js":"qarG","./replay-component.js":"bklm"}],"eYPg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("video.js")),e=n(require("../../utils/SRGEvents.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return u(t)||l(t)||c(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function l(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function u(t){if(Array.isArray(t))return f(t)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),t}function v(t,e,r){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=y(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=S();return function(){var r,n=D(t);if(e){var i=D(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?O(t):e}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=t.default.getComponent("Component"),x=["Days","Hours","Minutes","Seconds"],j=1e3,E=0,k=1,P=2,_=3,M=-5e3,T=function(r){m(i,w);var n=g(i);function i(t,r){var o;return d(this,i),(o=n.call(this,t,r)).request={},o.setTimeout(o.periodicCall.bind(O(o)),j),t.on(e.MEDIACOMPOSITION_LOADED,o.updateStartDate.bind(O(o))),o.updateStartDate(),o}return h(i,[{key:"createSeparators",value:function(){var e=document.createDocumentFragment();this.separators=[];for(var r=0;r<3;r++)this.separators[r]=e.appendChild(t.default.dom.createEl("div",{className:"separator-".concat(r+1),innerHTML:":"}));return e}},{key:"createTexts",value:function(){var e=document.createDocumentFragment();this.texts=[];for(var r=0;r<x.length;r++)this.texts[r]=e.appendChild(t.default.dom.createEl("div",{className:"text text-".concat(x[r].toLowerCase()," flexCentered"),innerHTML:this.localize("".concat(x[r]))}));return e}},{key:"createDigits",value:function(){var e=document.createDocumentFragment();this.digits=[];for(var r=0;r<x.length;r++)this.digits[r]=e.appendChild(t.default.dom.createEl("div",{className:"".concat(x[r].toLowerCase()," flexCentered"),innerHTML:'<div class="digit">0</div><div class="digit">0</div>'}));return e}},{key:"buildCSSClass",value:function(){return"".concat(v(D(i.prototype),"buildCSSClass",this).call(this)," srgssr-countdown")}},{key:"createEl",value:function(){var e=v(D(i.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass()}),r=v(D(i.prototype),"createEl",this).call(this,"div",{className:"timer"}),n=document.createDocumentFragment();return n.appendChild(this.createTexts()),n.appendChild(this.createSeparators()),n.appendChild(this.createDigits()),r.appendChild(n),e.appendChild(r),this.description=e.appendChild(t.default.dom.createEl("div",{className:"description"})),e}},{key:"periodicCall",value:function(){this.updateContent(),this.setTimeout(this.periodicCall.bind(this),j)}},{key:"showDuration",value:function(){var t=this.startDate-Date.now(),e=t<0&&t>=M?0:t,r=e/1e3,n=r/60,o=n/60,s=o/24;e<0?(i.addClass([].concat(a(this.digits),a(this.texts),a(this.separators)),"invisible"),i.removeClass([this.description],"invisible"),this.description.textContent=this.localize("Playback will begin shortly")):s>=100?(i.addClass([].concat(a(this.digits),a(this.texts),a(this.separators)),"invisible"),i.removeClass([this.description],"invisible"),this.description.textContent=this.localize("Content will be available in {1} days",[0|s])):(i.removeClass([].concat(a(this.digits),a(this.texts),a(this.separators)),"invisible"),i.addClass([this.description],"invisible"),s>=1?(i.bindElement(this.digits[E],0|s),i.removeClass([this.digits[E],this.separators[0],this.texts[E]],"invisible")):i.addClass([this.digits[E],this.separators[0],this.texts[E]],"invisible"),o>=1||s>=1?(i.bindElement(this.digits[k],o%24),i.removeClass([this.digits[k],this.separators[1],this.texts[k]],"invisible")):i.addClass([this.digits[k],this.separators[1],this.texts[k]],"invisible"),i.bindElement(this.digits[P],n%60),i.bindElement(this.digits[_],r%60))}},{key:"updateContent",value:function(){this.showDuration()}},{key:"updateStartDate",value:function(){var t=this.player().options().SRGProviders.mediaComposition;this.startDate=t.getMainValidFromDate().getTime(),this.updateContent()}}],[{key:"formatDigit",value:function(t){return t<10?"0".concat(t):t}},{key:"splitNumber",value:function(t){return t.toString().split("")}},{key:"bindElement",value:function(t,e){var r=i.splitNumber(i.formatDigit(e));t.querySelectorAll(".digit").forEach(function(t,e){t.textContent=r[e]})}},{key:"addClass",value:function(t,e){t.forEach(function(t){t.classList.add(e)})}},{key:"removeClass",value:function(t,e){t.forEach(function(t){t.classList.remove(e)})}}]),i}();t.default.registerComponent("CountDown",T);var R=T;exports.default=R;
},{"video.js":"qoWl","../../utils/SRGEvents.js":"a5op"}],"xHpO":[function(require,module,exports) {
module.exports={RTS:"https://www.rts.ch/entreprise/drm/9959798-la-ssr-adopte-le-cryptage-numerique.html",SRF:"https://www.srf.ch/hilfe/website-und-apps/digitale-verschluesselung",RTR:"https://www.rtr.ch/drm",RSI:"https://www.rsi.ch/chi-siamo/mestieri/La-SSR-introduce-la-codifica-digitale-11038056.html",SWI:""};
},{}],"Unpf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("video.js"));require("./count-down.js");var t=o(require("../../utils/DRMErrorPage.json")),r=o(require("../../errors/errors.js"));function o(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=l(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=v();return function(){var r,o=h(e);if(t){var n=h(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=e.default.getComponent("ErrorDisplay"),b=function(o){f(u,m);var n=p(u);function u(t,r){i(this,u);var o=e.default.mergeOptions(r,{pauseOnOpen:!0,fillAlways:!0,temporary:!1,uncloseable:!0});return n.call(this,t,o)}return a(u,[{key:"description",value:function(){var e=this.player().error();return e&&e.message}},{key:"close",value:function(){this.removeChild("countDown"),c(h(u.prototype),"close",this).call(this)}},{key:"content",value:function(){var t=this.overrideVideoJSError(this.player().error());if(!t)return null;if(r.default.ERROR_BLOCKING_REASON_STARTDATE.type===t.type)return this.countDownEl();var o=e.default.dom.createEl("div",{className:"".concat(t.iconClass||"vjs-icon-error"," icon")}),n=e.default.dom.createEl("div",{className:"text"},{},this.createHrefEl(t)||this.localize(t.message));return e.default.dom.createEl("div",{className:"content"},{},[o,n])}},{key:"countDownEl",value:function(){var e=this.addChild("countDown"),t=this.player().options().SRGProviders.mediaComposition;return this.player().poster(t.getMainChapterImageUrl()),e.el()}},{key:"createHrefEl",value:function(r){if(r.hasLink){var o=this.player().options().SRGProviders.mediaComposition.getMainChapter().vendor,n=r.hasLink?t.default[o]:void 0;return e.default.dom.createEl("a",{className:"error__href"},{target:"_blank",href:n},this.localize(r.message))}}},{key:"overrideVideoJSError",value:function(e){if(e)return e.type?e:(this.player().error(r.default.ERROR_UNKNOWN),this.player().error())}}]),u}();e.default.registerComponent("ErrorDisplay",b);var O=b;exports.default=O;
},{"video.js":"qoWl","./count-down.js":"eYPg","../../utils/DRMErrorPage.json":"xHpO","../../errors/errors.js":"LWrW"}],"jbQ6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("video.js")),e=r(require("../../utils/Utils.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function c(t,e,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=f(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=d();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=t.default.getComponent("TimeTooltip"),h=function(r){a(i,b);var n=p(i);function i(){return o(this,i),n.apply(this,arguments)}return u(i,[{key:"update",value:function(t,e,r){c(v(i.prototype),"update",this).call(this,t,e,r)}},{key:"updateTimeOnSeek",value:function(e){t.default.dom.textContent(this.el(),e)}},{key:"updateTime",value:function(t,r,n,o){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var u;i.player_.duration();if(i.player_.liveTracker&&i.player_.liveTracker.isLive()){var c=i.player_.liveTracker.liveWindow(),f=c-r*c,a=e.default.getSecondsSinceMidnight();u=e.default.formatTime(a-f)}else u=e.default.formatTime(n);i.update(t,r,u),o&&o()})}}]),i}();t.default.registerComponent("TimeTooltip",h);var m=h;exports.default=m;
},{"video.js":"qoWl","../../utils/Utils.js":"csCP"}],"aw1L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function i(t,e,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=c(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=t.default.getComponent("Button"),d=function(t){f(r,v);var e=a(r);function r(){return n(this,r),e.apply(this,arguments)}return u(r,[{key:"buildCSSClass",value:function(){return"".concat(i(b(r.prototype),"buildCSSClass",this).call(this)," srgssr-subdivisions__arrow subdivisions-arrow-prev")}},{key:"handleClick",value:function(t){t.preventDefault()}}]),r}();t.default.registerComponent("SubdivisionsContainerArrowLeft",d);var h=d;exports.default=h;
},{"video.js":"qoWl"}],"P92b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("video.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function i(t,e,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=c(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=t.default.getComponent("Button"),v=function(t){f(r,d);var e=a(r);function r(){return n(this,r),e.apply(this,arguments)}return u(r,[{key:"buildCSSClass",value:function(){return"".concat(i(b(r.prototype),"buildCSSClass",this).call(this)," srgssr-subdivisions__arrow subdivisions-arrow-next").trim()}},{key:"handleClick",value:function(t){t.preventDefault()}}]),r}();t.default.registerComponent("SubdivisionsContainerArrowRight",v);var h=v;exports.default=h;
},{"video.js":"qoWl"}],"i674":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("video.js")),t=s(require("../../../errors/errors.js")),r=s(require("../../../utils/ImageProperties.js")),n=s(require("../../../utils/PlayPortal.js")),i=s(require("../../../utils/Utils.js")),o=a(require("../../../utils/Events.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function p(e,t,r){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=b(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=k();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=e.default.getComponent("ClickableComponent"),E=function(u){v(s,O);var a=h(s);function s(e,t){var r;return l(this,s),(r=a.call(this,e,t)).subdivision=t.subdivision,r.updateChildren(),r}return d(s,[{key:"buildCSSClass",value:function(){return"".concat(p(S(s.prototype),"buildCSSClass",this).call(this)," subdivision")}},{key:"createDescriptionEl",value:function(){return e.default.dom.createEl("p",{className:"subdivision__description"},{},this.subdivision.title)}},{key:"createDurationEl",value:function(){return e.default.dom.createEl("div",{className:"subdivision__duration"},{},this.formatDuration())}},{key:"createEl",value:function(){return p(S(s.prototype),"createEl",this).call(this,"a",{className:this.buildCSSClass()})}},{key:"createImageEl",value:function(){return e.default.dom.createEl("img",{alt:this.subdivision.imageTitle,className:"subdivision__img",src:"".concat(decodeURIComponent(this.subdivision.imageUrl)).concat(r.default.WIDTH200)},{"aria-hidden":!0})}},{key:"formatDuration",value:function(){return e.default.formatTime(i.default.millisecondsToSeconds(this.subdivision.duration))}},{key:"handleClick",value:function(e){var t=this.player().options().SRGProviders.letterbox;e.preventDefault(),t.switchToUrn(this.subdivision.urn)}},{key:"setSelected",value:function(e){e?this.addClass("subdivision--selected"):this.removeClass("subdivision--selected")}},{key:"updateChildren",value:function(){if(e.default.setAttributes(this.el(),{href:"".concat(n.default.redirectUrlFromSubdivision(this.subdivision))}),this.subdivision.blockReason){var t=this.el().querySelector(".vjs-icon-placeholder"),r=t.getAttribute("data-icon");r&&t.removeAttribute(r),this.el().setAttribute("data-blockReason",this.subdivision.blockReason),t.classList.add(s.getblockReasonIcon(this.subdivision.blockReason)),t.setAttribute("data-icon",s.getblockReasonIcon(this.subdivision.blockReason))}var i=document.createDocumentFragment();i.appendChild(this.createImageEl()),i.appendChild(this.createDurationEl()),i.appendChild(this.createDescriptionEl()),this.el().appendChild(i),this.el().title=this.subdivision.title}},{key:"urn",value:function(){return this.subdivision.urn}}],[{key:"getblockReasonIcon",value:function(e){var r=t.default["ERROR_BLOCKING_REASON_".concat(e)];return void 0!==r?r.iconClass:""}},{key:"seekToSegment",value:function(e,t){var r=t.markIn>=0?i.default.millisecondsToSeconds(t.markIn):void 0;e.scrubbing(!0),e.trigger(o.SEEKING),e.currentTime(r),e.scrubbing(!1),e.trigger(o.SEEKED),e.trigger({type:o.SEGMENT_SWITCHED,data:{analyticsMetadata:t.analyticsMetadata,origin:"click",playing:!e.paused()&&e.hasStarted()}})}},{key:"width",get:function(){return 142}}]),s}();e.default.registerComponent("Subdivision",E);var C=E;exports.default=C;
},{"video.js":"qoWl","../../../errors/errors.js":"LWrW","../../../utils/ImageProperties.js":"xj5b","../../../utils/PlayPortal.js":"Bqqs","../../../utils/Utils.js":"csCP","../../../utils/Events.js":"Like"}],"G9PY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("video.js")),t=u(require("./subdivision.js")),n=u(require("../../../dataProvider/services/SegmentService.js")),r=i(require("../../../utils/PlayerEvents.js"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=r?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=S();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=e.default.getComponent("Component"),O=200,P=50,j=function(o){p(u,m);var i=y(u);function u(e,t){var o;return c(this,u),(o=i.call(this,e,t)).on(e,n.default.SEGMENT_CHANGE,o.updateSelectionForUrn.bind(b(o))),o.on(e,r.LOAD_START,o.updateSelectionForCurrentPlayer.bind(b(o))),o.on(e,r.SEEKED,o.disablePreviousSelectionAfterSeeking.bind(b(o))),o.on("wheel",function(e){e.deltaY>0?o.el().scrollLeft+=P:o.el().scrollLeft-=P,e.preventDefault()}),o}return a(u,[{key:"disablePreviousSelectionAfterSeeking",value:function(){if(!this.player().scrubbing()){var e=this.player().currentTime();this.children().forEach(function(t){var r=t.options().subdivision,o=n.default.doesSegmentContainTime(r,e);o||t.setSelected(o)})}}},{key:"updateSelectionForUrn",value:function(e){var t=e.data,n=this.selectByUrn(t);n>=0&&this.scrollToIndex(n)}},{key:"updateSelectionForCurrentPlayer",value:function(){var e,t=this.player(),r=t.currentSource().pendingSegment;e=r?r.urn:t.options().SRGProviders.mediaComposition.chapterUrn;var o=t.currentTime(),i=-1;this.children().forEach(function(t,r){var u=t.options().subdivision,l=n.default.doesSegmentContainTime(u,o)||u.urn===e;t.setSelected(l),l&&(i=r)}),i>=0&&this.scrollToIndex(i)}},{key:"selectByUrn",value:function(e){var t=-1;return this.children().forEach(function(n,r){var o=n.urn()===e;n.setSelected(o),o&&(t=r)}),t}},{key:"buildCSSClass",value:function(){return"".concat(f(g(u.prototype),"buildCSSClass",this).call(this)," subdivisions__list")}},{key:"setSubdivisions",value:function(n,r){var o=this;e.default.dom.emptyEl(this.el()),r.subdivisions.filter(function(e){return e.displayable}).forEach(function(i){var u=e.default.mergeOptions({subdivision:i},r);o.addChild(new t.default(n,u)).addClass("subdivision--show")}),this.updateSelectionForCurrentPlayer()}},{key:"canGoLeft",value:function(){return this.el().scrollLeft>0}},{key:"canGoRight",value:function(){var e=this.el();return e.scrollLeft<e.scrollWidth-e.clientWidth}},{key:"createEl",value:function(){return f(g(u.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass()})}},{key:"scrollLeft",value:function(){var e=this.el();this.canGoLeft(e)&&this.scrollTo(e.scrollLeft-t.default.width,O)}},{key:"scrollRight",value:function(){var e=this.el();this.canGoRight(e)&&this.scrollTo(e.scrollLeft+t.default.width,O)}},{key:"scrollTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.el(),o=r.scrollLeft,i=e-o,l=0;!function e(){l+=20;var c=u.easeInOutQuad(l,o,i,t);r.scrollLeft=c,l<t?setTimeout(e,20):n&&n()}()}},{key:"scrollToIndex",value:function(e){var n=e*t.default.width;this.scrollTo(n,O)}}],[{key:"easeInOutQuad",value:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}}]),u}();e.default.registerComponent("SubdivisionsList",j);var w=j;exports.default=w;
},{"video.js":"qoWl","./subdivision.js":"i674","../../../dataProvider/services/SegmentService.js":"HwTb","../../../utils/PlayerEvents.js":"lUBw"}],"Wm7W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("video.js"));require("./subdivisions-container-arrow-left.js"),require("./subdivisions-container-arrow-right.js"),require("./subdivisions-list.js");var i=o(require("../../../utils/PlayerEvents.js")),e=o(require("../../../utils/VideojsEvents.js")),r=o(require("../../../utils/SRGEvents.js")),n=u(require("../../../utils/SupportedDevices.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=s();if(i&&i.has(t))return i.get(t);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=r?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(e,n,o):e[n]=t[n]}return e.default=t,i&&i.set(t,e),e}function u(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function c(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,i,e){return i&&c(t.prototype,i),e&&c(t,e),t}function f(t,i,e){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,i,e){var r=d(t,i);if(r){var n=Object.getOwnPropertyDescriptor(r,i);return n.get?n.get.call(e):n.value}})(t,i,e||t)}function d(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=m(t)););return t}function p(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&y(t,i)}function y(t,i){return(y=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function v(t){var i=S();return function(){var e,r=m(t);if(i){var n=m(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return b(this,e)}}function b(t,i){return!i||"object"!==a(i)&&"function"!=typeof i?g(t):i}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=t.default.getComponent("Component"),C=280,O=function(s){p(u,w);var o=v(u);function u(t,s){var a;return l(this,u),(a=o.call(this,t,s)).hide(),a.init(s),a.on(t,i.LOAD_START,a.update.bind(g(a),s)),a.on(t,i.ERROR,a.hide.bind(g(a))),a.on(t,r.MEDIACOMPOSITION_LOADED,a.update.bind(g(a),s)),a.on(t,e.PLAYER_RESIZE,a.updateVisibility.bind(g(a))),n.default.isTouchDevice&&(a.on(a.player(),e.USER_ACTIVE,a.updateVisibility.bind(g(a))),a.on(i.TRANSITION_END,function(){a.player().userActive()||a.hide()})),a}return h(u,[{key:"init",value:function(i){var e=this;t.default.dom.emptyEl(this.el()),this.initNavigation(i),this.on("mouseenter",function(){e.player().getCache().inactivityTimeout=e.player().options().inactivityTimeout,e.player().options().inactivityTimeout=0,e.player().addClass("srgssr-subdivisions--hover")}),this.on("mouseleave",function(){e.player().options().inactivityTimeout=e.player().getCache().inactivityTimeout,e.player().removeClass("srgssr-subdivisions--hover")})}},{key:"isHidden",value:function(){return this.hasClass("vjs-hidden")}},{key:"updateVisibility",value:function(){var t=this.options().isComponentVisible;(void 0===t||t)&&this.currentSubdivisions&&this.currentSubdivisions.length&&!this.player().error()&&this.player().el().offsetHeight>=C&&!this.player().hasClass("chromecast--connected")?this.show():this.hide()}},{key:"show",value:function(){this.player().addClass("srgssr-has-subdivisions"),f(m(u.prototype),"show",this).call(this),this.triggerVisibilityChanged()}},{key:"hide",value:function(){this.player().removeClass("srgssr-has-subdivisions"),f(m(u.prototype),"hide",this).call(this),this.triggerVisibilityChanged()}},{key:"update",value:function(i){var e=this.player().options().SRGProviders.mediaComposition,r=e&&e.getSubdivisions();if(this.hasSubdivisions=!!r.length,this.subdivisionsChanged(r))if(this.currentSubdivisions=r,r.length){var n=t.default.mergeOptions({subdivisions:r},i);this.list.setSubdivisions(this.player(),n),this.updateVisibility(),this.updateArrows()}else this.hide()}},{key:"subdivisionsChanged",value:function(t){return u.subdivisionString(t)!==u.subdivisionString(this.currentSubdivisions)}},{key:"buildCSSClass",value:function(){return"".concat(f(m(u.prototype),"buildCSSClass",this).call(this)," srgssr-subdivisions")}},{key:"createEl",value:function(){return f(m(u.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass()})}},{key:"initNavigation",value:function(t){this.list=this.addChild("SubdivisionsList",t),this.arrowLeft=this.addChild("SubdivisionsContainerArrowLeft"),this.arrowRight=this.addChild("SubdivisionsContainerArrowRight"),this.arrowLeft.on(["click","tap"],this.list.scrollLeft.bind(this.list)),this.arrowRight.on(["click","tap"],this.list.scrollRight.bind(this.list)),this.list.on("scroll",this.updateArrows.bind(this)),this.player().on(e.PLAYER_RESIZE,this.updateArrows.bind(this))}},{key:"triggerVisibilityChanged",value:function(){this.player().isFullscreen()||this.player().trigger({type:r.SUBDIVISION_VISIBILITY_CHANGED,data:{hasSubdivisions:this.hasSubdivisions,isVisible:!this.isHidden(),subdivisionsViewHeight:this.hasSubdivisions?this.currentHeight():0}})}},{key:"updateArrows",value:function(){this.list.canGoLeft()?this.arrowLeft.enable():this.arrowLeft.disable(),this.list.canGoRight()?this.arrowRight.enable():this.arrowRight.disable()}}],[{key:"subdivisionString",value:function(t){return t&&t.reduce(function(t,i){return t+i.urn+i.markIn+i.markOut+i.title+i.imageUrl},"")}}]),u}();t.default.registerComponent("SubdivisionsContainer",O);var R=O;exports.default=R;
},{"video.js":"qoWl","./subdivisions-container-arrow-left.js":"aw1L","./subdivisions-container-arrow-right.js":"P92b","./subdivisions-list.js":"G9PY","../../../utils/PlayerEvents.js":"lUBw","../../../utils/VideojsEvents.js":"M9YT","../../../utils/SRGEvents.js":"a5op","../../../utils/SupportedDevices.js":"ZJSt"}],"aFEK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("video.js")),t=r(require("../../errors/errors.js")),n=r(require("../../dataProvider/services/SegmentService.js"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=l(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=y();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=e.default.getComponent("ModalDialog"),g=function(r){c(s,b);var o=p(s);function s(t,n){var r;i(this,s);var u=e.default.mergeOptions({pauseOnOpen:!1,uncloseable:!0,fillAlways:!0,temporary:!1},n);return(r=o.call(this,t,u)).initListeners(),r}return u(s,[{key:"buildCSSClass",value:function(){return"".concat(a(v(s.prototype),"buildCSSClass",this).call(this)," srgssr-warning-message")}},{key:"close",value:function(){this.opened()&&(this.trigger("beforemodalclose"),this.opened_=!1,this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose())}},{key:"initListeners",value:function(){var e=this;this.on(this.player(),n.default.BLOCKED_SEGMENT_SKIPPED,function(n){var r=n.data,o=t.default["ERROR_BLOCKING_REASON_".concat(r)];o&&e.display(e.localize(o.message))})}},{key:"open",value:function(){this.opened()||(this.opened_=!0,this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)}},{key:"display",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning-message__text",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e3;e.default.dom.addClass(this.contentEl(),n),this.fillWith(t),this.open(),setTimeout(this.close.bind(this),r)}}]),s}();e.default.registerComponent("WarningMessageComponent",g);var m=g;exports.default=m;
},{"video.js":"qoWl","../../errors/errors.js":"LWrW","../../dataProvider/services/SegmentService.js":"HwTb"}],"TjK2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("video.js")),e=n(require("../../utils/Events.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}function c(t,e,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=f(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=v();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=t.default.getComponent("Button"),P=function(t){s(n,g);var r=y(n);function n(t,e){var o;return a(this,n),(o=r.call(this,t,e)).isPlaying=!1,o.updateAvailability(),o}return l(n,[{key:"buildCSSClass",value:function(){return"srg-airplay-button ".concat(c(h(n.prototype),"buildCSSClass",this).call(this))}},{key:"getMediaElement",value:function(){return this.player().el().querySelector("audio, video")}},{key:"handleClick",value:function(){this.updatePlaybackState(),this.getMediaElement().webkitShowPlaybackTargetPicker()}},{key:"updateAvailability",value:function(){var t=this;n.isAirplaySupported()?this.getMediaElement().addEventListener(e.WEBKIT_PLAYBACK_TARGET_AVAILABILITY_CHANGED,function(e){"available"===e.availability&&t.show()}):this.hide()}},{key:"updateButtonState",value:function(){if(!this.isPlaying)return this.controlText("Start Airplay"),void this.removeClass("srg-airplay-button--active");this.controlText("Stop Airplay"),this.addClass("srg-airplay-button--active")}},{key:"updatePlaybackState",value:function(){this.isPlaying=!this.isPlaying,this.player().trigger({type:e.AIRPLAY_PLAYBACK_STATE,data:{isAirplayPlaying:this.isPlaying}}),this.updateButtonState()}}],[{key:"isAirplaySupported",value:function(){return!!window.WebKitPlaybackTargetAvailabilityEvent}}]),n}();t.default.registerComponent("AirplayButton",P);var O=P;exports.default=O;
},{"video.js":"qoWl","../../utils/Events.js":"Like"}],"MvFq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../../utils/Events.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}var n=function(r,t){r.scrubbing(!0),r.trigger(e.SEEKING),r.currentTime(t),r.scrubbing(!1),r.trigger(e.SEEKED)},o=function(e,r){n(e,e.currentTime()+r)},u={seekTo:n,seekFromNow:o};exports.default=u;
},{"../../utils/Events.js":"Like"}],"GLlr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("video.js")),e=r(require("../utils/playerUtils.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}function i(t,e,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=f(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=t.default.getComponent("Button"),h=function(t){l(n,v);var r=s(n);function n(t,e){var u;return o(this,n),(u=r.call(this,t,e)).controlText(u.localize("10 seconds backward")),u}return c(n,[{key:"buildCSSClass",value:function(){return"vjs-icon-rewind vjs-control-seek ".concat(i(d(n.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){e.default.seekFromNow(this.player(),-10)}}]),n}();t.default.registerComponent("BackwardButton",h);var O=h;exports.default=O;
},{"video.js":"qoWl","../utils/playerUtils.js":"MvFq"}],"FyBC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("video.js")),e=r(require("../utils/playerUtils.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}function i(t,e,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=f(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=t.default.getComponent("Button"),h=function(t){l(n,v);var r=s(n);function n(t,e){var u;return o(this,n),(u=r.call(this,t,e)).controlText(u.localize("30 seconds forward")),u}return c(n,[{key:"buildCSSClass",value:function(){return"vjs-icon-forward vjs-control-seek ".concat(i(d(n.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){e.default.seekFromNow(this.player(),30)}}]),n}();t.default.registerComponent("ForwardButton",h);var O=h;exports.default=O;
},{"video.js":"qoWl","../utils/playerUtils.js":"MvFq"}],"KRI6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("video.js")),e=o(require("../../utils/Events.js")),n=i(require("../../utils/SupportedDevices.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function i(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return p(t)||s(t,e)||l(t,e)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(c){o=!0,i=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}function p(t){if(Array.isArray(t))return t}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=k();return function(){var n,r=_(t);if(e){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?j(t):e}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=t.default.getComponent("TextTrackDisplay"),S={start:0,center:50,end:100,auto:100},w=function(r){h(i,O);var o=m(i);function i(){return y(this,i),o.apply(this,arguments)}return v(i,[{key:"clearDisplay",value:function(){this.el().firstChild&&this.el().removeChild(this.el().firstChild)}},{key:"showingTrack",value:function(){return this.player().textTracks().tracks_.find(function(t){return"showing"===t.mode})}},{key:"setFontSize",value:function(t){this.fontPercent=t,this.player().trigger({type:e.TEXT_TRACK_SIZE_CHANGE,data:t}),this.updateDisplay()}},{key:"updateDisplay",value:function(){this.clearDisplay();var t=this.showingTrack();if(t&&t.activeCues){var e=a(i.cues(t),1)[0];e&&this.updateDisplayState(e)}}},{key:"updateDisplayState",value:function(t){var e=t.align,n=t.line,r=void 0===n?S.end:n,o=t.size,u=t.text,c=i.getWidth(o),l=i.getTop(r),f=a(this.createStyledElements({align:e,cueTop:l,cueWidth:c,text:u}),2),s=f[0],p=f[1];p.appendChild(s),this.el().appendChild(p)}},{key:"fontSize",get:function(){return this.fontPercent?this.fontPercent:n.default.isTouchDevice?1:1.3}},{key:"createStyledElements",value:function(t){var e=t.align,n=t.cueTop,r=t.cueWidth,o=t.text,u=i.cueEl(o),a=i.cueContainerEl(u);return a.style="\n    text-align: ".concat(e,";\n    top: ").concat(n,";\n    transform: translateY(-").concat(n,");"),u.style="\n    width: ".concat(r,";\n    font-size: ").concat(this.fontSize,"em;"),[u,a]}}],[{key:"getTop",value:function(t){var e=void 0!==S[t]?S[t]:t;return("number"!=typeof e||e<0)&&(e=S.auto),"".concat(e,"%")}},{key:"getWidth",value:function(t){return 100===t?"auto":"".concat(t,"%")}},{key:"cueContainerEl",value:function(){return t.default.dom.createEl("div",{className:"vjs-text-track-display__container"})}},{key:"cueEl",value:function(e){return t.default.dom.createEl("div",{innerHTML:e,className:"vjs-text-track-display__cue"})}},{key:"cues",value:function(t){var e=t.activeCues.cues_,n=void 0===e?[]:e;return n}}]),i}();t.default.registerComponent("TextTrackDisplay",w);var T=w;exports.default=T;
},{"video.js":"qoWl","../../utils/Events.js":"Like","../../utils/SupportedDevices.js":"ZJSt"}],"Fpmq":[function(require,module,exports) {
module.exports={date:"",commit:"",runner:"",initiator:""};
},{}],"ZWWQ":[function(require,module,exports) {
module.exports={"Audio Player":"Lecteur audio","Video Player":"Lecteur vidéo",Play:"Démarrer",Pause:"Pause",Replay:"Redémarrer","Current Time":"Temps écoulé",Duration:"Durée","Remaining Time":"Temps restant","Stream Type":"Type de flux",LIVE:"LIVE",Loaded:"Chargé",Progress:"Progression","Progress Bar":"Barre de progression","progress bar timing: currentTime={1} duration={2}":"{1} de {2}",Fullscreen:"Plein écran","Non-Fullscreen":"Fenêtré",Mute:"Sourdine",Unmute:"Son activé","Playback Rate":"Vitesse de lecture",Subtitles:"Sous-titres","subtitles off":"Sous-titres désactivés",Captions:"Sous-titres transcrits","captions off":"Sous-titres transcrits désactivés",Chapters:"Chapitres",Descriptions:"Descriptions","descriptions off":"descriptions désactivées","Audio Track":"Piste audio","Volume Level":"Niveau de volume","You aborted the media playback":"Vous avez interrompu la lecture de la vidéo.","A network error caused the media download to fail part-way.":"Une erreur de réseau a interrompu le téléchargement de la vidéo.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Cette vidéo n'a pas pu être chargée, soit parce que le serveur ou le réseau a échoué ou parce que le format n'est pas reconnu.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La lecture de la vidéo a été interrompue à cause d'un problème de corruption ou parce que la vidéo utilise des fonctionnalités non prises en charge par votre navigateur.","No compatible source was found for this media.":"Aucune source compatible n'a été trouvée pour cette vidéo.","The media is encrypted and we do not have the keys to decrypt it.":"Le média est chiffré et nous n'avons pas les clés pour le déchiffrer.","Play Video":"Lire la vidéo",Close:"Fermer","Close Modal Dialog":"Fermer la boîte de dialogue modale","Modal Window":"Fenêtre modale","This is a modal window":"Ceci est une fenêtre modale","This modal can be closed by pressing the Escape key or activating the close button.":"Ce modal peut être fermé en appuyant sur la touche Échap ou activer le bouton de fermeture.",", opens captions settings dialog":", ouvrir les paramètres des sous-titres transcrits",", opens subtitles settings dialog":", ouvrir les paramètres des sous-titres",", opens descriptions settings dialog":", ouvrir les paramètres des descriptions",", selected":", sélectionné","captions settings":"Paramètres des sous-titres transcrits","subtitles settings":"Paramètres des sous-titres","descriptions settings":"Paramètres des descriptions",Text:"Texte",White:"Blanc",Black:"Noir",Red:"Rouge",Green:"Vert",Blue:"Bleu",Yellow:"Jaune",Magenta:"Magenta",Cyan:"Cyan",Background:"Arrière-plan",Window:"Fenêtre",Transparent:"Transparent","Semi-Transparent":"Semi-transparent",Opaque:"Opaque","Font Size":"Taille des caractères","Text Edge Style":"Style des contours du texte",None:"Aucun",Raised:"Élevé",Depressed:"Enfoncé",Uniform:"Uniforme",Dropshadow:"Ombre portée","Font Family":"Famille de polices","Proportional Sans-Serif":"Polices sans empattement (Proportional Sans-Serif)","Monospace Sans-Serif":"Polices sans empattement (Monospace Sans-Serif)","Proportional Serif":"Polices avec empattement (Proportional Serif)","Monospace Serif":"Polices avec empattement (Monospace Serif)",Casual:"Manuscrite",Script:"Scripte","Small Caps":"Petites capitales",Reset:"Réinitialiser","restore all settings to the default values":"Restaurer tous les paramètres aux valeurs par défaut",Done:"Terminé","Caption Settings Dialog":"Boîte de dialogue des paramètres des sous-titres transcrits","Beginning of dialog window. Escape will cancel and close the window.":"Début de la fenêtre de dialogue. La touche d'échappement annulera et fermera la fenêtre.","End of dialog window.":"Fin de la fenêtre de dialogue.","ISO-639-1":"fr","10 seconds backward":"Reculer de 10 secondes","30 seconds forward":"Avancer de 30 secondes",Audio:"Audio","Audio and subtitles":"Audio et sous-titres","Audio Description":"Audio Description","Auto play":"Lecture automatique",Back:"Retour","Casting to":"Ce contenu se joue sur","Content will be available in {1} days":"Ce contenu sera disponible dans {1} jours","Current position":"Position courante","Current subject":"Sujet courant",Days:"Jours","Duration: {1}":"Durée: {1}","Edit player settings":"Modifier les paramètres",Episode:"Épisode",HD:"HD","Continuous Playback":"Lecture continue",Cancel:"Annuler","Coming next":"À suivre",copy:"Copier","Copy link":"Copier le lien",Facebook:"Facebook","Font size level {1}":"Taille de police niveau {1}",Hours:"Heures",Integrate:"Intégrer",LinkedIn:"LinkedIn",Mail:"E-mail",Minutes:"Minutes",Off:"Inactif","Open {1} in Play {2}":"Ouvrir {1} dans Play {2}","Playback will begin shortly":"La lecture est sur le point de débuter",Quality:"Qualité",SD:"SD",Seconds:"Secondes","Seek to live, currently behind live":"Revenir au direct","Seek to live, currently playing live":"Direct en cours","Share at current position":"Partager la position courante","Share by e-mail":"Partager par e-mail",Share:"Partager","Share on {1}":"Partager sur {1}","Share on Facebook":"Partager sur Facebook","Share on Linkedin":"Partager sur Linkedin","Share on Twitter":"Partager sur Twitter","Share on Whatsapp":"Partager sur Whatsapp","Share the current subject":"Partager le sujet courant","Share the episode":"Partager l'épisode",Copied:"Copié",Speed:"Vitesse de lecture","Start casting":"Jouer sur Chromecast","Start pip":"Démarrer l’image dans l’image",Stop:"Stop","Stop casting":"Arrêter Chromecast","Stop pip":"Arrêter l’image dans l’image","The content cannot be played.":"Ce contenu ne peut être joué.","The content was skipped due to legal restriction":"Une séquence dépubliée sur décision de justice n’a pas été lue","This commercial media is not available.":"Ce contenu n’est actuellement pas disponible.","This content is not available.":"Ce contenu n’est actuellement pas disponible.","This content is not available anymore.":"Ce contenu n’est plus disponible.","This content is not available due to legal restrictions.":"Pour des raisons juridiques, ce contenu n'est pas disponible.","This content is not available outside Switzerland.":"La RTS ne dispose pas des droits de diffusion en dehors de la Suisse.","This content is not yet available. Please try again later.":"Ce contenu n'est pas encore disponible. Veuillez réessayer plus tard.","To protect children, this content is only available between 8PM and 6AM.":"Pour protéger les enfants, ce contenu est accessible entre 20h et 6h.","To protect children, this content is only available between 11PM and 5AM.":"Pour protéger les enfants, ce contenu est accessible entre 23h et 5h.",Twitter:"Twitter","Unable to display the content. For more information and help, click here...":"Impossible d'afficher le contenu. Pour plus d'informations et obtenir de l'aide, cliquez ici...","Unfortunately the 360 playback experience is not compatible with your browser version.":"Malheureusement, l'expérience 360 n'est pas compatible avec la version de votre navigateur.","Unfortunately this format is not compatible with your browser.":"Malheureusement ce format n'est pas compatible avec votre navigateur.",WhatsApp:"WhatsApp"};
},{}],"dvFx":[function(require,module,exports) {
module.exports={"Audio Player":"Audio-Player","Video Player":"Video-Player",Play:"Laschar ir",Pause:"Pausa",Replay:"Mussar danovamain","Current Time":"Temp actual",Duration:"Durada","Remaining Time":"Temp restant","Stream Type":"Tip dal stream",LIVE:"LIVE",Loaded:"Chargià",Progress:"Progress","Progress Bar":"Bar da progessiun","progress bar timing: currentTime={1} duration={2}":"{1} da {2}",Fullscreen:"Entir visur","Non-Fullscreen":"Betg entir visur",Mute:"Senza tun",Unmute:"Cun tun","Playback Rate":"Tempo ",Subtitles:"Suttitels","subtitles off":"senza suttitels",Captions:"Suttitels","captions off":"senza suttitels",Chapters:"Chapitels",Descriptions:"Descripziuns","descriptions off":"senza descripziuns","Audio Track":"Piese audio","Volume Level":"Nivel dal volumen","You aborted the media playback":"Vus avais interrut il vdieo","A network error caused the media download to fail part-way.":"In sbagl en la rait ha impedì il download","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Il video n'è betg chargià - ubain per in sbagl da server / da la rait, ubain ch'il format n'è betg cumpatibel.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Il video è interrut: Ubain ch'il video è donnegià, ubain che funcziuns n'èn betg cumpatiblas.","No compatible source was found for this media.":"Chattà nagina funtauna cumpatibla per quest video.","The media is encrypted and we do not have the keys to decrypt it.":"Il video è codifitgà da moda nunenconuschenta.","Play Video":"Aviar video",Close:"Serrar","Close Modal Dialog":"Serrar la fanestra modala","Modal Window":"Fanestra modala","This is a modal window":"Quai è ina fanestra modala","This modal can be closed by pressing the Escape key or activating the close button.":'Questa fanestra modala pudais serrar cun la tasta "Escape" ubain cun il buttun.',", opens captions settings dialog":", avra opziuns per ils suttitels",", opens subtitles settings dialog":", avra opziuns per ils suttitels",", opens descriptions settings dialog":", avra opziuns per la descripziun",", selected":", selecziunà","captions settings":"opziuns per ils suttitels","subtitles settings":"opziuns per ils suttitels","descriptions settings":"opziuns per la descripziun",Text:"Text",White:"Alv",Black:"Nair",Red:"Cotschn",Green:"Verd",Blue:"Blau",Yellow:"Mellen",Magenta:"Magenta",Cyan:"Cyan",Background:"Fund",Window:"Fanestra",Transparent:"Transparent","Semi-Transparent":"Mez transparent",Opaque:"Betg transparent","Font Size":"Grandezza dal text","Text Edge Style":"Stil dal text",None:"Nagin",Raised:"Auzà",Depressed:"Sbassà",Uniform:"Uniform",Dropshadow:"Sumbriva","Font Family":"Scrittira","Proportional Sans-Serif":"Proportionale Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportionale Serif","Monospace Serif":"Monospace Serif",Casual:"Casual",Script:"Script","Small Caps":"Bustabs pitschens",Reset:"Da nov","restore all settings to the default values":"Enavos tar las opziuns da standard",Done:"Fatg","Caption Settings Dialog":"Opziuns per suttitels","Beginning of dialog window. Escape will cancel and close the window.":"Entschatta da la fanestra da dialog. Escape stizza e serra la fanestra.","End of dialog window.":"Fin da la fanestra da dialog.","ISO-639-1":"rm","10 seconds backward":"10 seconds backward","30 seconds forward":"30 seconds forward",Audio:"Audio","Audio and subtitles":"Audio e suttitels","Audio Description":"Audio Description","Auto play":"Autoplay",Back:"Enavos","Casting to":"Derasar via","Content will be available in {1} days":"Da survegnir a {1} dìs","Current position":"Posiziun actuala","Current subject":"Contribuziun actuala",Days:"Dìs","Duration: {1}":"Durada: {1}","Edit player settings":"Modifitgar ils parameters",Episode:"Episoda",HD:"HD","Continuous Playback":"Guardar cuntinuadamain",Cancel:"Annular","Coming next":"Vegn bainbaud",copy:"copiar","Copy link":"Copiar link",Facebook:"Facebook","Font size level {1}":"Nivel da grondezza da scrittira {1}",Hours:"Uras",Integrate:"Integrar",LinkedIn:"LinkedIn",Mail:"Mail",Minutes:"Minutas",Off:"Betg activ","Open {1} in Play {2}":"Avrir {1} en Play {2}","Playback will begin shortly":"Playback entschaiva gist",Quality:"Qualitad",SD:"SD",Seconds:"Secundas","Seek to live, currently behind live":"Midar tar live - per il mument davos live","Seek to live, currently playing live":"Midar tar live - per il mument live","Share at current position":"Cundivider a la posiziun actuala","Share by e-mail":"Cundivider cun e-mail",Share:"Cundivider","Share on {1}":"Cundivider tar {1}","Share on Facebook":"Cundivider tar Facebook","Share on Linkedin":"Cundivider tar Linkedin","Share on Twitter":"Cundivider tar Twitter","Share on Whatsapp":"Cundivider tar Whatsapp","Share the current subject":"Cundivider la contribuziun actuala","Share the episode":"Cundivider l'entira episoda",Copied:"Copià",Speed:"Tempo","Start casting":"Cumenzar derasaziun","Start pip":"Start maletg en maletg",Stop:"Stop","Stop casting":"Interrumper derasaziun","Stop pip":"Stop maletg en maletg","The content cannot be played.":"Quest cuntegn na sa betg vegnir laschà ir.","The content was skipped due to legal restriction":"Il cuntegn è vegnì eliminà per raschuns giuridicas","This commercial media is not available.":"Quest medium commerzial n'è betg disponibel.","This content is not available.":"Quest cuntegn n'è betg disponibel.","This content is not available anymore.":"Quest cuntegn n'è betg pli disponibel.","This content is not available due to legal restrictions.":"Quest cuntegn n'è betg disponibel perquai ch'el è scadì.","This content is not available outside Switzerland.":"Quest cuntegn n'è betg disponibel ordaifer la Svizra.","This content is not yet available. Please try again later.":"Quest cuntegn n'è betg anc disponibel. Empruvai pli tard.","To protect children, this content is only available between 8PM and 6AM.":"Per proteger uffants, è quest cuntegn disponibel mo tranter las 20.00 e las 06.00.","To protect children, this content is only available between 11PM and 5AM.":"Per proteger uffants, è quest cuntegn disponibel mo tranter las 23.00 e las 05.00.",Twitter:"Twitter","Unable to display the content. For more information and help, click here...":"Deplorablamain n'èsi betg pussaivel da reproducir il cuntegn. Ulteriuras infurmaziuns e sustegn survegnis Vus qua …","Unfortunately the 360 playback experience is not compatible with your browser version.":"Displaschaivlamain na sustegn voss browser betg la visualisaziun da 360°.","Unfortunately this format is not compatible with your browser.":"Displaschaivlamain n'è il format betg cumpatibel cun Voss apparat.",WhatsApp:"WhatsApp"};
},{}],"IXTE":[function(require,module,exports) {
module.exports={"Audio Player":"Player Audio","Video Player":"Player Video",Play:"Play",Pause:"Pausa",Replay:"Ripetere","Current Time":"Tempo attuale",Duration:"Durata","Remaining Time":"Tempo rimanente","Stream Type":"Tipo di Streaming",LIVE:"LIVE",Loaded:"Caricato",Progress:"Stato","Progress Bar":"Barra di stato","progress bar timing: currentTime={1} duration={2}":"{1} di {2}",Fullscreen:"Schermo intero","Non-Fullscreen":"Chiudi schermo intero",Mute:"Muto",Unmute:"Riattiva audio","Playback Rate":"Tasso di riproduzione",Subtitles:"Sottotitoli","subtitles off":"Senza sottotitoli",Captions:"Sottotitoli non udenti","captions off":"Senza sottotitoli non udenti",Chapters:"Capitolo",Descriptions:"Descrizioni","descriptions off":"descrizioni disattivate","Audio Track":"Tracce audio","Volume Level":"Livello del volume","You aborted the media playback":"La riproduzione del filmato è stata interrotta.","A network error caused the media download to fail part-way.":"Il download del filmato è stato interrotto a causa di un problema rete.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Il filmato non può essere caricato a causa di un errore nel server o nella rete o perché il formato non viene supportato.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La riproduzione del filmato è stata interrotta a causa di un file danneggiato o per l’utilizzo di impostazioni non supportate dal browser.","No compatible source was found for this media.":"Non ci sono fonti compatibili per questo filmato.","The media is encrypted and we do not have the keys to decrypt it.":"Questo media è protetto.","Play Video":"Mostra il video",Close:"Chiudi","Close Modal Dialog":"Chiudi la finestra di dialogo modale","Modal Window":"Finestra modale","This is a modal window":"Questa è una finestra modale","This modal can be closed by pressing the Escape key or activating the close button.":"Questa modale può essere chiusa premendo il tasto Esc o attivando il pulsante Chiudi.",", opens captions settings dialog":", apre la finestra di dialogo delle impostazioni delle didascalie",", opens subtitles settings dialog":", apre la finestra di dialogo delle impostazioni dei sottotitoli",", opens descriptions settings dialog":", apre la finestra di dialogo delle impostazioni delle descrizioni",", selected":", selezionato","captions settings":"impostazioni delle didascalie","subtitles settings":"impostazioni dei sottotitoli","descriptions settings":"impostazioni delle descrizioni",Text:"Testo",White:"Bianco",Black:"Nero",Red:"Rosso",Green:"Verde",Blue:"Blu",Yellow:"Giallo",Magenta:"Magenta",Cyan:"Ciano",Background:"Sfondo",Window:"Finestra",Transparent:"Trasparente","Semi-Transparent":"Semi trasparente",Opaque:"Opaco","Font Size":"Dimensione del font","Text Edge Style":"Stile bordo testo",None:"Nessuna",Raised:"Sollevato",Depressed:"Premuto",Uniform:"Uniforme",Dropshadow:"Ombra","Font Family":"Famiglia di font","Proportional Sans-Serif":"Sans-Serif proporzionale","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Serif proporzionale","Monospace Serif":"Monospace Serif",Casual:"Casuale",Script:"Script","Small Caps":"Maiuscoletto",Reset:"Ripristina","restore all settings to the default values":"ripristinare tutte le impostazioni ai valori predefiniti",Done:"Fatto","Caption Settings Dialog":"Finestra di dialogo Impostazioni didascalia","Beginning of dialog window. Escape will cancel and close the window.":"Inizio della finestra di dialogo. Escape annulla e chiude la finestra.","End of dialog window.":"Fine della finestra di dialogo.","ISO-639-1":"it","10 seconds backward":"Riavvolgere 10 secondi","30 seconds forward":"Avanzare 30 secondi",Audio:"Audio","Audio and subtitles":"Audio e sottotitoli","Audio Description":"Audiodescrizione","Auto play":"Auto play",Back:"Indietro","Casting to":"Play su Chromecast","Content will be available in {1} days":"Disponibile fra {1} giorni","Current position":"Posizione attuale","Current subject":"Servizio attuale",Days:"Giorni","Duration: {1}":"Durata: {1}","Edit player settings":"Modificare le impostazioni del lettore",Episode:"Episodio",HD:"HD","Continuous Playback":"Play continuo",Cancel:"Annulla","Coming next":"Prossimo",copy:"copia","Copy link":"Copia link",Facebook:"Facebook","Font size level {1}":"Dimensione carattere {1}",Hours:"Ore",Integrate:"Integrare",LinkedIn:"LinkedIn",Mail:"Email",Minutes:"Minuti",Off:"Off","Open {1} in Play {2}":"Aprire {1} in Play {2}","Playback will begin shortly":"La riproduzione inizierà a breve",Quality:"Qualità",SD:"SD",Seconds:"Secondi","Seek to live, currently behind live":"Torna alla diretta, attualmente prima della diretta","Seek to live, currently playing live":"Torna alla diretta, attualmente in onda la diretta","Share at current position":"Condividere dalla posizione attuale","Share by e-mail":"Condividi via email",Share:"Condividere","Share on {1}":"Pubblicare su {1}","Share on Facebook":"Pubblicare su Facebook","Share on Linkedin":"Pubblicare su Linkedin","Share on Twitter":"Pubblicare su Twitter","Share on Whatsapp":"Pubblicare su Whatsapp","Share the current subject":"Condividere il servizio attuale","Share the episode":"Condividere l'episodio",Copied:"Copiato",Speed:"Velocità di riproduzione","Start casting":"Play su Chromecast","Start pip":"Passare a Picture in Picture",Stop:"Stop","Stop casting":"Stop play su Chromecast","Stop pip":"Smettere di Picture in Picture","The content cannot be played.":"Il contenuto non può essere riprodotto.","The content was skipped due to legal restriction":"Il contenuto non è fruibile a causa di restrizioni legali","This commercial media is not available.":"Questo contenuto commerciale non è disponibile.","This content is not available.":"Questo media non è disponibile.","This content is not available anymore.":"Questo media non è più disponibile.","This content is not available due to legal restrictions.":"Il contenuto non è fruibile a causa di restrizioni legali.","This content is not available outside Switzerland.":"Questo media non è disponibile fuori dalla Svizzera.","This content is not yet available. Please try again later.":"Il contenuto non è ancora disponibile. Per cortesia prova più tardi.","To protect children, this content is only available between 8PM and 6AM.":"Per proteggere i bambini, questo media è disponibile solo fra le 20 e le 6.","To protect children, this content is only available between 11PM and 5AM.":"Per proteggere i bambini, questo media è disponibile solo fra le 23 le 5.",Twitter:"Twitter","Unable to display the content. For more information and help, click here...":"Siamo spiacenti. Il contenuto desiderato non può essere riprodotto. Per maggiori informazioni e assistenza cliccare qui.","Unfortunately the 360 playback experience is not compatible with your browser version.":"Sfortunatamente il suo browser non è compatibile con la visualizzazione a 360 gradi.","Unfortunately this format is not compatible with your browser.":"Purtroppo il formato non è compatibile con il suo browser.",WhatsApp:"WhatsApp"};
},{}],"QDkN":[function(require,module,exports) {
module.exports={"Audio Player":"Audio-Player","Video Player":"Video-Player",Play:"Wiedergabe",Pause:"Pause",Replay:"Erneut abspielen","Current Time":"Aktueller Zeitpunkt",Duration:"Dauer","Remaining Time":"Verbleibende Zeit","Stream Type":"Streamtyp",LIVE:"LIVE",Loaded:"Geladen",Progress:"Status","Progress Bar":"Forschrittsbalken","progress bar timing: currentTime={1} duration={2}":"{1} von {2}",Fullscreen:"Vollbild","Non-Fullscreen":"Kein Vollbild",Mute:"Ton aus",Unmute:"Ton ein","Playback Rate":"Wiedergabegeschwindigkeit",Subtitles:"Untertitel","subtitles off":"Untertitel aus",Captions:"Untertitel","captions off":"Untertitel aus",Chapters:"Kapitel",Descriptions:"Beschreibungen","descriptions off":"Beschreibungen aus","Audio Track":"Tonspur","Volume Level":"Lautstärkestufe","You aborted the media playback":"Sie haben die Videowiedergabe abgebrochen.","A network error caused the media download to fail part-way.":"Der Videodownload ist aufgrund eines Netzwerkfehlers fehlgeschlagen.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Das Video konnte nicht geladen werden, da entweder ein Server- oder Netzwerkfehler auftrat oder das Format nicht unterstützt wird.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Die Videowiedergabe wurde entweder wegen eines Problems mit einem beschädigten Video oder wegen verwendeten Funktionen, die vom Browser nicht unterstützt werden, abgebrochen.","No compatible source was found for this media.":"Für dieses Video wurde keine kompatible Quelle gefunden.","The media is encrypted and we do not have the keys to decrypt it.":"Die Entschlüsselungsschlüssel für den verschlüsselten Medieninhalt sind nicht verfügbar.","Play Video":"Video abspielen",Close:"Schließen","Close Modal Dialog":"Modales Fenster schließen","Modal Window":"Modales Fenster","This is a modal window":"Dies ist ein modales Fenster","This modal can be closed by pressing the Escape key or activating the close button.":'Durch Drücken der Esc-Taste bzw. Betätigung der Schaltfläche "Schließen" wird dieses modale Fenster geschlossen.',", opens captions settings dialog":", öffnet Einstellungen für Untertitel",", opens subtitles settings dialog":", öffnet Einstellungen für Untertitel",", opens descriptions settings dialog":", öffnet Einstellungen für Beschreibungen",", selected":", ausgewählt","captions settings":"Untertiteleinstellungen","subtitles settings":"Untertiteleinstellungen","descriptions settings":"Einstellungen für Beschreibungen",Text:"Schrift",White:"Weiß",Black:"Schwarz",Red:"Rot",Green:"Grün",Blue:"Blau",Yellow:"Gelb",Magenta:"Magenta",Cyan:"Türkis",Background:"Hintergrund",Window:"Fenster",Transparent:"Durchsichtig","Semi-Transparent":"Halbdurchsichtig",Opaque:"Undurchsichtig","Font Size":"Schriftgröße","Text Edge Style":"Textkantenstil",None:"Kein",Raised:"Erhoben",Depressed:"Gedrückt",Uniform:"Gleichmässig",Dropshadow:"Schlagschatten","Font Family":"Schriftfamilie","Proportional Sans-Serif":"Serifenlos proportional","Monospace Sans-Serif":"Serifenlos nichtproportional","Proportional Serif":"Serifiert proportional","Monospace Serif":"Serifiert nichtproportional",Casual:"Zwanglos",Script:"Schreibeschrift","Small Caps":"Small-Caps",Reset:"Zurücksetzen","restore all settings to the default values":"Alle Einstellungen auf die Standardwerte zurücksetzen",Done:"Fertig","Caption Settings Dialog":"Einstellungsdialog für Untertitel","Beginning of dialog window. Escape will cancel and close the window.":"Anfang des Dialogfensters. Esc bricht ab und schließt das Fenster.","End of dialog window.":"Ende des Dialogfensters.","ISO-639-1":"de","10 seconds backward":"10 Sekunden zurück","30 seconds forward":" 30 Sekunden vorwärts",Audio:"Tonspur","Audio and subtitles":"Tonspur und Untertitel","Audio Description":"Audiodeskription","Auto play":"Autoplay",Back:"Zurück","Casting to":"Der Inhalt wird abgespielt auf","Content will be available in {1} days":"Verfügbar in {1} Tagen","Current position":"Aktuelle Position","Current subject":"Aktueller Beitrag",Days:"Tagen","Duration: {1}":"Dauer: {1}","Edit player settings":"Einstellungen bearbeiten",Episode:"Ganze Folge",HD:"HD","Continuous Playback":"Fortlaufende Wiedergabe",Cancel:"Abbrechen","Coming next":"Nächstes Video",copy:"kopieren","Copy link":"Link kopieren",Facebook:"Facebook","Font size level {1}":"Schriftgrösse {1}",Hours:"Stunden",Integrate:"Integrieren",LinkedIn:"LinkedIn",Mail:"E-Mail",Minutes:"Minuten",Off:"Aus","Open {1} in Play {2}":"Dieses {1} in Play {2} öffnen","Playback will begin shortly":"Die Wiedergabe beginnt in Kürze.",Quality:"Qualität",SD:"SD",Seconds:"Sekunden","Seek to live, currently behind live":"Zur Live-Übertragung wechseln. Aktuell wird es nicht live abgespielt.","Seek to live, currently playing live":"Zur Live-Übertragung wechseln. Es wird aktuell live abgespielt.","Share at current position":"Teilen der aktuelle Position","Share by e-mail":"Via E-Mail teilen",Share:"Teilen","Share on {1}":"Auf {1} teilen","Share on Facebook":"Auf Facebook teilen","Share on Linkedin":"Auf Linkedin teilen","Share on Twitter":"Auf Twitter teilen","Share on Whatsapp":"Auf Whatsapp teilen","Share the current subject":"Teilen des aktuellen Beitrags","Share the episode":"Teilen der ganzen Folge",Copied:"Kopiert",Speed:"Abspielgeschwindigkeit","Start casting":"Über Chromecast abspielen","Start pip":"Video im Pop-up öffnen",Stop:"Anhalten","Stop casting":"Abspielen über Chromecast abbrechen","Stop pip":"Pop-up schliessen","The content cannot be played.":"Der Inhalt kann nicht abgespielt werden.","The content was skipped due to legal restriction":"Der Inhalt wurde aus rechtlichen Gründen übersprungen.","This commercial media is not available.":"Die Werbung wurde übersprungen.","This content is not available.":"Dieser Inhalt ist nicht verfügbar.","This content is not available anymore.":"Dieser Inhalt ist nicht mehr verfügbar.","This content is not available due to legal restrictions.":"Dieser Inhalt ist aus rechtlichen Gründen nicht verfügbar.","This content is not available outside Switzerland.":"Dieser Inhalt ist ausserhalb der Schweiz nicht verfügbar.","This content is not yet available. Please try again later.":"Dieser Inhalt ist noch nicht verfügbar. Bitte probieren Sie es später noch einmal.","To protect children, this content is only available between 8PM and 6AM.":"Aus Gründen des Jugendschutzes steht dieser Inhalt nur zwischen 20:00 und 06:00 Uhr zur Verfügung.","To protect children, this content is only available between 11PM and 5AM.":"Aus Gründen des Jugendschutzes steht dieser Inhalt nur zwischen 23:00 und 05:00 Uhr zur Verfügung.",Twitter:"Twitter","Unable to display the content. For more information and help, click here...":"Leider kann der Inhalt nicht wiedergegeben werden. Weitere Informationen und Unterstützung finden Sie hier…","Unfortunately the 360 playback experience is not compatible with your browser version.":"Ihre Browser-Version ist nicht kompatibel für die 360°-Wiedergabe dieses Videos.","Unfortunately this format is not compatible with your browser.":"Dieses Format ist leider nicht kompatibel mit Ihrem Browser.",WhatsApp:"WhatsApp"};
},{}],"IoHU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../utils/SRGStreamType.js")),t=r(require("../utils/PlayerEvents.js")),i=o(require("../utils/Utils.js")),n=r(require("../utils/SRGEvents.js")),a=r(require("../utils/Events.js"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var r=n?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(i,a,r):i[a]=e[a]}return i.default=e,t&&t.set(e,i),i}function o(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),e}var u=function(){function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d(this,s),this.cachedCurrentTime=0,this.currentTimetIntervalId=void 0,this.debug=i,this.elapsedPlaybackTime=0,this.heartBeatIntervalId=void 0,this.isSeeking=!1,this.mediaSession=0,this.pendingQueue=[],this.pendingTagCommanderReload=!1,this.player=e,this.playerVersion=t,this.uptimeIntervalId=void 0,this.initialized=!1,this.pendingSegmentData=void 0,this.startPlaybackSession=0,e.on||(this.player.on=e.addEventListener),this.initScript(),this.initListeners()}return h(s,[{key:"beforeunload",value:function(){return this.notify("stop"),null}},{key:"cacheCurrentTime",value:function(){var e=this;this.currentTimetIntervalId=setInterval(function(){e.cachedCurrentTime=e.player.currentTime()},500)}},{key:"clearTimers",value:function(){clearInterval(this.currentTimetIntervalId),clearInterval(this.heartBeatIntervalId),clearInterval(this.uptimeIntervalId),clearTimeout(this.uptimeTimeoutId)}},{key:"currentTime",value:function(){var e=this.isSeeking?this.cachedCurrentTime:this.player.currentTime();return 0|e}},{key:"destroy",value:function(){this.clearTimers(),window.tc_vars||(window.tc_vars={}),this.cachedCurrentTime=0,this.currentTimetIntervalId=void 0,this.elapsedPlaybackTime=0,this.heartBeatIntervalId=void 0,this.initialized=!1,this.isSeeking=!1,this.mediaSession=0,this.pendingQueue=[],this.startPlaybackSession=0,this.uptimeIntervalId=void 0}},{key:"dispose",value:function(){this.beforeunload(),this.clearTimers(),window.removeEventListener(a.BEFOREUNLOAD,this.beforeunloadListener),this.player.off(t.EMPTIED,this.emptiedListener),this.player.off(t.ENDED,this.endedListener),this.player.off(t.LOAD_START,this.loadstartListener),this.player.off(t.LOADED_DATA,this.loadeddataListener),this.player.off(t.PLAY,this.playListener),this.player.off(t.PAUSE,this.pauseListener),this.player.off(t.SEEKED,this.seekedListener),this.player.off(t.SEEKING,this.seekingListener),this.player.off(t.WAITING,this.waitingListener),this.player.off(n.RECOMMENDATION_DISPLAYED,this.peachRecommendationDisplayedListener),this.player.off(n.RECOMMENDATION_HIT,this.peachRecommendationHitListener),this.player.off(n.SEGMENT_SWITCHED,this.segmentSwitchedListener)}},{key:"emptied",value:function(){this.player.ended()||this.notify("stop")}},{key:"ended",value:function(){this.notify("eof"),this.mediaSession=0,this.clearTimers()}},{key:"flush",value:function(){var e=this;this.pendingTagCommanderReload&&window.tC&&(window.tC.container.reload(),this.pendingTagCommanderReload=!1),window.tc_events_11&&this.pendingQueue.length>0&&(this.pendingQueue.forEach(function(t){window.tc_events_11(e.player.el(),t.action,t.labels)}),this.pendingQueue=[])}},{key:"getCurrentAudioTrack",value:function(){var e=Array.from(this.player.audioTracks()).find(function(e){return e.enabled}),t="und";return e&&e.language&&(t=e.language),e?t.toUpperCase():""}},{key:"getCurrentTextTrack",value:function(){var e=Array.from(this.player.textTracks()).filter(function(e){return"metadata"!==e.kind}).find(function(e){return"showing"===e.mode}),t="und";return e&&e.language&&(t=e.language),e?t.toUpperCase():""}},{key:"getDvrWindowPosition",value:function(){var e=this.player.liveTracker,t=this.player.currentTime()-e.seekableStart()|0,i=e.liveWindow()-t;return i<0||i===1/0?0:1e3*i}},{key:"getDvrWindowSize",value:function(){var e=this.player.liveTracker.liveWindow()===1/0,t=1e3*this.player.liveTracker.liveWindow();return e?0:t}},{key:"getElapsedPlaybackTime",value:function(){return this.startPlaybackSession?this.getElapsedPlayingTime():this.elapsedPlaybackTime}},{key:"getElapsedPlayingTime",value:function(){var e=s.now()-this.startPlaybackSession|0;return this.elapsedPlaybackTime+e}},{key:"getEventLabels",value:function(n){var a=i.default.getEnvironment(),r=this.player.currentSource().streamType,o={event_id:n,event_timestamp:s.now(),media_dvr_window_length:0,media_dvr_window_offset:0,media_is_dvr:!1,media_is_live:!1,media_mute:this.player.muted()?"1":"0",media_playback_rate:this.player.playbackRate(),media_position:this.currentTime(),media_quality:this.player.currentSource().quality,media_stream_type:r.replace("_","").toLowerCase(),media_subtitles_on:this.isTextTrackEnabled(),media_volume:(100*this.player.volume()).toFixed(0),navigation_environment:a};return this.isAudioTrackEnabled()&&(o.media_audio_track=this.getCurrentAudioTrack()),this.isTextTrackEnabled()&&(o.media_subtitle_selection=this.getCurrentTextTrack()),this.player.currentSource().playbackSettings&&this.player.currentSource().playbackSettings.recommendationId&&(o.peach_reco_id=this.player.currentSource().playbackSettings.recommendationId),e.default.isOnDemand(r)||(o.media_is_live=!0,o.media_position=this.getElapsedPlaybackTime()),e.default.isDvr(r)&&(o.media_dvr_window_offset=0|this.getDvrWindowPosition(),o.media_dvr_window_length=0|this.getDvrWindowSize(),o.media_is_dvr=!0,o.media_timeshift=[t.PLAY,t.PAUSE].includes(n)?this.timeShifted():0),o}},{key:"getInternalLabels",value:function(){var e={media_bu_distributer:this.player.currentSource().bu,media_chromecast_selected:this.player.controlBar.chromecastToggleComponent.isCasting,media_embedding_url:document.referrer,media_player_display:"default",media_player_name:"SRGLetterbox-web",media_player_version:this.playerVersion,media_url:this.player.currentSource().src},t=this.player.currentSource().analyticsMetadata||{};window.tc_vars=Object.assign({},window.tc_vars,e,t)}},{key:"isAudioTrackEnabled",value:function(){return!!this.getCurrentAudioTrack()}},{key:"isTextTrackEnabled",value:function(){return!!this.getCurrentTextTrack()}},{key:"heartBeat",value:function(){var e=this;this.heartBeatIntervalId=setInterval(function(){e.player.paused()||e.notify("pos")},3e4)}},{key:"initCallbacks",value:function(){this.beforeunloadListener=this.beforeunload.bind(this),this.emptiedListener=this.emptied.bind(this),this.endedListener=this.ended.bind(this),this.loadstartListener=this.loadstart.bind(this),this.loadeddataListener=this.loadeddata.bind(this),this.playListener=this.play.bind(this),this.pauseListener=this.pause.bind(this),this.seekedListener=this.seeked.bind(this),this.seekingListener=this.seeking.bind(this),this.waitingListener=this.waiting.bind(this),this.peachRecommendationDisplayedListener=this.peachRecommendationDisplayed.bind(this),this.peachRecommendationHitListener=this.peachRecommendationHit.bind(this),this.segmentSwitchedListener=this.segmentSwitched.bind(this)}},{key:"initListeners",value:function(){this.initCallbacks(),window.addEventListener(a.BEFOREUNLOAD,this.beforeunloadListener),this.player.on(t.EMPTIED,this.emptiedListener),this.player.on(t.ENDED,this.endedListener),this.player.on(t.LOAD_START,this.loadstartListener),this.player.on(t.LOADED_DATA,this.loadeddataListener),this.player.on(t.PLAY,this.playListener),this.player.on(t.PAUSE,this.pauseListener),this.player.on(t.SEEKED,this.seekedListener),this.player.on(t.SEEKING,this.seekingListener),this.player.on(t.WAITING,this.waitingListener),this.player.on(n.RECOMMENDATION_DISPLAYED,this.peachRecommendationDisplayedListener),this.player.on(n.RECOMMENDATION_HIT,this.peachRecommendationHitListener),this.player.on(n.SEGMENT_SWITCHED,this.segmentSwitchedListener),this.player.one(a.DISPOSE,this.dispose.bind(this))}},{key:"initScript",value:function(){var e=this;if(!document.querySelector("#".concat("tc_script__1"))){var t=document.createElement("script");t.async=!0,t.defer="defer",t.id="tc_script__1",t.src="//tp.srgssr.ch//assets/javascripts/vendor/tagcommander/tc_SRGGD_11.js",t.type="text/javascript",t.onload=function(){e.flush()},document.body.appendChild(t)}}},{key:"loadTagCommanderContainer",value:function(){window.tC?(window.tC.container.reload(),this.pendingTagCommanderReload=!1):this.pendingTagCommanderReload=!0}},{key:"loadstart",value:function(){this.destroy(),this.getInternalLabels(),this.loadTagCommanderContainer(),this.notify("buffer_start")}},{key:"loadeddata",value:function(){this.notify("init"),this.initialized=!0,this.cacheCurrentTime(),this.pendingSegmentData&&(this.notifySegment(this.pendingSegmentData),this.pendingSegmentData=void 0),this.notify("buffer_stop")}},{key:"log",value:function(e,t){this.debug&&console.log("SRGAnalytics:".concat(e),t,window.tc_vars)}},{key:"notify",value:function(e,t){this.flush();var i=Object.assign({},this.getEventLabels(e),t);this.log(e,i),window.tc_events_11?window.tc_events_11(this.player.el(),e,i):this.pendingQueue.push({action:e,labels:i})}},{key:"peachPayload",value:function(){if(this.player.endScreen&&this.player.endScreen.options().recommendationId)return{peach_items:this.player.endScreen.recommendationComponent.children().map(function(e){return e.options().itemInfo.urn}),peach_items_displayed:this.player.endScreen.displayedItems().length,peach_reco_id:this.player.endScreen.options().recommendationId}}},{key:"peachRecommendationDisplayed",value:function(){var e=this.peachPayload();e&&this.notify("recommendation_displayed",e)}},{key:"peachRecommendationHit",value:function(e){var t=e.data.urn,i=this.peachPayload();i&&(i.peach_hit_index=i.peach_items.indexOf(t),this.notify("recommendation_hit",i))}},{key:"play",value:function(){var i=this;this.player.one(t.PLAYING,function(){var t=i.player.currentSource().streamType.streamType;i.startPlaybackSession||e.default.isOnDemand(t)||(i.startPlaybackSession=s.now()),0===i.mediaSession&&(i.mediaSession=s.now(),i.heartBeat(),i.uptime()),i.notify("play")})}},{key:"pause",value:function(){var t=this.player.currentSource().streamType.streamType;e.default.isOnDemand(t)||(this.elapsedPlaybackTime=this.getElapsedPlayingTime(),this.startPlaybackSession=0),!this.player.scrubbing()&&!e.default.isLive(t)&&this.player.currentTime()<this.player.duration()&&this.notify("pause")}},{key:"seeked",value:function(){this.isSeeking&&!this.player.scrubbing()&&(this.isSeeking=!1,this.notify("buffer_stop"),this.player.paused()&&this.notify("pause"))}},{key:"seeking",value:function(){!this.isSeeking&&this.player.scrubbing()&&(this.isSeeking=!0,this.notify("buffer_start"),this.notify("seek"))}},{key:"segmentSwitched",value:function(e){var t=e.data;this.initialized?this.notifySegment(t):this.pendingSegmentData=t}},{key:"notifySegment",value:function(e){var t=e.isBlocked,i=void 0!==t&&t;e.playing&&this.notify("play"),i||this.notify("segment",{segment_change_origin:e.origin})}},{key:"timeShifted",value:function(){var e=this.player.seekable(),t=1e3*this.currentTime(),i=1e3*(e&&e.length>0?e.end(0):this.player.duration()),n=i&&t?i-t:0;return(n<35e3?0:n/1e3).toFixed(0)}},{key:"uptime",value:function(){var t=this,i=function(){t.player.paused()||e.default.isOnDemand(t.player.currentSource().streamType)||t.notify("uptime")};this.uptimeTimeoutId=setTimeout(function(){i(),t.uptimeIntervalId=setInterval(function(){i()},6e4)},3e4)}},{key:"waiting",value:function(){var e=this;this.isSeeking||this.player.scrubbing()||!this.initialized||(this.notify("buffer_start"),this.player.one(t.PLAYING,function(){e.notify("buffer_stop")}))}}],[{key:"now",value:function(){return(Date.now()/1e3).toFixed(0)}}]),s}(),c=u;exports.default=c;
},{"../utils/SRGStreamType.js":"SrUl","../utils/PlayerEvents.js":"lUBw","../utils/Utils.js":"csCP","../utils/SRGEvents.js":"a5op","../utils/Events.js":"Like"}],"iBWo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("../utils/Events.js")),t=r(require("../utils/SRGStreamType.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,a=s(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function s(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}var p=function(){function r(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"il.srgssr.ch",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l(this,r),this.debug=a,this.player=t,this.baseUrl="".concat(n,"/integrationlayer/2.0/"),this.player.on(e.SOCIAL_SHARING,this.socialSharing.bind(this)),this.player.on(e.FIRST_PLAY,this.clicked.bind(this))}return d(r,[{key:"buildUrl",value:function(e){var t=e.service,r=e.bu,n=e.id,a=e.mediaType;return"https://".concat(this.baseUrl).concat(r.toLowerCase(),"/mediaStatistic/").concat(a.toLowerCase(),"/").concat(n,"/").concat(t,".json")}},{key:"clicked",value:function(){var t=this;this.player.one(e.PLAYING,function(){var e=r.userId,n=t.loadedMedia(),a=n.streamType,i=n.eventData,c=u(n,["streamType","eventData"]),s=t.buildUrl(o({service:"clicked"},c)),l={eventData:i},f=t.timeoutTreshold(a);e&&(l.userId=e),i&&setTimeout(function(){t.send(s,l)},f)})}},{key:"loadedMedia",value:function(){var e=this.player.currentSource(),t=e.bu,r=e.id,n=e.eventData,a=e.mediaType,i=e.streamType,o=e.pendingSegment;return{bu:(o=void 0===o?{}:o).vendor||t,eventData:o.eventData||n,id:o.id||r,mediaType:o.mediaType||a,streamType:o.streamType||i}}},{key:"log",value:function(e){if(this.debug){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];(t=console).log.apply(t,["MediaStatistic:".concat(e)].concat(n))}}},{key:"send",value:function(e,t){var r=this;this.log("socialSharing",e,t),fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then(function(e){r.log("response",e)})}},{key:"socialSharing",value:function(e){var t=e.data,n=r.userId,a=t.eventData,i=u(t,["eventData"]),c=this.buildUrl(o({service:"shared/".concat(i.socialVendor)},i)),s={eventData:a};n&&(s.userId=n),a&&this.send(c,s)}},{key:"timeoutTreshold",value:function(e){var r=this.player.duration(),n=Number.isFinite(r)&&r>0?.8*r:0;return!t.default.isOnDemand(e)||n>10?1e4:n}}],[{key:"userId",get:function(){try{var e=JSON.parse(window.localStorage.getItem("playSRG-playUserIdv2"));if(e)return e.userId}catch(t){return}}}]),r}(),y=p;exports.default=y;
},{"../utils/Events.js":"Like","../utils/SRGStreamType.js":"SrUl"}],"Tp4X":[function(require,module,exports) {
"use strict";var e;function t(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.SRGLetterboxComponentsPath=void 0;var o={HEADER_COMPONENT:"HEADER_COMPONENT",SHARING_COMPONENT:"SHARING_COMPONENT",TITLE_COMPONENT:"TITLE_COMPONENT",PLAY_BUTTON:"PLAY_BUTTON",SUBDIVISIONS_COMPONENT:"SUBDIVISIONS_COMPONENT"},N=(t(e={},o.HEADER_COMPONENT,["HeaderComponent"]),t(e,o.SHARING_COMPONENT,["HeaderComponent","SharingModule"]),t(e,o.TITLE_COMPONENT,["HeaderComponent","TitleComponent"]),t(e,o.PLAY_BUTTON,["ControlBar","SRGSSRButtonComponent"]),t(e,o.SUBDIVISIONS_COMPONENT,["SubdivisionsContainer"]),e);exports.SRGLetterboxComponentsPath=N;var O=o;exports.default=O;
},{}],"TrBK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("video.js")),t=i(require("../../utils/Events.js")),r=o(require("../../utils/SRGStreamType.js"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=y(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=p();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=e.default.getComponent("Tech"),C=function(n){d(o,g);var i=f(o);function o(e,t){var r;s(this,o),r=i.call(this,e,t);var n=e.source;return r.currentCastSession=o.getCurrentSession,r.localPlayer=n.localPlayer,r.streamType=n.streamType,r.chromecastCurrentSource=n,r.loadMediaToCast(n),r}return u(o,[{key:"controls",value:function(){return this.remotePlayer,!1}},{key:"createCastRequestObject",value:function(e){var t=e.urn,n=e.title,i=e.streamType,a=e.currentTime;if(this.currentCastSession){var s=o.chromeObject.cast.media,l=s.MediaInfo,u=s.GenericMediaMetadata,c=s.LoadRequest,y=new l(t,"srgssr/urn");y.metadata=new u,y.metadata.title=n;var d=new c(y);return r.default.isOnDemand(i)&&(d.currentTime=a),d}}},{key:"createEl",value:function(){var t=this,r=c(P(o.prototype),"createEl",this).call(this,"div",{id:this.options().techId,className:"vjs-tech vjs-tech-chromecast"},{style:'background-image: url("'.concat(this.poster(),'")')});return this.ready(function(){var n=e.default.dom.createEl("div",{className:"vjs-icon-chromecast-active icon"},{}),i=e.default.dom.createEl("p",{className:"vjs-tech-chromecast-title"},{},t.localize("Playing on {1}",[t.currentCastSession.getCastDevice().friendlyName])),o=e.default.dom.createEl("div",{className:"vjs-tech-chromecast-container"},{},[n,i]);r.appendChild(o)}),r}},{key:"currentTime",value:function(){return this.hasPendingSeek()?this.pendingSeekTime:this.castingMedia?this.castingMedia.getEstimatedTime():0}},{key:"dispose",value:function(){var e=this;this.localPlayer.options().inactivityTimeout=2e3,this.localPlayer.removeClass("chromecast--connected"),this.currentCastSession.endSession(),this.subdivisionsHidden||this.localPlayer.subdivisionsContainer.show(),setTimeout(function(){e.localPlayer.userActive(!1)},2e3),this.resetSrc_(Function.prototype),c(P(o.prototype),"dispose",this).call(this,this)}},{key:"duration",value:function(){return this.remotePlayer.duration}},{key:"ended",value:function(){var e=o.chromeObject.cast.media.IdleReason;return!!this.castingMedia&&this.castingMedia.idleReason===e.FINISHED}},{key:"hasPendingSeek",value:function(){return["PAUSED","BUFFERING"].includes(this.lastState)&&this.pendingSeekTime}},{key:"initListeners",value:function(){var e=this;this.remotePlayerController.addEventListener(this.remotePlayerEventType.PLAYER_STATE_CHANGED,function r(n){e.ended()&&"IDLE"===n.value&&(e.trigger(t.ENDED),e.remotePlayerController.removeEventListener(e.remotePlayerEventType.PLAYER_STATE_CHANGED,r)),["BUFFERING","PAUSE"].includes(e.lastState)&&e.isSeeking&&(e.isSeeking=!1,e.trigger(t.SEEKED)),e.lastState=n.value});this.remotePlayerController.addEventListener(this.remotePlayerEventType.CURRENT_TIME_CHANGED,function r(){e.setMuted(e.options().source.muted),e.trigger(t.VOLUME_CHANGE),e.remotePlayerController.removeEventListener(e.remotePlayerEventType.CURRENT_TIME_CHANGED,r)})}},{key:"loadMediaToCast",value:function(e){var r=this;this.currentCastSession.loadMedia(this.createCastRequestObject(e)).then(function(){var n=o.castObject.framework,i=n.RemotePlayer,a=n.RemotePlayerController,s=n.RemotePlayerEventType;r.remotePlayer=new i,r.remotePlayerController=new a(r.remotePlayer),r.remotePlayerEventType=s,r.castingMedia=r.currentCastSession.getMediaSession(),r.isCasting=!0,r.pendingSeekTime=0,r.triggerReady(),r.trigger(t.PLAY),r.trigger(t.PLAYING),r.ready(r.loadMediaToCastReady.bind(r,e)),r.initListeners()},function(e){window.console.log("Error code: ".concat(e))})}},{key:"loadMediaToCastReady",value:function(e){this.localPlayer.options().inactivityTimeout=0,this.localPlayer.userActive(!0),this.subdivisionsHidden=this.localPlayer.subdivisionsContainer.isHidden(),this.subdivisionsHidden||this.localPlayer.subdivisionsContainer.hide(),this.localPlayer.addClass("chromecast--connected"),r.default.isOnDemand(e.streamType)||(this.localPlayer.liveTracker.startTracking(),this.localPlayer.removeClass("vjs-liveui"),this.localPlayer.addClass("vjs-live"),this.localPlayer.controlBar.liveDisplay.show())}},{key:"muted",value:function(){return this.remotePlayer.isMuted}},{key:"pause",value:function(){this.remotePlayer&&(this.remotePlayer.isPaused||(this.remotePlayerController.playOrPause(),this.trigger(t.PAUSE)),r.default.isOnDemand(this.streamType)||(this.remotePlayerController.stop(),this.currentCastSession.endSession(!0)))}},{key:"paused",value:function(){return!!this.ended()||this.remotePlayer.isPaused}},{key:"playbackRate",value:function(){return this.castingMedia?this.castingMedia.playbackRate:1}},{key:"play",value:function(){this.remotePlayer&&(this.remotePlayer.isPaused&&(this.remotePlayerController.playOrPause(),this.trigger(t.PLAY),this.trigger(t.PLAYING)),this.ended()&&(this.trigger(t.WAITING),this.chromecastCurrentSource.currentTime=0,this.loadMediaToCast(this.chromecastCurrentSource)))}},{key:"poster",value:function(){return this.options().poster}},{key:"readyState",value:function(){return"IDLE"===this.remotePlayer.playerState||"BUFFERING"===this.remotePlayer.playerState?0:4}},{key:"resetSrc_",value:function(e){this.remotePlayer||e(),e()}},{key:"seekable",value:function(){var t=this.castingMedia.getEstimatedLiveSeekableRange,r=t.end,n=t.start;return e.default.createTimeRanges(0,r-n)}},{key:"seeking",value:function(){return this.isSeeking}},{key:"setAutoplay",value:function(){this.remotePlayer}},{key:"setCurrentTime",value:function(e){var r=this.duration();e>r||!this.remotePlayer.canSeek||(this.pendingSeekTime=e,this.remotePlayer.currentTime=Math.min(r-1,e),this.remotePlayerController.seek(),this.isSeeking=!0,this.trigger(t.TIME_UPDATE),this.trigger(t.SEEKING))}},{key:"setMuted",value:function(e){this.remotePlayer.isMuted!==e&&(this.remotePlayerController.muteOrUnmute(),this.trigger(t.VOLUME_CHANGE))}},{key:"setPlaybackRate",value:function(){this.remotePlayer}},{key:"setSrc",value:function(e){return e&&this.loadMediaToCast(e),this.chromecastCurrentSource}},{key:"setVolume",value:function(e){this.remotePlayer.volumeLevel=e,this.remotePlayerController.setVolumeLevel(),this.trigger(t.VOLUME_CHANGE)}},{key:"src",value:function(e){return e&&this.loadMediaToCast(e),this.chromecastCurrentSource}},{key:"supportsFullScreen",value:function(){return this.remotePlayer,!1}},{key:"volume",value:function(){return this.remotePlayer.volumeLevel}}],[{key:"castObject",get:function(){return window.cast||void 0}},{key:"chromeObject",get:function(){return window.chrome||void 0}},{key:"getCurrentSession",get:function(){return o.castObject.framework.CastContext.getInstance().getCurrentSession()}}]),o}();e.default.registerTech("Chromecast",C);var k=C;exports.default=k;
},{"video.js":"qoWl","../../utils/Events.js":"Like","../../utils/SRGStreamType.js":"SrUl"}],"Ou6I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("../../utils/Events.js")),e=r(require("../../utils/Utils.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var i=o?Object.getOwnPropertyDescriptor(t,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=t[u]}return r.default=t,e&&e.set(t,r),r}function u(t,e){return c(t)||f(t,e)||a(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,u=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(l){o=!0,u=l}finally{try{n||null==a.return||a.return()}finally{if(o)throw u}}return r}}function c(t){if(Array.isArray(t))return t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),t}var d={continuousPlayback:function(t,e){return e.setContinuousPlayback(t,!0)},speed:function(t,e){return e.playbackRate(t)},audioDescription:function(t,r){var n,o=Array.from(r.player.audioTracks());n=t?o.find(function(t){var r=t.kind;return e.default.isAudioDescription(r)}):o.find(function(t){return"main"===t.kind}),r.audioLanguage(n.id)},audio:function(t,e){return e.audioLanguage(t)},autoPlay:function(t,e){return e.autoplay(t)},subtitles:function(t,e){e.subtitlesLanguage(t)},subtitlesSize:function(t,e){e.subtitlesSize(t)},quality:function(e,r){r.setHdMode(e),r.player.trigger(t.QUALITY_CHANGE),r.one(t.CAN_PLAY,function(){r.player.focus()})}},b=function(){function e(r){s(this,e),r.player.on(t.MENU_VALUE_UPDATED,function(t){var n=t.data,o=u(Object.entries(n),1),i=u(o[0],2),a=i[0],l=i[1];e.updateProperty({property:a,value:l},r)})}return y(e,null,[{key:"updateProperty",value:function(t,e){var r=t.property,n=t.value,o=d[r];o&&o(n,e)}}]),e}(),v=b;exports.default=v;
},{"../../utils/Events.js":"Like","../../utils/Utils.js":"csCP"}],"U7mJ":[function(require,module,exports) {

},{"../../../node_modules/video.js/dist/video-js.css":"qzqc","./../fonts/SRGSSRTypeText_W_Md.woff":[["SRGSSRTypeText_W_Md.a9b18993.woff","o59D"],"o59D"],"./../fonts/SRGSSRTypeText_W_Rg.woff":[["SRGSSRTypeText_W_Rg.82ad0cdc.woff","FFvd"],"FFvd"],"./../assets/svg/play-rts.svg":[["play-rts.1797eb6a.svg","oApG"],"oApG"],"./../assets/svg/play-srf.svg":[["play-srf.5a7a9214.svg","pQ2X"],"pQ2X"],"./../assets/svg/play-rsi.svg":[["play-rsi.b0d3c017.svg","vRbl"],"vRbl"],"./../assets/svg/play-rtr.svg":[["play-rtr.22b9440b.svg","pbiu"],"pbiu"],"./../assets/svg/play-swi.svg":[["play-swi.8818d761.svg","BGX5"],"BGX5"]}],"ZTMd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=S(require("video.js")),t=S(require("./utils/SRGLetterboxConfiguration.js")),r=S(require("./utils/SRGUserStorage.js"));require("videojs-contrib-eme"),require("videojs-contrib-dash"),require("videojs-contrib-quality-levels"),require("./mediaPlayer/middlewares/srgssr-middleware.js"),require("./mediaPlayer/middlewares/videojs-mediacomposition-middleware.js"),require("./mediaPlayer/components/button.js"),require("./mediaPlayer/components/header-component.js"),require("./mediaPlayer/components/picture-in-picture-toggle.js"),require("./mediaPlayer/components/image-copyright.js"),require("./mediaPlayer/components/play-toggle-component.js"),require("./mediaPlayer/components/overlay-component.js"),require("./mediaPlayer/components/current-time-display-component.js"),require("./mediaPlayer/components/seek-to-live-component.js"),require("./mediaPlayer/components/menu/srg-menu-close-button.js"),require("./mediaPlayer/components/menu/srg-menu.js"),require("./mediaPlayer/components/menu/srg-menu-button.js"),require("./mediaPlayer/components/menu/settings/settings-menu.js"),require("./mediaPlayer/components/menu/settings/settings-button.js"),require("./mediaPlayer/components/menu/subtitles/subtitles-menu.js"),require("./mediaPlayer/components/menu/subtitles/subtitles-button.js"),require("./mediaPlayer/components/menu/playbackRate/playback-rate-menu.js"),require("./mediaPlayer/components/menu/playbackRate/playback-rate-button.js"),require("./mediaPlayer/components/chromecast-toggle-component.js"),require("./mediaPlayer/components/SRGSSR-button-component.js"),require("./mediaPlayer/components/endScreen/end-screen-component.js"),require("./mediaPlayer/components/error-display-component.js"),require("./mediaPlayer/components/time-tool-tip-component.js"),require("./mediaPlayer/components/subdivisions/subdivisions-container.js"),require("./mediaPlayer/components/warning-message-component.js"),require("./mediaPlayer/components/airplay-button.js"),require("./mediaPlayer/components/backward-button.js"),require("./mediaPlayer/components/forward-button.js"),require("./mediaPlayer/components/text-track-display.js");var n=require("../package.json"),i=S(require("../generated/build.json")),a=O(require("./lang/fr-CH.json")),o=O(require("./lang/rm-CH.json")),s=O(require("./lang/it-CH.json")),u=O(require("./lang/de-CH.json")),l=O(require("./lang/en-US.json")),c=S(require("./dataProvider/model/MediaComposition.js")),y=S(require("./analytics/SRGAnalytics.js")),p=S(require("./analytics/MediaStatistic.js")),d=S(require("./mediaPlayer/components/subdivisions/subdivision.js")),f=O(require("./utils/SRGEvents.js")),h=S(require("./utils/Utils.js")),m=O(require("./utils/PlayerEvents.js")),v=O(require("./utils/VideojsEvents.js")),g=O(require("./utils/Events.js")),b=S(require("./utils/SupportedDevices.js")),k=O(require("./utils/SRGLetterboxComponents.js"));require("./mediaPlayer/utils/chromecastPlayer.js");var P=S(require("./mediaPlayer/utils/SRGMenuStrategy.js"));function j(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return j=function(){return e},e}function O(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=j();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function S(e){return e&&e.__esModule?e:{default:e}}function q(e,t){return M(e)||T(e,t)||w(e,t)||C()}function C(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){i=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}}function M(e){if(Array.isArray(e))return e}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){A(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t,r){return t&&H(e.prototype,t),r&&H(e,r),e}require("./mediaPlayer/scss/imports.scss");var D=function(){function j(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};U(this,j);var i=j.LETTERBOX_DEFAULT_OPTIONS,c=L(L({},n),{},{continuousPlayback:void 0!==n.continuousPlayback?n.continuousPlayback:i.continuousPlayback});r.default.setUserSettings(c.defaultUserSettings),this.applyLetterboxOptions(c),this.applyLetterboxOptions(r.default.playbackSettings),this.applyLetterboxOptions(i),this.playerOptions=Object.assign({},t.default.defaultPlayerOptions(this),{chromeCastReceiver:this.chromeCastReceiver}),e.default.addLanguage("fr",a),e.default.addLanguage("en",l),e.default.addLanguage("it",s),e.default.addLanguage("rm",o),e.default.addLanguage("de",u)}return I(j,[{key:"applyDebug",value:function(){var t=this.debug?"debug":"error";this.player&&this.player.log.level(t),e.default.log.level(t),e.default.Html5DashJS.hook("beforeinitialize",function(e,t){t.getDebug().setLogToBrowserConsole(!1)})}},{key:"applyFillMode",value:function(){this.player&&(this.fillMode?this.player.fill(!0):this.player.fluid(!0))}},{key:"applyFocus",value:function(){this.player&&this.playerFocus instanceof Object&&{}.hasOwnProperty.call(this.playerFocus,"preventScroll")&&this.player.el().focus(this.playerFocus)}},{key:"applyHdMode",value:function(e){this.hdMode!==e&&(this.hdMode=e,this.prepareToPlayMediaComposition(this.getMediaComposition(),this.player.currentTime(),{forcePlay:!0}))}},{key:"applyContinuousPlayback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=r.default.playbackSettings.continuousPlayback,n=!1;this.continuousPlayback&&void 0!==t&&this.continuousPlayback!==t&&(n=!0,this.continuousPlayback=t),e||n||this.player.trigger({type:g.CONTINUOUS_PLAYBACK_INTEGRATION_CHANGE,data:this.continuousPlayback})}},{key:"applyIlHost",value:function(){this.ilHost&&this.playerOptions.SRGProviders.dataService.setIlHost(this.ilHost)}},{key:"applyLetterboxOptions",value:function(e){var t=this;Object.keys(j.LETTERBOX_DEFAULT_OPTIONS).forEach(function(r){var n=e[r];void 0===t[r]&&(t[r]=n)})}},{key:"applyComponentsVisibility",value:function(e){var t=this;this.components={},Object.keys(j.srgLetterboxComponents).forEach(function(r){var n=e[r];void 0!==n&&t.setComponentVisibility(r,n)})}},{key:"setComponentVisibility",value:function(e,t){var r=this.getVisualComponent(e);r&&(this.components[e]=t,r.options({isComponentVisible:t}),t?r.show():r.hide())}},{key:"getVisualComponent",value:function(e){var t=k.SRGLetterboxComponentsPath[e];if(t)return t.reduce(function(e,t){if(e&&e.getChild)return e.getChild(t)},this.player)}},{key:"aspectRatio",value:function(e){return this.player.aspectRatio(e)}},{key:"autoplay",value:function(e){return void 0===e&&void 0!==r.default.autoplay||(r.default.store(r.default.storageKey.autoplay,!!e),this.player.trigger(g.AUTOPLAY_CHANGE)),this.player.autoplay(e)}},{key:"subtitlesLanguage",value:function(e){var t=Array.from(this.player.textTracks()).filter(function(e){return"metadata"!==e.kind});if(void 0!==e)return t.forEach(function(t){var r=t;r.mode=r.language===e?"showing":"hidden"}),e;var r=t.find(function(e){return"showing"===e.mode});return r&&r.language}},{key:"subtitlesSize",value:function(e){var t=this.player.getChild("textTrackDisplay");return t&&e&&t.setFontSize(e),t&&t.fontSize}},{key:"audioLanguage",value:function(e){var t=Array.from(this.player.audioTracks());if(void 0!==e)return t.forEach(function(t){t.enabled=t.id===e}),e;var r=t.find(function(e){return e.enabled});return r&&r.id}},{key:"currentTime",value:function(e){return this.player.currentTime(e)}},{key:"dispose",value:function(){this.player.dispose()}},{key:"duration",value:function(){var e=this.player.duration();if(e)return e;var t=this.getMediaComposition();if(t){var r=t.getMainChapter();return h.default.millisecondsToSeconds(r.duration)}}},{key:"error",value:function(){return this.player.error()}},{key:"fill",value:function(e){return this.player.fill(e)}},{key:"fluid",value:function(e){return this.player.fluid(e)}},{key:"getMediaComposition",value:function(){return this.player.options().SRGProviders.mediaComposition}},{key:"getPlaybackSettings",value:function(){return this.player.currentSource().playbackSettings}},{key:"getUrn",value:function(){var e=this.getMediaComposition();return e&&(e.segmentUrn||e.chapterUrn)}},{key:"hasSubdivisions",value:function(){var e=this.getMediaComposition();return!!e&&e.getSubdivisions().length>0}},{key:"initializeOnElement",value:function(t){var n;if(!(n="string"==typeof t?document.querySelector("#".concat(t,", .").concat(t)):t))throw new Error("".concat(t," not found"));var i=j.defaultVideo();return e.default.browser.IS_IPHONE&&i.setAttribute("playsinline",""),this.video=i,n.classList.add("letterbox-web"),n.appendChild(i),this.language&&(this.playerOptions.language=this.language),this.player=new e.default(i,this.playerOptions),this.player.version=j.VERSION,this.applyIlHost(),this.applyDebug(),this.applyFocus(),this.applyFillMode(),this.applyContinuousPlayback(),this.SRGMenuStrategy=new P.default(this),this.components&&this.applyComponentsVisibility(this.components),this.srgStorage=new r.default(this.player),this.statistics=new y.default(this.player,j.VERSION,this.debug),this.mediaStatistic=new p.default(this.player,this.ilHost,this.debug),n}},{key:"isHdMode",value:function(){return this.hdMode}},{key:"isContinuousPlaybackEnabled",value:function(){return this.continuousPlayback}},{key:"areRecommendationsEnabled",value:function(){return this.recommendations}},{key:"muted",value:function(e){return this.player.muted(e)}},{key:"off",value:function(e,t,r){this.player.off(e,t,r)}},{key:"on",value:function(){var e;(e=this.player).on.apply(e,arguments)}},{key:"one",value:function(){var e;(e=this.player).one.apply(e,arguments)}},{key:"pause",value:function(){this.player.pause()}},{key:"paused",value:function(){return this.player.paused()}},{key:"play",value:function(){return this.player.play()}},{key:"playbackRate",value:function(e){return this.player.playbackRate(e)}},{key:"prepareToPlay",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!this.video)throw new Error("You must call initializeOnElement first");var s={type:g.PREPARE_TO_PLAY,data:{ready:!1}};this.trigger(s),this.player.loadMedia({src:{type:"srgssr/urn",src:e,mediaComposition:t,pendingSeek:r,playbackSettings:i,standalone:o}},function(){s.data.ready=!0,n.trigger(s),i.forcePlay?n.player.play():n.autoplay(a),b.default.isTouchDevice?n.player.addClass("srgssr-touch-enabled"):n.player.removeClass("srgssr-touch-enabled")})}},{key:"prepareToPlayMediaComposition",value:function(e,t,r,n){this.prepareToPlay(e.segmentUrn||e.chapterUrn,c.default.cleanCache(e),t,r,n)}},{key:"prepareToPlayURN",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.prepareToPlay(e,void 0,t,r,n,i)}},{key:"restart",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.prepareToPlayURN(this.getUrn(),void 0,void 0,e)}},{key:"setDebug",value:function(e){return this.debug=e,this.applyDebug(e),this}},{key:"setFillMode",value:function(e){return this.fillMode=e,this.applyFillMode(),this}},{key:"setHdMode",value:function(e){this.applyHdMode(e),r.default.store(r.default.storageKey.hdMode,e)}},{key:"setIlHost",value:function(e){return this.ilHost=e,this.applyIlHost(),this}},{key:"setLanguage",value:function(e){if(this.player)throw new Error("Cannot be called after player initialization");return this.language=e,this}},{key:"setPlayerFocus",value:function(e){return this.playerFocus=e,this.applyFocus(),this}},{key:"setContinuousPlayback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.continuousPlayback=e,t&&r.default.store(r.default.storageKey.continuousPlayback,e),this.player.trigger(g.CONTINUOUS_PLAYBACK_CHANGE),this.applyContinuousPlayback(t),this}},{key:"setRecommendations",value:function(e){return this.recommendations=e,this}},{key:"switchToUrn",value:function(e){var t=q(this.getMediaComposition().getMainSegments().filter(function(t){return t.urn===e}),1)[0];t?(d.default.seekToSegment(this.player,t),this.player.play()):this.prepareToPlayURN(e,void 0,void 0,!0)}},{key:"trigger",value:function(e,t){this.player.trigger(e,t)}},{key:"volume",value:function(e){return this.player.volume(e)}}],[{key:"BUILD",get:function(){return i.default}},{key:"defaultVideo",value:function(){var e=document.createElement("video");return e.classList.add("video-js"),e.classList.add("vjs-srgssr-skin"),e.classList.add("vjs-fluid"),e.classList.add("vjs-show-big-play-button-on-pause"),e.setAttribute("crossorigin","anonymous"),e}},{key:"events",get:function(){return g}},{key:"LETTERBOX_DEFAULT_OPTIONS",get:function(){return{debug:!1,ilHost:"il.srgssr.ch",fillMode:!0,playerFocus:void 0,language:void 0,hdMode:void 0,continuousPlayback:!0,recommendations:!0,components:{},chromeCastReceiver:"1AC2931D"}}},{key:"LONG_VERSION",get:function(){var e=new Date(parseInt(i.default.date,10));return"".concat(n.version," built at ").concat(e," from ").concat(i.default.commit," using ").concat(i.default.runner," by ").concat(i.default.initiator)}},{key:"MediaComposition",get:function(){return c.default}},{key:"playerEvents",get:function(){return m}},{key:"srgEvents",get:function(){return f}},{key:"supportedDevices",get:function(){return b.default}},{key:"VERSION",get:function(){return n.version}},{key:"videojsEvents",get:function(){return v}},{key:"srgLetterboxComponents",get:function(){return k.default}}]),j}(),_=D;exports.default=_,window.videojs=e.default,window.SRGLetterbox=D;
},{"video.js":"qoWl","./utils/SRGLetterboxConfiguration.js":"bjuv","./utils/SRGUserStorage.js":"IxAk","videojs-contrib-eme":"rfp5","videojs-contrib-dash":"tfxd","videojs-contrib-quality-levels":"agX6","./mediaPlayer/middlewares/srgssr-middleware.js":"kUht","./mediaPlayer/middlewares/videojs-mediacomposition-middleware.js":"F3SD","./mediaPlayer/components/button.js":"Ui4L","./mediaPlayer/components/header-component.js":"jMsP","./mediaPlayer/components/picture-in-picture-toggle.js":"Flzo","./mediaPlayer/components/image-copyright.js":"UODL","./mediaPlayer/components/play-toggle-component.js":"Fs0w","./mediaPlayer/components/overlay-component.js":"snyy","./mediaPlayer/components/current-time-display-component.js":"fHKc","./mediaPlayer/components/seek-to-live-component.js":"Xp9k","./mediaPlayer/components/menu/srg-menu-close-button.js":"Zpd8","./mediaPlayer/components/menu/srg-menu.js":"wYq8","./mediaPlayer/components/menu/srg-menu-button.js":"BQU5","./mediaPlayer/components/menu/settings/settings-menu.js":"Vm0t","./mediaPlayer/components/menu/settings/settings-button.js":"x5aq","./mediaPlayer/components/menu/subtitles/subtitles-menu.js":"nmLk","./mediaPlayer/components/menu/subtitles/subtitles-button.js":"NgAz","./mediaPlayer/components/menu/playbackRate/playback-rate-menu.js":"MtBy","./mediaPlayer/components/menu/playbackRate/playback-rate-button.js":"ZZX8","./mediaPlayer/components/chromecast-toggle-component.js":"bCz8","./mediaPlayer/components/SRGSSR-button-component.js":"wEyg","./mediaPlayer/components/endScreen/end-screen-component.js":"dJny","./mediaPlayer/components/error-display-component.js":"Unpf","./mediaPlayer/components/time-tool-tip-component.js":"jbQ6","./mediaPlayer/components/subdivisions/subdivisions-container.js":"Wm7W","./mediaPlayer/components/warning-message-component.js":"aFEK","./mediaPlayer/components/airplay-button.js":"TjK2","./mediaPlayer/components/backward-button.js":"GLlr","./mediaPlayer/components/forward-button.js":"FyBC","./mediaPlayer/components/text-track-display.js":"KRI6","../package.json":"CcDT","../generated/build.json":"Fpmq","./lang/fr-CH.json":"ZWWQ","./lang/rm-CH.json":"dvFx","./lang/it-CH.json":"IXTE","./lang/de-CH.json":"QDkN","./lang/en-US.json":"I0qx","./dataProvider/model/MediaComposition.js":"ZOM8","./analytics/SRGAnalytics.js":"IoHU","./analytics/MediaStatistic.js":"iBWo","./mediaPlayer/components/subdivisions/subdivision.js":"i674","./utils/SRGEvents.js":"a5op","./utils/Utils.js":"csCP","./utils/PlayerEvents.js":"lUBw","./utils/VideojsEvents.js":"M9YT","./utils/Events.js":"Like","./utils/SupportedDevices.js":"ZJSt","./utils/SRGLetterboxComponents.js":"Tp4X","./mediaPlayer/utils/chromecastPlayer.js":"TrBK","./mediaPlayer/utils/SRGMenuStrategy.js":"Ou6I","./mediaPlayer/scss/imports.scss":"U7mJ"}]},{},["ZTMd"], null)
//# sourceMappingURL=SRGLetterbox.4d3056d8.js.map