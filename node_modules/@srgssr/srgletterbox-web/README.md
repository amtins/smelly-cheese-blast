![SRG Letterbox](https://raw.githubusercontent.com/SRGSSR/srgletterbox-ios/master/docs/README-images/logo.png)

# Table of Contents

* [About](#about)
* [Quick Start](#quick-start)
* [API](#api-Documentation)
* [Features](#features)

# About

The SRG Letterbox library defines the official SRG SSR media player experience, packed into a single library, providing:

* A controller to play audios and videos, which supports on-demand, live, DVR and DRM streams.
* A service to manage application-wide playback.
* A responsive player view with the official SRG SSR look and feel.
* Support for chapter and segment browsing and selection.
* Access to all SRG SSR business unit medias.
* AirPlay, picture in picture and Chromecast support.
* All SRG SSR analytics for media playback.
* Diagnostic information (SRG Snitch)

# Quick Start

## Installation through NPM

Letterbox uses the GitHub NPM registry, that means in order to be able to install the Letterbox package you must have a `Personal access tokens`. 

__Generate your Personal access tokens :__

1. Go to [Settings / Developer settings](https://github.com/settings/tokens)
2. Click `Generate new token`
3. Fill the `Note` field with `LBW integration` or whatever name fits you
4. Give the rights `read:packages` then click `Generate token`
5. Copy the `Personal access tokens`
6. Edit/Create the `.npmrc` file from your `Home` folder and add the following :

```
//npm.pkg.github.com/:_authToken=Replace with your generate token
registry=https://npm.pkg.github.com/SRGSSR
```

At this stage, you should be able to install the [Letterbox NPM package](https://github.com/SRGSSR/srgletterbox-web/packages/126124).

__NB:__ Please consider using `NPM` instead of `Yarn` as the integration with the GitHub NPM registry is seamless and don't require any additional configuration.


## Installation through the CDN

1. Copy and paste into your project the following URLs
    - CSS :
        ```
        https://letterbox-web.srgssr.ch/production/letterbox.css
        ```
    - JavaScript :
        ```
        https://letterbox-web.srgssr.ch/production/letterbox.js
        ```

__NB:__ Proper URLs with srgssr domain name will come soon.


## Example :

1. Create an index.html file
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .lbw-container {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div class="lbw-container"></div>
    <script src="app.js"></script>
</body>
</html>
```

2. Create an app.js file
```JavaScript
import SRGLetterbox from '@srgssr/srgletterbox-web';
import '@srgssr/srgletterbox-web/dist/letterbox.css';

const letterbox = new SRGLetterbox();
letterbox.initializeOnElement('lbw-container');

letterbox.prepareToPlayURN('urn:rsi:video:1511530');
```

The `SRGLetterbox` also accepts an `options` through the constructor:

```js
// See all available components https://github.com/SRGSSR/srgletterbox-web/blob/master/src/utils/SRGLetterboxComponents.js
const { srgLetterboxComponents: { PLAY_BUTTON, HEADER_COMPONENT } } = SRGLetterbox;

const options = {
    debug: true,
    ilHost: 'il.srgssr.ch',
    fillMode: true,
    playerFocus: true,
    hdMode: true,
    language: 'en',
    components : {
        [PLAY_BUTTON]: false,
        [HEADER_COMPONENT]: false
    },
    chromeCastReceiver: 'abcdef1234',
    continuousPlayback : true,
    defaultUserSettings : {
        continuousPlayback: false,
    }
};

const letterbox = new SRGLetterbox(options);
```

# API Documentation

[SRGLetterbox API (upcoming version)](https://letterbox-web.srgssr.ch/production/docs/SRGLetterbox.html)

# Features

The SRG Letterbox library provides an advanced player with several features:

## Media playback

* Playback of audio and video content on multiple devices and browser.
* Support for on-demand, live and DVR streams.
* [Playback of DRM and content protected token streams.](docs/drm_and_tokenized_streams.md)
* Support for blocked media time ranges.
* Countdown, automatic playback start and interruption for content whose availability is limited in time.
* [Subtitles and audio tracks.](docs/subtitles_and_audio_tracks.md)
* AirPlay.
* Picture in picture on compatible devices.
* Chromecast.
* [Aspect ratio](docs/aspect_ratio.md).

## Analytics

* All SRG SSR mandatory analytics for media playback.
  * comScore
  * Webtrekk / TagCommander
* Diagnostic information (SRG Snitch)

## User interface

* A responsive user interface.
* Full screen mode.

## Metadata

* Automatic metadata and error management.
* Periodic updates.
* Retrieval of current broadcast information for livestreams.
* Thumbnail retrieval and display.
* Error display with icon.
* Auto-resume after network loss.

## Miscellaneous

* Translations in English, French, German, Italian and Romansh.
