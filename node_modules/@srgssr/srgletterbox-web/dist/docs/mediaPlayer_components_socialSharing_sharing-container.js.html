<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: mediaPlayer/components/socialSharing/sharing-container.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: mediaPlayer/components/socialSharing/sharing-container.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import videojs from 'video.js';
import SharingButtons from './sharing-buttons.js';
import SharingButton from './sharing-button.js';
import SharingOptions from './sharing-options.js';
import SRGSocialSharing from '../../../utils/SRGSocialSharing.js';
import Utils from '../../../utils/Utils.js';

const Component = videojs.getComponent('Component');

/**
 * LetterBoxWeb social sharing component
 * @ignore
 */
class SharingContainer extends Component {
  constructor(player, options) {
    super(player, options);

    this.hasBeenPausedBefore = false;
    this.socialSharingStrategy = new SRGSocialSharing(
      player,
    );
    this.hide();

    this.createChildren();
  }

  reset(socialSharing, shouldHideOptions) {
    this.socialSharing = socialSharing;

    if (shouldHideOptions) {
      this.getChild('sharingOptions').hide();
    } else {
      this.getChild('sharingOptions').show();
    }

    this.getChild('sharingOptions')
      .children()
      .forEach((option) => {
        if (option.name() === SRGSocialSharing.SHARING_MODES.FULL_LENGTH) {
          option.handleClick();
        }

        option.update();
      });
  }

  show() {
    this.removeClass('sharing-container--hidden');
    this.options().parent.addClass('sharing-module--opened');
    Utils.hideFromAccessibility(false, this.el());
    this.setFocusToFirstElement();
    // We don't want to resume the media if the user paused it by himself
    this.hasBeenPausedBefore = this.player().paused();

    if (!this.player().paused()) {
      this.player().pause();
    }
  }

  hide() {
    this.addClass('sharing-container--hidden');
    Utils.hideFromAccessibility(true, this.el());
    this.options().parent.removeClass('sharing-module--opened');

    if (this.player().hasStarted() &amp;&amp; this.player().paused() &amp;&amp; !this.hasBeenPausedBefore) {
      this.player().play();
    }
  }

  /**
   * Sets the focus to thr first item
   */
  setFocusToFirstElement() {
    const nextFocusableItem = Utils.getKeyboardFocusableElements(this.el());
    if (nextFocusableItem &amp;&amp; nextFocusableItem.length > 0) {
      nextFocusableItem[0].focus();
    }
  }

  createEl() {
    const el = super.createEl('div', {
      className: 'sharing-container sharing-container--hidden',
    });

    return el;
  }

  createChildren() {
    this.addChild(
      new SharingButton(
        this.player(),
        {
          name: 'close',
          controlText: this.localize('Close'),
          className: 'sharing-container__close',
          icon: 'close',
          onClick: () => {
            this.hide();
            this.options().parent.getChild('sharingButton').focus();
          },
        },
      ),
    );

    this.addChild(new Component(
      this.player(),
      {
        name: 'containerTitle',
        el: videojs.dom.createEl('h1', {
          className: 'sharing-container__title',
          innerHTML: this.localize('Share'),
        }),
      },
    ));

    this.addChild(new SharingOptions(
      this.player(),
      {
        name: 'sharingOptions',
        socialSharingStrategy: this.socialSharingStrategy,
      },
    ));

    this.addChild(new SharingButtons(
      this.player(),
      {
        socialSharing: () => this.socialSharing,
        socialSharingStrategy: this.socialSharingStrategy,
      },
    ));
  }
}

Component.registerComponent('SharingContainer', SharingContainer);
export default SharingContainer;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="SRGLetterbox.html">SRGLetterbox</a></li><li><a href="SRGLetterbox.MediaComposition.html">MediaComposition</a></li><li><a href="SRGUserStorage.html">SRGUserStorage</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:ADD_TRACK">ADD_TRACK</a></li><li><a href="global.html#event:ANIMATION_END">ANIMATION_END</a></li><li><a href="global.html#event:BEFOREUNLOAD">BEFOREUNLOAD</a></li><li><a href="global.html#event:CHANGE">CHANGE</a></li><li><a href="global.html#event:CLICK">CLICK</a></li><li><a href="global.html#event:KEY_DOWN">KEY_DOWN</a></li><li><a href="global.html#event:MOUSE_ENTER">MOUSE_ENTER</a></li><li><a href="global.html#event:srgssr/recommendationDisplayed">srgssr/recommendationDisplayed</a></li><li><a href="global.html#event:srgssr/recommendationHit">srgssr/recommendationHit</a></li><li><a href="global.html#event:WEBKIT_CURRENT_PLAYBACK_TARGET_IS_WIRELESS_CHANGED">WEBKIT_CURRENT_PLAYBACK_TARGET_IS_WIRELESS_CHANGED</a></li><li><a href="global.html#event:WEBKIT_PLAYBACK_TARGET_AVAILABILITY_CHANGED">WEBKIT_PLAYBACK_TARGET_AVAILABILITY_CHANGED</a></li><li><a href="SRGLetterbox.html#event:events">events</a></li><li><a href="SRGLetterbox.html#event:playerEvents">playerEvents</a></li><li><a href="SRGLetterbox.html#event:srgEvents">srgEvents</a></li><li><a href="SRGLetterbox.html#event:videojsEvents">videojsEvents</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ABORT">ABORT</a></li><li><a href="global.html#ALMOST_STARTING">ALMOST_STARTING</a></li><li><a href="global.html#containQualities">containQualities</a></li><li><a href="global.html#DISPOSE">DISPOSE</a></li><li><a href="global.html#filterMainResourcesByQuality">filterMainResourcesByQuality</a></li><li><a href="global.html#findChapterByUrn">findChapterByUrn</a></li><li><a href="global.html#findDrmListByResource">findDrmListByResource</a></li><li><a href="global.html#findMainSegment">findMainSegment</a></li><li><a href="global.html#findResourceListByUrn">findResourceListByUrn</a></li><li><a href="global.html#getChapters">getChapters</a></li><li><a href="global.html#getFilteredExternalSubtitles">getFilteredExternalSubtitles</a></li><li><a href="global.html#getMainBlockReason">getMainBlockReason</a></li><li><a href="global.html#getMainChapter">getMainChapter</a></li><li><a href="global.html#getMainChapterImageUrl">getMainChapterImageUrl</a></li><li><a href="global.html#getMainResources">getMainResources</a></li><li><a href="global.html#getMainSegments">getMainSegments</a></li><li><a href="global.html#getMainValidFromDate">getMainValidFromDate</a></li><li><a href="global.html#getMergedAnalyticsData">getMergedAnalyticsData</a></li><li><a href="global.html#getMergedAnalyticsMetadata">getMergedAnalyticsMetadata</a></li><li><a href="global.html#getResourceList">getResourceList</a></li><li><a href="global.html#getSubdivisions">getSubdivisions</a></li><li><a href="global.html#isSourceHD">isSourceHD</a></li><li><a href="global.html#MAX_ITEMS">MAX_ITEMS</a></li><li><a href="global.html#MAX_ROWS">MAX_ROWS</a></li><li><a href="global.html#MIN_HEIGHT">MIN_HEIGHT</a></li><li><a href="global.html#MIN_WIDTH">MIN_WIDTH</a></li><li><a href="global.html#orderMainResourcesByQuality">orderMainResourcesByQuality</a></li><li><a href="global.html#orderMainResourcesByStreamType">orderMainResourcesByStreamType</a></li><li><a href="global.html#PERCENTAGE_MEDIA_CONSUMED">PERCENTAGE_MEDIA_CONSUMED</a></li><li><a href="global.html#PERIOD">PERIOD</a></li><li><a href="global.html#prefix">prefix</a></li><li><a href="global.html#SOON_VALID_PERIOD">SOON_VALID_PERIOD</a></li><li><a href="global.html#TOLERANCE">TOLERANCE</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Fri Feb 12 2021 09:53:42 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
